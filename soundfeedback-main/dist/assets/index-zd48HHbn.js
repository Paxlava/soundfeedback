var Wb=t=>{throw TypeError(t)};var vv=(t,e,n)=>e.has(t)||Wb("Cannot "+n);var J=(t,e,n)=>(vv(t,e,"read from private field"),n?n.call(t):e.get(t)),ht=(t,e,n)=>e.has(t)?Wb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(vv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Pn=(t,e,n)=>(vv(t,e,"access private method"),n);var of=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return J(t,e,r)}});function UL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yN={exports:{}},$p={},wN={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.element"),$L=Symbol.for("react.portal"),BL=Symbol.for("react.fragment"),zL=Symbol.for("react.strict_mode"),WL=Symbol.for("react.profiler"),HL=Symbol.for("react.provider"),qL=Symbol.for("react.context"),GL=Symbol.for("react.forward_ref"),KL=Symbol.for("react.suspense"),QL=Symbol.for("react.memo"),YL=Symbol.for("react.lazy"),Hb=Symbol.iterator;function XL(t){return t===null||typeof t!="object"?null:(t=Hb&&t[Hb]||t["@@iterator"],typeof t=="function"?t:null)}var xN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_N=Object.assign,EN={};function su(t,e,n){this.props=t,this.context=e,this.refs=EN,this.updater=n||xN}su.prototype.isReactComponent={};su.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};su.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bN(){}bN.prototype=su.prototype;function zx(t,e,n){this.props=t,this.context=e,this.refs=EN,this.updater=n||xN}var Wx=zx.prototype=new bN;Wx.constructor=zx;_N(Wx,su.prototype);Wx.isPureReactComponent=!0;var qb=Array.isArray,TN=Object.prototype.hasOwnProperty,Hx={current:null},kN={key:!0,ref:!0,__self:!0,__source:!0};function SN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)TN.call(e,r)&&!kN.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:vh,type:t,key:i,ref:o,props:s,_owner:Hx.current}}function ZL(t,e){return{$$typeof:vh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qx(t){return typeof t=="object"&&t!==null&&t.$$typeof===vh}function JL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gb=/\/+/g;function yv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JL(""+t.key):e.toString(36)}function Bf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vh:case $L:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yv(o,0):r,qb(s)?(n="",t!=null&&(n=t.replace(Gb,"$&/")+"/"),Bf(s,e,n,"",function(u){return u})):s!=null&&(qx(s)&&(s=ZL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",qb(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+yv(i,a);o+=Bf(i,e,n,c,s)}else if(c=XL(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+yv(i,a++),o+=Bf(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function af(t,e,n){if(t==null)return t;var r=[],s=0;return Bf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function e4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sr={current:null},zf={transition:null},t4={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:zf,ReactCurrentOwner:Hx};function NN(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:af,forEach:function(t,e,n){af(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return af(t,function(){e++}),e},toArray:function(t){return af(t,function(e){return e})||[]},only:function(t){if(!qx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=su;tt.Fragment=BL;tt.Profiler=WL;tt.PureComponent=zx;tt.StrictMode=zL;tt.Suspense=KL;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t4;tt.act=NN;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_N({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)TN.call(e,c)&&!kN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:vh,type:t.type,key:s,ref:i,props:r,_owner:o}};tt.createContext=function(t){return t={$$typeof:qL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HL,_context:t},t.Consumer=t};tt.createElement=SN;tt.createFactory=function(t){var e=SN.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:GL,render:t}};tt.isValidElement=qx;tt.lazy=function(t){return{$$typeof:YL,_payload:{_status:-1,_result:t},_init:e4}};tt.memo=function(t,e){return{$$typeof:QL,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=zf.transition;zf.transition={};try{t()}finally{zf.transition=e}};tt.unstable_act=NN;tt.useCallback=function(t,e){return sr.current.useCallback(t,e)};tt.useContext=function(t){return sr.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return sr.current.useDeferredValue(t)};tt.useEffect=function(t,e){return sr.current.useEffect(t,e)};tt.useId=function(){return sr.current.useId()};tt.useImperativeHandle=function(t,e,n){return sr.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return sr.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return sr.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return sr.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return sr.current.useReducer(t,e,n)};tt.useRef=function(t){return sr.current.useRef(t)};tt.useState=function(t){return sr.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return sr.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return sr.current.useTransition()};tt.version="18.3.1";wN.exports=tt;var m=wN.exports;const ee=vN(m),CN=UL({__proto__:null,default:ee},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n4=m,r4=Symbol.for("react.element"),s4=Symbol.for("react.fragment"),i4=Object.prototype.hasOwnProperty,o4=n4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a4={key:!0,ref:!0,__self:!0,__source:!0};function IN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)i4.call(e,r)&&!a4.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:r4,type:t,key:i,ref:o,props:s,_owner:o4.current}}$p.Fragment=s4;$p.jsx=IN;$p.jsxs=IN;yN.exports=$p;var l=yN.exports,RN={exports:{}},Fr={},AN={exports:{}},PN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,O){var W=D.length;D.push(O);e:for(;0<W;){var Z=W-1>>>1,H=D[Z];if(0<s(H,O))D[Z]=O,D[W]=H,W=Z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var O=D[0],W=D.pop();if(W!==O){D[0]=W;e:for(var Z=0,H=D.length,Q=H>>>1;Z<Q;){var $=2*(Z+1)-1,ie=D[$],ge=$+1,G=D[ge];if(0>s(ie,W))ge<H&&0>s(G,ie)?(D[Z]=G,D[ge]=W,Z=ge):(D[Z]=ie,D[$]=W,Z=$);else if(ge<H&&0>s(G,W))D[Z]=G,D[ge]=W,Z=ge;else break e}}return O}function s(D,O){var W=D.sortIndex-O.sortIndex;return W!==0?W:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,f=null,p=3,g=!1,x=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=D)r(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(u)}}function C(D){if(v=!1,b(D),!x)if(n(c)!==null)x=!0,F(P);else{var O=n(u);O!==null&&te(C,O.startTime-D)}}function P(D,O){x=!1,v&&(v=!1,_(E),E=-1),g=!0;var W=p;try{for(b(O),f=n(c);f!==null&&(!(f.expirationTime>O)||D&&!M());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var H=Z(f.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(c)&&r(c),b(O)}else r(c);f=n(c)}if(f!==null)var Q=!0;else{var $=n(u);$!==null&&te(C,$.startTime-O),Q=!1}return Q}finally{f=null,p=W,g=!1}}var L=!1,N=null,E=-1,S=5,R=-1;function M(){return!(t.unstable_now()-R<S)}function A(){if(N!==null){var D=t.unstable_now();R=D;var O=!0;try{O=N(!0,D)}finally{O?I():(L=!1,N=null)}}else L=!1}var I;if(typeof y=="function")I=function(){y(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Y=U.port2;U.port1.onmessage=A,I=function(){Y.postMessage(null)}}else I=function(){T(A,0)};function F(D){N=D,L||(L=!0,I())}function te(D,O){E=T(function(){D(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,F(P))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var W=p;p=O;try{return D()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=p;p=D;try{return O()}finally{p=W}},t.unstable_scheduleCallback=function(D,O,W){var Z=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=W+H,D={id:h++,callback:O,priorityLevel:D,startTime:W,expirationTime:H,sortIndex:-1},W>Z?(D.sortIndex=W,e(u,D),n(c)===null&&D===n(u)&&(v?(_(E),E=-1):v=!0,te(C,W-Z))):(D.sortIndex=H,e(c,D),x||g||(x=!0,F(P))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var O=p;return function(){var W=p;p=O;try{return D.apply(this,arguments)}finally{p=W}}}})(PN);AN.exports=PN;var l4=AN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4=m,Vr=l4;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jN=new Set,Rd={};function vl(t,e){jc(t,e),jc(t+"Capture",e)}function jc(t,e){for(Rd[t]=e,t=0;t<e.length;t++)jN.add(e[t])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jy=Object.prototype.hasOwnProperty,u4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kb={},Qb={};function d4(t){return jy.call(Qb,t)?!0:jy.call(Kb,t)?!1:u4.test(t)?Qb[t]=!0:(Kb[t]=!0,!1)}function h4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f4(t,e,n,r){if(e===null||typeof e>"u"||h4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ir(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Sn[t]=new ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Sn[e]=new ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Sn[t]=new ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Sn[t]=new ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Sn[t]=new ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Sn[t]=new ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Sn[t]=new ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Sn[t]=new ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Sn[t]=new ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gx=/[\-:]([a-z])/g;function Kx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gx,Kx);Sn[e]=new ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gx,Kx);Sn[e]=new ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gx,Kx);Sn[e]=new ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Sn[t]=new ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Sn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Sn[t]=new ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qx(t,e,n,r){var s=Sn.hasOwnProperty(e)?Sn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f4(e,n,s,r)&&(n=null),r||s===null?d4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ki=c4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),ql=Symbol.for("react.portal"),Gl=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),Dy=Symbol.for("react.profiler"),DN=Symbol.for("react.provider"),MN=Symbol.for("react.context"),Xx=Symbol.for("react.forward_ref"),My=Symbol.for("react.suspense"),Oy=Symbol.for("react.suspense_list"),Zx=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),ON=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function ju(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,wv;function Gu(t){if(wv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wv=e&&e[1]||""}return`
`+wv+t}var xv=!1;function _v(t,e){if(!t||xv)return"";xv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{xv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gu(t):""}function m4(t){switch(t.tag){case 5:return Gu(t.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return t=_v(t.type,!1),t;case 11:return t=_v(t.type.render,!1),t;case 1:return t=_v(t.type,!0),t;default:return""}}function Ly(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gl:return"Fragment";case ql:return"Portal";case Dy:return"Profiler";case Yx:return"StrictMode";case My:return"Suspense";case Oy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MN:return(t.displayName||"Context")+".Consumer";case DN:return(t._context.displayName||"Context")+".Provider";case Xx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zx:return e=t.displayName||null,e!==null?e:Ly(t.type)||"Memo";case uo:e=t._payload,t=t._init;try{return Ly(t(e))}catch{}}return null}function p4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ly(e);case 8:return e===Yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ho(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g4(t){var e=LN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=g4(t))}function VN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=LN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vy(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ho(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FN(t,e){e=e.checked,e!=null&&Qx(t,"checked",e,!1)}function Fy(t,e){FN(t,e);var n=Ho(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uy(t,e.type,Ho(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uy(t,e,n){(e!=="number"||wm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ku=Array.isArray;function ic(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ho(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $y(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Ku(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ho(n)}}function UN(t,e){var n=Ho(e.value),r=Ho(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function e1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $N(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function By(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$N(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,BN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ad(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v4=["Webkit","ms","Moz","O"];Object.keys(cd).forEach(function(t){v4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cd[e]=cd[t]})});function zN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cd.hasOwnProperty(t)&&cd[t]?(""+e).trim():e+"px"}function WN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var y4=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zy(t,e){if(e){if(y4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Wy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=null;function Jx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qy=null,oc=null,ac=null;function t1(t){if(t=xh(t)){if(typeof qy!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=qp(e),qy(t.stateNode,t.type,e))}}function HN(t){oc?ac?ac.push(t):ac=[t]:oc=t}function qN(){if(oc){var t=oc,e=ac;if(ac=oc=null,t1(t),e)for(t=0;t<e.length;t++)t1(e[t])}}function GN(t,e){return t(e)}function KN(){}var Ev=!1;function QN(t,e,n){if(Ev)return t(e,n);Ev=!0;try{return GN(t,e,n)}finally{Ev=!1,(oc!==null||ac!==null)&&(KN(),qN())}}function Pd(t,e){var n=t.stateNode;if(n===null)return null;var r=qp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Gy=!1;if(Di)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{Gy=!1}function w4(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ud=!1,xm=null,_m=!1,Ky=null,x4={onError:function(t){ud=!0,xm=t}};function _4(t,e,n,r,s,i,o,a,c){ud=!1,xm=null,w4.apply(x4,arguments)}function E4(t,e,n,r,s,i,o,a,c){if(_4.apply(this,arguments),ud){if(ud){var u=xm;ud=!1,xm=null}else throw Error(ae(198));_m||(_m=!0,Ky=u)}}function yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n1(t){if(yl(t)!==t)throw Error(ae(188))}function b4(t){var e=t.alternate;if(!e){if(e=yl(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return n1(s),t;if(i===r)return n1(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function XN(t){return t=b4(t),t!==null?ZN(t):null}function ZN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ZN(t);if(e!==null)return e;t=t.sibling}return null}var JN=Vr.unstable_scheduleCallback,r1=Vr.unstable_cancelCallback,T4=Vr.unstable_shouldYield,k4=Vr.unstable_requestPaint,Qt=Vr.unstable_now,S4=Vr.unstable_getCurrentPriorityLevel,e_=Vr.unstable_ImmediatePriority,eC=Vr.unstable_UserBlockingPriority,Em=Vr.unstable_NormalPriority,N4=Vr.unstable_LowPriority,tC=Vr.unstable_IdlePriority,Bp=null,Ws=null;function C4(t){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Bp,t,void 0,(t.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:A4,I4=Math.log,R4=Math.LN2;function A4(t){return t>>>=0,t===0?32:31-(I4(t)/R4|0)|0}var df=64,hf=4194304;function Qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Qu(a):(i&=o,i!==0&&(r=Qu(i)))}else o=n&~s,o!==0?r=Qu(o):i!==0&&(r=Qu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ws(e),s=1<<n,r|=t[n],e&=~s;return r}function P4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ws(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=P4(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Qy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nC(){var t=df;return df<<=1,!(df&4194240)&&(df=64),t}function bv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ws(e),t[e]=n}function D4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ws(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function t_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ws(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var wt=0;function rC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sC,n_,iC,oC,aC,Yy=!1,ff=[],Ro=null,Ao=null,Po=null,jd=new Map,Dd=new Map,mo=[],M4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s1(t,e){switch(t){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":jd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(e.pointerId)}}function Mu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xh(e),e!==null&&n_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function O4(t,e,n,r,s){switch(e){case"focusin":return Ro=Mu(Ro,t,e,n,r,s),!0;case"dragenter":return Ao=Mu(Ao,t,e,n,r,s),!0;case"mouseover":return Po=Mu(Po,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return jd.set(i,Mu(jd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dd.set(i,Mu(Dd.get(i)||null,t,e,n,r,s)),!0}return!1}function lC(t){var e=Ra(t.target);if(e!==null){var n=yl(e);if(n!==null){if(e=n.tag,e===13){if(e=YN(n),e!==null){t.blockedOn=e,aC(t.priority,function(){iC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hy=r,n.target.dispatchEvent(r),Hy=null}else return e=xh(n),e!==null&&n_(e),t.blockedOn=n,!1;e.shift()}return!0}function i1(t,e,n){Wf(t)&&n.delete(e)}function L4(){Yy=!1,Ro!==null&&Wf(Ro)&&(Ro=null),Ao!==null&&Wf(Ao)&&(Ao=null),Po!==null&&Wf(Po)&&(Po=null),jd.forEach(i1),Dd.forEach(i1)}function Ou(t,e){t.blockedOn===e&&(t.blockedOn=null,Yy||(Yy=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,L4)))}function Md(t){function e(s){return Ou(s,t)}if(0<ff.length){Ou(ff[0],t);for(var n=1;n<ff.length;n++){var r=ff[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ro!==null&&Ou(Ro,t),Ao!==null&&Ou(Ao,t),Po!==null&&Ou(Po,t),jd.forEach(e),Dd.forEach(e),n=0;n<mo.length;n++)r=mo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mo.length&&(n=mo[0],n.blockedOn===null);)lC(n),n.blockedOn===null&&mo.shift()}var lc=Ki.ReactCurrentBatchConfig,Tm=!0;function V4(t,e,n,r){var s=wt,i=lc.transition;lc.transition=null;try{wt=1,r_(t,e,n,r)}finally{wt=s,lc.transition=i}}function F4(t,e,n,r){var s=wt,i=lc.transition;lc.transition=null;try{wt=4,r_(t,e,n,r)}finally{wt=s,lc.transition=i}}function r_(t,e,n,r){if(Tm){var s=Xy(t,e,n,r);if(s===null)jv(t,e,r,km,n),s1(t,r);else if(O4(s,t,e,n,r))r.stopPropagation();else if(s1(t,r),e&4&&-1<M4.indexOf(t)){for(;s!==null;){var i=xh(s);if(i!==null&&sC(i),i=Xy(t,e,n,r),i===null&&jv(t,e,r,km,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else jv(t,e,r,null,n)}}var km=null;function Xy(t,e,n,r){if(km=null,t=Jx(r),t=Ra(t),t!==null)if(e=yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return km=t,null}function cC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S4()){case e_:return 1;case eC:return 4;case Em:case N4:return 16;case tC:return 536870912;default:return 16}default:return 16}}var So=null,s_=null,Hf=null;function uC(){if(Hf)return Hf;var t,e=s_,n=e.length,r,s="value"in So?So.value:So.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Hf=s.slice(t,1<r?1-r:void 0)}function qf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mf(){return!0}function o1(){return!1}function Ur(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mf:o1,this.isPropagationStopped=o1,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mf)},persist:function(){},isPersistent:mf}),e}var iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i_=Ur(iu),wh=Ut({},iu,{view:0,detail:0}),U4=Ur(wh),Tv,kv,Lu,zp=Ut({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(Tv=t.screenX-Lu.screenX,kv=t.screenY-Lu.screenY):kv=Tv=0,Lu=t),Tv)},movementY:function(t){return"movementY"in t?t.movementY:kv}}),a1=Ur(zp),$4=Ut({},zp,{dataTransfer:0}),B4=Ur($4),z4=Ut({},wh,{relatedTarget:0}),Sv=Ur(z4),W4=Ut({},iu,{animationName:0,elapsedTime:0,pseudoElement:0}),H4=Ur(W4),q4=Ut({},iu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),G4=Ur(q4),K4=Ut({},iu,{data:0}),l1=Ur(K4),Q4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X4[t])?!!e[t]:!1}function o_(){return Z4}var J4=Ut({},wh,{key:function(t){if(t.key){var e=Q4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o_,charCode:function(t){return t.type==="keypress"?qf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eV=Ur(J4),tV=Ut({},zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=Ur(tV),nV=Ut({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o_}),rV=Ur(nV),sV=Ut({},iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),iV=Ur(sV),oV=Ut({},zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aV=Ur(oV),lV=[9,13,27,32],a_=Di&&"CompositionEvent"in window,dd=null;Di&&"documentMode"in document&&(dd=document.documentMode);var cV=Di&&"TextEvent"in window&&!dd,dC=Di&&(!a_||dd&&8<dd&&11>=dd),u1=" ",d1=!1;function hC(t,e){switch(t){case"keyup":return lV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kl=!1;function uV(t,e){switch(t){case"compositionend":return fC(e);case"keypress":return e.which!==32?null:(d1=!0,u1);case"textInput":return t=e.data,t===u1&&d1?null:t;default:return null}}function dV(t,e){if(Kl)return t==="compositionend"||!a_&&hC(t,e)?(t=uC(),Hf=s_=So=null,Kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dC&&e.locale!=="ko"?null:e.data;default:return null}}var hV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hV[t.type]:e==="textarea"}function mC(t,e,n,r){HN(r),e=Sm(e,"onChange"),0<e.length&&(n=new i_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hd=null,Od=null;function fV(t){kC(t,0)}function Wp(t){var e=Xl(t);if(VN(e))return t}function mV(t,e){if(t==="change")return e}var pC=!1;if(Di){var Nv;if(Di){var Cv="oninput"in document;if(!Cv){var f1=document.createElement("div");f1.setAttribute("oninput","return;"),Cv=typeof f1.oninput=="function"}Nv=Cv}else Nv=!1;pC=Nv&&(!document.documentMode||9<document.documentMode)}function m1(){hd&&(hd.detachEvent("onpropertychange",gC),Od=hd=null)}function gC(t){if(t.propertyName==="value"&&Wp(Od)){var e=[];mC(e,Od,t,Jx(t)),QN(fV,e)}}function pV(t,e,n){t==="focusin"?(m1(),hd=e,Od=n,hd.attachEvent("onpropertychange",gC)):t==="focusout"&&m1()}function gV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wp(Od)}function vV(t,e){if(t==="click")return Wp(e)}function yV(t,e){if(t==="input"||t==="change")return Wp(e)}function wV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Es=typeof Object.is=="function"?Object.is:wV;function Ld(t,e){if(Es(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jy.call(e,s)||!Es(t[s],e[s]))return!1}return!0}function p1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g1(t,e){var n=p1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p1(n)}}function vC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yC(){for(var t=window,e=wm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wm(t.document)}return e}function l_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xV(t){var e=yC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vC(n.ownerDocument.documentElement,n)){if(r!==null&&l_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=g1(n,i);var o=g1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _V=Di&&"documentMode"in document&&11>=document.documentMode,Ql=null,Zy=null,fd=null,Jy=!1;function v1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jy||Ql==null||Ql!==wm(r)||(r=Ql,"selectionStart"in r&&l_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fd&&Ld(fd,r)||(fd=r,r=Sm(Zy,"onSelect"),0<r.length&&(e=new i_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ql)))}function pf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yl={animationend:pf("Animation","AnimationEnd"),animationiteration:pf("Animation","AnimationIteration"),animationstart:pf("Animation","AnimationStart"),transitionend:pf("Transition","TransitionEnd")},Iv={},wC={};Di&&(wC=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Hp(t){if(Iv[t])return Iv[t];if(!Yl[t])return t;var e=Yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wC)return Iv[t]=e[n];return t}var xC=Hp("animationend"),_C=Hp("animationiteration"),EC=Hp("animationstart"),bC=Hp("transitionend"),TC=new Map,y1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(t,e){TC.set(t,e),vl(e,[t])}for(var Rv=0;Rv<y1.length;Rv++){var Av=y1[Rv],EV=Av.toLowerCase(),bV=Av[0].toUpperCase()+Av.slice(1);la(EV,"on"+bV)}la(xC,"onAnimationEnd");la(_C,"onAnimationIteration");la(EC,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(bC,"onTransitionEnd");jc("onMouseEnter",["mouseout","mouseover"]);jc("onMouseLeave",["mouseout","mouseover"]);jc("onPointerEnter",["pointerout","pointerover"]);jc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function w1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,E4(r,e,void 0,t),t.currentTarget=null}function kC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;w1(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;w1(s,a,u),i=c}}}if(_m)throw t=Ky,_m=!1,Ky=null,t}function Rt(t,e){var n=e[sw];n===void 0&&(n=e[sw]=new Set);var r=t+"__bubble";n.has(r)||(SC(e,t,2,!1),n.add(r))}function Pv(t,e,n){var r=0;e&&(r|=4),SC(n,t,r,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[gf]){t[gf]=!0,jN.forEach(function(n){n!=="selectionchange"&&(TV.has(n)||Pv(n,!1,t),Pv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gf]||(e[gf]=!0,Pv("selectionchange",!1,e))}}function SC(t,e,n,r){switch(cC(e)){case 1:var s=V4;break;case 4:s=F4;break;default:s=r_}n=s.bind(null,e,n,t),s=void 0,!Gy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function jv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ra(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}QN(function(){var u=i,h=Jx(n),f=[];e:{var p=TC.get(t);if(p!==void 0){var g=i_,x=t;switch(t){case"keypress":if(qf(n)===0)break e;case"keydown":case"keyup":g=eV;break;case"focusin":x="focus",g=Sv;break;case"focusout":x="blur",g=Sv;break;case"beforeblur":case"afterblur":g=Sv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=a1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=B4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=rV;break;case xC:case _C:case EC:g=H4;break;case bC:g=iV;break;case"scroll":g=U4;break;case"wheel":g=aV;break;case"copy":case"cut":case"paste":g=G4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=c1}var v=(e&4)!==0,T=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,_!==null&&(C=Pd(y,_),C!=null&&v.push(Fd(y,C,b)))),T)break;y=y.return}0<v.length&&(p=new g(p,x,null,n,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Hy&&(x=n.relatedTarget||n.fromElement)&&(Ra(x)||x[Mi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?Ra(x):null,x!==null&&(T=yl(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(v=a1,C="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=c1,C="onPointerLeave",_="onPointerEnter",y="pointer"),T=g==null?p:Xl(g),b=x==null?p:Xl(x),p=new v(C,y+"leave",g,n,h),p.target=T,p.relatedTarget=b,C=null,Ra(h)===u&&(v=new v(_,y+"enter",x,n,h),v.target=b,v.relatedTarget=T,C=v),T=C,g&&x)t:{for(v=g,_=x,y=0,b=v;b;b=Dl(b))y++;for(b=0,C=_;C;C=Dl(C))b++;for(;0<y-b;)v=Dl(v),y--;for(;0<b-y;)_=Dl(_),b--;for(;y--;){if(v===_||_!==null&&v===_.alternate)break t;v=Dl(v),_=Dl(_)}v=null}else v=null;g!==null&&x1(f,p,g,v,!1),x!==null&&T!==null&&x1(f,T,x,v,!0)}}e:{if(p=u?Xl(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var P=mV;else if(h1(p))if(pC)P=yV;else{P=gV;var L=pV}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=vV);if(P&&(P=P(t,u))){mC(f,P,n,h);break e}L&&L(t,p,u),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Uy(p,"number",p.value)}switch(L=u?Xl(u):window,t){case"focusin":(h1(L)||L.contentEditable==="true")&&(Ql=L,Zy=u,fd=null);break;case"focusout":fd=Zy=Ql=null;break;case"mousedown":Jy=!0;break;case"contextmenu":case"mouseup":case"dragend":Jy=!1,v1(f,n,h);break;case"selectionchange":if(_V)break;case"keydown":case"keyup":v1(f,n,h)}var N;if(a_)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Kl?hC(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(dC&&n.locale!=="ko"&&(Kl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Kl&&(N=uC()):(So=h,s_="value"in So?So.value:So.textContent,Kl=!0)),L=Sm(u,E),0<L.length&&(E=new l1(E,t,null,n,h),f.push({event:E,listeners:L}),N?E.data=N:(N=fC(n),N!==null&&(E.data=N)))),(N=cV?uV(t,n):dV(t,n))&&(u=Sm(u,"onBeforeInput"),0<u.length&&(h=new l1("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}kC(f,e)})}function Fd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pd(t,n),i!=null&&r.unshift(Fd(t,i,s)),i=Pd(t,e),i!=null&&r.push(Fd(t,i,s))),t=t.return}return r}function Dl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Pd(n,i),c!=null&&o.unshift(Fd(n,c,a))):s||(c=Pd(n,i),c!=null&&o.push(Fd(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kV=/\r\n?/g,SV=/\u0000|\uFFFD/g;function _1(t){return(typeof t=="string"?t:""+t).replace(kV,`
`).replace(SV,"")}function vf(t,e,n){if(e=_1(e),_1(t)!==e&&n)throw Error(ae(425))}function Nm(){}var ew=null,tw=null;function nw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rw=typeof setTimeout=="function"?setTimeout:void 0,NV=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,CV=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(t){return E1.resolve(null).then(t).catch(IV)}:rw;function IV(t){setTimeout(function(){throw t})}function Dv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Md(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Md(e)}function jo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ou=Math.random().toString(36).slice(2),Vs="__reactFiber$"+ou,Ud="__reactProps$"+ou,Mi="__reactContainer$"+ou,sw="__reactEvents$"+ou,RV="__reactListeners$"+ou,AV="__reactHandles$"+ou;function Ra(t){var e=t[Vs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mi]||n[Vs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b1(t);t!==null;){if(n=t[Vs])return n;t=b1(t)}return e}t=n,n=t.parentNode}return null}function xh(t){return t=t[Vs]||t[Mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function qp(t){return t[Ud]||null}var iw=[],Zl=-1;function ca(t){return{current:t}}function Pt(t){0>Zl||(t.current=iw[Zl],iw[Zl]=null,Zl--)}function St(t,e){Zl++,iw[Zl]=t.current,t.current=e}var qo={},qn=ca(qo),wr=ca(!1),qa=qo;function Dc(t,e){var n=t.type.contextTypes;if(!n)return qo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xr(t){return t=t.childContextTypes,t!=null}function Cm(){Pt(wr),Pt(qn)}function T1(t,e,n){if(qn.current!==qo)throw Error(ae(168));St(qn,e),St(wr,n)}function NC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,p4(t)||"Unknown",s));return Ut({},n,r)}function Im(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qo,qa=qn.current,St(qn,t),St(wr,wr.current),!0}function k1(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=NC(t,e,qa),r.__reactInternalMemoizedMergedChildContext=t,Pt(wr),Pt(qn),St(qn,t)):Pt(wr),St(wr,n)}var wi=null,Gp=!1,Mv=!1;function CC(t){wi===null?wi=[t]:wi.push(t)}function PV(t){Gp=!0,CC(t)}function ua(){if(!Mv&&wi!==null){Mv=!0;var t=0,e=wt;try{var n=wi;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wi=null,Gp=!1}catch(s){throw wi!==null&&(wi=wi.slice(t+1)),JN(e_,ua),s}finally{wt=e,Mv=!1}}return null}var Jl=[],ec=0,Rm=null,Am=0,Gr=[],Kr=0,Ga=null,bi=1,Ti="";function Ta(t,e){Jl[ec++]=Am,Jl[ec++]=Rm,Rm=t,Am=e}function IC(t,e,n){Gr[Kr++]=bi,Gr[Kr++]=Ti,Gr[Kr++]=Ga,Ga=t;var r=bi;t=Ti;var s=32-ws(r)-1;r&=~(1<<s),n+=1;var i=32-ws(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bi=1<<32-ws(e)+s|n<<s|r,Ti=i+t}else bi=1<<i|n<<s|r,Ti=t}function c_(t){t.return!==null&&(Ta(t,1),IC(t,1,0))}function u_(t){for(;t===Rm;)Rm=Jl[--ec],Jl[ec]=null,Am=Jl[--ec],Jl[ec]=null;for(;t===Ga;)Ga=Gr[--Kr],Gr[Kr]=null,Ti=Gr[--Kr],Gr[Kr]=null,bi=Gr[--Kr],Gr[Kr]=null}var Mr=null,jr=null,Mt=!1,gs=null;function RC(t,e){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,jr=jo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,jr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:bi,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,jr=null,!0):!1;default:return!1}}function ow(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aw(t){if(Mt){var e=jr;if(e){var n=e;if(!S1(t,e)){if(ow(t))throw Error(ae(418));e=jo(n.nextSibling);var r=Mr;e&&S1(t,e)?RC(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Mr=t)}}else{if(ow(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Mt=!1,Mr=t}}}function N1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function yf(t){if(t!==Mr)return!1;if(!Mt)return N1(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nw(t.type,t.memoizedProps)),e&&(e=jr)){if(ow(t))throw AC(),Error(ae(418));for(;e;)RC(t,e),e=jo(e.nextSibling)}if(N1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jr=jo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jr=null}}else jr=Mr?jo(t.stateNode.nextSibling):null;return!0}function AC(){for(var t=jr;t;)t=jo(t.nextSibling)}function Mc(){jr=Mr=null,Mt=!1}function d_(t){gs===null?gs=[t]:gs.push(t)}var jV=Ki.ReactCurrentBatchConfig;function Vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function wf(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C1(t){var e=t._init;return e(t._payload)}function PC(t){function e(_,y){if(t){var b=_.deletions;b===null?(_.deletions=[y],_.flags|=16):b.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Lo(_,y),_.index=0,_.sibling=null,_}function i(_,y,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<y?(_.flags|=2,y):b):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,b,C){return y===null||y.tag!==6?(y=Bv(b,_.mode,C),y.return=_,y):(y=s(y,b),y.return=_,y)}function c(_,y,b,C){var P=b.type;return P===Gl?h(_,y,b.props.children,C,b.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===uo&&C1(P)===y.type)?(C=s(y,b.props),C.ref=Vu(_,y,b),C.return=_,C):(C=Jf(b.type,b.key,b.props,null,_.mode,C),C.ref=Vu(_,y,b),C.return=_,C)}function u(_,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=zv(b,_.mode,C),y.return=_,y):(y=s(y,b.children||[]),y.return=_,y)}function h(_,y,b,C,P){return y===null||y.tag!==7?(y=Ba(b,_.mode,C,P),y.return=_,y):(y=s(y,b),y.return=_,y)}function f(_,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Bv(""+y,_.mode,b),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lf:return b=Jf(y.type,y.key,y.props,null,_.mode,b),b.ref=Vu(_,null,y),b.return=_,b;case ql:return y=zv(y,_.mode,b),y.return=_,y;case uo:var C=y._init;return f(_,C(y._payload),b)}if(Ku(y)||ju(y))return y=Ba(y,_.mode,b,null),y.return=_,y;wf(_,y)}return null}function p(_,y,b,C){var P=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:a(_,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:return b.key===P?c(_,y,b,C):null;case ql:return b.key===P?u(_,y,b,C):null;case uo:return P=b._init,p(_,y,P(b._payload),C)}if(Ku(b)||ju(b))return P!==null?null:h(_,y,b,C,null);wf(_,b)}return null}function g(_,y,b,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(b)||null,a(y,_,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case lf:return _=_.get(C.key===null?b:C.key)||null,c(y,_,C,P);case ql:return _=_.get(C.key===null?b:C.key)||null,u(y,_,C,P);case uo:var L=C._init;return g(_,y,b,L(C._payload),P)}if(Ku(C)||ju(C))return _=_.get(b)||null,h(y,_,C,P,null);wf(y,C)}return null}function x(_,y,b,C){for(var P=null,L=null,N=y,E=y=0,S=null;N!==null&&E<b.length;E++){N.index>E?(S=N,N=null):S=N.sibling;var R=p(_,N,b[E],C);if(R===null){N===null&&(N=S);break}t&&N&&R.alternate===null&&e(_,N),y=i(R,y,E),L===null?P=R:L.sibling=R,L=R,N=S}if(E===b.length)return n(_,N),Mt&&Ta(_,E),P;if(N===null){for(;E<b.length;E++)N=f(_,b[E],C),N!==null&&(y=i(N,y,E),L===null?P=N:L.sibling=N,L=N);return Mt&&Ta(_,E),P}for(N=r(_,N);E<b.length;E++)S=g(N,_,E,b[E],C),S!==null&&(t&&S.alternate!==null&&N.delete(S.key===null?E:S.key),y=i(S,y,E),L===null?P=S:L.sibling=S,L=S);return t&&N.forEach(function(M){return e(_,M)}),Mt&&Ta(_,E),P}function v(_,y,b,C){var P=ju(b);if(typeof P!="function")throw Error(ae(150));if(b=P.call(b),b==null)throw Error(ae(151));for(var L=P=null,N=y,E=y=0,S=null,R=b.next();N!==null&&!R.done;E++,R=b.next()){N.index>E?(S=N,N=null):S=N.sibling;var M=p(_,N,R.value,C);if(M===null){N===null&&(N=S);break}t&&N&&M.alternate===null&&e(_,N),y=i(M,y,E),L===null?P=M:L.sibling=M,L=M,N=S}if(R.done)return n(_,N),Mt&&Ta(_,E),P;if(N===null){for(;!R.done;E++,R=b.next())R=f(_,R.value,C),R!==null&&(y=i(R,y,E),L===null?P=R:L.sibling=R,L=R);return Mt&&Ta(_,E),P}for(N=r(_,N);!R.done;E++,R=b.next())R=g(N,_,E,R.value,C),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?E:R.key),y=i(R,y,E),L===null?P=R:L.sibling=R,L=R);return t&&N.forEach(function(A){return e(_,A)}),Mt&&Ta(_,E),P}function T(_,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Gl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:e:{for(var P=b.key,L=y;L!==null;){if(L.key===P){if(P=b.type,P===Gl){if(L.tag===7){n(_,L.sibling),y=s(L,b.props.children),y.return=_,_=y;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===uo&&C1(P)===L.type){n(_,L.sibling),y=s(L,b.props),y.ref=Vu(_,L,b),y.return=_,_=y;break e}n(_,L);break}else e(_,L);L=L.sibling}b.type===Gl?(y=Ba(b.props.children,_.mode,C,b.key),y.return=_,_=y):(C=Jf(b.type,b.key,b.props,null,_.mode,C),C.ref=Vu(_,y,b),C.return=_,_=C)}return o(_);case ql:e:{for(L=b.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(_,y.sibling),y=s(y,b.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=zv(b,_.mode,C),y.return=_,_=y}return o(_);case uo:return L=b._init,T(_,y,L(b._payload),C)}if(Ku(b))return x(_,y,b,C);if(ju(b))return v(_,y,b,C);wf(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,b),y.return=_,_=y):(n(_,y),y=Bv(b,_.mode,C),y.return=_,_=y),o(_)):n(_,y)}return T}var Oc=PC(!0),jC=PC(!1),Pm=ca(null),jm=null,tc=null,h_=null;function f_(){h_=tc=jm=null}function m_(t){var e=Pm.current;Pt(Pm),t._currentValue=e}function lw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cc(t,e){jm=t,h_=tc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yr=!0),t.firstContext=null)}function ts(t){var e=t._currentValue;if(h_!==t)if(t={context:t,memoizedValue:e,next:null},tc===null){if(jm===null)throw Error(ae(308));tc=t,jm.dependencies={lanes:0,firstContext:t}}else tc=tc.next=t;return e}var Aa=null;function p_(t){Aa===null?Aa=[t]:Aa.push(t)}function DC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,p_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Oi(t,r)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ho=!1;function g_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Do(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Oi(t,n)}return s=r.interleaved,s===null?(e.next=e,p_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Oi(t,n)}function Gf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t_(t,n)}}function I1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dm(t,e,n,r){var s=t.updateQueue;ho=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,v=a;switch(p=e,g=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(g,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,p=typeof x=="function"?x.call(g,f,p):x,p==null)break e;f=Ut({},f,p);break e;case 2:ho=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Qa|=o,t.lanes=o,t.memoizedState=f}}function R1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var _h={},Hs=ca(_h),$d=ca(_h),Bd=ca(_h);function Pa(t){if(t===_h)throw Error(ae(174));return t}function v_(t,e){switch(St(Bd,e),St($d,t),St(Hs,_h),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:By(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=By(e,t)}Pt(Hs),St(Hs,e)}function Lc(){Pt(Hs),Pt($d),Pt(Bd)}function OC(t){Pa(Bd.current);var e=Pa(Hs.current),n=By(e,t.type);e!==n&&(St($d,t),St(Hs,n))}function y_(t){$d.current===t&&(Pt(Hs),Pt($d))}var Vt=ca(0);function Mm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ov=[];function w_(){for(var t=0;t<Ov.length;t++)Ov[t]._workInProgressVersionPrimary=null;Ov.length=0}var Kf=Ki.ReactCurrentDispatcher,Lv=Ki.ReactCurrentBatchConfig,Ka=0,Ft=null,an=null,hn=null,Om=!1,md=!1,zd=0,DV=0;function jn(){throw Error(ae(321))}function x_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Es(t[n],e[n]))return!1;return!0}function __(t,e,n,r,s,i){if(Ka=i,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kf.current=t===null||t.memoizedState===null?VV:FV,t=n(r,s),md){i=0;do{if(md=!1,zd=0,25<=i)throw Error(ae(301));i+=1,hn=an=null,e.updateQueue=null,Kf.current=UV,t=n(r,s)}while(md)}if(Kf.current=Lm,e=an!==null&&an.next!==null,Ka=0,hn=an=Ft=null,Om=!1,e)throw Error(ae(300));return t}function E_(){var t=zd!==0;return zd=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Ft.memoizedState=hn=t:hn=hn.next=t,hn}function ns(){if(an===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var e=hn===null?Ft.memoizedState:hn.next;if(e!==null)hn=e,an=t;else{if(t===null)throw Error(ae(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},hn===null?Ft.memoizedState=hn=t:hn=hn.next=t}return hn}function Wd(t,e){return typeof e=="function"?e(t):e}function Vv(t){var e=ns(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=an,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Ka&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Ft.lanes|=h,Qa|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Es(r,e.memoizedState)||(yr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ft.lanes|=i,Qa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fv(t){var e=ns(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Es(i,e.memoizedState)||(yr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function LC(){}function VC(t,e){var n=Ft,r=ns(),s=e(),i=!Es(r.memoizedState,s);if(i&&(r.memoizedState=s,yr=!0),r=r.queue,b_($C.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Hd(9,UC.bind(null,n,r,s,e),void 0,null),fn===null)throw Error(ae(349));Ka&30||FC(n,e,s)}return s}function FC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UC(t,e,n,r){e.value=n,e.getSnapshot=r,BC(e)&&zC(t)}function $C(t,e,n){return n(function(){BC(e)&&zC(t)})}function BC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Es(t,n)}catch{return!0}}function zC(t){var e=Oi(t,1);e!==null&&xs(e,t,1,-1)}function A1(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wd,lastRenderedState:t},e.queue=t,t=t.dispatch=LV.bind(null,Ft,t),[e.memoizedState,t]}function Hd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function WC(){return ns().memoizedState}function Qf(t,e,n,r){var s=js();Ft.flags|=t,s.memoizedState=Hd(1|e,n,void 0,r===void 0?null:r)}function Kp(t,e,n,r){var s=ns();r=r===void 0?null:r;var i=void 0;if(an!==null){var o=an.memoizedState;if(i=o.destroy,r!==null&&x_(r,o.deps)){s.memoizedState=Hd(e,n,i,r);return}}Ft.flags|=t,s.memoizedState=Hd(1|e,n,i,r)}function P1(t,e){return Qf(8390656,8,t,e)}function b_(t,e){return Kp(2048,8,t,e)}function HC(t,e){return Kp(4,2,t,e)}function qC(t,e){return Kp(4,4,t,e)}function GC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KC(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4,4,GC.bind(null,e,t),n)}function T_(){}function QC(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YC(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XC(t,e,n){return Ka&21?(Es(n,e)||(n=nC(),Ft.lanes|=n,Qa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=n)}function MV(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=Lv.transition;Lv.transition={};try{t(!1),e()}finally{wt=n,Lv.transition=r}}function ZC(){return ns().memoizedState}function OV(t,e,n){var r=Oo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JC(t))eI(e,n);else if(n=DC(t,e,n,r),n!==null){var s=tr();xs(n,t,r,s),tI(n,e,r)}}function LV(t,e,n){var r=Oo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JC(t))eI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Es(a,o)){var c=e.interleaved;c===null?(s.next=s,p_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=DC(t,e,s,r),n!==null&&(s=tr(),xs(n,t,r,s),tI(n,e,r))}}function JC(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function eI(t,e){md=Om=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t_(t,n)}}var Lm={readContext:ts,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},VV={readContext:ts,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:ts,useEffect:P1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4194308,4,GC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qf(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=js();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OV.bind(null,Ft,t),[r.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:A1,useDebugValue:T_,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=A1(!1),e=t[0];return t=MV.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ft,s=js();if(Mt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),fn===null)throw Error(ae(349));Ka&30||FC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,P1($C.bind(null,r,i,t),[t]),r.flags|=2048,Hd(9,UC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=js(),e=fn.identifierPrefix;if(Mt){var n=Ti,r=bi;n=(r&~(1<<32-ws(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FV={readContext:ts,useCallback:QC,useContext:ts,useEffect:b_,useImperativeHandle:KC,useInsertionEffect:HC,useLayoutEffect:qC,useMemo:YC,useReducer:Vv,useRef:WC,useState:function(){return Vv(Wd)},useDebugValue:T_,useDeferredValue:function(t){var e=ns();return XC(e,an.memoizedState,t)},useTransition:function(){var t=Vv(Wd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:LC,useSyncExternalStore:VC,useId:ZC,unstable_isNewReconciler:!1},UV={readContext:ts,useCallback:QC,useContext:ts,useEffect:b_,useImperativeHandle:KC,useInsertionEffect:HC,useLayoutEffect:qC,useMemo:YC,useReducer:Fv,useRef:WC,useState:function(){return Fv(Wd)},useDebugValue:T_,useDeferredValue:function(t){var e=ns();return an===null?e.memoizedState=t:XC(e,an.memoizedState,t)},useTransition:function(){var t=Fv(Wd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:LC,useSyncExternalStore:VC,useId:ZC,unstable_isNewReconciler:!1};function ds(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qp={isMounted:function(t){return(t=t._reactInternals)?yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tr(),s=Oo(t),i=Ri(r,s);i.payload=e,n!=null&&(i.callback=n),e=Do(t,i,s),e!==null&&(xs(e,t,s,r),Gf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tr(),s=Oo(t),i=Ri(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Do(t,i,s),e!==null&&(xs(e,t,s,r),Gf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tr(),r=Oo(t),s=Ri(n,r);s.tag=2,e!=null&&(s.callback=e),e=Do(t,s,r),e!==null&&(xs(e,t,r,n),Gf(e,t,r))}};function j1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ld(n,r)||!Ld(s,i):!0}function nI(t,e,n){var r=!1,s=qo,i=e.contextType;return typeof i=="object"&&i!==null?i=ts(i):(s=xr(e)?qa:qn.current,r=e.contextTypes,i=(r=r!=null)?Dc(t,s):qo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function D1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qp.enqueueReplaceState(e,e.state,null)}function uw(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},g_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ts(i):(i=xr(e)?qa:qn.current,s.context=Dc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cw(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qp.enqueueReplaceState(s,s.state,null),Dm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vc(t,e){try{var n="",r=e;do n+=m4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Uv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $V=typeof WeakMap=="function"?WeakMap:Map;function rI(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fm||(Fm=!0,_w=r),dw(t,e)},n}function sI(t,e,n){n=Ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dw(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dw(t,e),typeof r!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function M1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $V;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tF.bind(null,t,e,n),e.then(t,t))}function O1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,Do(n,e,1))),n.lanes|=1),t)}var BV=Ki.ReactCurrentOwner,yr=!1;function Yn(t,e,n,r){e.child=t===null?jC(e,null,n,r):Oc(e,t.child,n,r)}function V1(t,e,n,r,s){n=n.render;var i=e.ref;return cc(e,s),r=__(t,e,n,r,i,s),n=E_(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Li(t,e,s)):(Mt&&n&&c_(e),e.flags|=1,Yn(t,e,r,s),e.child)}function F1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!P_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iI(t,e,i,r,s)):(t=Jf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ld,n(o,r)&&t.ref===e.ref)return Li(t,e,s)}return e.flags|=1,t=Lo(i,r),t.ref=e.ref,t.return=e,e.child=t}function iI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ld(i,r)&&t.ref===e.ref)if(yr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yr=!0);else return e.lanes=t.lanes,Li(t,e,s)}return hw(t,e,n,r,s)}function oI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(rc,Cr),Cr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(rc,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,St(rc,Cr),Cr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,St(rc,Cr),Cr|=r;return Yn(t,e,s,n),e.child}function aI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hw(t,e,n,r,s){var i=xr(n)?qa:qn.current;return i=Dc(e,i),cc(e,s),n=__(t,e,n,r,i,s),r=E_(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Li(t,e,s)):(Mt&&r&&c_(e),e.flags|=1,Yn(t,e,n,s),e.child)}function U1(t,e,n,r,s){if(xr(n)){var i=!0;Im(e)}else i=!1;if(cc(e,s),e.stateNode===null)Yf(t,e),nI(e,n,r),uw(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ts(u):(u=xr(n)?qa:qn.current,u=Dc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&D1(e,o,r,u),ho=!1;var p=e.memoizedState;o.state=p,Dm(e,r,o,s),c=e.memoizedState,a!==r||p!==c||wr.current||ho?(typeof h=="function"&&(cw(e,n,h,r),c=e.memoizedState),(a=ho||j1(e,n,a,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,MC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ds(e.type,a),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ts(c):(c=xr(n)?qa:qn.current,c=Dc(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&D1(e,o,r,c),ho=!1,p=e.memoizedState,o.state=p,Dm(e,r,o,s);var x=e.memoizedState;a!==f||p!==x||wr.current||ho?(typeof g=="function"&&(cw(e,n,g,r),x=e.memoizedState),(u=ho||j1(e,n,u,r,p,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return fw(t,e,n,r,i,s)}function fw(t,e,n,r,s,i){aI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&k1(e,n,!1),Li(t,e,i);r=e.stateNode,BV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oc(e,t.child,null,i),e.child=Oc(e,null,a,i)):Yn(t,e,a,i),e.memoizedState=r.state,s&&k1(e,n,!0),e.child}function lI(t){var e=t.stateNode;e.pendingContext?T1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T1(t,e.context,!1),v_(t,e.containerInfo)}function $1(t,e,n,r,s){return Mc(),d_(s),e.flags|=256,Yn(t,e,n,r),e.child}var mw={dehydrated:null,treeContext:null,retryLane:0};function pw(t){return{baseLanes:t,cachePool:null,transitions:null}}function cI(t,e,n){var r=e.pendingProps,s=Vt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),St(Vt,s&1),t===null)return aw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zp(o,r,0,null),t=Ba(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pw(n),e.memoizedState=mw,t):k_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Lo(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Lo(a,i):(i=Ba(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mw,r}return i=t.child,t=i.sibling,r=Lo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k_(t,e){return e=Zp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xf(t,e,n,r){return r!==null&&d_(r),Oc(e,t.child,null,n),t=k_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Uv(Error(ae(422))),xf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zp({mode:"visible",children:r.children},s,0,null),i=Ba(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oc(e,t.child,null,o),e.child.memoizedState=pw(o),e.memoizedState=mw,i);if(!(e.mode&1))return xf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ae(419)),r=Uv(i,r,void 0),xf(t,e,o,r)}if(a=(o&t.childLanes)!==0,yr||a){if(r=fn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Oi(t,s),xs(r,t,s,-1))}return A_(),r=Uv(Error(ae(421))),xf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nF.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jr=jo(s.nextSibling),Mr=e,Mt=!0,gs=null,t!==null&&(Gr[Kr++]=bi,Gr[Kr++]=Ti,Gr[Kr++]=Ga,bi=t.id,Ti=t.overflow,Ga=e),e=k_(e,r.children),e.flags|=4096,e)}function B1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lw(t.return,e,n)}function $v(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yn(t,e,r.children,n),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B1(t,n,e);else if(t.tag===19)B1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$v(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$v(e,!0,n,null,i);break;case"together":$v(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WV(t,e,n){switch(e.tag){case 3:lI(e),Mc();break;case 5:OC(e);break;case 1:xr(e.type)&&Im(e);break;case 4:v_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;St(Pm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?cI(t,e,n):(St(Vt,Vt.current&1),t=Li(t,e,n),t!==null?t.sibling:null);St(Vt,Vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,oI(t,e,n)}return Li(t,e,n)}var dI,gw,hI,fI;dI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gw=function(){};hI=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Pa(Hs.current);var i=null;switch(n){case"input":s=Vy(t,s),r=Vy(t,r),i=[];break;case"select":s=Ut({},s,{value:void 0}),r=Ut({},r,{value:void 0}),i=[];break;case"textarea":s=$y(t,s),r=$y(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nm)}zy(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Rt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};fI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fu(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HV(t,e,n){var r=e.pendingProps;switch(u_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(e),null;case 1:return xr(e.type)&&Cm(),Dn(e),null;case 3:return r=e.stateNode,Lc(),Pt(wr),Pt(qn),w_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gs!==null&&(Tw(gs),gs=null))),gw(t,e),Dn(e),null;case 5:y_(e);var s=Pa(Bd.current);if(n=e.type,t!==null&&e.stateNode!=null)hI(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Dn(e),null}if(t=Pa(Hs.current),yf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vs]=e,r[Ud]=i,t=(e.mode&1)!==0,n){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(s=0;s<Yu.length;s++)Rt(Yu[s],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":Xb(r,i),Rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Rt("invalid",r);break;case"textarea":Jb(r,i),Rt("invalid",r)}zy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&vf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vf(r.textContent,a,t),s=["children",""+a]):Rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",r)}switch(n){case"input":cf(r),Zb(r,i,!0);break;case"textarea":cf(r),e1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$N(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vs]=e,t[Ud]=r,dI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wy(n,r),n){case"dialog":Rt("cancel",t),Rt("close",t),s=r;break;case"iframe":case"object":case"embed":Rt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yu.length;s++)Rt(Yu[s],t);s=r;break;case"source":Rt("error",t),s=r;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),s=r;break;case"details":Rt("toggle",t),s=r;break;case"input":Xb(t,r),s=Vy(t,r),Rt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ut({},r,{value:void 0}),Rt("invalid",t);break;case"textarea":Jb(t,r),s=$y(t,r),Rt("invalid",t);break;default:s=r}zy(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?WN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&BN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ad(t,c):typeof c=="number"&&Ad(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Rt("scroll",t):c!=null&&Qx(t,i,c,o))}switch(n){case"input":cf(t),Zb(t,r,!1);break;case"textarea":cf(t),e1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ho(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ic(t,!!r.multiple,i,!1):r.defaultValue!=null&&ic(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dn(e),null;case 6:if(t&&e.stateNode!=null)fI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Pa(Bd.current),Pa(Hs.current),yf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vs]=e,(i=r.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:vf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vs]=e,e.stateNode=r}return Dn(e),null;case 13:if(Pt(Vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&jr!==null&&e.mode&1&&!(e.flags&128))AC(),Mc(),e.flags|=98560,i=!1;else if(i=yf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Vs]=e}else Mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dn(e),i=!1}else gs!==null&&(Tw(gs),gs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?ln===0&&(ln=3):A_())),e.updateQueue!==null&&(e.flags|=4),Dn(e),null);case 4:return Lc(),gw(t,e),t===null&&Vd(e.stateNode.containerInfo),Dn(e),null;case 10:return m_(e.type._context),Dn(e),null;case 17:return xr(e.type)&&Cm(),Dn(e),null;case 19:if(Pt(Vt),i=e.memoizedState,i===null)return Dn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fu(i,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mm(t),o!==null){for(e.flags|=128,Fu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Vt,Vt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qt()>Fc&&(e.flags|=128,r=!0,Fu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Mt)return Dn(e),null}else 2*Qt()-i.renderingStartTime>Fc&&n!==1073741824&&(e.flags|=128,r=!0,Fu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qt(),e.sibling=null,n=Vt.current,St(Vt,r?n&1|2:n&1),e):(Dn(e),null);case 22:case 23:return R_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&(Dn(e),e.subtreeFlags&6&&(e.flags|=8192)):Dn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function qV(t,e){switch(u_(e),e.tag){case 1:return xr(e.type)&&Cm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lc(),Pt(wr),Pt(qn),w_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return y_(e),null;case 13:if(Pt(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pt(Vt),null;case 4:return Lc(),null;case 10:return m_(e.type._context),null;case 22:case 23:return R_(),null;case 24:return null;default:return null}}var _f=!1,Bn=!1,GV=typeof WeakSet=="function"?WeakSet:Set,_e=null;function nc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function vw(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var z1=!1;function KV(t,e){if(ew=Tm,t=yC(),l_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(a=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tw={focusedElem:t,selectionRange:n},Tm=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,T=x.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:ds(e.type,v),T);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(C){Ht(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return x=z1,z1=!1,x}function pd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vw(e,n,i)}s=s.next}while(s!==r)}}function Yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mI(t){var e=t.alternate;e!==null&&(t.alternate=null,mI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[Ud],delete e[sw],delete e[RV],delete e[AV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pI(t){return t.tag===5||t.tag===3||t.tag===4}function W1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ww(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nm));else if(r!==4&&(t=t.child,t!==null))for(ww(t,e,n),t=t.sibling;t!==null;)ww(t,e,n),t=t.sibling}function xw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xw(t,e,n),t=t.sibling;t!==null;)xw(t,e,n),t=t.sibling}var xn=null,ps=!1;function no(t,e,n){for(n=n.child;n!==null;)gI(t,e,n),n=n.sibling}function gI(t,e,n){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Bp,n)}catch{}switch(n.tag){case 5:Bn||nc(n,e);case 6:var r=xn,s=ps;xn=null,no(t,e,n),xn=r,ps=s,xn!==null&&(ps?(t=xn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(ps?(t=xn,n=n.stateNode,t.nodeType===8?Dv(t.parentNode,n):t.nodeType===1&&Dv(t,n),Md(t)):Dv(xn,n.stateNode));break;case 4:r=xn,s=ps,xn=n.stateNode.containerInfo,ps=!0,no(t,e,n),xn=r,ps=s;break;case 0:case 11:case 14:case 15:if(!Bn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vw(n,e,o),s=s.next}while(s!==r)}no(t,e,n);break;case 1:if(!Bn&&(nc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ht(n,e,a)}no(t,e,n);break;case 21:no(t,e,n);break;case 22:n.mode&1?(Bn=(r=Bn)||n.memoizedState!==null,no(t,e,n),Bn=r):no(t,e,n);break;default:no(t,e,n)}}function H1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GV),e.forEach(function(r){var s=rF.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,ps=!1;break e;case 3:xn=a.stateNode.containerInfo,ps=!0;break e;case 4:xn=a.stateNode.containerInfo,ps=!0;break e}a=a.return}if(xn===null)throw Error(ae(160));gI(i,o,s),xn=null,ps=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vI(e,t),e=e.sibling}function vI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Ps(t),r&4){try{pd(3,t,t.return),Yp(3,t)}catch(v){Ht(t,t.return,v)}try{pd(5,t,t.return)}catch(v){Ht(t,t.return,v)}}break;case 1:ls(e,t),Ps(t),r&512&&n!==null&&nc(n,n.return);break;case 5:if(ls(e,t),Ps(t),r&512&&n!==null&&nc(n,n.return),t.flags&32){var s=t.stateNode;try{Ad(s,"")}catch(v){Ht(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&FN(s,i),Wy(a,o);var u=Wy(a,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?WN(s,f):h==="dangerouslySetInnerHTML"?BN(s,f):h==="children"?Ad(s,f):Qx(s,h,f,u)}switch(a){case"input":Fy(s,i);break;case"textarea":UN(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ic(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?ic(s,!!i.multiple,i.defaultValue,!0):ic(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ud]=i}catch(v){Ht(t,t.return,v)}}break;case 6:if(ls(e,t),Ps(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Ht(t,t.return,v)}}break;case 3:if(ls(e,t),Ps(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Md(e.containerInfo)}catch(v){Ht(t,t.return,v)}break;case 4:ls(e,t),Ps(t);break;case 13:ls(e,t),Ps(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(C_=Qt())),r&4&&H1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bn=(u=Bn)||h,ls(e,t),Bn=u):ls(e,t),Ps(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(_e=t,h=t.child;h!==null;){for(f=_e=h;_e!==null;){switch(p=_e,g=p.child,p.tag){case 0:case 11:case 14:case 15:pd(4,p,p.return);break;case 1:nc(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){Ht(r,n,v)}}break;case 5:nc(p,p.return);break;case 22:if(p.memoizedState!==null){G1(f);continue}}g!==null?(g.return=p,_e=g):G1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=zN("display",o))}catch(v){Ht(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Ht(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ls(e,t),Ps(t),r&4&&H1(t);break;case 21:break;default:ls(e,t),Ps(t)}}function Ps(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pI(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ad(s,""),r.flags&=-33);var i=W1(t);xw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=W1(t);ww(t,a,o);break;default:throw Error(ae(161))}}catch(c){Ht(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QV(t,e,n){_e=t,yI(t)}function yI(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_f;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Bn;a=_f;var u=Bn;if(_f=o,(Bn=c)&&!u)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?K1(s):c!==null?(c.return=o,_e=c):K1(s);for(;i!==null;)_e=i,yI(i),i=i.sibling;_e=s,_f=a,Bn=u}q1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):q1(t)}}function q1(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bn||Yp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ds(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&R1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}R1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Md(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Bn||e.flags&512&&yw(e)}catch(p){Ht(e,e.return,p)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function G1(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function K1(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yp(4,e)}catch(c){Ht(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ht(e,s,c)}}var i=e.return;try{yw(e)}catch(c){Ht(e,i,c)}break;case 5:var o=e.return;try{yw(e)}catch(c){Ht(e,o,c)}}}catch(c){Ht(e,e.return,c)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var YV=Math.ceil,Vm=Ki.ReactCurrentDispatcher,S_=Ki.ReactCurrentOwner,Xr=Ki.ReactCurrentBatchConfig,ut=0,fn=null,nn=null,bn=0,Cr=0,rc=ca(0),ln=0,qd=null,Qa=0,Xp=0,N_=0,gd=null,gr=null,C_=0,Fc=1/0,yi=null,Fm=!1,_w=null,Mo=null,Ef=!1,No=null,Um=0,vd=0,Ew=null,Xf=-1,Zf=0;function tr(){return ut&6?Qt():Xf!==-1?Xf:Xf=Qt()}function Oo(t){return t.mode&1?ut&2&&bn!==0?bn&-bn:jV.transition!==null?(Zf===0&&(Zf=nC()),Zf):(t=wt,t!==0||(t=window.event,t=t===void 0?16:cC(t.type)),t):1}function xs(t,e,n,r){if(50<vd)throw vd=0,Ew=null,Error(ae(185));yh(t,n,r),(!(ut&2)||t!==fn)&&(t===fn&&(!(ut&2)&&(Xp|=n),ln===4&&po(t,bn)),_r(t,r),n===1&&ut===0&&!(e.mode&1)&&(Fc=Qt()+500,Gp&&ua()))}function _r(t,e){var n=t.callbackNode;j4(t,e);var r=bm(t,t===fn?bn:0);if(r===0)n!==null&&r1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&r1(n),e===1)t.tag===0?PV(Q1.bind(null,t)):CC(Q1.bind(null,t)),CV(function(){!(ut&6)&&ua()}),n=null;else{switch(rC(r)){case 1:n=e_;break;case 4:n=eC;break;case 16:n=Em;break;case 536870912:n=tC;break;default:n=Em}n=SI(n,wI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wI(t,e){if(Xf=-1,Zf=0,ut&6)throw Error(ae(327));var n=t.callbackNode;if(uc()&&t.callbackNode!==n)return null;var r=bm(t,t===fn?bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$m(t,r);else{e=r;var s=ut;ut|=2;var i=_I();(fn!==t||bn!==e)&&(yi=null,Fc=Qt()+500,$a(t,e));do try{JV();break}catch(a){xI(t,a)}while(!0);f_(),Vm.current=i,ut=s,nn!==null?e=0:(fn=null,bn=0,e=ln)}if(e!==0){if(e===2&&(s=Qy(t),s!==0&&(r=s,e=bw(t,s))),e===1)throw n=qd,$a(t,0),po(t,r),_r(t,Qt()),n;if(e===6)po(t,r);else{if(s=t.current.alternate,!(r&30)&&!XV(s)&&(e=$m(t,r),e===2&&(i=Qy(t),i!==0&&(r=i,e=bw(t,i))),e===1))throw n=qd,$a(t,0),po(t,r),_r(t,Qt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:ka(t,gr,yi);break;case 3:if(po(t,r),(r&130023424)===r&&(e=C_+500-Qt(),10<e)){if(bm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rw(ka.bind(null,t,gr,yi),e);break}ka(t,gr,yi);break;case 4:if(po(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ws(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YV(r/1960))-r,10<r){t.timeoutHandle=rw(ka.bind(null,t,gr,yi),r);break}ka(t,gr,yi);break;case 5:ka(t,gr,yi);break;default:throw Error(ae(329))}}}return _r(t,Qt()),t.callbackNode===n?wI.bind(null,t):null}function bw(t,e){var n=gd;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=$m(t,e),t!==2&&(e=gr,gr=n,e!==null&&Tw(e)),t}function Tw(t){gr===null?gr=t:gr.push.apply(gr,t)}function XV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Es(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function po(t,e){for(e&=~N_,e&=~Xp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ws(e),r=1<<n;t[n]=-1,e&=~r}}function Q1(t){if(ut&6)throw Error(ae(327));uc();var e=bm(t,0);if(!(e&1))return _r(t,Qt()),null;var n=$m(t,e);if(t.tag!==0&&n===2){var r=Qy(t);r!==0&&(e=r,n=bw(t,r))}if(n===1)throw n=qd,$a(t,0),po(t,e),_r(t,Qt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ka(t,gr,yi),_r(t,Qt()),null}function I_(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(Fc=Qt()+500,Gp&&ua())}}function Ya(t){No!==null&&No.tag===0&&!(ut&6)&&uc();var e=ut;ut|=1;var n=Xr.transition,r=wt;try{if(Xr.transition=null,wt=1,t)return t()}finally{wt=r,Xr.transition=n,ut=e,!(ut&6)&&ua()}}function R_(){Cr=rc.current,Pt(rc)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NV(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(u_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cm();break;case 3:Lc(),Pt(wr),Pt(qn),w_();break;case 5:y_(r);break;case 4:Lc();break;case 13:Pt(Vt);break;case 19:Pt(Vt);break;case 10:m_(r.type._context);break;case 22:case 23:R_()}n=n.return}if(fn=t,nn=t=Lo(t.current,null),bn=Cr=e,ln=0,qd=null,N_=Xp=Qa=0,gr=gd=null,Aa!==null){for(e=0;e<Aa.length;e++)if(n=Aa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Aa=null}return t}function xI(t,e){do{var n=nn;try{if(f_(),Kf.current=Lm,Om){for(var r=Ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Om=!1}if(Ka=0,hn=an=Ft=null,md=!1,zd=0,S_.current=null,n===null||n.return===null){ln=1,qd=e,nn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=bn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=O1(o);if(g!==null){g.flags&=-257,L1(g,o,a,i,e),g.mode&1&&M1(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var v=new Set;v.add(c),e.updateQueue=v}else x.add(c);break e}else{if(!(e&1)){M1(i,u,e),A_();break e}c=Error(ae(426))}}else if(Mt&&a.mode&1){var T=O1(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),L1(T,o,a,i,e),d_(Vc(c,a));break e}}i=c=Vc(c,a),ln!==4&&(ln=2),gd===null?gd=[i]:gd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=rI(i,c,e);I1(i,_);break e;case 1:a=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mo===null||!Mo.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=sI(i,a,e);I1(i,C);break e}}i=i.return}while(i!==null)}bI(n)}catch(P){e=P,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(!0)}function _I(){var t=Vm.current;return Vm.current=Lm,t===null?Lm:t}function A_(){(ln===0||ln===3||ln===2)&&(ln=4),fn===null||!(Qa&268435455)&&!(Xp&268435455)||po(fn,bn)}function $m(t,e){var n=ut;ut|=2;var r=_I();(fn!==t||bn!==e)&&(yi=null,$a(t,e));do try{ZV();break}catch(s){xI(t,s)}while(!0);if(f_(),ut=n,Vm.current=r,nn!==null)throw Error(ae(261));return fn=null,bn=0,ln}function ZV(){for(;nn!==null;)EI(nn)}function JV(){for(;nn!==null&&!T4();)EI(nn)}function EI(t){var e=kI(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?bI(t):nn=e,S_.current=null}function bI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qV(n,e),n!==null){n.flags&=32767,nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,nn=null;return}}else if(n=HV(n,e,Cr),n!==null){nn=n;return}if(e=e.sibling,e!==null){nn=e;return}nn=e=t}while(e!==null);ln===0&&(ln=5)}function ka(t,e,n){var r=wt,s=Xr.transition;try{Xr.transition=null,wt=1,eF(t,e,n,r)}finally{Xr.transition=s,wt=r}return null}function eF(t,e,n,r){do uc();while(No!==null);if(ut&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(D4(t,i),t===fn&&(nn=fn=null,bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ef||(Ef=!0,SI(Em,function(){return uc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xr.transition,Xr.transition=null;var o=wt;wt=1;var a=ut;ut|=4,S_.current=null,KV(t,n),vI(n,t),xV(tw),Tm=!!ew,tw=ew=null,t.current=n,QV(n),k4(),ut=a,wt=o,Xr.transition=i}else t.current=n;if(Ef&&(Ef=!1,No=t,Um=s),i=t.pendingLanes,i===0&&(Mo=null),C4(n.stateNode),_r(t,Qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fm)throw Fm=!1,t=_w,_w=null,t;return Um&1&&t.tag!==0&&uc(),i=t.pendingLanes,i&1?t===Ew?vd++:(vd=0,Ew=t):vd=0,ua(),null}function uc(){if(No!==null){var t=rC(Um),e=Xr.transition,n=wt;try{if(Xr.transition=null,wt=16>t?16:t,No===null)var r=!1;else{if(t=No,No=null,Um=0,ut&6)throw Error(ae(331));var s=ut;for(ut|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(_e=u;_e!==null;){var h=_e;switch(h.tag){case 0:case 11:case 15:pd(8,h,i)}var f=h.child;if(f!==null)f.return=h,_e=f;else for(;_e!==null;){h=_e;var p=h.sibling,g=h.return;if(mI(h),h===u){_e=null;break}if(p!==null){p.return=g,_e=p;break}_e=g}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pd(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,_e=_;break e}_e=i.return}}var y=t.current;for(_e=y;_e!==null;){o=_e;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,_e=b;else e:for(o=y;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yp(9,a)}}catch(P){Ht(a,a.return,P)}if(a===o){_e=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,_e=C;break e}_e=a.return}}if(ut=s,ua(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Bp,t)}catch{}r=!0}return r}finally{wt=n,Xr.transition=e}}return!1}function Y1(t,e,n){e=Vc(n,e),e=rI(t,e,1),t=Do(t,e,1),e=tr(),t!==null&&(yh(t,1,e),_r(t,e))}function Ht(t,e,n){if(t.tag===3)Y1(t,t,n);else for(;e!==null;){if(e.tag===3){Y1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mo===null||!Mo.has(r))){t=Vc(n,t),t=sI(e,t,1),e=Do(e,t,1),t=tr(),e!==null&&(yh(e,1,t),_r(e,t));break}}e=e.return}}function tF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(bn&n)===n&&(ln===4||ln===3&&(bn&130023424)===bn&&500>Qt()-C_?$a(t,0):N_|=n),_r(t,e)}function TI(t,e){e===0&&(t.mode&1?(e=hf,hf<<=1,!(hf&130023424)&&(hf=4194304)):e=1);var n=tr();t=Oi(t,e),t!==null&&(yh(t,e,n),_r(t,n))}function nF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),TI(t,n)}function rF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),TI(t,n)}var kI;kI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yr=!1,WV(t,e,n);yr=!!(t.flags&131072)}else yr=!1,Mt&&e.flags&1048576&&IC(e,Am,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yf(t,e),t=e.pendingProps;var s=Dc(e,qn.current);cc(e,n),s=__(null,e,r,t,s,n);var i=E_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(i=!0,Im(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,g_(e),s.updater=Qp,e.stateNode=s,s._reactInternals=e,uw(e,r,t,n),e=fw(null,e,r,!0,i,n)):(e.tag=0,Mt&&i&&c_(e),Yn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iF(r),t=ds(r,t),s){case 0:e=hw(null,e,r,t,n);break e;case 1:e=U1(null,e,r,t,n);break e;case 11:e=V1(null,e,r,t,n);break e;case 14:e=F1(null,e,r,ds(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),hw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),U1(t,e,r,s,n);case 3:e:{if(lI(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,MC(t,e),Dm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vc(Error(ae(423)),e),e=$1(t,e,r,n,s);break e}else if(r!==s){s=Vc(Error(ae(424)),e),e=$1(t,e,r,n,s);break e}else for(jr=jo(e.stateNode.containerInfo.firstChild),Mr=e,Mt=!0,gs=null,n=jC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mc(),r===s){e=Li(t,e,n);break e}Yn(t,e,r,n)}e=e.child}return e;case 5:return OC(e),t===null&&aw(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nw(r,s)?o=null:i!==null&&nw(r,i)&&(e.flags|=32),aI(t,e),Yn(t,e,o,n),e.child;case 6:return t===null&&aw(e),null;case 13:return cI(t,e,n);case 4:return v_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oc(e,null,r,n):Yn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),V1(t,e,r,s,n);case 7:return Yn(t,e,e.pendingProps,n),e.child;case 8:return Yn(t,e,e.pendingProps.children,n),e.child;case 12:return Yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,St(Pm,r._currentValue),r._currentValue=o,i!==null)if(Es(i.value,o)){if(i.children===s.children&&!wr.current){e=Li(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ri(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),lw(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lw(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,cc(e,n),s=ts(s),r=r(s),e.flags|=1,Yn(t,e,r,n),e.child;case 14:return r=e.type,s=ds(r,e.pendingProps),s=ds(r.type,s),F1(t,e,r,s,n);case 15:return iI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),Yf(t,e),e.tag=1,xr(r)?(t=!0,Im(e)):t=!1,cc(e,n),nI(e,r,s),uw(e,r,s,n),fw(null,e,r,!0,t,n);case 19:return uI(t,e,n);case 22:return oI(t,e,n)}throw Error(ae(156,e.tag))};function SI(t,e){return JN(t,e)}function sF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(t,e,n,r){return new sF(t,e,n,r)}function P_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iF(t){if(typeof t=="function")return P_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xx)return 11;if(t===Zx)return 14}return 2}function Lo(t,e){var n=t.alternate;return n===null?(n=Qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")P_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gl:return Ba(n.children,s,i,e);case Yx:o=8,s|=8;break;case Dy:return t=Qr(12,n,e,s|2),t.elementType=Dy,t.lanes=i,t;case My:return t=Qr(13,n,e,s),t.elementType=My,t.lanes=i,t;case Oy:return t=Qr(19,n,e,s),t.elementType=Oy,t.lanes=i,t;case ON:return Zp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case DN:o=10;break e;case MN:o=9;break e;case Xx:o=11;break e;case Zx:o=14;break e;case uo:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Qr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ba(t,e,n,r){return t=Qr(7,t,r,e),t.lanes=n,t}function Zp(t,e,n,r){return t=Qr(22,t,r,e),t.elementType=ON,t.lanes=n,t.stateNode={isHidden:!1},t}function Bv(t,e,n){return t=Qr(6,t,null,e),t.lanes=n,t}function zv(t,e,n){return e=Qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bv(0),this.expirationTimes=bv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function j_(t,e,n,r,s,i,o,a,c){return t=new oF(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},g_(i),t}function aF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NI(t){if(!t)return qo;t=t._reactInternals;e:{if(yl(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(xr(n))return NC(t,n,e)}return e}function CI(t,e,n,r,s,i,o,a,c){return t=j_(n,r,!0,t,s,i,o,a,c),t.context=NI(null),n=t.current,r=tr(),s=Oo(n),i=Ri(r,s),i.callback=e??null,Do(n,i,s),t.current.lanes=s,yh(t,s,r),_r(t,r),t}function Jp(t,e,n,r){var s=e.current,i=tr(),o=Oo(s);return n=NI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Do(s,e,o),t!==null&&(xs(t,s,o,i),Gf(t,s,o)),o}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function D_(t,e){X1(t,e),(t=t.alternate)&&X1(t,e)}function lF(){return null}var II=typeof reportError=="function"?reportError:function(t){console.error(t)};function M_(t){this._internalRoot=t}eg.prototype.render=M_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Jp(t,e,null,null)};eg.prototype.unmount=M_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ya(function(){Jp(null,t,null,null)}),e[Mi]=null}};function eg(t){this._internalRoot=t}eg.prototype.unstable_scheduleHydration=function(t){if(t){var e=oC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mo.length&&e!==0&&e<mo[n].priority;n++);mo.splice(n,0,t),n===0&&lC(t)}};function O_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function cF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bm(o);i.call(u)}}var o=CI(e,r,t,0,null,!1,!1,"",Z1);return t._reactRootContainer=o,t[Mi]=o.current,Vd(t.nodeType===8?t.parentNode:t),Ya(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Bm(c);a.call(u)}}var c=j_(t,0,!1,null,null,!1,!1,"",Z1);return t._reactRootContainer=c,t[Mi]=c.current,Vd(t.nodeType===8?t.parentNode:t),Ya(function(){Jp(e,c,n,r)}),c}function ng(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Bm(o);a.call(c)}}Jp(e,o,t,s)}else o=cF(n,e,t,s,r);return Bm(o)}sC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qu(e.pendingLanes);n!==0&&(t_(e,n|1),_r(e,Qt()),!(ut&6)&&(Fc=Qt()+500,ua()))}break;case 13:Ya(function(){var r=Oi(t,1);if(r!==null){var s=tr();xs(r,t,1,s)}}),D_(t,1)}};n_=function(t){if(t.tag===13){var e=Oi(t,134217728);if(e!==null){var n=tr();xs(e,t,134217728,n)}D_(t,134217728)}};iC=function(t){if(t.tag===13){var e=Oo(t),n=Oi(t,e);if(n!==null){var r=tr();xs(n,t,e,r)}D_(t,e)}};oC=function(){return wt};aC=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}};qy=function(t,e,n){switch(e){case"input":if(Fy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qp(r);if(!s)throw Error(ae(90));VN(r),Fy(r,s)}}}break;case"textarea":UN(t,n);break;case"select":e=n.value,e!=null&&ic(t,!!n.multiple,e,!1)}};GN=I_;KN=Ya;var uF={usingClientEntryPoint:!1,Events:[xh,Xl,qp,HN,qN,I_]},Uu={findFiberByHostInstance:Ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dF={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XN(t),t===null?null:t.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||lF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{Bp=bf.inject(dF),Ws=bf}catch{}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uF;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O_(e))throw Error(ae(200));return aF(t,e,null,n)};Fr.createRoot=function(t,e){if(!O_(t))throw Error(ae(299));var n=!1,r="",s=II;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=j_(t,1,!1,null,null,n,!1,r,s),t[Mi]=e.current,Vd(t.nodeType===8?t.parentNode:t),new M_(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=XN(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return Ya(t)};Fr.hydrate=function(t,e,n){if(!tg(e))throw Error(ae(200));return ng(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!O_(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=II;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CI(e,null,t,1,n??null,s,!1,i,o),t[Mi]=e.current,Vd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new eg(e)};Fr.render=function(t,e,n){if(!tg(e))throw Error(ae(200));return ng(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!tg(t))throw Error(ae(40));return t._reactRootContainer?(Ya(function(){ng(null,null,t,!1,function(){t._reactRootContainer=null,t[Mi]=null})}),!0):!1};Fr.unstable_batchedUpdates=I_;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tg(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return ng(t,e,n,!1,r)};Fr.version="18.3.1-next-f1338f8080-20240426";function RI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RI)}catch(t){console.error(t)}}RI(),RN.exports=Fr;var wl=RN.exports;const AI=vN(wl);var PI,J1=wl;PI=J1.createRoot,J1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}var Co;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Co||(Co={}));const eT="popstate";function hF(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return kw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zm(s)}return mF(e,n,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fF(){return Math.random().toString(36).substr(2,8)}function tT(t,e){return{usr:t.state,key:t.key,idx:e}}function kw(t,e,n,r){return n===void 0&&(n=null),Gd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?au(e):e,{state:n,key:e&&e.key||r||fF()})}function zm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function au(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mF(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Co.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Gd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Co.Pop;let T=h(),_=T==null?null:T-u;u=T,c&&c({action:a,location:v.location,delta:_})}function p(T,_){a=Co.Push;let y=kw(v.location,T,_);u=h()+1;let b=tT(y,u),C=v.createHref(y);try{o.pushState(b,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(C)}i&&c&&c({action:a,location:v.location,delta:1})}function g(T,_){a=Co.Replace;let y=kw(v.location,T,_);u=h();let b=tT(y,u),C=v.createHref(y);o.replaceState(b,"",C),i&&c&&c({action:a,location:v.location,delta:0})}function x(T){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof T=="string"?T:zm(T);return y=y.replace(/ $/,"%20"),Yt(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let v={get action(){return a},get location(){return t(s,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(eT,f),c=T,()=>{s.removeEventListener(eT,f),c=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let _=x(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(T){return o.go(T)}};return v}var nT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nT||(nT={}));function pF(t,e,n){return n===void 0&&(n="/"),gF(t,e,n)}function gF(t,e,n,r){let s=typeof e=="string"?au(e):e,i=L_(s.pathname||"/",n);if(i==null)return null;let o=DI(t);vF(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=IF(i);a=SF(o[c],u)}return a}function DI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Vo([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DI(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:TF(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of MI(i.path))s(i,o,c)}),e}function MI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MI(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function vF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yF=/^:[\w-]+$/,wF=3,xF=2,_F=1,EF=10,bF=-2,rT=t=>t==="*";function TF(t,e){let n=t.split("/"),r=n.length;return n.some(rT)&&(r+=bF),e&&(r+=xF),n.filter(s=>!rT(s)).reduce((s,i)=>s+(yF.test(i)?wF:i===""?_F:EF),r)}function kF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function SF(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=NF({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Vo([i,f.pathname]),pathnameBase:jF(Vo([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Vo([i,f.pathnameBase]))}return o}function NF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CF(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let v=a[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=a[f];return g&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function CF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function L_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?au(t):t;return{pathname:n?n.startsWith("/")?n:AF(n,e):e,search:DF(r),hash:MF(s)}}function AF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function V_(t,e){let n=PF(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function F_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=au(t):(s=Gd({},t),Yt(!s.pathname||!s.pathname.includes("?"),Wv("?","pathname","search",s)),Yt(!s.pathname||!s.pathname.includes("#"),Wv("#","pathname","hash",s)),Yt(!s.search||!s.search.includes("#"),Wv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let c=RF(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Vo=t=>t.join("/").replace(/\/\/+/g,"/"),jF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OI=["post","put","patch","delete"];new Set(OI);const LF=["get",...OI];new Set(LF);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(this,arguments)}const U_=m.createContext(null),VF=m.createContext(null),da=m.createContext(null),rg=m.createContext(null),Qi=m.createContext({outlet:null,matches:[],isDataRoute:!1}),LI=m.createContext(null);function FF(t,e){let{relative:n}=e===void 0?{}:e;lu()||Yt(!1);let{basename:r,navigator:s}=m.useContext(da),{hash:i,pathname:o,search:a}=FI(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Vo([r,o])),s.createHref({pathname:c,search:a,hash:i})}function lu(){return m.useContext(rg)!=null}function xl(){return lu()||Yt(!1),m.useContext(rg).location}function VI(t){m.useContext(da).static||m.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=m.useContext(Qi);return t?ZF():UF()}function UF(){lu()||Yt(!1);let t=m.useContext(U_),{basename:e,future:n,navigator:r}=m.useContext(da),{matches:s}=m.useContext(Qi),{pathname:i}=xl(),o=JSON.stringify(V_(s,n.v7_relativeSplatPath)),a=m.useRef(!1);return VI(()=>{a.current=!0}),m.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=F_(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Vo([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function $_(){let{matches:t}=m.useContext(Qi),e=t[t.length-1];return e?e.params:{}}function FI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext(da),{matches:s}=m.useContext(Qi),{pathname:i}=xl(),o=JSON.stringify(V_(s,r.v7_relativeSplatPath));return m.useMemo(()=>F_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function $F(t,e){return BF(t,e)}function BF(t,e,n,r){lu()||Yt(!1);let{navigator:s,static:i}=m.useContext(da),{matches:o}=m.useContext(Qi),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=xl(),f;if(e){var p;let _=typeof e=="string"?au(e):e;u==="/"||(p=_.pathname)!=null&&p.startsWith(u)||Yt(!1),f=_}else f=h;let g=f.pathname||"/",x=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=pF(t,{pathname:x}),T=GF(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Vo([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Vo([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&T?m.createElement(rg.Provider,{value:{location:Kd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Co.Pop}},T):T}function zF(){let t=XF(),e=OF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const WF=m.createElement(zF,null);class HF extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(Qi.Provider,{value:this.props.routeContext},m.createElement(LI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qF(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(U_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Qi.Provider,{value:e},r)}function GF(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Yt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:g}=n,x=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,x=!1,v=null,T=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||WF,c&&(u<0&&p===0?(JF("route-fallback"),x=!0,T=null):u===p&&(x=!0,T=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),y=()=>{let b;return g?b=v:x?b=T:f.route.Component?b=m.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,m.createElement(qF,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?m.createElement(HF,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var UI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UI||{}),$I=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($I||{});function KF(t){let e=m.useContext(U_);return e||Yt(!1),e}function QF(t){let e=m.useContext(VF);return e||Yt(!1),e}function YF(t){let e=m.useContext(Qi);return e||Yt(!1),e}function BI(t){let e=YF(),n=e.matches[e.matches.length-1];return n.route.id||Yt(!1),n.route.id}function XF(){var t;let e=m.useContext(LI),n=QF(),r=BI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ZF(){let{router:t}=KF(UI.UseNavigateStable),e=BI($I.UseNavigateStable),n=m.useRef(!1);return VI(()=>{n.current=!0}),m.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Kd({fromRouteId:e},i)))},[t,e])}const sT={};function JF(t,e,n){sT[t]||(sT[t]=!0)}function eU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iT(t){let{to:e,replace:n,state:r,relative:s}=t;lu()||Yt(!1);let{future:i,static:o}=m.useContext(da),{matches:a}=m.useContext(Qi),{pathname:c}=xl(),u=kr(),h=F_(e,V_(a,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return m.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function sn(t){Yt(!1)}function tU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Co.Pop,navigator:i,static:o=!1,future:a}=t;lu()&&Yt(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:Kd({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=au(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:x="default"}=r,v=m.useMemo(()=>{let T=L_(h,c);return T==null?null:{location:{pathname:T,search:f,hash:p,state:g,key:x},navigationType:s}},[c,h,f,p,g,x,s]);return v==null?null:m.createElement(da.Provider,{value:u},m.createElement(rg.Provider,{children:n,value:v}))}function nU(t){let{children:e,location:n}=t;return $F(Sw(e),n)}new Promise(()=>{});function Sw(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,Sw(r.props.children,i));return}r.type!==sn&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nw.apply(this,arguments)}function rU(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function sU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iU(t,e){return t.button===0&&(!e||e==="_self")&&!sU(t)}const oU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aU="6";try{window.__reactRouterVersion=aU}catch{}const lU="startTransition",oT=CN[lU];function cU(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=hF({window:s,v5Compat:!0}));let o=i.current,[a,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=m.useCallback(f=>{u&&oT?oT(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(h),[o,h]),m.useEffect(()=>eU(r),[r]),m.createElement(tU,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const uU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=m.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=rU(e,oU),{basename:g}=m.useContext(da),x,v=!1;if(typeof u=="string"&&dU.test(u)&&(x=u,uU))try{let b=new URL(window.location.href),C=u.startsWith("//")?new URL(b.protocol+u):new URL(u),P=L_(C.pathname,g);C.origin===b.origin&&P!=null?u=P+C.search+C.hash:v=!0}catch{}let T=FF(u,{relative:s}),_=hU(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:f});function y(b){r&&r(b),b.defaultPrevented||_(b)}return m.createElement("a",Nw({},p,{href:x||T,onClick:v||i?r:y,ref:n,target:c}))});var aT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aT||(aT={}));var lT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lT||(lT={}));function hU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=kr(),u=xl(),h=FI(t,{relative:o});return m.useCallback(f=>{if(iU(f,n)){f.preventDefault();let p=r!==void 0?r:zm(u)===zm(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,h,r,s,n,t,i,o,a])}const fU=1,mU=1e6;let Hv=0;function pU(){return Hv=(Hv+1)%Number.MAX_SAFE_INTEGER,Hv.toString()}const qv=new Map,cT=t=>{if(qv.has(t))return;const e=setTimeout(()=>{qv.delete(t),yd({type:"REMOVE_TOAST",toastId:t})},mU);qv.set(t,e)},gU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,fU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?cT(n):t.toasts.forEach(r=>{cT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},em=[];let tm={toasts:[]};function yd(t){tm=gU(tm,t),em.forEach(e=>{e(tm)})}function vU({...t}){const e=pU(),n=s=>yd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>yd({type:"DISMISS_TOAST",toastId:e});return yd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function jt(){const[t,e]=m.useState(tm);return m.useEffect(()=>(em.push(e),()=>{const n=em.indexOf(e);n>-1&&em.splice(n,1)}),[t]),{...t,toast:vU,dismiss:n=>yd({type:"DISMISS_TOAST",toastId:n})}}function fe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function uT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sg(...t){return e=>{let n=!1;const r=t.map(s=>{const i=uT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():uT(t[s],null)}}}}function it(...t){return m.useCallback(sg(...t),t)}function yU(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,c=m.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function or(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:p,children:g,...x}=f,v=((_=p==null?void 0:p[t])==null?void 0:_[c])||a,T=m.useMemo(()=>x,Object.values(x));return l.jsx(v.Provider,{value:T,children:g})};u.displayName=i+"Provider";function h(f,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[c])||a,x=m.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,wU(s,...e)]}function wU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Vi=m.forwardRef((t,e)=>{const{children:n,...r}=t,s=m.Children.toArray(n),i=s.find(xU);if(i){const o=i.props.children,a=s.map(c=>c===i?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:c);return l.jsx(Cw,{...r,ref:e,children:m.isValidElement(o)?m.cloneElement(o,void 0,a):null})}return l.jsx(Cw,{...r,ref:e,children:n})});Vi.displayName="Slot";var Cw=m.forwardRef((t,e)=>{const{children:n,...r}=t;if(m.isValidElement(n)){const s=EU(n),i=_U(r,n.props);return n.type!==m.Fragment&&(i.ref=e?sg(e,s):s),m.cloneElement(n,i)}return m.Children.count(n)>1?m.Children.only(null):null});Cw.displayName="SlotClone";var B_=({children:t})=>l.jsx(l.Fragment,{children:t});function xU(t){return m.isValidElement(t)&&t.type===B_}function _U(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function EU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ig(t){const e=t+"CollectionProvider",[n,r]=or(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:v}=g,T=ee.useRef(null),_=ee.useRef(new Map).current;return l.jsx(s,{scope:x,itemMap:_,collectionRef:T,children:v})};o.displayName=e;const a=t+"CollectionSlot",c=ee.forwardRef((g,x)=>{const{scope:v,children:T}=g,_=i(a,v),y=it(x,_.collectionRef);return l.jsx(Vi,{ref:y,children:T})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=ee.forwardRef((g,x)=>{const{scope:v,children:T,..._}=g,y=ee.useRef(null),b=it(x,y),C=i(u,v);return ee.useEffect(()=>(C.itemMap.set(y,{ref:y,..._}),()=>void C.itemMap.delete(y))),l.jsx(Vi,{[h]:"",ref:b,children:T})});f.displayName=u;function p(g){const x=i(t+"CollectionConsumer",g);return ee.useCallback(()=>{const T=x.collectionRef.current;if(!T)return[];const _=Array.from(T.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((C,P)=>_.indexOf(C.ref.current)-_.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,r]}var bU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ie=bU.reduce((t,e)=>{const n=m.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Vi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function z_(t,e){t&&wl.flushSync(()=>t.dispatchEvent(e))}function Nn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function TU(t,e=globalThis==null?void 0:globalThis.document){const n=Nn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var kU="DismissableLayer",Iw="dismissableLayer.update",SU="dismissableLayer.pointerDownOutside",NU="dismissableLayer.focusOutside",dT,zI=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=m.useContext(zI),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),x=it(e,N=>f(N)),v=Array.from(u.layers),[T]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(T),y=h?v.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,C=y>=_,P=IU(N=>{const E=N.target,S=[...u.branches].some(R=>R.contains(E));!C||S||(s==null||s(N),o==null||o(N),N.defaultPrevented||a==null||a())},p),L=RU(N=>{const E=N.target;[...u.branches].some(R=>R.contains(E))||(i==null||i(N),o==null||o(N),N.defaultPrevented||a==null||a())},p);return TU(N=>{y===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&a&&(N.preventDefault(),a()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(dT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),hT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=dT)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),hT())},[h,u]),m.useEffect(()=>{const N=()=>g({});return document.addEventListener(Iw,N),()=>document.removeEventListener(Iw,N)},[]),l.jsx(Ie.div,{...c,ref:x,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:fe(t.onFocusCapture,L.onFocusCapture),onBlurCapture:fe(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:fe(t.onPointerDownCapture,P.onPointerDownCapture)})});cu.displayName=kU;var CU="DismissableLayerBranch",WI=m.forwardRef((t,e)=>{const n=m.useContext(zI),r=m.useRef(null),s=it(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(Ie.div,{...t,ref:s})});WI.displayName=CU;function IU(t,e=globalThis==null?void 0:globalThis.document){const n=Nn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){HI(SU,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function RU(t,e=globalThis==null?void 0:globalThis.document){const n=Nn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&HI(NU,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hT(){const t=new CustomEvent(Iw);document.dispatchEvent(t)}function HI(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?z_(s,i):s.dispatchEvent(i)}var AU=cu,PU=WI,mn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},jU="Portal",Eh=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);mn(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?AI.createPortal(l.jsx(Ie.div,{...r,ref:e}),o):null});Eh.displayName=jU;function DU(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var $r=t=>{const{present:e,children:n}=t,r=MU(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=it(r.ref,OU(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};$r.displayName="Presence";function MU(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,c]=DU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Tf(r.current);i.current=a==="mounted"?u:"none"},[a]),mn(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Tf(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),mn(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const v=Tf(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},p=g=>{g.target===e&&(i.current=Tf(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Tf(t){return(t==null?void 0:t.animationName)||"none"}function OU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ei({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=LU({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Nn(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else s(u)},[i,t,s,a]);return[o,c]}function LU({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=Nn(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var VU="VisuallyHidden",bh=m.forwardRef((t,e)=>l.jsx(Ie.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));bh.displayName=VU;var FU=bh,W_="ToastProvider",[H_,UU,$U]=ig("Toast"),[qI,Vee]=or("Toast",[$U]),[BU,og]=qI(W_),GI=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${W_}\`. Expected non-empty \`string\`.`),l.jsx(H_.Provider,{scope:e,children:l.jsx(BU,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};GI.displayName=W_;var KI="ToastViewport",zU=["F8"],Rw="toast.viewportPause",Aw="toast.viewportResume",QI=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=zU,label:s="Notifications ({hotkey})",...i}=t,o=og(KI,n),a=UU(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=it(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;m.useEffect(()=>{const T=_=>{var b;r.length!==0&&r.every(C=>_[C]||_.code===C)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r]),m.useEffect(()=>{const T=c.current,_=f.current;if(x&&T&&_){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Rw);_.dispatchEvent(L),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Aw);_.dispatchEvent(L),o.isClosePausedRef.current=!1}},C=L=>{!T.contains(L.relatedTarget)&&b()},P=()=>{T.contains(document.activeElement)||b()};return T.addEventListener("focusin",y),T.addEventListener("focusout",C),T.addEventListener("pointermove",y),T.addEventListener("pointerleave",P),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{T.removeEventListener("focusin",y),T.removeEventListener("focusout",C),T.removeEventListener("pointermove",y),T.removeEventListener("pointerleave",P),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:T})=>{const y=a().map(b=>{const C=b.ref.current,P=[C,...n$(C)];return T==="forwards"?P:P.reverse()});return(T==="forwards"?y.reverse():y).flat()},[a]);return m.useEffect(()=>{const T=f.current;if(T){const _=y=>{var P,L,N;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const E=document.activeElement,S=y.shiftKey;if(y.target===T&&S){(P=u.current)==null||P.focus();return}const A=v({tabbingDirection:S?"backwards":"forwards"}),I=A.findIndex(U=>U===E);Gv(A.slice(I+1))?y.preventDefault():S?(L=u.current)==null||L.focus():(N=h.current)==null||N.focus()}};return T.addEventListener("keydown",_),()=>T.removeEventListener("keydown",_)}},[a,v]),l.jsxs(PU,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&l.jsx(Pw,{ref:u,onFocusFromOutsideViewport:()=>{const T=v({tabbingDirection:"forwards"});Gv(T)}}),l.jsx(H_.Slot,{scope:n,children:l.jsx(Ie.ol,{tabIndex:-1,...i,ref:p})}),x&&l.jsx(Pw,{ref:h,onFocusFromOutsideViewport:()=>{const T=v({tabbingDirection:"backwards"});Gv(T)}})]})});QI.displayName=KI;var YI="ToastFocusProxy",Pw=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=og(YI,n);return l.jsx(bh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Pw.displayName=YI;var ag="Toast",WU="toast.swipeStart",HU="toast.swipeMove",qU="toast.swipeCancel",GU="toast.swipeEnd",XI=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,c]=ei({prop:r,defaultProp:s,onChange:i});return l.jsx($r,{present:n||a,children:l.jsx(YU,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:Nn(t.onPause),onResume:Nn(t.onResume),onSwipeStart:fe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});XI.displayName=ag;var[KU,QU]=qI(ag,{onClose(){}}),YU=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...x}=t,v=og(ag,n),[T,_]=m.useState(null),y=it(e,U=>_(U)),b=m.useRef(null),C=m.useRef(null),P=s||v.duration,L=m.useRef(0),N=m.useRef(P),E=m.useRef(0),{onToastAdd:S,onToastRemove:R}=v,M=Nn(()=>{var Y;(T==null?void 0:T.contains(document.activeElement))&&((Y=v.viewport)==null||Y.focus()),o()}),A=m.useCallback(U=>{!U||U===1/0||(window.clearTimeout(E.current),L.current=new Date().getTime(),E.current=window.setTimeout(M,U))},[M]);m.useEffect(()=>{const U=v.viewport;if(U){const Y=()=>{A(N.current),u==null||u()},F=()=>{const te=new Date().getTime()-L.current;N.current=N.current-te,window.clearTimeout(E.current),c==null||c()};return U.addEventListener(Rw,F),U.addEventListener(Aw,Y),()=>{U.removeEventListener(Rw,F),U.removeEventListener(Aw,Y)}}},[v.viewport,P,c,u,A]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&A(P)},[i,P,v.isClosePausedRef,A]),m.useEffect(()=>(S(),()=>R()),[S,R]);const I=m.useMemo(()=>T?sR(T):null,[T]);return v.viewport?l.jsxs(l.Fragment,{children:[I&&l.jsx(XU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),l.jsx(KU,{scope:n,onClose:M,children:wl.createPortal(l.jsx(H_.ItemSlot,{scope:n,children:l.jsx(AU,{asChild:!0,onEscapeKeyDown:fe(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||M(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ie.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:fe(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:fe(t.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:fe(t.onPointerMove,U=>{if(!b.current)return;const Y=U.clientX-b.current.x,F=U.clientY-b.current.y,te=!!C.current,D=["left","right"].includes(v.swipeDirection),O=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,W=D?O(0,Y):0,Z=D?0:O(0,F),H=U.pointerType==="touch"?10:2,Q={x:W,y:Z},$={originalEvent:U,delta:Q};te?(C.current=Q,kf(HU,f,$,{discrete:!1})):fT(Q,v.swipeDirection,H)?(C.current=Q,kf(WU,h,$,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(Y)>H||Math.abs(F)>H)&&(b.current=null)}),onPointerUp:fe(t.onPointerUp,U=>{const Y=C.current,F=U.target;if(F.hasPointerCapture(U.pointerId)&&F.releasePointerCapture(U.pointerId),C.current=null,b.current=null,Y){const te=U.currentTarget,D={originalEvent:U,delta:Y};fT(Y,v.swipeDirection,v.swipeThreshold)?kf(GU,g,D,{discrete:!0}):kf(qU,p,D,{discrete:!0}),te.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),XU=t=>{const{__scopeToast:e,children:n,...r}=t,s=og(ag,e),[i,o]=m.useState(!1),[a,c]=m.useState(!1);return e$(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(Eh,{asChild:!0,children:l.jsx(bh,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},ZU="ToastTitle",ZI=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Ie.div,{...r,ref:e})});ZI.displayName=ZU;var JU="ToastDescription",JI=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Ie.div,{...r,ref:e})});JI.displayName=JU;var eR="ToastAction",tR=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(rR,{altText:n,asChild:!0,children:l.jsx(q_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${eR}\`. Expected non-empty \`string\`.`),null)});tR.displayName=eR;var nR="ToastClose",q_=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=QU(nR,n);return l.jsx(rR,{asChild:!0,children:l.jsx(Ie.button,{type:"button",...r,ref:e,onClick:fe(t.onClick,s.onClose)})})});q_.displayName=nR;var rR=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(Ie.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function sR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),t$(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...sR(r))}}),e}function kf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?z_(s,i):s.dispatchEvent(i)}var fT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function e$(t=()=>{}){const e=Nn(t);mn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function t$(t){return t.nodeType===t.ELEMENT_NODE}function n$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Gv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var r$=GI,iR=QI,oR=XI,aR=ZI,lR=JI,cR=tR,uR=q_;function dR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=dR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=dR(t))&&(r&&(r+=" "),r+=e);return r}const mT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,pT=hR,Th=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return pT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=mT(h)||mT(f);return s[u][p]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(x=>{let[v,T]=x;return Array.isArray(T)?T.includes({...i,...a}[v]):{...i,...a}[v]===T})?[...u,f,p]:u},[]);return pT(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>m.createElement("svg",{ref:c,...i$,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:fR("lucide",s),...a},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(o$,{ref:i,iconNode:e,className:fR(`lucide-${s$(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=ke("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=ke("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=ke("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=ke("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=ke("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=ke("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=ke("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=ke("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=ke("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=ke("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=ke("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=ke("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=ke("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=ke("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=ke("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=ke("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=ke("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=ke("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ke("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ke("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=ke("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=ke("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=ke("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ke("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=ke("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=ke("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),G_="-",I$=t=>{const e=A$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(G_);return a[0]===""&&a.length!==1&&a.shift(),ER(a,e)||R$(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},ER=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?ER(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(G_);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},xT=/^\[(.+)\]$/,R$=t=>{if(xT.test(t)){const e=xT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},A$=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return j$(Object.entries(t.classGroups),n).forEach(([i,o])=>{Fw(o,r,i,e)}),r},Fw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:_T(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(P$(s)){Fw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Fw(o,_T(e,i),n,r)})})},_T=(t,e)=>{let n=t;return e.split(G_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},P$=t=>t.isThemeGetter,j$=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,D$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},bR="!",M$=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,h=0,f;for(let T=0;T<a.length;T++){let _=a[T];if(u===0){if(_===s&&(r||a.slice(T,T+i)===e)){c.push(a.slice(h,T)),h=T+i;continue}if(_==="/"){f=T;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?a:a.substring(h),g=p.startsWith(bR),x=g?p.substring(1):p,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},O$=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},L$=t=>({cache:D$(t.cacheSize),parseClassName:M$(t),...I$(t)}),V$=/\s+/,F$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(V$);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let x=!!g,v=r(x?p.substring(0,g):p);if(!v){if(!x){a=u+(a.length>0?" "+a:a);continue}if(v=r(p),!v){a=u+(a.length>0?" "+a:a);continue}x=!1}const T=O$(h).join(":"),_=f?T+bR:T,y=_+v;if(i.includes(y))continue;i.push(y);const b=s(v,x);for(let C=0;C<b.length;++C){const P=b[C];i.push(_+P)}a=u+(a.length>0?" "+a:a)}return a};function U$(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=TR(e))&&(r&&(r+=" "),r+=n);return r}const TR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=TR(t[r]))&&(n&&(n+=" "),n+=e);return n};function $$(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=L$(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const h=F$(c,n);return s(c,h),h}return function(){return i(U$.apply(null,arguments))}}const It=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},kR=/^\[(?:([a-z-]+):)?(.+)\]$/i,B$=/^\d+\/\d+$/,z$=new Set(["px","full","screen"]),W$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,H$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,G$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mi=t=>dc(t)||z$.has(t)||B$.test(t),ro=t=>uu(t,"length",n3),dc=t=>!!t&&!Number.isNaN(Number(t)),Zv=t=>uu(t,"number",dc),$u=t=>!!t&&Number.isInteger(Number(t)),Q$=t=>t.endsWith("%")&&dc(t.slice(0,-1)),Ke=t=>kR.test(t),so=t=>W$.test(t),Y$=new Set(["length","size","percentage"]),X$=t=>uu(t,Y$,SR),Z$=t=>uu(t,"position",SR),J$=new Set(["image","url"]),e3=t=>uu(t,J$,s3),t3=t=>uu(t,"",r3),Bu=()=>!0,uu=(t,e,n)=>{const r=kR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},n3=t=>H$.test(t)&&!q$.test(t),SR=()=>!1,r3=t=>G$.test(t),s3=t=>K$.test(t),i3=()=>{const t=It("colors"),e=It("spacing"),n=It("blur"),r=It("brightness"),s=It("borderColor"),i=It("borderRadius"),o=It("borderSpacing"),a=It("borderWidth"),c=It("contrast"),u=It("grayscale"),h=It("hueRotate"),f=It("invert"),p=It("gap"),g=It("gradientColorStops"),x=It("gradientColorStopPositions"),v=It("inset"),T=It("margin"),_=It("opacity"),y=It("padding"),b=It("saturate"),C=It("scale"),P=It("sepia"),L=It("skew"),N=It("space"),E=It("translate"),S=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ke,e],A=()=>[Ke,e],I=()=>["",mi,ro],U=()=>["auto",dc,Ke],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Ke],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[dc,Ke];return{cacheSize:500,separator:":",theme:{colors:[Bu],spacing:[mi,ro],blur:["none","",so,Ke],brightness:Z(),borderColor:[t],borderRadius:["none","","full",so,Ke],borderSpacing:A(),borderWidth:I(),contrast:Z(),grayscale:O(),hueRotate:Z(),invert:O(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[Q$,ro],inset:M(),margin:M(),opacity:Z(),padding:A(),saturate:Z(),scale:Z(),sepia:O(),skew:Z(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Ke]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$u,Ke]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",$u,Ke]}],"grid-cols":[{"grid-cols":[Bu]}],"col-start-end":[{col:["auto",{span:["full",$u,Ke]},Ke]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Bu]}],"row-start-end":[{row:["auto",{span:[$u,Ke]},Ke]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zv]}],"font-family":[{font:[Bu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",dc,Zv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mi,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mi,ro]}],"underline-offset":[{"underline-offset":["auto",mi,Ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),Z$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",X$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},e3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[mi,Ke]}],"outline-w":[{outline:[mi,ro]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[mi,ro]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,t3]}],"shadow-color":[{shadow:[Bu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",so,Ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[$u,Ke]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[mi,ro,Zv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},o3=$$(i3),a3=()=>{const t="http://192.168.50.41:3000";return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.location.hostname!=="localhost"?t.replace("localhost",window.location.hostname):t},pn=a3();function le(...t){return o3(hR(t))}function ni(t,e="text"){if(t===null)return e==="text"?"text-gray-500":e==="bg"?"bg-gray-200":"border-gray-300";switch(t){case"RECOMMEND":return e==="text"?"text-rating-positive":e==="bg"?"bg-rating-positive":"border-rating-positive";case"NEUTRAL":return e==="text"?"text-rating-neutral":e==="bg"?"bg-rating-neutral":"border-rating-neutral";case"NOT_RECOMMEND":return e==="text"?"text-rating-negative":e==="bg"?"bg-rating-negative":"border-rating-negative";default:return e==="text"?"text-gray-500":e==="bg"?"bg-gray-200":"border-gray-300"}}function l3(t){if(!t)return"?";const e=t.split(/[\s_\-\.]+/).filter(Boolean);return e.length===0?"?":e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[1].charAt(0)).toUpperCase()}const K_=(t,e={})=>t,c3=r$,NR=m.forwardRef(({className:t,...e},n)=>l.jsx(iR,{ref:n,className:le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));NR.displayName=iR.displayName;const u3=Th("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CR=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(oR,{ref:r,className:le(u3({variant:e}),t),...n}));CR.displayName=oR.displayName;const d3=m.forwardRef(({className:t,...e},n)=>l.jsx(cR,{ref:n,className:le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));d3.displayName=cR.displayName;const IR=m.forwardRef(({className:t,...e},n)=>l.jsx(uR,{ref:n,className:le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(ti,{className:"h-4 w-4"})}));IR.displayName=uR.displayName;const RR=m.forwardRef(({className:t,...e},n)=>l.jsx(aR,{ref:n,className:le("text-sm font-semibold",t),...e}));RR.displayName=aR.displayName;const AR=m.forwardRef(({className:t,...e},n)=>l.jsx(lR,{ref:n,className:le("text-sm opacity-90",t),...e}));AR.displayName=lR.displayName;function h3(){const{toasts:t}=jt();return l.jsxs(c3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(CR,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(RR,{children:n}),r&&l.jsx(AR,{children:r})]}),s,l.jsx(IR,{})]},e)}),l.jsx(NR,{})]})}var ET=["light","dark"],f3="(prefers-color-scheme: dark)",m3=m.createContext(void 0),p3={setTheme:t=>{},themes:[]},g3=()=>{var t;return(t=m.useContext(m3))!=null?t:p3};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?ET.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(x,v=!1,T=!0)=>{let _=o?o[x]:x,y=v?x+"|| ''":`'${_}'`,b="";return s&&T&&!v&&ET.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),n==="class"?v||_?b+=`c.add(${y})`:b+="null":_&&(b+=`d[s](n,${y})`),b},g=t?`!function(){${h}${p(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${f3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var v3=t=>{switch(t){case"success":return x3;case"info":return E3;case"warning":return _3;case"error":return b3;default:return null}},y3=Array(12).fill(0),w3=({visible:t,className:e})=>ee.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ee.createElement("div",{className:"sonner-spinner"},y3.map((n,r)=>ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),x3=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_3=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),E3=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),b3=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),T3=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),k3=()=>{let[t,e]=ee.useState(document.hidden);return ee.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Uw=1,S3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Uw++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],ee.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(C3(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:h})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:h})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:h})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Uw++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},mr=new S3,N3=(t,e)=>{let n=(e==null?void 0:e.id)||Uw++;return mr.addToast({title:t,...e,id:n}),n},C3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",I3=N3,R3=()=>mr.toasts,A3=()=>mr.getActiveToasts();Object.assign(I3,{success:mr.success,info:mr.info,warning:mr.warning,error:mr.error,custom:mr.custom,message:mr.message,promise:mr.promise,dismiss:mr.dismiss,loading:mr.loading},{getHistory:R3,getToasts:A3});function P3(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}P3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sf(t){return t.label!==void 0}var j3=3,D3="32px",M3="16px",bT=4e3,O3=356,L3=14,V3=20,F3=200;function cs(...t){return t.filter(Boolean).join(" ")}function U3(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var $3=t=>{var e,n,r,s,i,o,a,c,u,h,f;let{invert:p,toast:g,unstyled:x,interacting:v,setHeights:T,visibleToasts:_,heights:y,index:b,toasts:C,expanded:P,removeToast:L,defaultRichColors:N,closeButton:E,style:S,cancelButtonStyle:R,actionButtonStyle:M,className:A="",descriptionClassName:I="",duration:U,position:Y,gap:F,loadingIcon:te,expandByDefault:D,classNames:O,icons:W,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:H}=t,[Q,$]=ee.useState(null),[ie,ge]=ee.useState(null),[G,me]=ee.useState(!1),[Fe,Pe]=ee.useState(!1),[je,X]=ee.useState(!1),[Ue,Qe]=ee.useState(!1),[ze,nt]=ee.useState(!1),[Xe,V]=ee.useState(0),[B,q]=ee.useState(0),ue=ee.useRef(g.duration||U||bT),ce=ee.useRef(null),se=ee.useRef(null),be=b===0,Oe=b+1<=_,Ae=g.type,We=g.dismissible!==!1,gn=g.className||"",Lt=g.descriptionClassName||"",Nt=ee.useMemo(()=>y.findIndex(Le=>Le.toastId===g.id)||0,[y,g.id]),lr=ee.useMemo(()=>{var Le;return(Le=g.closeButton)!=null?Le:E},[g.closeButton,E]),cr=ee.useMemo(()=>g.duration||U||bT,[g.duration,U]),Sr=ee.useRef(0),os=ee.useRef(0),ui=ee.useRef(0),Zi=ee.useRef(null),[sv,Eu]=Y.split("-"),bu=ee.useMemo(()=>y.reduce((Le,lt,_t)=>_t>=Nt?Le:Le+lt.height,0),[y,Nt]),Tu=k3(),ga=g.invert||p,va=Ae==="loading";os.current=ee.useMemo(()=>Nt*F+bu,[Nt,bu]),ee.useEffect(()=>{ue.current=cr},[cr]),ee.useEffect(()=>{me(!0)},[]),ee.useEffect(()=>{let Le=se.current;if(Le){let lt=Le.getBoundingClientRect().height;return q(lt),T(_t=>[{toastId:g.id,height:lt,position:g.position},..._t]),()=>T(_t=>_t.filter(vn=>vn.toastId!==g.id))}},[T,g.id]),ee.useLayoutEffect(()=>{if(!G)return;let Le=se.current,lt=Le.style.height;Le.style.height="auto";let _t=Le.getBoundingClientRect().height;Le.style.height=lt,q(_t),T(vn=>vn.find(ur=>ur.toastId===g.id)?vn.map(ur=>ur.toastId===g.id?{...ur,height:_t}:ur):[{toastId:g.id,height:_t,position:g.position},...vn])},[G,g.title,g.description,T,g.id]);let Wr=ee.useCallback(()=>{Pe(!0),V(os.current),T(Le=>Le.filter(lt=>lt.toastId!==g.id)),setTimeout(()=>{L(g)},F3)},[g,L,T,os]);ee.useEffect(()=>{if(g.promise&&Ae==="loading"||g.duration===1/0||g.type==="loading")return;let Le;return P||v||H&&Tu?(()=>{if(ui.current<Sr.current){let lt=new Date().getTime()-Sr.current;ue.current=ue.current-lt}ui.current=new Date().getTime()})():ue.current!==1/0&&(Sr.current=new Date().getTime(),Le=setTimeout(()=>{var lt;(lt=g.onAutoClose)==null||lt.call(g,g),Wr()},ue.current)),()=>clearTimeout(Le)},[P,v,g,Ae,H,Tu,Wr]),ee.useEffect(()=>{g.delete&&Wr()},[Wr,g.delete]);function di(){var Le,lt,_t;return W!=null&&W.loading?ee.createElement("div",{className:cs(O==null?void 0:O.loader,(Le=g==null?void 0:g.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Ae==="loading"},W.loading):te?ee.createElement("div",{className:cs(O==null?void 0:O.loader,(lt=g==null?void 0:g.classNames)==null?void 0:lt.loader,"sonner-loader"),"data-visible":Ae==="loading"},te):ee.createElement(w3,{className:cs(O==null?void 0:O.loader,(_t=g==null?void 0:g.classNames)==null?void 0:_t.loader),visible:Ae==="loading"})}return ee.createElement("li",{tabIndex:0,ref:se,className:cs(A,gn,O==null?void 0:O.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[Ae],(n=g==null?void 0:g.classNames)==null?void 0:n[Ae]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:N,"data-styled":!(g.jsx||g.unstyled||x),"data-mounted":G,"data-promise":!!g.promise,"data-swiped":ze,"data-removed":Fe,"data-visible":Oe,"data-y-position":sv,"data-x-position":Eu,"data-index":b,"data-front":be,"data-swiping":je,"data-dismissible":We,"data-type":Ae,"data-invert":ga,"data-swipe-out":Ue,"data-swipe-direction":ie,"data-expanded":!!(P||D&&G),style:{"--index":b,"--toasts-before":b,"--z-index":C.length-b,"--offset":`${Fe?Xe:os.current}px`,"--initial-height":D?"auto":`${B}px`,...S,...g.style},onDragEnd:()=>{X(!1),$(null),Zi.current=null},onPointerDown:Le=>{va||!We||(ce.current=new Date,V(os.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(X(!0),Zi.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,lt,_t,vn;if(Ue||!We)return;Zi.current=null;let ur=Number(((Le=se.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Dt=Number(((lt=se.current)==null?void 0:lt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),As=new Date().getTime()-((_t=ce.current)==null?void 0:_t.getTime()),yn=Q==="x"?ur:Dt,dr=Math.abs(yn)/As;if(Math.abs(yn)>=V3||dr>.11){V(os.current),(vn=g.onDismiss)==null||vn.call(g,g),ge(Q==="x"?ur>0?"right":"left":Dt>0?"down":"up"),Wr(),Qe(!0),nt(!1);return}X(!1),$(null)},onPointerMove:Le=>{var lt,_t,vn,ur;if(!Zi.current||!We||((lt=window.getSelection())==null?void 0:lt.toString().length)>0)return;let Dt=Le.clientY-Zi.current.y,As=Le.clientX-Zi.current.x,yn=(_t=t.swipeDirections)!=null?_t:U3(Y);!Q&&(Math.abs(As)>1||Math.abs(Dt)>1)&&$(Math.abs(As)>Math.abs(Dt)?"x":"y");let dr={x:0,y:0};Q==="y"?(yn.includes("top")||yn.includes("bottom"))&&(yn.includes("top")&&Dt<0||yn.includes("bottom")&&Dt>0)&&(dr.y=Dt):Q==="x"&&(yn.includes("left")||yn.includes("right"))&&(yn.includes("left")&&As<0||yn.includes("right")&&As>0)&&(dr.x=As),(Math.abs(dr.x)>0||Math.abs(dr.y)>0)&&nt(!0),(vn=se.current)==null||vn.style.setProperty("--swipe-amount-x",`${dr.x}px`),(ur=se.current)==null||ur.style.setProperty("--swipe-amount-y",`${dr.y}px`)}},lr&&!g.jsx?ee.createElement("button",{"aria-label":Z,"data-disabled":va,"data-close-button":!0,onClick:va||!We?()=>{}:()=>{var Le;Wr(),(Le=g.onDismiss)==null||Le.call(g,g)},className:cs(O==null?void 0:O.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=W==null?void 0:W.close)!=null?i:T3):null,g.jsx||m.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:ee.createElement(ee.Fragment,null,Ae||g.icon||g.promise?ee.createElement("div",{"data-icon":"",className:cs(O==null?void 0:O.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||di():null,g.type!=="loading"?g.icon||(W==null?void 0:W[Ae])||v3(Ae):null):null,ee.createElement("div",{"data-content":"",className:cs(O==null?void 0:O.content,(a=g==null?void 0:g.classNames)==null?void 0:a.content)},ee.createElement("div",{"data-title":"",className:cs(O==null?void 0:O.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?ee.createElement("div",{"data-description":"",className:cs(I,Lt,O==null?void 0:O.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),m.isValidElement(g.cancel)?g.cancel:g.cancel&&Sf(g.cancel)?ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||R,onClick:Le=>{var lt,_t;Sf(g.cancel)&&We&&((_t=(lt=g.cancel).onClick)==null||_t.call(lt,Le),Wr())},className:cs(O==null?void 0:O.cancelButton,(h=g==null?void 0:g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,m.isValidElement(g.action)?g.action:g.action&&Sf(g.action)?ee.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||M,onClick:Le=>{var lt,_t;Sf(g.action)&&((_t=(lt=g.action).onClick)==null||_t.call(lt,Le),!Le.defaultPrevented&&Wr())},className:cs(O==null?void 0:O.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function TT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function B3(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?M3:D3;function c(u){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),n}var z3=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:g,visibleToasts:x=j3,toastOptions:v,dir:T=TT(),gap:_=L3,loadingIcon:y,icons:b,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:P}=t,[L,N]=ee.useState([]),E=ee.useMemo(()=>Array.from(new Set([r].concat(L.filter(H=>H.position).map(H=>H.position)))),[L,r]),[S,R]=ee.useState([]),[M,A]=ee.useState(!1),[I,U]=ee.useState(!1),[Y,F]=ee.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=ee.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=ee.useRef(null),W=ee.useRef(!1),Z=ee.useCallback(H=>{N(Q=>{var $;return($=Q.find(ie=>ie.id===H.id))!=null&&$.delete||mr.dismiss(H.id),Q.filter(({id:ie})=>ie!==H.id)})},[]);return ee.useEffect(()=>mr.subscribe(H=>{if(H.dismiss){N(Q=>Q.map($=>$.id===H.id?{...$,delete:!0}:$));return}setTimeout(()=>{AI.flushSync(()=>{N(Q=>{let $=Q.findIndex(ie=>ie.id===H.id);return $!==-1?[...Q.slice(0,$),{...Q[$],...H},...Q.slice($+1)]:[H,...Q]})})})}),[]),ee.useEffect(()=>{if(h!=="system"){F(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:Q})=>{F(Q?"dark":"light")})}catch{H.addListener(({matches:$})=>{try{F($?"dark":"light")}catch(ie){console.error(ie)}})}},[h]),ee.useEffect(()=>{L.length<=1&&A(!1)},[L]),ee.useEffect(()=>{let H=Q=>{var $,ie;s.every(ge=>Q[ge]||Q.code===ge)&&(A(!0),($=te.current)==null||$.focus()),Q.code==="Escape"&&(document.activeElement===te.current||(ie=te.current)!=null&&ie.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),ee.useEffect(()=>{if(te.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,W.current=!1)}},[te.current]),ee.createElement("section",{ref:e,"aria-label":`${C} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((H,Q)=>{var $;let[ie,ge]=H.split("-");return L.length?ee.createElement("ol",{key:H,dir:T==="auto"?TT():T,tabIndex:-1,ref:te,className:a,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":ie,"data-lifted":M&&L.length>1&&!i,"data-x-position":ge,style:{"--front-toast-height":`${(($=S[0])==null?void 0:$.height)||0}px`,"--width":`${O3}px`,"--gap":`${_}px`,...g,...B3(c,u)},onBlur:G=>{W.current&&!G.currentTarget.contains(G.relatedTarget)&&(W.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||W.current||(W.current=!0,O.current=G.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{I||A(!1)},onDragEnd:()=>A(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},L.filter(G=>!G.position&&Q===0||G.position===H).map((G,me)=>{var Fe,Pe;return ee.createElement($3,{key:G.id,icons:b,index:me,toast:G,defaultRichColors:f,duration:(Fe=v==null?void 0:v.duration)!=null?Fe:p,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:x,closeButton:(Pe=v==null?void 0:v.closeButton)!=null?Pe:o,interacting:I,position:H,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Z,toasts:L.filter(je=>je.position==G.position),heights:S.filter(je=>je.position==G.position),setHeights:R,expandByDefault:i,gap:_,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const W3=({...t})=>{const{theme:e="system"}=g3();return l.jsx(z3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var cg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ug=typeof window>"u"||"Deno"in globalThis;function hs(){}function H3(t,e){return typeof t=="function"?t(e):t}function q3(t){return typeof t=="number"&&t>=0&&t!==1/0}function G3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function kT(t,e){return typeof t=="function"?t(e):t}function K3(t,e){return typeof t=="function"?t(e):t}function ST(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Q_(o,e.options))return!1}else if(!Zd(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function NT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Xd(e.options.mutationKey)!==Xd(i))return!1}else if(!Zd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Q_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Xd)(t)}function Xd(t){return JSON.stringify(t,(e,n)=>$w(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Zd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Zd(t[n],e[n])):!1}function PR(t,e){if(t===e)return t;const n=CT(t)&&CT(e);if(n||$w(t)&&$w(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=PR(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function CT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $w(t){if(!IT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!IT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function IT(t){return Object.prototype.toString.call(t)==="[object Object]"}function Q3(t){return new Promise(e=>{setTimeout(e,t)})}function Y3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?PR(t,e):e}function X3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Z3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Y_=Symbol();function jR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Y_?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Oa,_o,Tc,cN,J3=(cN=class extends cg{constructor(){super();ht(this,Oa);ht(this,_o);ht(this,Tc);qe(this,Tc,e=>{if(!ug&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,_o)||this.setEventListener(J(this,Tc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,_o))==null||e.call(this),qe(this,_o,void 0))}setEventListener(e){var n;qe(this,Tc,e),(n=J(this,_o))==null||n.call(this),qe(this,_o,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Oa)!==e&&(qe(this,Oa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,Oa)=="boolean"?J(this,Oa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Oa=new WeakMap,_o=new WeakMap,Tc=new WeakMap,cN),DR=new J3,kc,Eo,Sc,uN,e5=(uN=class extends cg{constructor(){super();ht(this,kc,!0);ht(this,Eo);ht(this,Sc);qe(this,Sc,e=>{if(!ug&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Eo)||this.setEventListener(J(this,Sc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Eo))==null||e.call(this),qe(this,Eo,void 0))}setEventListener(e){var n;qe(this,Sc,e),(n=J(this,Eo))==null||n.call(this),qe(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){J(this,kc)!==e&&(qe(this,kc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,kc)}},kc=new WeakMap,Eo=new WeakMap,Sc=new WeakMap,uN),Hm=new e5;function t5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function n5(t){return Math.min(1e3*2**t,3e4)}function MR(t){return(t??"online")==="online"?Hm.isOnline():!0}var OR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Jv(t){return t instanceof OR}function LR(t){let e=!1,n=0,r=!1,s;const i=t5(),o=v=>{var T;r||(p(new OR(v)),(T=t.abort)==null||T.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>DR.isFocused()&&(t.networkMode==="always"||Hm.isOnline())&&t.canRun(),h=()=>MR(t.networkMode)&&t.canRun(),f=v=>{var T;r||(r=!0,(T=t.onSuccess)==null||T.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var T;r||(r=!0,(T=t.onError)==null||T.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var T;s=_=>{(r||u())&&v(_)},(T=t.onPause)==null||T.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),x=()=>{if(r)return;let v;const T=n===0?t.initialPromise:void 0;try{v=T??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(f).catch(_=>{var L;if(r)return;const y=t.retry??(ug?0:3),b=t.retryDelay??n5,C=typeof b=="function"?b(n,_):b,P=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!P){p(_);return}n++,(L=t.onFail)==null||L.call(t,n,_),Q3(C).then(()=>u()?void 0:g()).then(()=>{e?p(_):x()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?x():g().then(x),i)}}function r5(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var er=r5(),La,dN,VR=(dN=class{constructor(){ht(this,La)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),q3(this.gcTime)&&qe(this,La,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ug?1/0:5*60*1e3))}clearGcTimeout(){J(this,La)&&(clearTimeout(J(this,La)),qe(this,La,void 0))}},La=new WeakMap,dN),Nc,Cc,Hr,Va,On,ph,Fa,fs,gi,hN,s5=(hN=class extends VR{constructor(n){super();ht(this,fs);ht(this,Nc);ht(this,Cc);ht(this,Hr);ht(this,Va);ht(this,On);ht(this,ph);ht(this,Fa);qe(this,Fa,!1),qe(this,ph,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,Va,n.client),qe(this,Hr,J(this,Va).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,Nc,o5(this.options)),this.state=n.state??J(this,Nc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=J(this,On))==null?void 0:n.promise}setOptions(n){this.options={...J(this,ph),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Hr).remove(this)}setData(n,r){const s=Y3(this.state.data,n,this.options);return Pn(this,fs,gi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Pn(this,fs,gi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=J(this,On))==null?void 0:s.promise;return(i=J(this,On))==null||i.cancel(n),r?r.then(hs).catch(hs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Nc))}isActive(){return this.observers.some(n=>K3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Y_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!G3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,On))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,On))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),J(this,Hr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(J(this,On)&&(J(this,Fa)?J(this,On).cancel({revert:!0}):J(this,On).cancelRetry()),this.scheduleGc()),J(this,Hr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pn(this,fs,gi).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,On))return J(this,On).continueRetry(),J(this,On).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(qe(this,Fa,!0),s.signal)})},o=()=>{const p=jR(this.options,r),g={client:J(this,Va),queryKey:this.queryKey,meta:this.meta};return i(g),qe(this,Fa,!1),this.options.persister?this.options.persister(p,g,this):p(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:J(this,Va),state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),qe(this,Cc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Pn(this,fs,gi).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=p=>{var g,x,v,T;Jv(p)&&p.silent||Pn(this,fs,gi).call(this,{type:"error",error:p}),Jv(p)||((x=(g=J(this,Hr).config).onError)==null||x.call(g,p,this),(T=(v=J(this,Hr).config).onSettled)==null||T.call(v,this.state.data,p,this)),this.scheduleGc()};return qe(this,On,LR({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,x,v,T;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(x=(g=J(this,Hr).config).onSuccess)==null||x.call(g,p,this),(T=(v=J(this,Hr).config).onSettled)==null||T.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Pn(this,fs,gi).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Pn(this,fs,gi).call(this,{type:"pause"})},onContinue:()=>{Pn(this,fs,gi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),J(this,On).start()}},Nc=new WeakMap,Cc=new WeakMap,Hr=new WeakMap,Va=new WeakMap,On=new WeakMap,ph=new WeakMap,Fa=new WeakMap,fs=new WeakSet,gi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...i5(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Jv(i)&&i.revert&&J(this,Cc)?{...J(this,Cc),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),er.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,Hr).notify({query:this,type:"updated",action:n})})},hN);function i5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function o5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ms,fN,a5=(fN=class extends cg{constructor(e={}){super();ht(this,Ms);this.config=e,qe(this,Ms,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Q_(s,n);let o=this.get(i);return o||(o=new s5({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){J(this,Ms).has(e.queryHash)||(J(this,Ms).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,Ms).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,Ms).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,Ms).get(e)}getAll(){return[...J(this,Ms).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ST(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ST(e,r)):n}notify(e){er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ms=new WeakMap,fN),Os,Qn,Ua,Ls,ao,mN,l5=(mN=class extends VR{constructor(n){super();ht(this,Ls);ht(this,Os);ht(this,Qn);ht(this,Ua);this.mutationId=n.mutationId,qe(this,Qn,n.mutationCache),qe(this,Os,[]),this.state=n.state||c5(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){J(this,Os).includes(n)||(J(this,Os).push(n),this.clearGcTimeout(),J(this,Qn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,Os,J(this,Os).filter(r=>r!==n)),this.scheduleGc(),J(this,Qn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){J(this,Os).length||(this.state.status==="pending"?this.scheduleGc():J(this,Qn).remove(this))}continue(){var n;return((n=J(this,Ua))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,c,u,h,f,p,g,x,v,T,_,y,b,C,P,L,N,E;qe(this,Ua,LR({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(S,R)=>{Pn(this,Ls,ao).call(this,{type:"failed",failureCount:S,error:R})},onPause:()=>{Pn(this,Ls,ao).call(this,{type:"pause"})},onContinue:()=>{Pn(this,Ls,ao).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Qn).canRun(this)}));const r=this.state.status==="pending",s=!J(this,Ua).canStart();try{if(!r){Pn(this,Ls,ao).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=J(this,Qn).config).onMutate)==null?void 0:o.call(i,n,this));const R=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,n));R!==this.state.context&&Pn(this,Ls,ao).call(this,{type:"pending",context:R,variables:n,isPaused:s})}const S=await J(this,Ua).start();return await((h=(u=J(this,Qn).config).onSuccess)==null?void 0:h.call(u,S,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,S,n,this.state.context)),await((x=(g=J(this,Qn).config).onSettled)==null?void 0:x.call(g,S,null,this.state.variables,this.state.context,this)),await((T=(v=this.options).onSettled)==null?void 0:T.call(v,S,null,n,this.state.context)),Pn(this,Ls,ao).call(this,{type:"success",data:S}),S}catch(S){try{throw await((y=(_=J(this,Qn).config).onError)==null?void 0:y.call(_,S,n,this.state.context,this)),await((C=(b=this.options).onError)==null?void 0:C.call(b,S,n,this.state.context)),await((L=(P=J(this,Qn).config).onSettled)==null?void 0:L.call(P,void 0,S,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,S,n,this.state.context)),S}finally{Pn(this,Ls,ao).call(this,{type:"error",error:S})}}finally{J(this,Qn).runNext(this)}}},Os=new WeakMap,Qn=new WeakMap,Ua=new WeakMap,Ls=new WeakSet,ao=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),er.batch(()=>{J(this,Os).forEach(s=>{s.onMutationUpdate(n)}),J(this,Qn).notify({mutation:this,type:"updated",action:n})})},mN);function c5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,ms,gh,pN,u5=(pN=class extends cg{constructor(e={}){super();ht(this,xi);ht(this,ms);ht(this,gh);this.config=e,qe(this,xi,new Set),qe(this,ms,new Map),qe(this,gh,0)}build(e,n,r){const s=new l5({mutationCache:this,mutationId:++of(this,gh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){J(this,xi).add(e);const n=Nf(e);if(typeof n=="string"){const r=J(this,ms).get(n);r?r.push(e):J(this,ms).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,xi).delete(e)){const n=Nf(e);if(typeof n=="string"){const r=J(this,ms).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,ms).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Nf(e);if(typeof n=="string"){const r=J(this,ms).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Nf(e);if(typeof n=="string"){const s=(r=J(this,ms).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){er.batch(()=>{J(this,xi).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,xi).clear(),J(this,ms).clear()})}getAll(){return Array.from(J(this,xi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>NT(n,r))}findAll(e={}){return this.getAll().filter(n=>NT(e,n))}notify(e){er.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return er.batch(()=>Promise.all(e.map(n=>n.continue().catch(hs))))}},xi=new WeakMap,ms=new WeakMap,gh=new WeakMap,pN);function Nf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function RT(t){return{onFetch:(e,n)=>{var h,f,p,g,x;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const T=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=jR(e.options,e.fetchOptions),y=async(b,C,P)=>{if(v)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const L={client:e.client,queryKey:e.queryKey,pageParam:C,direction:P?"backward":"forward",meta:e.options.meta};T(L);const N=await _(L),{maxPages:E}=e.options,S=P?Z3:X3;return{pages:S(b.pages,N,E),pageParams:S(b.pageParams,C,E)}};if(s&&i.length){const b=s==="backward",C=b?d5:AT,P={pages:i,pageParams:o},L=C(r,P);a=await y(P,L,b)}else{const b=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:AT(r,a);if(c>0&&C==null)break;a=await y(a,C),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var v,T;return(T=(v=e.options).persister)==null?void 0:T.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function AT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function d5(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var zt,bo,To,Ic,Rc,ko,Ac,Pc,gN,h5=(gN=class{constructor(t={}){ht(this,zt);ht(this,bo);ht(this,To);ht(this,Ic);ht(this,Rc);ht(this,ko);ht(this,Ac);ht(this,Pc);qe(this,zt,t.queryCache||new a5),qe(this,bo,t.mutationCache||new u5),qe(this,To,t.defaultOptions||{}),qe(this,Ic,new Map),qe(this,Rc,new Map),qe(this,ko,0)}mount(){of(this,ko)._++,J(this,ko)===1&&(qe(this,Ac,DR.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,zt).onFocus())})),qe(this,Pc,Hm.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,zt).onOnline())})))}unmount(){var t,e;of(this,ko)._--,J(this,ko)===0&&((t=J(this,Ac))==null||t.call(this),qe(this,Ac,void 0),(e=J(this,Pc))==null||e.call(this),qe(this,Pc,void 0))}isFetching(t){return J(this,zt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,bo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,zt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,zt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(kT(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,zt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,zt).get(r.queryHash),i=s==null?void 0:s.state.data,o=H3(e,i);if(o!==void 0)return J(this,zt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return er.batch(()=>J(this,zt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,zt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,zt);er.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,zt);return er.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=er.batch(()=>J(this,zt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(hs).catch(hs)}invalidateQueries(t,e={}){return er.batch(()=>(J(this,zt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=er.batch(()=>J(this,zt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(hs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(hs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,zt).build(this,e);return n.isStaleByTime(kT(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hs).catch(hs)}fetchInfiniteQuery(t){return t.behavior=RT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hs).catch(hs)}ensureInfiniteQueryData(t){return t.behavior=RT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Hm.isOnline()?J(this,bo).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,zt)}getMutationCache(){return J(this,bo)}getDefaultOptions(){return J(this,To)}setDefaultOptions(t){qe(this,To,t)}setQueryDefaults(t,e){J(this,Ic).set(Xd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,Ic).values()],n={};return e.forEach(r=>{Zd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,Rc).set(Xd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,Rc).values()],n={};return e.forEach(r=>{Zd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,To).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Q_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Y_&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,To).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,zt).clear(),J(this,bo).clear()}},zt=new WeakMap,bo=new WeakMap,To=new WeakMap,Ic=new WeakMap,Rc=new WeakMap,ko=new WeakMap,Ac=new WeakMap,Pc=new WeakMap,gN),f5=m.createContext(void 0),m5=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(f5.Provider,{value:t,children:e}));const p5=()=>{};var PT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},g5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},UR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new v5;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y5=function(t){const e=FR(t);return UR.encodeByteArray(e,!0)},qm=function(t){return y5(t).replace(/\./g,"")},$R=function(t){try{return UR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=()=>w5().__FIREBASE_DEFAULTS__,_5=()=>{if(typeof process>"u"||typeof PT>"u")return;const t=PT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$R(t[1]);return e&&JSON.parse(e)},dg=()=>{try{return p5()||x5()||_5()||E5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BR=t=>{var e,n;return(n=(e=dg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zR=t=>{const e=BR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},WR=()=>{var t;return(t=dg())===null||t===void 0?void 0:t.config},HR=t=>{var e;return(e=dg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qm(JSON.stringify(n)),qm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function k5(){var t;const e=(t=dg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function C5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I5(){const t=Gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function R5(){return!k5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A5(){try{return typeof indexedDB=="object"}catch{return!1}}function P5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="FirebaseError";class Br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j5,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?D5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Br(s,a,r)}}function D5(t,e){return t.replace(M5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M5=/\{\$([^}]+)}/g;function O5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jT(i)&&jT(o)){if(!Fi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function L5(t,e){const n=new V5(t,e);return n.subscribe.bind(n)}class V5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ey),s.error===void 0&&(s.error=ey),s.complete===void 0&&(s.complete=ey);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ey(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new b5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B5(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $5(t){return t===Sa?void 0:t}function B5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const W5={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},H5=rt.INFO,q5={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},G5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=q5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X_{constructor(e){this.name=e,this._logLevel=H5,this._logHandler=G5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const K5=(t,e)=>e.some(n=>t instanceof n);let DT,MT;function Q5(){return DT||(DT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y5(){return MT||(MT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GR=new WeakMap,Bw=new WeakMap,KR=new WeakMap,ty=new WeakMap,Z_=new WeakMap;function X5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Fo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GR.set(n,t)}).catch(()=>{}),Z_.set(e,t),e}function Z5(t){if(Bw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bw.set(t,e)}let zw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J5(t){zw=t(zw)}function eB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ny(this),e,...n);return KR.set(r,e.sort?e.sort():[e]),Fo(r)}:Y5().includes(t)?function(...e){return t.apply(ny(this),e),Fo(GR.get(this))}:function(...e){return Fo(t.apply(ny(this),e))}}function tB(t){return typeof t=="function"?eB(t):(t instanceof IDBTransaction&&Z5(t),K5(t,Q5())?new Proxy(t,zw):t)}function Fo(t){if(t instanceof IDBRequest)return X5(t);if(ty.has(t))return ty.get(t);const e=tB(t);return e!==t&&(ty.set(t,e),Z_.set(e,t)),e}const ny=t=>Z_.get(t);function nB(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Fo(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fo(o.result),c.oldVersion,c.newVersion,Fo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const rB=["get","getKey","getAll","getAllKeys","count"],sB=["put","add","delete","clear"],ry=new Map;function OT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ry.get(e))return ry.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rB.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return ry.set(e,i),i}J5(t=>({...t,get:(e,n,r)=>OT(e,n)||t.get(e,n,r),has:(e,n)=>!!OT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ww="@firebase/app",LT="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new X_("@firebase/app"),aB="@firebase/app-compat",lB="@firebase/analytics-compat",cB="@firebase/analytics",uB="@firebase/app-check-compat",dB="@firebase/app-check",hB="@firebase/auth",fB="@firebase/auth-compat",mB="@firebase/database",pB="@firebase/data-connect",gB="@firebase/database-compat",vB="@firebase/functions",yB="@firebase/functions-compat",wB="@firebase/installations",xB="@firebase/installations-compat",_B="@firebase/messaging",EB="@firebase/messaging-compat",bB="@firebase/performance",TB="@firebase/performance-compat",kB="@firebase/remote-config",SB="@firebase/remote-config-compat",NB="@firebase/storage",CB="@firebase/storage-compat",IB="@firebase/firestore",RB="@firebase/vertexai",AB="@firebase/firestore-compat",PB="firebase",jB="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="[DEFAULT]",DB={[Ww]:"fire-core",[aB]:"fire-core-compat",[cB]:"fire-analytics",[lB]:"fire-analytics-compat",[dB]:"fire-app-check",[uB]:"fire-app-check-compat",[hB]:"fire-auth",[fB]:"fire-auth-compat",[mB]:"fire-rtdb",[pB]:"fire-data-connect",[gB]:"fire-rtdb-compat",[vB]:"fire-fn",[yB]:"fire-fn-compat",[wB]:"fire-iid",[xB]:"fire-iid-compat",[_B]:"fire-fcm",[EB]:"fire-fcm-compat",[bB]:"fire-perf",[TB]:"fire-perf-compat",[kB]:"fire-rc",[SB]:"fire-rc-compat",[NB]:"fire-gcs",[CB]:"fire-gcs-compat",[IB]:"fire-fst",[AB]:"fire-fst-compat",[RB]:"fire-vertex","fire-js":"fire-js",[PB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Map,MB=new Map,qw=new Map;function VT(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(qw.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;qw.set(e,t);for(const n of Gm.values())VT(n,t);for(const n of MB.values())VT(n,t);return!0}function hg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uo=new Sh("app","Firebase",OB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=jB;function QR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hw,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Uo.create("bad-app-name",{appName:String(s)});if(n||(n=WR()),!n)throw Uo.create("no-options");const i=Gm.get(s);if(i){if(Fi(n,i.options)&&Fi(r,i.config))return i;throw Uo.create("duplicate-app",{appName:s})}const o=new z5(s);for(const c of qw.values())o.addComponent(c);const a=new LB(n,r,o);return Gm.set(s,a),a}function J_(t=Hw){const e=Gm.get(t);if(!e&&t===Hw&&WR())return QR();if(!e)throw Uo.create("no-app",{appName:t});return e}function Gs(t,e,n){var r;let s=(r=DB[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(a.join(" "));return}Ja(new Go(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="firebase-heartbeat-database",FB=1,Jd="firebase-heartbeat-store";let sy=null;function YR(){return sy||(sy=nB(VB,FB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Uo.create("idb-open",{originalErrorMessage:t.message})})),sy}async function UB(t){try{const n=(await YR()).transaction(Jd),r=await n.objectStore(Jd).get(XR(t));return await n.done,r}catch(e){if(e instanceof Br)Ui.warn(e.message);else{const n=Uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function FT(t,e){try{const r=(await YR()).transaction(Jd,"readwrite");await r.objectStore(Jd).put(e,XR(t)),await r.done}catch(n){if(n instanceof Br)Ui.warn(n.message);else{const r=Uo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(r.message)}}}function XR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=1024,BB=30;class zB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=UT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>BB){const o=qB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=UT(),{heartbeatsToSend:r,unsentEntries:s}=WB(this._heartbeatsCache.heartbeats),i=qm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ui.warn(n),""}}}function UT(){return new Date().toISOString().substring(0,10)}function WB(t,e=$B){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$T(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$T(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A5()?P5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return FT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return FT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $T(t){return qm(JSON.stringify({version:2,heartbeats:t})).length}function qB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(t){Ja(new Go("platform-logger",e=>new iB(e),"PRIVATE")),Ja(new Go("heartbeat",e=>new zB(e),"PRIVATE")),Gs(Ww,LT,t),Gs(Ww,LT,"esm2017"),Gs("fire-js","")}GB("");var KB="firebase",QB="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(KB,QB,"app");var Fs=function(){return Fs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fs.apply(this,arguments)};function Ch(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function ZR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XB=ZR,JR=new Sh("auth","Firebase",ZR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new X_("@firebase/auth");function ZB(t,...e){Km.logLevel<=rt.WARN&&Km.warn(`Auth (${_l}): ${t}`,...e)}function nm(t,...e){Km.logLevel<=rt.ERROR&&Km.error(`Auth (${_l}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,...e){throw e0(t,...e)}function Ks(t,...e){return e0(t,...e)}function eA(t,e,n){const r=Object.assign(Object.assign({},XB()),{[e]:n});return new Sh("auth","Firebase",r).create(e,{appName:t.name})}function Ai(t){return eA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JR.create(t,...e)}function Ce(t,e,...n){if(!t)throw e0(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nm(e),new Error(e)}function $i(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JB(){return BT()==="http:"||BT()==="https:"}function BT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JB()||N5()||"connection"in navigator)?navigator.onLine:!0}function t9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=T5()||C5()}get(){return e9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new Ih(3e4,6e4);function Cs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zr(t,e,n,r,s={}){return nA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Nh(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return S5()||(u.referrerPolicy="no-referrer"),tA.fetch()(rA(t,t.config.apiHost,n,a),u)})}async function nA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},n9),e);try{const s=new i9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Cf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Cf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Cf(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw eA(t,h,u);ss(t,h)}}catch(s){if(s instanceof Br)throw s;ss(t,"network-request-failed",{message:String(s)})}}async function Rh(t,e,n,r,s={}){const i=await zr(t,e,n,r,s);return"mfaPendingCredential"in i&&ss(t,"multi-factor-auth-required",{_serverResponse:i}),i}function rA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?t0(t.config,s):`${t.config.apiScheme}://${s}`}function s9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class i9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),r9.get())})}}function Cf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ks(t,e,r);return s.customData._tokenResponse=n,s}function zT(t){return t!==void 0&&t.enterprise!==void 0}class o9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function a9(t,e){return zr(t,"GET","/v2/recaptchaConfig",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l9(t,e){return zr(t,"POST","/v1/accounts:delete",e)}async function sA(t,e){return zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c9(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=n0(r);Ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wd(iy(s.auth_time)),issuedAtTime:wd(iy(s.iat)),expirationTime:wd(iy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function iy(t){return Number(t)*1e3}function n0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nm("JWT malformed, contained fewer than 3 sections"),null;try{const s=$R(n);return s?JSON.parse(s):(nm("Failed to decode base64 JWT payload"),null)}catch(s){return nm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function WT(t){const e=n0(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Br&&u9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function u9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wd(this.lastLoginAt),this.creationTime=wd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await el(t,sA(n,{idToken:r}));Ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iA(i.providerUserInfo):[],a=f9(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Kw(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function h9(t){const e=Tt(t);await Qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iA(t){return t.map(e=>{var{providerId:n}=e,r=Ch(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e){const n=await nA(t,{},async()=>{const r=Nh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=rA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function p9(t,e){return zr(t,"POST","/v2/accounts:revokeToken",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=WT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await m9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new hc;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hc,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Si{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ch(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await el(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c9(this,e)}reload(){return h9(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await el(this,l9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:C,isAnonymous:P,providerData:L,stsTokenManager:N}=n;Ce(b&&N,e,"internal-error");const E=hc.fromJSON(this.name,N);Ce(typeof b=="string",e,"internal-error"),io(f,e.name),io(p,e.name),Ce(typeof C=="boolean",e,"internal-error"),Ce(typeof P=="boolean",e,"internal-error"),io(g,e.name),io(x,e.name),io(v,e.name),io(T,e.name),io(_,e.name),io(y,e.name);const S=new Si({uid:b,auth:e,email:p,emailVerified:C,displayName:f,isAnonymous:P,photoURL:x,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:_,lastLoginAt:y});return L&&Array.isArray(L)&&(S.providerData=L.map(R=>Object.assign({},R))),T&&(S._redirectEventId=T),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new hc;s.updateFromServerResponse(n);const i=new Si({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new hc;a.updateFromIdToken(r);const c=new Si({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Kw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;function Ni(t){$i(t instanceof Function,"Expected a class definition");let e=HT.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oA.type="NONE";const qT=oA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e,n){return`firebase:${t}:${e}:${n}`}class fc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=rm(this.userKey,s.apiKey,i),this.fullPersistenceKey=rm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fc(Ni(qT),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ni(qT);const o=rm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=Si._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new fc(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new fc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hA(e))return"Blackberry";if(fA(e))return"Webos";if(lA(e))return"Safari";if((e.includes("chrome/")||cA(e))&&!e.includes("edge/"))return"Chrome";if(dA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aA(t=Gn()){return/firefox\//i.test(t)}function lA(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cA(t=Gn()){return/crios\//i.test(t)}function uA(t=Gn()){return/iemobile/i.test(t)}function dA(t=Gn()){return/android/i.test(t)}function hA(t=Gn()){return/blackberry/i.test(t)}function fA(t=Gn()){return/webos/i.test(t)}function r0(t=Gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g9(t=Gn()){var e;return r0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function v9(){return I5()&&document.documentMode===10}function mA(t=Gn()){return r0(t)||dA(t)||fA(t)||hA(t)||/windows phone/i.test(t)||uA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e=[]){let n;switch(t){case"Browser":n=GT(Gn());break;case"Worker":n=`${GT(Gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e={}){return zr(t,"GET","/v2/passwordPolicy",Cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=6;class _9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:x9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KT(this),this.idTokenSubscription=new KT(this),this.beforeStateQueue=new y9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await fc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sA(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(Ai(this));const n=e?Tt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w9(this),n=new _9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await p9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await fc.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yi(t){return Tt(t)}class KT{constructor(e){this.auth=e,this.observer=null,this.addObserver=L5(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b9(t){fg=t}function gA(t){return fg.loadJS(t)}function T9(){return fg.recaptchaEnterpriseScript}function k9(){return fg.gapiScript}function S9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class N9{constructor(){this.enterprise=new C9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class C9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const I9="recaptcha-enterprise",vA="NO_RECAPTCHA";class R9{constructor(e){this.type=I9,this.auth=Yi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{a9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new o9(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;zT(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(vA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N9().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&zT(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=T9();c.length!==0&&(c+=a),gA(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function QT(t,e,n,r=!1,s=!1){const i=new R9(t);let o;if(s)o=vA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ym(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await QT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await QT(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t,e){const n=hg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Fi(i,e??{}))return s;ss(s,"already-initialized")}return n.initialize({options:e})}function P9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j9(t,e,n){const r=Yi(t);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=yA(e),{host:o,port:a}=D9(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Fi(u,r.config.emulator)&&Fi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,M9()}function yA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D9(t){const e=yA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:YT(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:YT(o)}}}function YT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function M9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e){return zr(t,"POST","/v1/accounts:resetPassword",Cs(t,e))}async function O9(t,e){return zr(t,"POST","/v1/accounts:update",e)}async function L9(t,e){return zr(t,"POST","/v1/accounts:signUp",e)}async function V9(t,e){return zr(t,"POST","/v1/accounts:update",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(t,e){return Rh(t,"POST","/v1/accounts:signInWithPassword",Cs(t,e))}async function xA(t,e){return zr(t,"POST","/v1/accounts:sendOobCode",Cs(t,e))}async function U9(t,e){return xA(t,e)}async function $9(t,e){return xA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(t,e){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}async function z9(t,e){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends s0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new eh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new eh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,n,"signInWithPassword",F9);case"emailLink":return B9(e,{email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,r,"signUpPassword",L9);case"emailLink":return z9(e,{idToken:n,email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e){return Rh(t,"POST","/v1/accounts:signInWithIdp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9="http://localhost";class tl extends s0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ch(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new tl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mc(e,n)}buildRequest(){const e={requestUri:W9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q9(t){const e=Xu(Zu(t)).link,n=e?Xu(Zu(e)).deep_link_id:null,r=Xu(Zu(t)).deep_link_id;return(r?Xu(Zu(r)).link:null)||r||n||e||t}class i0{constructor(e){var n,r,s,i,o,a;const c=Xu(Zu(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=H9((s=c.mode)!==null&&s!==void 0?s:null);Ce(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=q9(e);try{return new i0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,n){return eh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=i0.parseLink(n);return Ce(r,"argument-error"),eh._fromEmailAndCode(e,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends _A{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Ah{constructor(){super("facebook.com")}static credential(e){return tl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return tl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vo.credential(n,r)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Ah{constructor(){super("github.com")}static credential(e){return tl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Ah{constructor(){super("twitter.com")}static credential(e,n){return tl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wo.credential(n,r)}catch{return null}}}wo.TWITTER_SIGN_IN_METHOD="twitter.com";wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(t,e){return Rh(t,"POST","/v1/accounts:signUp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Si._fromIdTokenResponse(e,r,s),o=XT(r);return new nl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=XT(r);return new nl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function XT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Br{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xm(e,n,r,s)}}function EA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xm._fromErrorAndOperation(t,i,e,r):i})}async function K9(t,e,n=!1){const r=await el(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return nl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e,n=!1){const{auth:r}=t;if(Pr(r.app))return Promise.reject(Ai(r));const s="reauthenticate";try{const i=await el(t,EA(r,s,e,t),n);Ce(i.idToken,r,"internal-error");const o=n0(i.idToken);Ce(o,r,"internal-error");const{sub:a}=o;return Ce(t.uid===a,r,"user-mismatch"),nl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e,n=!1){if(Pr(t.app))return Promise.reject(Ai(t));const r="signIn",s=await EA(t,r,e),i=await nl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Q9(t,e){return TA(Yi(t),e)}async function Y9(t,e){return bA(Tt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?a0._fromServerResponse(e,n):"totpInfo"in n?l0._fromServerResponse(e,n):ss(e,"internal-error")}}class a0 extends o0{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new a0(n)}}class l0 extends o0{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new l0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(t){const e=Yi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kA(t,e,n){const r=Yi(t);await Ym(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$9)}async function X9(t,e,n){await wA(Tt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&c0(t),r})}async function SA(t,e){await V9(Tt(t),{oobCode:e})}async function Z9(t,e){const n=Tt(t),r=await wA(n,{oobCode:e}),s=r.requestType;switch(Ce(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(r.mfaInfo,n,"internal-error");default:Ce(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=o0._fromServerResponse(Yi(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function J9(t,e){const{data:n}=await Z9(Tt(t),e);return n.email}async function e6(t,e,n){if(Pr(t.app))return Promise.reject(Ai(t));const r=Yi(t),o=await Ym(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&c0(t),c}),a=await nl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function t6(t,e,n){return Pr(t.app)?Promise.reject(Ai(t)):Q9(Tt(t),El.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&c0(t),r})}async function n6(t,e){const n=Tt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await U9(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(t,e){return zr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Tt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await el(r,r6(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function s6(t,e){return i6(Tt(t),null,e)}async function i6(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await el(t,O9(r,i));await t._updateTokensIfNecessary(o,!0)}function o6(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function a6(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function l6(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function c6(t){return Tt(t).signOut()}const Zm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=1e3,d6=10;class CA extends NA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);v9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,d6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},u6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CA.type="LOCAL";const h6=CA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends NA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IA.type="SESSION";const RA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new mg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await f6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=u0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}function p6(t){Qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function g6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function y6(){return AA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebaseLocalStorageDb",w6=1,Jm="firebaseLocalStorage",jA="fbase_key";class Ph{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pg(t,e){return t.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function x6(){const t=indexedDB.deleteDatabase(PA);return new Ph(t).toPromise()}function Yw(){const t=indexedDB.open(PA,w6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jm,{keyPath:jA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jm)?e(r):(r.close(),await x6(),e(await Yw()))})})}async function ZT(t,e,n){const r=pg(t,!0).put({[jA]:e,value:n});return new Ph(r).toPromise()}async function _6(t,e){const n=pg(t,!1).get(e),r=await new Ph(n).toPromise();return r===void 0?null:r.value}function JT(t,e){const n=pg(t,!0).delete(e);return new Ph(n).toPromise()}const E6=800,b6=3;class DA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>b6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mg._getInstance(y6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await g6(),!this.activeServiceWorker)return;this.sender=new m6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yw();return await ZT(e,Zm,"1"),await JT(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>JT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pg(s,!1).getAll();return new Ph(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DA.type="LOCAL";const T6=DA;new Ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e){return e?Ni(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends s0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function S6(t){return TA(t.auth,new d0(t),t.bypassAuthState)}function N6(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),bA(n,new d0(t),t.bypassAuthState)}async function C6(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),K9(n,new d0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S6;case"linkViaPopup":case"linkViaRedirect":return C6;case"reauthViaPopup":case"reauthViaRedirect":return N6;default:ss(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Ih(2e3,1e4);class sc extends MA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,sc.currentPopupAction&&sc.currentPopupAction.cancel(),sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=u0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I6.get())};e()}}sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="pendingRedirect",sm=new Map;class A6 extends MA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sm.get(this.auth._key());if(!e){try{const r=await P6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sm.set(this.auth._key(),e)}return this.bypassAuthState||sm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P6(t,e){const n=M6(e),r=D6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function j6(t,e){sm.set(t._key(),e)}function D6(t){return Ni(t._redirectPersistence)}function M6(t){return rm(R6,t.config.apiKey,t.name)}async function O6(t,e,n=!1){if(Pr(t.app))return Promise.reject(Ai(t));const r=Yi(t),s=k6(r,e),o=await new A6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=10*60*1e3;class V6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ks(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L6&&this.cachedEventUids.clear(),this.cachedEventUids.has(ek(e))}saveEventToCache(e){this.cachedEventUids.add(ek(e)),this.lastProcessedEventTime=Date.now()}}function ek(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(t,e={}){return zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B6=/^https?/;async function z6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await U6(t);for(const n of e)try{if(W6(n))return}catch{}ss(t,"unauthorized-domain")}function W6(t){const e=Gw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!B6.test(n))return!1;if($6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=new Ih(3e4,6e4);function tk(){const t=Qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function q6(t){return new Promise((e,n)=>{var r,s,i;function o(){tk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tk(),n(Ks(t,"network-request-failed"))},timeout:H6.get()})}if(!((s=(r=Qs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Qs().gapi)===null||i===void 0)&&i.load)o();else{const a=S9("iframefcb");return Qs()[a]=()=>{gapi.load?o():n(Ks(t,"network-request-failed"))},gA(`${k9()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw im=null,e})}let im=null;function G6(t){return im=im||q6(t),im}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=new Ih(5e3,15e3),Q6="__/auth/iframe",Y6="emulator/auth/iframe",X6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J6(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?t0(e,Y6):`https://${t.config.authDomain}/${Q6}`,r={apiKey:e.apiKey,appName:t.name,v:_l},s=Z6.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Nh(r).slice(1)}`}async function ez(t){const e=await G6(t),n=Qs().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:J6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ks(t,"network-request-failed"),a=Qs().setTimeout(()=>{i(o)},K6.get());function c(){Qs().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nz=500,rz=600,sz="_blank",iz="http://localhost";class nk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oz(t,e,n,r=nz,s=rz){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},tz),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Gn().toLowerCase();n&&(a=cA(u)?sz:n),aA(u)&&(e=e||iz,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,x])=>`${p}${g}=${x},`,"");if(g9(u)&&a!=="_self")return az(e||"",a),new nk(null);const f=window.open(e||"",a,h);Ce(f,t,"popup-blocked");try{f.focus()}catch{}return new nk(f)}function az(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz="__/auth/handler",cz="emulator/auth/handler",uz=encodeURIComponent("fac");async function rk(t,e,n,r,s,i){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_l,eventId:s};if(e instanceof _A){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",O5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ah){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${uz}=${encodeURIComponent(c)}`:"";return`${dz(t)}?${Nh(a).slice(1)}${u}`}function dz({config:t}){return t.emulator?t0(t,cz):`https://${t.authDomain}/${lz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="webStorageSupport";class hz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=O6,this._overrideRedirectResult=j6}async _openPopup(e,n,r,s){var i;$i((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await rk(e,n,r,Gw(),s);return oz(e,o,u0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await rk(e,n,r,Gw(),s);return p6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($i(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ez(e),r=new V6(e);return n.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(oy,{type:oy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[oy];o!==void 0&&n(!!o),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=z6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mA()||lA()||r0()}}const fz=hz;var sk="@firebase/auth",ik="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gz(t){Ja(new Go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pA(t)},u=new E9(r,s,i,c);return P9(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new Go("auth-internal",e=>{const n=Yi(e.getProvider("auth").getImmediate());return(r=>new mz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(sk,ik,pz(t)),Gs(sk,ik,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=5*60,yz=HR("authIdTokenMaxAge")||vz;let ok=null;const wz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yz)return;const s=n==null?void 0:n.token;ok!==s&&(ok=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xz(t=J_()){const e=hg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A9(t,{popupRedirectResolver:fz,persistence:[T6,h6,RA]}),r=HR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=wz(i.toString());a6(n,o,()=>o(n.currentUser)),o6(n,a=>o(a))}}const s=BR("auth");return s&&j9(n,`http://${s}`),n}function _z(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}b9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ks("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_z().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gz("Browser");var ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,LA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function S(){}S.prototype=E.prototype,N.D=E.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(R,M,A){for(var I=Array(arguments.length-2),U=2;U<arguments.length;U++)I[U-2]=arguments[U];return E.prototype[M].apply(R,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,E,S){S||(S=0);var R=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)R[M]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(M=0;16>M;++M)R[M]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=N.g[0],S=N.g[1],M=N.g[2];var A=N.g[3],I=E+(A^S&(M^A))+R[0]+3614090360&4294967295;E=S+(I<<7&4294967295|I>>>25),I=A+(M^E&(S^M))+R[1]+3905402710&4294967295,A=E+(I<<12&4294967295|I>>>20),I=M+(S^A&(E^S))+R[2]+606105819&4294967295,M=A+(I<<17&4294967295|I>>>15),I=S+(E^M&(A^E))+R[3]+3250441966&4294967295,S=M+(I<<22&4294967295|I>>>10),I=E+(A^S&(M^A))+R[4]+4118548399&4294967295,E=S+(I<<7&4294967295|I>>>25),I=A+(M^E&(S^M))+R[5]+1200080426&4294967295,A=E+(I<<12&4294967295|I>>>20),I=M+(S^A&(E^S))+R[6]+2821735955&4294967295,M=A+(I<<17&4294967295|I>>>15),I=S+(E^M&(A^E))+R[7]+4249261313&4294967295,S=M+(I<<22&4294967295|I>>>10),I=E+(A^S&(M^A))+R[8]+1770035416&4294967295,E=S+(I<<7&4294967295|I>>>25),I=A+(M^E&(S^M))+R[9]+2336552879&4294967295,A=E+(I<<12&4294967295|I>>>20),I=M+(S^A&(E^S))+R[10]+4294925233&4294967295,M=A+(I<<17&4294967295|I>>>15),I=S+(E^M&(A^E))+R[11]+2304563134&4294967295,S=M+(I<<22&4294967295|I>>>10),I=E+(A^S&(M^A))+R[12]+1804603682&4294967295,E=S+(I<<7&4294967295|I>>>25),I=A+(M^E&(S^M))+R[13]+4254626195&4294967295,A=E+(I<<12&4294967295|I>>>20),I=M+(S^A&(E^S))+R[14]+2792965006&4294967295,M=A+(I<<17&4294967295|I>>>15),I=S+(E^M&(A^E))+R[15]+1236535329&4294967295,S=M+(I<<22&4294967295|I>>>10),I=E+(M^A&(S^M))+R[1]+4129170786&4294967295,E=S+(I<<5&4294967295|I>>>27),I=A+(S^M&(E^S))+R[6]+3225465664&4294967295,A=E+(I<<9&4294967295|I>>>23),I=M+(E^S&(A^E))+R[11]+643717713&4294967295,M=A+(I<<14&4294967295|I>>>18),I=S+(A^E&(M^A))+R[0]+3921069994&4294967295,S=M+(I<<20&4294967295|I>>>12),I=E+(M^A&(S^M))+R[5]+3593408605&4294967295,E=S+(I<<5&4294967295|I>>>27),I=A+(S^M&(E^S))+R[10]+38016083&4294967295,A=E+(I<<9&4294967295|I>>>23),I=M+(E^S&(A^E))+R[15]+3634488961&4294967295,M=A+(I<<14&4294967295|I>>>18),I=S+(A^E&(M^A))+R[4]+3889429448&4294967295,S=M+(I<<20&4294967295|I>>>12),I=E+(M^A&(S^M))+R[9]+568446438&4294967295,E=S+(I<<5&4294967295|I>>>27),I=A+(S^M&(E^S))+R[14]+3275163606&4294967295,A=E+(I<<9&4294967295|I>>>23),I=M+(E^S&(A^E))+R[3]+4107603335&4294967295,M=A+(I<<14&4294967295|I>>>18),I=S+(A^E&(M^A))+R[8]+1163531501&4294967295,S=M+(I<<20&4294967295|I>>>12),I=E+(M^A&(S^M))+R[13]+2850285829&4294967295,E=S+(I<<5&4294967295|I>>>27),I=A+(S^M&(E^S))+R[2]+4243563512&4294967295,A=E+(I<<9&4294967295|I>>>23),I=M+(E^S&(A^E))+R[7]+1735328473&4294967295,M=A+(I<<14&4294967295|I>>>18),I=S+(A^E&(M^A))+R[12]+2368359562&4294967295,S=M+(I<<20&4294967295|I>>>12),I=E+(S^M^A)+R[5]+4294588738&4294967295,E=S+(I<<4&4294967295|I>>>28),I=A+(E^S^M)+R[8]+2272392833&4294967295,A=E+(I<<11&4294967295|I>>>21),I=M+(A^E^S)+R[11]+1839030562&4294967295,M=A+(I<<16&4294967295|I>>>16),I=S+(M^A^E)+R[14]+4259657740&4294967295,S=M+(I<<23&4294967295|I>>>9),I=E+(S^M^A)+R[1]+2763975236&4294967295,E=S+(I<<4&4294967295|I>>>28),I=A+(E^S^M)+R[4]+1272893353&4294967295,A=E+(I<<11&4294967295|I>>>21),I=M+(A^E^S)+R[7]+4139469664&4294967295,M=A+(I<<16&4294967295|I>>>16),I=S+(M^A^E)+R[10]+3200236656&4294967295,S=M+(I<<23&4294967295|I>>>9),I=E+(S^M^A)+R[13]+681279174&4294967295,E=S+(I<<4&4294967295|I>>>28),I=A+(E^S^M)+R[0]+3936430074&4294967295,A=E+(I<<11&4294967295|I>>>21),I=M+(A^E^S)+R[3]+3572445317&4294967295,M=A+(I<<16&4294967295|I>>>16),I=S+(M^A^E)+R[6]+76029189&4294967295,S=M+(I<<23&4294967295|I>>>9),I=E+(S^M^A)+R[9]+3654602809&4294967295,E=S+(I<<4&4294967295|I>>>28),I=A+(E^S^M)+R[12]+3873151461&4294967295,A=E+(I<<11&4294967295|I>>>21),I=M+(A^E^S)+R[15]+530742520&4294967295,M=A+(I<<16&4294967295|I>>>16),I=S+(M^A^E)+R[2]+3299628645&4294967295,S=M+(I<<23&4294967295|I>>>9),I=E+(M^(S|~A))+R[0]+4096336452&4294967295,E=S+(I<<6&4294967295|I>>>26),I=A+(S^(E|~M))+R[7]+1126891415&4294967295,A=E+(I<<10&4294967295|I>>>22),I=M+(E^(A|~S))+R[14]+2878612391&4294967295,M=A+(I<<15&4294967295|I>>>17),I=S+(A^(M|~E))+R[5]+4237533241&4294967295,S=M+(I<<21&4294967295|I>>>11),I=E+(M^(S|~A))+R[12]+1700485571&4294967295,E=S+(I<<6&4294967295|I>>>26),I=A+(S^(E|~M))+R[3]+2399980690&4294967295,A=E+(I<<10&4294967295|I>>>22),I=M+(E^(A|~S))+R[10]+4293915773&4294967295,M=A+(I<<15&4294967295|I>>>17),I=S+(A^(M|~E))+R[1]+2240044497&4294967295,S=M+(I<<21&4294967295|I>>>11),I=E+(M^(S|~A))+R[8]+1873313359&4294967295,E=S+(I<<6&4294967295|I>>>26),I=A+(S^(E|~M))+R[15]+4264355552&4294967295,A=E+(I<<10&4294967295|I>>>22),I=M+(E^(A|~S))+R[6]+2734768916&4294967295,M=A+(I<<15&4294967295|I>>>17),I=S+(A^(M|~E))+R[13]+1309151649&4294967295,S=M+(I<<21&4294967295|I>>>11),I=E+(M^(S|~A))+R[4]+4149444226&4294967295,E=S+(I<<6&4294967295|I>>>26),I=A+(S^(E|~M))+R[11]+3174756917&4294967295,A=E+(I<<10&4294967295|I>>>22),I=M+(E^(A|~S))+R[2]+718787259&4294967295,M=A+(I<<15&4294967295|I>>>17),I=S+(A^(M|~E))+R[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+A&4294967295}r.prototype.u=function(N,E){E===void 0&&(E=N.length);for(var S=E-this.blockSize,R=this.B,M=this.h,A=0;A<E;){if(M==0)for(;A<=S;)s(this,N,A),A+=this.blockSize;if(typeof N=="string"){for(;A<E;)if(R[M++]=N.charCodeAt(A++),M==this.blockSize){s(this,R),M=0;break}}else for(;A<E;)if(R[M++]=N[A++],M==this.blockSize){s(this,R),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;var S=8*this.o;for(E=N.length-8;E<N.length;++E)N[E]=S&255,S/=256;for(this.u(N),N=Array(16),E=S=0;4>E;++E)for(var R=0;32>R;R+=8)N[S++]=this.g[E]>>>R&255;return N};function i(N,E){var S=a;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=E(N)}function o(N,E){this.h=E;for(var S=[],R=!0,M=N.length-1;0<=M;M--){var A=N[M]|0;R&&A==E||(S[M]=A,R=!1)}this.g=S}var a={};function c(N){return-128<=N&&128>N?i(N,function(E){return new o([E|0],0>E?-1:0)}):new o([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return T(u(-N));for(var E=[],S=1,R=0;N>=S;R++)E[R]=N/S|0,S*=4294967296;return new o(E,0)}function h(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return T(h(N.substring(1),E));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),R=f,M=0;M<N.length;M+=8){var A=Math.min(8,N.length-M),I=parseInt(N.substring(M,M+A),E);8>A?(A=u(Math.pow(E,A)),R=R.j(A).add(u(I))):(R=R.j(S),R=R.add(u(I)))}return R}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-T(this).m();for(var N=0,E=1,S=0;S<this.g.length;S++){var R=this.i(S);N+=(0<=R?R:4294967296+R)*E,E*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(v(this))return"-"+T(this).toString(N);for(var E=u(Math.pow(N,6)),S=this,R="";;){var M=C(S,E).g;S=_(S,M.j(E));var A=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=M,x(S))return A+R;for(;6>A.length;)A="0"+A;R=A+R}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function v(N){return N.h==-1}t.l=function(N){return N=_(this,N),v(N)?-1:x(N)?0:1};function T(N){for(var E=N.g.length,S=[],R=0;R<E;R++)S[R]=~N.g[R];return new o(S,~N.h).add(p)}t.abs=function(){return v(this)?T(this):this},t.add=function(N){for(var E=Math.max(this.g.length,N.g.length),S=[],R=0,M=0;M<=E;M++){var A=R+(this.i(M)&65535)+(N.i(M)&65535),I=(A>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);R=I>>>16,A&=65535,I&=65535,S[M]=I<<16|A}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(N,E){return N.add(T(E))}t.j=function(N){if(x(this)||x(N))return f;if(v(this))return v(N)?T(this).j(T(N)):T(T(this).j(N));if(v(N))return T(this.j(T(N)));if(0>this.l(g)&&0>N.l(g))return u(this.m()*N.m());for(var E=this.g.length+N.g.length,S=[],R=0;R<2*E;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<N.g.length;M++){var A=this.i(R)>>>16,I=this.i(R)&65535,U=N.i(M)>>>16,Y=N.i(M)&65535;S[2*R+2*M]+=I*Y,y(S,2*R+2*M),S[2*R+2*M+1]+=A*Y,y(S,2*R+2*M+1),S[2*R+2*M+1]+=I*U,y(S,2*R+2*M+1),S[2*R+2*M+2]+=A*U,y(S,2*R+2*M+2)}for(R=0;R<E;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=E;R<2*E;R++)S[R]=0;return new o(S,0)};function y(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function b(N,E){this.g=N,this.h=E}function C(N,E){if(x(E))throw Error("division by zero");if(x(N))return new b(f,f);if(v(N))return E=C(T(N),E),new b(T(E.g),T(E.h));if(v(E))return E=C(N,T(E)),new b(T(E.g),E.h);if(30<N.g.length){if(v(N)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var S=p,R=E;0>=R.l(N);)S=P(S),R=P(R);var M=L(S,1),A=L(R,1);for(R=L(R,2),S=L(S,2);!x(R);){var I=A.add(R);0>=I.l(N)&&(M=M.add(S),A=I),R=L(R,1),S=L(S,1)}return E=_(N,M.j(E)),new b(M,E)}for(M=f;0<=N.l(E);){for(S=Math.max(1,Math.floor(N.m()/E.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),A=u(S),I=A.j(E);v(I)||0<I.l(N);)S-=R,A=u(S),I=A.j(E);x(A)&&(A=p),M=M.add(A),N=_(N,I)}return new b(M,N)}t.A=function(N){return C(this,N).h},t.and=function(N){for(var E=Math.max(this.g.length,N.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)&N.i(R);return new o(S,this.h&N.h)},t.or=function(N){for(var E=Math.max(this.g.length,N.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)|N.i(R);return new o(S,this.h|N.h)},t.xor=function(N){for(var E=Math.max(this.g.length,N.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)^N.i(R);return new o(S,this.h^N.h)};function P(N){for(var E=N.g.length+1,S=[],R=0;R<E;R++)S[R]=N.i(R)<<1|N.i(R-1)>>>31;return new o(S,N.h)}function L(N,E){var S=E>>5;E%=32;for(var R=N.g.length-S,M=[],A=0;A<R;A++)M[A]=0<E?N.i(A+S)>>>E|N.i(A+S+1)<<32-E:N.i(A+S);return new o(M,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,$o=o}).apply(typeof ak<"u"?ak:typeof self<"u"?self:typeof window<"u"?window:{});var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VA,Ju,FA,om,Xw,UA,$A,BA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,w,k){return d==Array.prototype||d==Object.prototype||(d[w]=k.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof If=="object"&&If];for(var w=0;w<d.length;++w){var k=d[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function s(d,w){if(w)e:{var k=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var z=d[j];if(!(z in k))break e;k=k[z]}d=d[d.length-1],j=k[d],w=w(j),w!=j&&w!=null&&e(k,d,{configurable:!0,writable:!0,value:w})}}function i(d,w){d instanceof String&&(d+="");var k=0,j=!1,z={next:function(){if(!j&&k<d.length){var K=k++;return{value:w(K,d[K]),done:!1}}return j=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return i(this,function(w,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(d){var w=typeof d;return w=w!="object"?w:d?Array.isArray(d)?"array":w:"null",w=="array"||w=="object"&&typeof d.length=="number"}function u(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function h(d,w,k){return d.call.apply(d.bind,arguments)}function f(d,w,k){if(!d)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,j),d.apply(w,z)}}return function(){return d.apply(w,arguments)}}function p(d,w,k){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,w){var k=Array.prototype.slice.call(arguments,1);return function(){var j=k.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function x(d,w){function k(){}k.prototype=w.prototype,d.aa=w.prototype,d.prototype=new k,d.prototype.constructor=d,d.Qb=function(j,z,K){for(var he=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)he[Et-2]=arguments[Et];return w.prototype[z].apply(j,he)}}function v(d){const w=d.length;if(0<w){const k=Array(w);for(let j=0;j<w;j++)k[j]=d[j];return k}return[]}function T(d,w){for(let k=1;k<arguments.length;k++){const j=arguments[k];if(c(j)){const z=d.length||0,K=j.length||0;d.length=z+K;for(let he=0;he<K;he++)d[z+he]=j[he]}else d.push(j)}}class _{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function y(d){return/^[\s\xa0]*$/.test(d)}function b(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function L(d,w,k){for(const j in d)w.call(k,d[j],j,d)}function N(d,w){for(const k in d)w.call(void 0,d[k],k,d)}function E(d){const w={};for(const k in d)w[k]=d[k];return w}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,w){let k,j;for(let z=1;z<arguments.length;z++){j=arguments[z];for(k in j)d[k]=j[k];for(let K=0;K<S.length;K++)k=S[K],Object.prototype.hasOwnProperty.call(j,k)&&(d[k]=j[k])}}function M(d){var w=1;d=d.split(":");const k=[];for(;0<w&&d.length;)k.push(d.shift()),w--;return d.length&&k.push(d.join(":")),k}function A(d){a.setTimeout(()=>{throw d},0)}function I(){var d=O;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class U{constructor(){this.h=this.g=null}add(w,k){const j=Y.get();j.set(w,k),this.h?this.h.next=j:this.g=j,this.h=j}}var Y=new _(()=>new F,d=>d.reset());class F{constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let te,D=!1,O=new U,W=()=>{const d=a.Promise.resolve(void 0);te=()=>{d.then(Z)}};var Z=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(k){A(k)}var w=Y;w.j(d),100>w.h&&(w.h++,d.next=w.g,w.g=d)}D=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const k=()=>{};a.addEventListener("test",k,w),a.removeEventListener("test",k,w)}catch{}return d}();function ie(d,w){if(Q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var k=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget){if(P){e:{try{C(w.nodeName);var z=!0;break e}catch{}z=!1}z||(w=null)}}else k=="mouseover"?w=d.fromElement:k=="mouseout"&&(w=d.toElement);this.relatedTarget=w,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ge[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ie.aa.h.call(this)}}x(ie,Q);var ge={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),me=0;function Fe(d,w,k,j,z){this.listener=d,this.proxy=null,this.src=w,this.type=k,this.capture=!!j,this.ha=z,this.key=++me,this.da=this.fa=!1}function Pe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function je(d){this.src=d,this.g={},this.h=0}je.prototype.add=function(d,w,k,j,z){var K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);var he=Ue(d,w,j,z);return-1<he?(w=d[he],k||(w.fa=!1)):(w=new Fe(w,this.src,K,!!j,z),w.fa=k,d.push(w)),w};function X(d,w){var k=w.type;if(k in d.g){var j=d.g[k],z=Array.prototype.indexOf.call(j,w,void 0),K;(K=0<=z)&&Array.prototype.splice.call(j,z,1),K&&(Pe(w),d.g[k].length==0&&(delete d.g[k],d.h--))}}function Ue(d,w,k,j){for(var z=0;z<d.length;++z){var K=d[z];if(!K.da&&K.listener==w&&K.capture==!!k&&K.ha==j)return z}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),ze={};function nt(d,w,k,j,z){if(Array.isArray(w)){for(var K=0;K<w.length;K++)nt(d,w[K],k,j,z);return null}return k=Oe(k),d&&d[G]?d.K(w,k,u(j)?!!j.capture:!1,z):Xe(d,w,k,!1,j,z)}function Xe(d,w,k,j,z,K){if(!w)throw Error("Invalid event type");var he=u(z)?!!z.capture:!!z,Et=se(d);if(Et||(d[Qe]=Et=new je(d)),k=Et.add(w,k,j,he,K),k.proxy)return k;if(j=V(),k.proxy=j,j.src=d,j.listener=k,d.addEventListener)$||(z=he),z===void 0&&(z=!1),d.addEventListener(w.toString(),j,z);else if(d.attachEvent)d.attachEvent(ue(w.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return k}function V(){function d(k){return w.call(d.src,d.listener,k)}const w=ce;return d}function B(d,w,k,j,z){if(Array.isArray(w))for(var K=0;K<w.length;K++)B(d,w[K],k,j,z);else j=u(j)?!!j.capture:!!j,k=Oe(k),d&&d[G]?(d=d.i,w=String(w).toString(),w in d.g&&(K=d.g[w],k=Ue(K,k,j,z),-1<k&&(Pe(K[k]),Array.prototype.splice.call(K,k,1),K.length==0&&(delete d.g[w],d.h--)))):d&&(d=se(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Ue(w,k,j,z)),(k=-1<d?w[d]:null)&&q(k))}function q(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[G])X(w.i,d);else{var k=d.type,j=d.proxy;w.removeEventListener?w.removeEventListener(k,j,d.capture):w.detachEvent?w.detachEvent(ue(k),j):w.addListener&&w.removeListener&&w.removeListener(j),(k=se(w))?(X(k,d),k.h==0&&(k.src=null,w[Qe]=null)):Pe(d)}}}function ue(d){return d in ze?ze[d]:ze[d]="on"+d}function ce(d,w){if(d.da)d=!0;else{w=new ie(w,this);var k=d.listener,j=d.ha||d.src;d.fa&&q(d),d=k.call(j,w)}return d}function se(d){return d=d[Qe],d instanceof je?d:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(d){return typeof d=="function"?d:(d[be]||(d[be]=function(w){return d.handleEvent(w)}),d[be])}function Ae(){H.call(this),this.i=new je(this),this.M=this,this.F=null}x(Ae,H),Ae.prototype[G]=!0,Ae.prototype.removeEventListener=function(d,w,k,j){B(this,d,w,k,j)};function We(d,w){var k,j=d.F;if(j)for(k=[];j;j=j.F)k.push(j);if(d=d.M,j=w.type||w,typeof w=="string")w=new Q(w,d);else if(w instanceof Q)w.target=w.target||d;else{var z=w;w=new Q(j,d),R(w,z)}if(z=!0,k)for(var K=k.length-1;0<=K;K--){var he=w.g=k[K];z=gn(he,j,!0,w)&&z}if(he=w.g=d,z=gn(he,j,!0,w)&&z,z=gn(he,j,!1,w)&&z,k)for(K=0;K<k.length;K++)he=w.g=k[K],z=gn(he,j,!1,w)&&z}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var d=this.i,w;for(w in d.g){for(var k=d.g[w],j=0;j<k.length;j++)Pe(k[j]);delete d.g[w],d.h--}}this.F=null},Ae.prototype.K=function(d,w,k,j){return this.i.add(String(d),w,!1,k,j)},Ae.prototype.L=function(d,w,k,j){return this.i.add(String(d),w,!0,k,j)};function gn(d,w,k,j){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();for(var z=!0,K=0;K<w.length;++K){var he=w[K];if(he&&!he.da&&he.capture==k){var Et=he.listener,wn=he.ha||he.src;he.fa&&X(d.i,he),z=Et.call(wn,j)!==!1&&z}}return z&&!j.defaultPrevented}function Lt(d,w,k){if(typeof d=="function")k&&(d=p(d,k));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:a.setTimeout(d,w||0)}function Nt(d){d.g=Lt(()=>{d.g=null,d.i&&(d.i=!1,Nt(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class lr extends H{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(d){H.call(this),this.h=d,this.g={}}x(cr,H);var Sr=[];function os(d){L(d.g,function(w,k){this.g.hasOwnProperty(k)&&q(w)},d),d.g={}}cr.prototype.N=function(){cr.aa.N.call(this),os(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=a.JSON.stringify,Zi=a.JSON.parse,sv=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Eu(){}Eu.prototype.h=null;function bu(d){return d.h||(d.h=d.i())}function Tu(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function va(){Q.call(this,"d")}x(va,Q);function Wr(){Q.call(this,"c")}x(Wr,Q);var di={},Le=null;function lt(){return Le=Le||new Ae}di.La="serverreachability";function _t(d){Q.call(this,di.La,d)}x(_t,Q);function vn(d){const w=lt();We(w,new _t(w))}di.STAT_EVENT="statevent";function ur(d,w){Q.call(this,di.STAT_EVENT,d),this.stat=w}x(ur,Q);function Dt(d){const w=lt();We(w,new ur(w,d))}di.Ma="timingevent";function As(d,w){Q.call(this,di.Ma,d),this.size=w}x(As,Q);function yn(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},w)}function dr(){this.g=!0}dr.prototype.xa=function(){this.g=!1};function vL(d,w,k,j,z,K){d.info(function(){if(d.g)if(K)for(var he="",Et=K.split("&"),wn=0;wn<Et.length;wn++){var dt=Et[wn].split("=");if(1<dt.length){var Rn=dt[0];dt=dt[1];var An=Rn.split("_");he=2<=An.length&&An[1]=="type"?he+(Rn+"="+dt+"&"):he+(Rn+"=redacted&")}}else he=null;else he=K;return"XMLHTTP REQ ("+j+") [attempt "+z+"]: "+w+`
`+k+`
`+he})}function yL(d,w,k,j,z,K,he){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+z+"]: "+w+`
`+k+`
`+K+" "+he})}function Rl(d,w,k,j){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+xL(d,k)+(j?" "+j:"")})}function wL(d,w){d.info(function(){return"TIMEOUT: "+w})}dr.prototype.info=function(){};function xL(d,w){if(!d.g)return w;if(!w)return null;try{var k=JSON.parse(w);if(k){for(d=0;d<k.length;d++)if(Array.isArray(k[d])){var j=k[d];if(!(2>j.length)){var z=j[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var he=1;he<z.length;he++)z[he]=""}}}}return ui(k)}catch{return w}}var Hh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ib={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},iv;function qh(){}x(qh,Eu),qh.prototype.g=function(){return new XMLHttpRequest},qh.prototype.i=function(){return{}},iv=new qh;function Ji(d,w,k,j){this.j=d,this.i=w,this.l=k,this.R=j||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ob}function ob(){this.i=null,this.g="",this.h=!1}var ab={},ov={};function av(d,w,k){d.L=1,d.v=Yh(hi(w)),d.m=k,d.P=!0,lb(d,null)}function lb(d,w){d.F=Date.now(),Gh(d),d.A=hi(d.v);var k=d.A,j=d.R;Array.isArray(j)||(j=[String(j)]),Eb(k.i,"t",j),d.C=0,k=d.j.J,d.h=new ob,d.g=Ub(d.j,k?w:null,!d.m),0<d.O&&(d.M=new lr(p(d.Y,d,d.g),d.O)),w=d.U,k=d.g,j=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Sr[0]=z.toString()),z=Sr);for(var K=0;K<z.length;K++){var he=nt(k,z[K],j||w.handleEvent,!1,w.h||w);if(!he)break;w.g[he.key]=he}w=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,w)):(d.u="GET",d.g.ea(d.A,d.u,null,w)),vn(),vL(d.i,d.u,d.A,d.l,d.R,d.m)}Ji.prototype.ca=function(d){d=d.target;const w=this.M;w&&fi(d)==3?w.j():this.Y(d)},Ji.prototype.Y=function(d){try{if(d==this.g)e:{const An=fi(this.g);var w=this.g.Ba();const jl=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||Ib(this.g)))){this.J||An!=4||w==7||(w==8||0>=jl?vn(3):vn(2)),lv(this);var k=this.g.Z();this.X=k;t:if(cb(this)){var j=Ib(this.g);d="";var z=j.length,K=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ya(this),ku(this);var he="";break t}this.h.i=new a.TextDecoder}for(w=0;w<z;w++)this.h.h=!0,d+=this.h.i.decode(j[w],{stream:!(K&&w==z-1)});j.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=k==200,yL(this.i,this.u,this.A,this.l,this.R,An,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,wn=this.g;if((Et=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Et)){var dt=Et;break t}}dt=null}if(k=dt)Rl(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cv(this,k);else{this.o=!1,this.s=3,Dt(12),ya(this),ku(this);break e}}if(this.P){k=!0;let as;for(;!this.J&&this.C<he.length;)if(as=_L(this,he),as==ov){An==4&&(this.s=4,Dt(14),k=!1),Rl(this.i,this.l,null,"[Incomplete Response]");break}else if(as==ab){this.s=4,Dt(15),Rl(this.i,this.l,he,"[Invalid Chunk]"),k=!1;break}else Rl(this.i,this.l,as,null),cv(this,as);if(cb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||he.length!=0||this.h.h||(this.s=1,Dt(16),k=!1),this.o=this.o&&k,!k)Rl(this.i,this.l,he,"[Invalid Chunked Response]"),ya(this),ku(this);else if(0<he.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),pv(Rn),Rn.M=!0,Dt(11))}}else Rl(this.i,this.l,he,null),cv(this,he);An==4&&ya(this),this.o&&!this.J&&(An==4?Ob(this.j,this):(this.o=!1,Gh(this)))}else VL(this.g),k==400&&0<he.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),ya(this),ku(this)}}}catch{}finally{}};function cb(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function _L(d,w){var k=d.C,j=w.indexOf(`
`,k);return j==-1?ov:(k=Number(w.substring(k,j)),isNaN(k)?ab:(j+=1,j+k>w.length?ov:(w=w.slice(j,j+k),d.C=j+k,w)))}Ji.prototype.cancel=function(){this.J=!0,ya(this)};function Gh(d){d.S=Date.now()+d.I,ub(d,d.I)}function ub(d,w){if(d.B!=null)throw Error("WatchDog timer not null");d.B=yn(p(d.ba,d),w)}function lv(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ji.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(wL(this.i,this.A),this.L!=2&&(vn(),Dt(17)),ya(this),this.s=2,ku(this)):ub(this,this.S-d)};function ku(d){d.j.G==0||d.J||Ob(d.j,d)}function ya(d){lv(d);var w=d.M;w&&typeof w.ma=="function"&&w.ma(),d.M=null,os(d.U),d.g&&(w=d.g,d.g=null,w.abort(),w.ma())}function cv(d,w){try{var k=d.j;if(k.G!=0&&(k.g==d||uv(k.h,d))){if(!d.K&&uv(k.h,d)&&k.G==3){try{var j=k.Da.g.parse(w)}catch{j=null}if(Array.isArray(j)&&j.length==3){var z=j;if(z[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<d.F)nf(k),ef(k);else break e;mv(k),Dt(18)}}else k.za=z[1],0<k.za-k.T&&37500>z[2]&&k.F&&k.v==0&&!k.C&&(k.C=yn(p(k.Za,k),6e3));if(1>=fb(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else xa(k,11)}else if((d.K||k.g==d)&&nf(k),!y(w))for(z=k.Da.g.parse(w),w=0;w<z.length;w++){let dt=z[w];if(k.T=dt[0],dt=dt[1],k.G==2)if(dt[0]=="c"){k.K=dt[1],k.ia=dt[2];const Rn=dt[3];Rn!=null&&(k.la=Rn,k.j.info("VER="+k.la));const An=dt[4];An!=null&&(k.Aa=An,k.j.info("SVER="+k.Aa));const jl=dt[5];jl!=null&&typeof jl=="number"&&0<jl&&(j=1.5*jl,k.L=j,k.j.info("backChannelRequestTimeoutMs_="+j)),j=k;const as=d.g;if(as){const sf=as.g?as.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sf){var K=j.h;K.g||sf.indexOf("spdy")==-1&&sf.indexOf("quic")==-1&&sf.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(dv(K,K.h),K.h=null))}if(j.D){const gv=as.g?as.g.getResponseHeader("X-HTTP-Session-Id"):null;gv&&(j.ya=gv,Ct(j.I,j.D,gv))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-d.F,k.j.info("Handshake RTT: "+k.R+"ms")),j=k;var he=d;if(j.qa=Fb(j,j.J?j.ia:null,j.W),he.K){mb(j.h,he);var Et=he,wn=j.L;wn&&(Et.I=wn),Et.B&&(lv(Et),Gh(Et)),j.g=he}else Db(j);0<k.i.length&&tf(k)}else dt[0]!="stop"&&dt[0]!="close"||xa(k,7);else k.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?xa(k,7):fv(k):dt[0]!="noop"&&k.l&&k.l.ta(dt),k.v=0)}}vn(4)}catch{}}var EL=class{constructor(d,w){this.g=d,this.map=w}};function db(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hb(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fb(d){return d.h?1:d.g?d.g.size:0}function uv(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function dv(d,w){d.g?d.g.add(w):d.h=w}function mb(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}db.prototype.cancel=function(){if(this.i=pb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function pb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const k of d.g.values())w=w.concat(k.D);return w}return v(d.i)}function bL(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var w=[],k=d.length,j=0;j<k;j++)w.push(d[j]);return w}w=[],k=0;for(j in d)w[k++]=d[j];return w}function TL(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var w=[];d=d.length;for(var k=0;k<d;k++)w.push(k);return w}w=[],k=0;for(const j in d)w[k++]=j;return w}}}function gb(d,w){if(d.forEach&&typeof d.forEach=="function")d.forEach(w,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,w,void 0);else for(var k=TL(d),j=bL(d),z=j.length,K=0;K<z;K++)w.call(void 0,j[K],k&&k[K],d)}var vb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kL(d,w){if(d){d=d.split("&");for(var k=0;k<d.length;k++){var j=d[k].indexOf("="),z=null;if(0<=j){var K=d[k].substring(0,j);z=d[k].substring(j+1)}else K=d[k];w(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function wa(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof wa){this.h=d.h,Kh(this,d.j),this.o=d.o,this.g=d.g,Qh(this,d.s),this.l=d.l;var w=d.i,k=new Cu;k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),yb(this,k),this.m=d.m}else d&&(w=String(d).match(vb))?(this.h=!1,Kh(this,w[1]||"",!0),this.o=Su(w[2]||""),this.g=Su(w[3]||"",!0),Qh(this,w[4]),this.l=Su(w[5]||"",!0),yb(this,w[6]||"",!0),this.m=Su(w[7]||"")):(this.h=!1,this.i=new Cu(null,this.h))}wa.prototype.toString=function(){var d=[],w=this.j;w&&d.push(Nu(w,wb,!0),":");var k=this.g;return(k||w=="file")&&(d.push("//"),(w=this.o)&&d.push(Nu(w,wb,!0),"@"),d.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&d.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&d.push("/"),d.push(Nu(k,k.charAt(0)=="/"?CL:NL,!0))),(k=this.i.toString())&&d.push("?",k),(k=this.m)&&d.push("#",Nu(k,RL)),d.join("")};function hi(d){return new wa(d)}function Kh(d,w,k){d.j=k?Su(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function Qh(d,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);d.s=w}else d.s=null}function yb(d,w,k){w instanceof Cu?(d.i=w,AL(d.i,d.h)):(k||(w=Nu(w,IL)),d.i=new Cu(w,d.h))}function Ct(d,w,k){d.i.set(w,k)}function Yh(d){return Ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Su(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Nu(d,w,k){return typeof d=="string"?(d=encodeURI(d).replace(w,SL),k&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function SL(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var wb=/[#\/\?@]/g,NL=/[#\?:]/g,CL=/[#\?]/g,IL=/[#\?@]/g,RL=/#/g;function Cu(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function eo(d){d.g||(d.g=new Map,d.h=0,d.i&&kL(d.i,function(w,k){d.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}t=Cu.prototype,t.add=function(d,w){eo(this),this.i=null,d=Al(this,d);var k=this.g.get(d);return k||this.g.set(d,k=[]),k.push(w),this.h+=1,this};function xb(d,w){eo(d),w=Al(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function _b(d,w){return eo(d),w=Al(d,w),d.g.has(w)}t.forEach=function(d,w){eo(this),this.g.forEach(function(k,j){k.forEach(function(z){d.call(w,z,j,this)},this)},this)},t.na=function(){eo(this);const d=Array.from(this.g.values()),w=Array.from(this.g.keys()),k=[];for(let j=0;j<w.length;j++){const z=d[j];for(let K=0;K<z.length;K++)k.push(w[j])}return k},t.V=function(d){eo(this);let w=[];if(typeof d=="string")_b(this,d)&&(w=w.concat(this.g.get(Al(this,d))));else{d=Array.from(this.g.values());for(let k=0;k<d.length;k++)w=w.concat(d[k])}return w},t.set=function(d,w){return eo(this),this.i=null,d=Al(this,d),_b(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},t.get=function(d,w){return d?(d=this.V(d),0<d.length?String(d[0]):w):w};function Eb(d,w,k){xb(d,w),0<k.length&&(d.i=null,d.g.set(Al(d,w),v(k)),d.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(var k=0;k<w.length;k++){var j=w[k];const K=encodeURIComponent(String(j)),he=this.V(j);for(j=0;j<he.length;j++){var z=K;he[j]!==""&&(z+="="+encodeURIComponent(String(he[j]))),d.push(z)}}return this.i=d.join("&")};function Al(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function AL(d,w){w&&!d.j&&(eo(d),d.i=null,d.g.forEach(function(k,j){var z=j.toLowerCase();j!=z&&(xb(this,j),Eb(this,z,k))},d)),d.j=w}function PL(d,w){const k=new dr;if(a.Image){const j=new Image;j.onload=g(to,k,"TestLoadImage: loaded",!0,w,j),j.onerror=g(to,k,"TestLoadImage: error",!1,w,j),j.onabort=g(to,k,"TestLoadImage: abort",!1,w,j),j.ontimeout=g(to,k,"TestLoadImage: timeout",!1,w,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else w(!1)}function jL(d,w){const k=new dr,j=new AbortController,z=setTimeout(()=>{j.abort(),to(k,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:j.signal}).then(K=>{clearTimeout(z),K.ok?to(k,"TestPingServer: ok",!0,w):to(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),to(k,"TestPingServer: error",!1,w)})}function to(d,w,k,j,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),j(k)}catch{}}function DL(){this.g=new sv}function ML(d,w,k){const j=k||"";try{gb(d,function(z,K){let he=z;u(z)&&(he=ui(z)),w.push(j+K+"="+encodeURIComponent(he))})}catch(z){throw w.push(j+"type="+encodeURIComponent("_badmap")),z}}function Xh(d){this.l=d.Ub||null,this.j=d.eb||!1}x(Xh,Eu),Xh.prototype.g=function(){return new Zh(this.l,this.j)},Xh.prototype.i=function(d){return function(){return d}}({});function Zh(d,w){Ae.call(this),this.D=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Zh,Ae),t=Zh.prototype,t.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=w,this.readyState=1,Ru(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(w.body=d),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Iu(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ru(this)),this.g&&(this.readyState=3,Ru(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function bb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?Iu(this):Ru(this),this.readyState==3&&bb(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Iu(this))},t.Qa=function(d){this.g&&(this.response=d,Iu(this))},t.ga=function(){this.g&&Iu(this)};function Iu(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ru(d)}t.setRequestHeader=function(d,w){this.u.append(d,w)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,d.push(k[0]+": "+k[1]),k=w.next();return d.join(`\r
`)};function Ru(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tb(d){let w="";return L(d,function(k,j){w+=j,w+=":",w+=k,w+=`\r
`}),w}function hv(d,w,k){e:{for(j in k){var j=!1;break e}j=!0}j||(k=Tb(k),typeof d=="string"?k!=null&&encodeURIComponent(String(k)):Ct(d,w,k))}function Bt(d){Ae.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Bt,Ae);var OL=/^https?$/i,LL=["POST","PUT"];t=Bt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,w,k,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():iv.g(),this.v=this.o?bu(this.o):bu(iv),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(K){kb(this,K);return}if(d=k||"",k=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var z in j)k.set(z,j[z]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const K of j.keys())k.set(K,j.get(K));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(k.keys()).find(K=>K.toLowerCase()=="content-type"),z=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LL,w,void 0))||j||z||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,he]of k)this.g.setRequestHeader(K,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cb(this),this.u=!0,this.g.send(d),this.u=!1}catch(K){kb(this,K)}};function kb(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.m=5,Sb(d),Jh(d)}function Sb(d){d.A||(d.A=!0,We(d,"complete"),We(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,We(this,"complete"),We(this,"abort"),Jh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jh(this,!0)),Bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nb(this):this.bb())},t.bb=function(){Nb(this)};function Nb(d){if(d.h&&typeof o<"u"&&(!d.v[1]||fi(d)!=4||d.Z()!=2)){if(d.u&&fi(d)==4)Lt(d.Ea,0,d);else if(We(d,"readystatechange"),fi(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var k;if(!(k=w)){var j;if(j=he===0){var z=String(d.D).match(vb)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),j=!OL.test(z?z.toLowerCase():"")}k=j}if(k)We(d,"complete"),We(d,"success");else{d.m=6;try{var K=2<fi(d)?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.Z()+"]",Sb(d)}}finally{Jh(d)}}}}function Jh(d,w){if(d.g){Cb(d);const k=d.g,j=d.v[0]?()=>{}:null;d.g=null,d.v=null,w||We(d,"ready");try{k.onreadystatechange=j}catch{}}}function Cb(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function fi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Zi(w)}};function Ib(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function VL(d){const w={};d=(d.g&&2<=fi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(y(d[j]))continue;var k=M(d[j]);const z=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const K=w[z]||[];w[z]=K,K.push(k)}N(w,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Au(d,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[d]||w}function Rb(d){this.Aa=0,this.i=[],this.j=new dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Au("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Au("baseRetryDelayMs",5e3,d),this.cb=Au("retryDelaySeedMs",1e4,d),this.Wa=Au("forwardChannelMaxRetries",2,d),this.wa=Au("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new db(d&&d.concurrentRequestLimit),this.Da=new DL,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rb.prototype,t.la=8,t.G=1,t.connect=function(d,w,k,j){Dt(0),this.W=d,this.H=w||{},k&&j!==void 0&&(this.H.OSID=k,this.H.OAID=j),this.F=this.X,this.I=Fb(this,null,this.W),tf(this)};function fv(d){if(Ab(d),d.G==3){var w=d.U++,k=hi(d.I);if(Ct(k,"SID",d.K),Ct(k,"RID",w),Ct(k,"TYPE","terminate"),Pu(d,k),w=new Ji(d,d.j,w),w.L=2,w.v=Yh(hi(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(w.v.toString(),"")}catch{}!k&&a.Image&&(new Image().src=w.v,k=!0),k||(w.g=Ub(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Gh(w)}Vb(d)}function ef(d){d.g&&(pv(d),d.g.cancel(),d.g=null)}function Ab(d){ef(d),d.u&&(a.clearTimeout(d.u),d.u=null),nf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function tf(d){if(!hb(d.h)&&!d.s){d.s=!0;var w=d.Ga;te||W(),D||(te(),D=!0),O.add(w,d),d.B=0}}function FL(d,w){return fb(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=w.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=yn(p(d.Ga,d,w),Lb(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new Ji(this,this.j,d);let K=this.o;if(this.S&&(K?(K=E(K),R(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var w=0,k=0;k<this.i.length;k++){t:{var j=this.i[k];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(w+=j,4096<w){w=k;break e}if(w===4096||k===this.i.length-1){w=k+1;break e}}w=1e3}else w=1e3;w=jb(this,z,w),k=hi(this.I),Ct(k,"RID",d),Ct(k,"CVER",22),this.D&&Ct(k,"X-HTTP-Session-Id",this.D),Pu(this,k),K&&(this.O?w="headers="+encodeURIComponent(String(Tb(K)))+"&"+w:this.m&&hv(k,this.m,K)),dv(this.h,z),this.Ua&&Ct(k,"TYPE","init"),this.P?(Ct(k,"$req",w),Ct(k,"SID","null"),z.T=!0,av(z,k,null)):av(z,k,w),this.G=2}}else this.G==3&&(d?Pb(this,d):this.i.length==0||hb(this.h)||Pb(this))};function Pb(d,w){var k;w?k=w.l:k=d.U++;const j=hi(d.I);Ct(j,"SID",d.K),Ct(j,"RID",k),Ct(j,"AID",d.T),Pu(d,j),d.m&&d.o&&hv(j,d.m,d.o),k=new Ji(d,d.j,k,d.B+1),d.m===null&&(k.H=d.o),w&&(d.i=w.D.concat(d.i)),w=jb(d,k,1e3),k.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),dv(d.h,k),av(k,j,w)}function Pu(d,w){d.H&&L(d.H,function(k,j){Ct(w,j,k)}),d.l&&gb({},function(k,j){Ct(w,j,k)})}function jb(d,w,k){k=Math.min(d.i.length,k);var j=d.l?p(d.l.Na,d.l,d):null;e:{var z=d.i;let K=-1;for(;;){const he=["count="+k];K==-1?0<k?(K=z[0].g,he.push("ofs="+K)):K=0:he.push("ofs="+K);let Et=!0;for(let wn=0;wn<k;wn++){let dt=z[wn].g;const Rn=z[wn].map;if(dt-=K,0>dt)K=Math.max(0,z[wn].g-100),Et=!1;else try{ML(Rn,he,"req"+dt+"_")}catch{j&&j(Rn)}}if(Et){j=he.join("&");break e}}}return d=d.i.splice(0,k),w.D=d,j}function Db(d){if(!d.g&&!d.u){d.Y=1;var w=d.Fa;te||W(),D||(te(),D=!0),O.add(w,d),d.v=0}}function mv(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=yn(p(d.Fa,d),Lb(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Mb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=yn(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),ef(this),Mb(this))};function pv(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Mb(d){d.g=new Ji(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var w=hi(d.qa);Ct(w,"RID","rpc"),Ct(w,"SID",d.K),Ct(w,"AID",d.T),Ct(w,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ct(w,"TO",d.ja),Ct(w,"TYPE","xmlhttp"),Pu(d,w),d.m&&d.o&&hv(w,d.m,d.o),d.L&&(d.g.I=d.L);var k=d.g;d=d.ia,k.L=1,k.v=Yh(hi(w)),k.m=null,k.P=!0,lb(k,d)}t.Za=function(){this.C!=null&&(this.C=null,ef(this),mv(this),Dt(19))};function nf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Ob(d,w){var k=null;if(d.g==w){nf(d),pv(d),d.g=null;var j=2}else if(uv(d.h,w))k=w.D,mb(d.h,w),j=1;else return;if(d.G!=0){if(w.o)if(j==1){k=w.m?w.m.length:0,w=Date.now()-w.F;var z=d.B;j=lt(),We(j,new As(j,k)),tf(d)}else Db(d);else if(z=w.s,z==3||z==0&&0<w.X||!(j==1&&FL(d,w)||j==2&&mv(d)))switch(k&&0<k.length&&(w=d.h,w.i=w.i.concat(k)),z){case 1:xa(d,5);break;case 4:xa(d,10);break;case 3:xa(d,6);break;default:xa(d,2)}}}function Lb(d,w){let k=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(k*=2),k*w}function xa(d,w){if(d.j.info("Error code "+w),w==2){var k=p(d.fb,d),j=d.Xa;const z=!j;j=new wa(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kh(j,"https"),Yh(j),z?PL(j.toString(),k):jL(j.toString(),k)}else Dt(2);d.G=0,d.l&&d.l.sa(w),Vb(d),Ab(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Vb(d){if(d.G=0,d.ka=[],d.l){const w=pb(d.h);(w.length!=0||d.i.length!=0)&&(T(d.ka,w),T(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function Fb(d,w,k){var j=k instanceof wa?hi(k):new wa(k);if(j.g!="")w&&(j.g=w+"."+j.g),Qh(j,j.s);else{var z=a.location;j=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;var K=new wa(null);j&&Kh(K,j),w&&(K.g=w),z&&Qh(K,z),k&&(K.l=k),j=K}return k=d.D,w=d.ya,k&&w&&Ct(j,k,w),Ct(j,"VER",d.la),Pu(d,j),j}function Ub(d,w,k){if(w&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Ca&&!d.pa?new Bt(new Xh({eb:k})):new Bt(d.pa),w.Ha(d.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $b(){}t=$b.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rf(){}rf.prototype.g=function(d,w){return new Nr(d,w)};function Nr(d,w){Ae.call(this),this.g=new Rb(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(d?d["X-WebChannel-Client-Profile"]=w.va:d={"X-WebChannel-Client-Profile":w.va}),this.g.S=d,(d=w&&w.Sb)&&!y(d)&&(this.g.m=d),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!y(w)&&(this.g.D=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new Pl(this)}x(Nr,Ae),Nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){fv(this.g)},Nr.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var k={};k.__data__=d,d=k}else this.u&&(k={},k.__data__=ui(d),d=k);w.i.push(new EL(w.Ya++,d)),w.G==3&&tf(w)},Nr.prototype.N=function(){this.g.l=null,delete this.j,fv(this.g),delete this.g,Nr.aa.N.call(this)};function Bb(d){va.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const k in w){d=k;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}x(Bb,va);function zb(){Wr.call(this),this.status=1}x(zb,Wr);function Pl(d){this.g=d}x(Pl,$b),Pl.prototype.ua=function(){We(this.g,"a")},Pl.prototype.ta=function(d){We(this.g,new Bb(d))},Pl.prototype.sa=function(d){We(this.g,new zb)},Pl.prototype.ra=function(){We(this.g,"b")},rf.prototype.createWebChannel=rf.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,BA=function(){return new rf},$A=function(){return lt()},UA=di,Xw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hh.NO_ERROR=0,Hh.TIMEOUT=8,Hh.HTTP_ERROR=6,om=Hh,ib.COMPLETE="complete",FA=ib,Tu.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Ju=Tu,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,VA=Bt}).apply(typeof If<"u"?If:typeof self<"u"?self:typeof window<"u"?window:{});const lk="@firebase/firestore",ck="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new X_("@firebase/firestore");function $l(){return rl.logLevel}function we(t,...e){if(rl.logLevel<=rt.DEBUG){const n=e.map(h0);rl.debug(`Firestore (${du}): ${t}`,...n)}}function Bi(t,...e){if(rl.logLevel<=rt.ERROR){const n=e.map(h0);rl.error(`Firestore (${du}): ${t}`,...n)}}function Bc(t,...e){if(rl.logLevel<=rt.WARN){const n=e.map(h0);rl.warn(`Firestore (${du}): ${t}`,...n)}}function h0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: `+t;throw Bi(e),new Error(e)}function pt(t,e){t||De()}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ez{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class bz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tz{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string"),new zA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Ln(e)}}class kz{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Sz{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kz(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nz{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Pr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){pt(this.o===void 0);const r=i=>{i.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new uk(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string"),this.R=n.token,new uk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Cz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ye(t,e){return t<e?-1:t>e?1:0}function Zw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ye(r,s);{const i=WA(),o=Iz(i.encode(dk(t,n)),i.encode(dk(e,n)));return o!==0?o:Ye(r,s)}}n+=r>65535?2:1}return Ye(t.length,e.length)}function dk(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Iz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ye(t[n],e[n]);return Ye(t.length,e.length)}function zc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=-62135596800,fk=1e6;class cn{static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fk);return new cn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hk)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fk}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new cn(0,0))}static max(){return new $e(new cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="__name__";class Ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ds.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ye(e.length,n.length)}static compareSegments(e,n){const r=Ds.isNumericId(e),s=Ds.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ds.extractNumericId(e).compare(Ds.extractNumericId(n)):Zw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $o.fromString(e.substring(4,e.length-2))}}class At extends Ds{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new At(n)}static emptyPath(){return new At([])}}const Rz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ds{construct(e,n,r){return new En(e,n,r)}static isValidIdentifier(e){return Rz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mk}static keyField(){return new En([mk])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ee(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Ee(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(At.fromString(e))}static fromName(e){return new Ne(At.fromString(e).popFirst(5))}static empty(){return new Ne(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=-1;function Az(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(r===1e9?new cn(n+1,0):new cn(n,r));return new Ko(s,Ne.empty(),e)}function Pz(t){return new Ko(t.readTime,t.key,th)}class Ko{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ko($e.min(),Ne.empty(),th)}static max(){return new Ko($e.max(),Ne.empty(),th)}}function jz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==Dz)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(s=>s?ne.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new ne((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Oz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}gg.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=-1;function vg(t){return t==null}function ep(t){return t===0&&1/t==-1/0}function Lz(t){return typeof t=="number"&&Number.isInteger(t)&&!ep(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="";function Vz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pk(e)),e=Fz(t.get(n),e);return pk(e)}function Fz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case qA:n+="";break;default:n+=i}}return n}function pk(t){return t+qA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ha(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rf(this.root,e,this.comparator,!0)}}class Rf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_n.RED,this.left=s??_n.EMPTY,this.right=i??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _n(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,s,i){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vk(this.data.getIterator())}getIteratorFrom(e){return new vk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class vk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Dr([])}unionWith(e){let n=new un(En.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new KA("Invalid base64 string: "+i):i}}(e);return new Cn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const Uz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(t){if(pt(!!t),typeof t=="string"){let e=0;const n=Uz.exec(t);if(pt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yo(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="server_timestamp",YA="__type__",XA="__previous_value__",ZA="__local_write_time__";function m0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[YA])===null||n===void 0?void 0:n.stringValue)===QA}function yg(t){const e=t.mapValue.fields[XA];return m0(e)?yg(e):e}function nh(t){const e=Qo(t.mapValue.fields[ZA].timestampValue);return new cn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}const tp="(default)";class rh{constructor(e,n){this.projectId=e,this.database=n||tp}static empty(){return new rh("","")}get isDefaultDatabase(){return this.database===tp}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="__type__",Bz="__max__",Af={mapValue:{}},eP="__vector__",np="value";function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?m0(t)?4:Wz(t)?9007199254740991:zz(t)?10:11:De()}function ri(t,e){if(t===e)return!0;const n=Xo(t);if(n!==Xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nh(t).isEqual(nh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Qo(s.timestampValue),a=Qo(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Yo(s.bytesValue).isEqual(Yo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Gt(s.geoPointValue.latitude)===Gt(i.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Gt(s.integerValue)===Gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Gt(s.doubleValue),a=Gt(i.doubleValue);return o===a?ep(o)===ep(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zc(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gk(o)!==gk(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ri(o[c],a[c])))return!1;return!0}(t,e);default:return De()}}function sh(t,e){return(t.values||[]).find(n=>ri(n,e))!==void 0}function Wc(t,e){if(t===e)return 0;const n=Xo(t),r=Xo(e);if(n!==r)return Ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Gt(i.integerValue||i.doubleValue),c=Gt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return yk(t.timestampValue,e.timestampValue);case 4:return yk(nh(t),nh(e));case 5:return Zw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Yo(i),c=Yo(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=Ye(a[u],c[u]);if(h!==0)return h}return Ye(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ye(Gt(i.latitude),Gt(o.latitude));return a!==0?a:Ye(Gt(i.longitude),Gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wk(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},p=o.fields||{},g=(a=f[np])===null||a===void 0?void 0:a.arrayValue,x=(c=p[np])===null||c===void 0?void 0:c.arrayValue,v=Ye(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:wk(g,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Af.mapValue&&o===Af.mapValue)return 0;if(i===Af.mapValue)return 1;if(o===Af.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Zw(c[f],h[f]);if(p!==0)return p;const g=Wc(a[c[f]],u[h[f]]);if(g!==0)return g}return Ye(c.length,h.length)}(t.mapValue,e.mapValue);default:throw De()}}function yk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const n=Qo(t),r=Qo(e),s=Ye(n.seconds,r.seconds);return s!==0?s:Ye(n.nanos,r.nanos)}function wk(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wc(n[s],r[s]);if(i)return i}return Ye(n.length,r.length)}function Hc(t){return Jw(t)}function Jw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Jw(n.fields[o])}`;return s+"}"}(t.mapValue):De()}function am(t){switch(Xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yg(t);return e?16+am(e):16;case 5:return 2*t.stringValue.length;case 6:return Yo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+am(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ha(r.fields,(i,o)=>{s+=i.length+am(o)}),s}(t.mapValue);default:throw De()}}function xk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ex(t){return!!t&&"integerValue"in t}function p0(t){return!!t&&"arrayValue"in t}function _k(t){return!!t&&"nullValue"in t}function Ek(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lm(t){return!!t&&"mapValue"in t}function zz(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[JA])===null||n===void 0?void 0:n.stringValue)===eP}function xd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Wz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Bz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xd(n)}setAll(e){let n=En.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=xd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ha(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vr(xd(this.value))}}function tP(t){const e=[];return ha(t.fields,(n,r)=>{const s=new En([n]);if(lm(r)){const i=tP(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new zn(e,0,$e.min(),$e.min(),$e.min(),vr.empty(),0)}static newFoundDocument(e,n,r,s){return new zn(e,1,n,$e.min(),r,s,0)}static newNoDocument(e,n){return new zn(e,2,n,$e.min(),$e.min(),vr.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,$e.min(),$e.min(),vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.position=e,this.inclusive=n}}function bk(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(o.referenceValue),n.key):r=Wc(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function Hz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{}class rn extends nP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gz(e,n,r):n==="array-contains"?new Yz(e,r):n==="in"?new Xz(e,r):n==="not-in"?new Zz(e,r):n==="array-contains-any"?new Jz(e,r):new rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Kz(e,r):new Qz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wc(n,this.value)):n!==null&&Xo(this.value)===Xo(n)&&this.matchesComparison(Wc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends nP{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new bs(e,n)}matches(e){return rP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function rP(t){return t.op==="and"}function sP(t){return qz(t)&&rP(t)}function qz(t){for(const e of t.filters)if(e instanceof bs)return!1;return!0}function tx(t){if(t instanceof rn)return t.field.canonicalString()+t.op.toString()+Hc(t.value);if(sP(t))return t.filters.map(e=>tx(e)).join(",");{const e=t.filters.map(n=>tx(n)).join(",");return`${t.op}(${e})`}}function iP(t,e){return t instanceof rn?function(r,s){return s instanceof rn&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)}(t,e):t instanceof bs?function(r,s){return s instanceof bs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&iP(o,s.filters[a]),!0):!1}(t,e):void De()}function oP(t){return t instanceof rn?function(n){return`${n.field.canonicalString()} ${n.op} ${Hc(n.value)}`}(t):t instanceof bs?function(n){return n.op.toString()+" {"+n.getFilters().map(oP).join(" ,")+"}"}(t):"Filter"}class Gz extends rn{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class Kz extends rn{constructor(e,n){super(e,"in",n),this.keys=aP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Qz extends rn{constructor(e,n){super(e,"not-in",n),this.keys=aP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class Yz extends rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return p0(n)&&sh(n.arrayValue,this.value)}}class Xz extends rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sh(this.value.arrayValue,n)}}class Zz extends rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sh(this.value.arrayValue,n)}}class Jz extends rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!p0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function kk(t,e=null,n=[],r=[],s=null,i=null,o=null){return new eW(t,e,n,r,s,i,o)}function g0(t){const e=Be(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hc(r)).join(",")),e.le=n}return e.le}function v0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Hz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tk(t.startAt,e.startAt)&&Tk(t.endAt,e.endAt)}function nx(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tW(t,e,n,r,s,i,o,a){return new jh(t,e,n,r,s,i,o,a)}function y0(t){return new jh(t)}function Sk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lP(t){return t.collectionGroup!==null}function _d(t){const e=Be(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new un(En.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new sp(i,r))}),n.has(En.keyField().canonicalString())||e.he.push(new sp(En.keyField(),r))}return e.he}function Ys(t){const e=Be(t);return e.Pe||(e.Pe=nW(e,_d(t))),e.Pe}function nW(t,e){if(t.limitType==="F")return kk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sp(s.field,i)});const n=t.endAt?new rp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rp(t.startAt.position,t.startAt.inclusive):null;return kk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rx(t,e){const n=t.filters.concat([e]);return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sx(t,e,n){return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wg(t,e){return v0(Ys(t),Ys(e))&&t.limitType===e.limitType}function cP(t){return`${g0(Ys(t))}|lt:${t.limitType}`}function Bl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oP(s)).join(", ")}]`),vg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hc(s)).join(",")),`Target(${r})`}(Ys(t))}; limitType=${t.limitType})`}function xg(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of _d(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=bk(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,_d(r),s)||r.endAt&&!function(o,a,c){const u=bk(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,_d(r),s))}(t,e)}function rW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uP(t){return(e,n)=>{let r=!1;for(const s of _d(t)){const i=sW(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sW(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Wc(c,u):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return GA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW=new $t(Ne.comparator);function zi(){return iW}const dP=new $t(Ne.comparator);function ed(...t){let e=dP;for(const n of t)e=e.insert(n.key,n);return e}function hP(t){let e=dP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ja(){return Ed()}function fP(){return Ed()}function Ed(){return new bl(t=>t.toString(),(t,e)=>t.isEqual(e))}const oW=new $t(Ne.comparator),aW=new un(Ne.comparator);function st(...t){let e=aW;for(const n of t)e=e.add(n);return e}const lW=new un(Ye);function cW(){return lW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ep(e)?"-0":e}}function mP(t){return{integerValue:""+t}}function pP(t,e){return Lz(e)?mP(e):w0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this._=void 0}}function uW(t,e,n){return t instanceof ip?function(s,i){const o={fields:{[YA]:{stringValue:QA},[ZA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&m0(i)&&(i=yg(i)),i&&(o.fields[XA]=i),{mapValue:o}}(n,e):t instanceof qc?vP(t,e):t instanceof Gc?yP(t,e):function(s,i){const o=gP(s,i),a=Nk(o)+Nk(s.Ie);return ex(o)&&ex(s.Ie)?mP(a):w0(s.serializer,a)}(t,e)}function dW(t,e,n){return t instanceof qc?vP(t,e):t instanceof Gc?yP(t,e):n}function gP(t,e){return t instanceof ih?function(r){return ex(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ip extends _g{}class qc extends _g{constructor(e){super(),this.elements=e}}function vP(t,e){const n=wP(e);for(const r of t.elements)n.some(s=>ri(s,r))||n.push(r);return{arrayValue:{values:n}}}class Gc extends _g{constructor(e){super(),this.elements=e}}function yP(t,e){let n=wP(e);for(const r of t.elements)n=n.filter(s=>!ri(s,r));return{arrayValue:{values:n}}}class ih extends _g{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Nk(t){return Gt(t.integerValue||t.doubleValue)}function wP(t){return p0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.field=e,this.transform=n}}function hW(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qc&&s instanceof qc||r instanceof Gc&&s instanceof Gc?zc(r.elements,s.elements,ri):r instanceof ih&&s instanceof ih?ri(r.Ie,s.Ie):r instanceof ip&&s instanceof ip}(t.transform,e.transform)}class fW{constructor(e,n){this.version=e,this.transformResults=n}}class Zr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zr}static exists(e){return new Zr(void 0,e)}static updateTime(e){return new Zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eg{}function xP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _0(t.key,Zr.none()):new Dh(t.key,t.data,Zr.none());{const n=t.data,r=vr.empty();let s=new un(En.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fa(t.key,r,new Dr(s.toArray()),Zr.none())}}function mW(t,e,n){t instanceof Dh?function(s,i,o){const a=s.value.clone(),c=Ik(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fa?function(s,i,o){if(!cm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ik(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(_P(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bd(t,e,n,r){return t instanceof Dh?function(i,o,a,c){if(!cm(i.precondition,o))return a;const u=i.value.clone(),h=Rk(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof fa?function(i,o,a,c){if(!cm(i.precondition,o))return a;const u=Rk(i.fieldTransforms,c,o),h=o.data;return h.setAll(_P(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return cm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pW(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=gP(r.transform,s||null);i!=null&&(n===null&&(n=vr.empty()),n.set(r.field,i))}return n||null}function Ck(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zc(r,s,(i,o)=>hW(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dh extends Eg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fa extends Eg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _P(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ik(t,e,n){const r=new Map;pt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dW(o,a,n[s]))}return r}function Rk(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uW(i,o,e))}return r}class _0 extends Eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gW extends Eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mW(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fP();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=xP(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument($e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),st())}isEqual(e){return this.batchId===e.batchId&&zc(this.mutations,e.mutations,(n,r)=>Ck(n,r))&&zc(this.baseMutations,e.baseMutations,(n,r)=>Ck(n,r))}}class E0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pt(e.mutations.length===r.length);let s=function(){return oW}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new E0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yW=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,at;function xW(t){switch(t){case re.OK:return De();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return De()}}function EP(t){if(t===void 0)return Bi("GRPC error has no .code"),re.UNKNOWN;switch(t){case Jt.OK:return re.OK;case Jt.CANCELLED:return re.CANCELLED;case Jt.UNKNOWN:return re.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return re.INTERNAL;case Jt.UNAVAILABLE:return re.UNAVAILABLE;case Jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Jt.NOT_FOUND:return re.NOT_FOUND;case Jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Jt.ABORTED:return re.ABORTED;case Jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Jt.DATA_LOSS:return re.DATA_LOSS;default:return De()}}(at=Jt||(Jt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=new $o([4294967295,4294967295],0);function Ak(t){const e=WA().encode(t),n=new LA;return n.update(e),new Uint8Array(n.digest())}function Pk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $o([n,r],0),new $o([s,i],0)]}class b0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new td(`Invalid padding: ${n}`);if(r<0)throw new td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new td(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new td(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=$o.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply($o.fromNumber(r)));return s.compare(_W)===1&&(s=new $o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=Ak(e),[r,s]=Pk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new b0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=Ak(e),[r,s]=Pk(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bg($e.min(),s,new $t(Ye),zi(),st())}}class Mh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mh(r,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class bP{constructor(e,n){this.targetId=e,this.ge=n}}class TP{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jk{constructor(){this.pe=0,this.ye=Dk(),this.we=Cn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=st(),n=st(),r=st();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:De()}}),new Mh(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=Dk()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,pt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class EW{constructor(e){this.ke=e,this.qe=new Map,this.Qe=zi(),this.$e=Pf(),this.Ue=Pf(),this.Ke=new $t(Ye)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(nx(i))if(r===0){const o=new Ne(i.path);this.ze(n,o,zn.newNoDocument(o,$e.min()))}else pt(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),c=a?this.nt(a,e,o):1;if(c!==0){this.Ye(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Yo(r).toUint8Array()}catch(c){if(c instanceof KA)return Bc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new b0(o,s,i)}catch(c){return Bc(c instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&nx(a.target)){const c=new Ne(a.target.path);this._t(c).has(o)||this.ut(o,c)||this.ze(o,c,zn.newNoDocument(c,e))}i.ve&&(n.set(o,i.Fe()),i.Me())}});let r=st();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Qe.forEach((i,o)=>o.setReadTime(e));const s=new bg(e,n,this.Ke,this.Qe,r);return this.Qe=zi(),this.$e=Pf(),this.Ue=Pf(),this.Ke=new $t(Ye),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new jk,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new un(Ye),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new un(Ye),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new jk),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Pf(){return new $t(Ne.comparator)}function Dk(){return new $t(Ne.comparator)}const bW={asc:"ASCENDING",desc:"DESCENDING"},TW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kW={and:"AND",or:"OR"};class SW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ix(t,e){return t.useProto3Json||vg(e)?e:{value:e}}function op(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NW(t,e){return op(t,e.toTimestamp())}function Xs(t){return pt(!!t),$e.fromTimestamp(function(n){const r=Qo(n);return new cn(r.seconds,r.nanos)}(t))}function T0(t,e){return ox(t,e).canonicalString()}function ox(t,e){const n=function(s){return new At(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SP(t){const e=At.fromString(t);return pt(AP(e)),e}function ax(t,e){return T0(t.databaseId,e.path)}function ay(t,e){const n=SP(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(CP(n))}function NP(t,e){return T0(t.databaseId,e)}function CW(t){const e=SP(t);return e.length===4?At.emptyPath():CP(e)}function lx(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CP(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mk(t,e,n){return{name:ax(t,e),fields:n.value.mapValue.fields}}function IW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(pt(h===void 0||typeof h=="string"),Cn.fromBase64String(h||"")):(pt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Cn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?re.UNKNOWN:EP(u.code);return new Ee(h,u.message||"")}(o);n=new TP(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ay(t,r.document.name),i=Xs(r.document.updateTime),o=r.document.createTime?Xs(r.document.createTime):$e.min(),a=new vr({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new um(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ay(t,r.document),i=r.readTime?Xs(r.readTime):$e.min(),o=zn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new um([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ay(t,r.document),i=r.removedTargetIds||[];n=new um([],i,s,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new wW(s,i),a=r.targetId;n=new bP(a,o)}}return n}function RW(t,e){let n;if(e instanceof Dh)n={update:Mk(t,e.key,e.value)};else if(e instanceof _0)n={delete:ax(t,e.key)};else if(e instanceof fa)n={update:Mk(t,e.key,e.data),updateMask:FW(e.fieldMask)};else{if(!(e instanceof gW))return De();n={verify:ax(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ip)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ih)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:NW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:De()}(t,e.precondition)),n}function AW(t,e){return t&&t.length>0?(pt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xs(s.updateTime):Xs(i);return o.isEqual($e.min())&&(o=Xs(i)),new fW(o,s.transformResults||[])}(n,e))):[]}function PW(t,e){return{documents:[NP(t,e.path)]}}function jW(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NP(t,s);const i=function(u){if(u.length!==0)return RP(bs.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:zl(p.field),direction:OW(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ix(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:n,parent:s}}function DW(t){let e=CW(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pt(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=IP(f);return p instanceof bs&&sP(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(x){return new sp(Wl(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,vg(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new rp(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new rp(g,p)}(n.endAt)),tW(e,s,o,i,a,"F",c,u)}function MW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wl(n.unaryFilter.field);return rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wl(n.unaryFilter.field);return rn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wl(n.unaryFilter.field);return rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wl(n.unaryFilter.field);return rn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return rn.create(Wl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bs.create(n.compositeFilter.filters.map(r=>IP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function OW(t){return bW[t]}function LW(t){return TW[t]}function VW(t){return kW[t]}function zl(t){return{fieldPath:t.canonicalString()}}function Wl(t){return En.fromServerFormat(t.fieldPath)}function RP(t){return t instanceof rn?function(n){if(n.op==="=="){if(Ek(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NAN"}};if(_k(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ek(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NAN"}};if(_k(n.value))return{unaryFilter:{field:zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(n.field),op:LW(n.op),value:n.value}}}(t):t instanceof bs?function(n){const r=n.getFilters().map(s=>RP(s));return r.length===1?r[0]:{compositeFilter:{op:VW(n.op),filters:r}}}(t):De()}function FW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,r,s,i=$e.min(),o=$e.min(),a=Cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.Tt=e}}function $W(t){const e=DW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(){this.Tn=new zW}addToCollectionParentIndex(e,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ko.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class zW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new un(At.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PP=41943040;class pr{static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(PP,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Kc(0)}static Kn(){return new Kc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="LruGarbageCollector",WW=1048576;function Vk([t,e],[n,r]){const s=Ye(t,n);return s===0?Ye(e,r):s}class HW{constructor(e){this.Hn=e,this.buffer=new un(Vk),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){we(Lk,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fu(n)?we(Lk,"Ignoring IndexedDB error during garbage collection: ",n):await hu(n)}await this.er(3e5)})}}class GW{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(gg.ae);const r=new HW(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Ok)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ok):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),$l()<=rt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function KW(t,e){return new GW(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(){this.changes=new bl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bd(r.mutation,s,Dr.empty(),cn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,n,r=st()){const s=ja();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ed();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ja();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,st()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zi();const o=Ed(),a=function(){return Ed()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof fa)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),bd(h.mutation,u,h.mutation.getFieldMask(),cn.now())):o.set(u.key,Dr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new YW(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ed();let s=new $t((o,a)=>o-a),i=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Dr.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||st()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=fP();h.forEach(p=>{if(!i.has(p)){const g=xP(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ne.resolve(ja());let a=th,c=i;return o.next(u=>ne.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?ne.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,st())).next(h=>({batchId:a,changes:hP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let s=ed();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ed();return this.indexManager.getCollectionParents(e,i).next(a=>ne.forEach(a,c=>{const u=function(f,p){return new jh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,zn.newInvalidDocument(h)))});let a=ed();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&bd(h.mutation,u,Dr.empty(),cn.now()),xg(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xs(s.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:$W(s.bundledQuery),readTime:Xs(s.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(){this.overlays=new $t(Ne.comparator),this.Rr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ja();return ne.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const s=ja(),i=n.length+1,o=new Ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $t((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ja(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ja(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return ne.resolve(a)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yW(n,r));let i=this.Rr.get(n);i===void 0&&(i=st(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Vr=new un(dn.mr),this.gr=new un(dn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new dn(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new dn(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new Ne(new At([])),r=new dn(n,e),s=new dn(n,e+1),i=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),i.push(o.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ne(new At([])),r=new dn(n,e),s=new dn(n,e+1);let i=st();return this.gr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dn(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ne.comparator(e.key,n.key)||Ye(e.Cr,n.Cr)}static pr(e,n){return Ye(e.Cr,n.Cr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new un(dn.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vW(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new dn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?f0:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dn(n,0),s=new dn(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],o=>{const a=this.Or(o.Cr);i.push(a)}),ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(Ye);return n.forEach(s=>{const i=new dn(s,0),o=new dn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,o],a=>{r=r.add(a.Cr)})}),ne.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const o=new dn(new Ne(i),0);let a=new un(Ye);return this.Mr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Cr)),!0)},o),ne.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ne.forEach(n.mutations,s=>{const i=new dn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new dn(n,0),s=this.Mr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.kr=e,this.docs=function(){return new $t(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=zi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():zn.newInvalidDocument(s))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zi();const o=n.path,a=new Ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jz(Pz(h),r)<=0||(s.has(h.key)||xg(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ne.resolve(i)}getAllFromCollectionGroup(e,n,r,s){De()}qr(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r8(this)}getSize(e){return ne.resolve(this.size)}}class r8 extends QW{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.persistence=e,this.Qr=new bl(n=>g0(n),v0),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.$r=0,this.Ur=new k0,this.targetCount=0,this.Kr=Kc.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),ne.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Kc(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.zn(n),ne.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),ne.waitFor(i).next(()=>s)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ne.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new gg(0),this.zr=!1,this.zr=!0,this.jr=new e8,this.referenceDelegate=e(this),this.Hr=new s8(this),this.indexManager=new BW,this.remoteDocumentCache=function(s){return new n8(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new UW(n),this.Yr=new ZW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new t8(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new i8(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return ne.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class i8 extends Mz{constructor(e){super(),this.currentSequenceNumber=e}}class S0{constructor(e){this.persistence=e,this.ti=new k0,this.ni=null}static ri(e){return new S0(e)}get ii(){if(this.ni)return this.ni;throw De()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,r=>{const s=Ne.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,$e.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class ap{constructor(e,n){this.persistence=e,this.oi=new bl(r=>Vz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=KW(this,n)}static ri(e,n){return new ap(e,n)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return ne.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?ne.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,i.removeEntry(o,$e.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=am(e.data.value)),n}ar(e,n,r){return ne.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=st(),s=st();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new N0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return R5()?8:Oz(Gn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new o8;return this._s(e,n,o).next(a=>{if(i.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?($l()<=rt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):($l()<=rt.DEBUG&&we("QueryEngine","Query:",Bl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?($l()<=rt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(n))):ne.resolve())}rs(e,n){if(Sk(n))return ne.resolve(null);let r=Ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sx(n,null,"F"),r=Ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=st(...i);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.cs(n,a);return this.ls(n,u,o,c.readTime)?this.rs(e,sx(n,null,"F")):this.hs(e,u,n,c)}))})))}ss(e,n,r,s){return Sk(n)||s.isEqual($e.min())?ne.resolve(null):this.ns.getDocuments(e,r).next(i=>{const o=this.cs(n,i);return this.ls(n,o,r,s)?ne.resolve(null):($l()<=rt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bl(n)),this.hs(e,o,n,Az(s,th)).next(a=>a))})}cs(e,n){let r=new un(uP(e));return n.forEach((s,i)=>{xg(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return $l()<=rt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Bl(n)),this.ns.getDocumentsMatchingQuery(e,n,Ko.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LocalStore",l8=3e8;class c8{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new $t(Ye),this.Is=new bl(i=>g0(i),v0),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XW(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function u8(t,e,n,r){return new c8(t,e,n,r)}async function DP(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=st();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Rs:u,removedBatchIds:o,addedBatchIds:a}))})})}function d8(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,p=f.keys();let g=ne.resolve();return p.forEach(x=>{g=g.next(()=>h.getEntry(c,x)).next(v=>{const T=u.docVersions.get(x);pt(T!==null),v.version.compareTo(T)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=st();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function MP(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function h8(t,e){const n=Be(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Hr.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Hr.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Cn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(v,T,_){return v.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=l8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&a.push(n.Hr.updateTargetData(i,g))});let c=zi(),u=st();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(f8(i,o,e.documentUpdates).next(h=>{c=h.Vs,u=h.fs})),!r.isEqual($e.min())){const h=n.Hr.getLastRemoteSnapshotVersion(i).next(f=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return ne.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ts=s,i))}function f8(t,e,n){let r=st(),s=st();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zi();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual($e.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):we(C0,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Vs:o,fs:s}})}function m8(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=f0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function p8(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,ne.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new Io(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function cx(t,e,n){const r=Be(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!fu(o))throw o;we(C0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function Fk(t,e,n){const r=Be(t);let s=$e.min(),i=st();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Be(c),p=f.Is.get(h);return p!==void 0?ne.resolve(f.Ts.get(p)):f.Hr.getTargetData(u,h)}(r,o,Ys(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:$e.min(),n?i:st())).next(a=>(g8(r,rW(e),a),{documents:a,gs:i})))}function g8(t,e,n){let r=t.Es.get(e)||$e.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}class Uk{constructor(){this.activeTargetIds=cW()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v8{constructor(){this.ho=new Uk,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Uk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="ConnectivityMonitor";class Bk{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){we($k,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){we($k,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf=null;function ux(){return jf===null?jf=function(){return 268435456+Math.round(2147483648*Math.random())}():jf++,"0x"+jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="RestConnection",w8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x8{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===tp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,i){const o=ux(),a=this.bo(e,n.toUriEncodedString());we(ly,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,i),this.vo(e,a,c,r).then(u=>(we(ly,`Received RPC '${e}' ${o}: `,u),u),u=>{throw Bc(ly,`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,n,r,s,i,o){return this.So(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+du}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}bo(e,n){const r=w8[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class E8 extends x8{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=ux();return new Promise((o,a)=>{const c=new VA;c.setWithCredentials(!0),c.listenOnce(FA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case om.NO_ERROR:const h=c.getResponseJson();we(Mn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case om.TIMEOUT:we(Mn,`RPC '${e}' ${i} timed out`),a(new Ee(re.DEADLINE_EXCEEDED,"Request time out"));break;case om.HTTP_ERROR:const f=c.getStatus();if(we(Mn,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(_)>=0?_:re.UNKNOWN}(g.status);a(new Ee(x,g.message))}else a(new Ee(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ee(re.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{we(Mn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);we(Mn,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Wo(e,n,r){const s=ux(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BA(),a=$A(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");we(Mn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let p=!1,g=!1;const x=new _8({Fo:T=>{g?we(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(we(Mn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),we(Mn,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},Mo:()=>f.close()}),v=(T,_,y)=>{T.listen(_,b=>{try{y(b)}catch(C){setTimeout(()=>{throw C},0)}})};return v(f,Ju.EventType.OPEN,()=>{g||(we(Mn,`RPC '${e}' stream ${s} transport opened.`),x.Qo())}),v(f,Ju.EventType.CLOSE,()=>{g||(g=!0,we(Mn,`RPC '${e}' stream ${s} transport closed`),x.Uo())}),v(f,Ju.EventType.ERROR,T=>{g||(g=!0,Bc(Mn,`RPC '${e}' stream ${s} transport errored:`,T),x.Uo(new Ee(re.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ju.EventType.MESSAGE,T=>{var _;if(!g){const y=T.data[0];pt(!!y);const b=y,C=(b==null?void 0:b.error)||((_=b[0])===null||_===void 0?void 0:_.error);if(C){we(Mn,`RPC '${e}' stream ${s} received error:`,C);const P=C.status;let L=function(S){const R=Jt[S];if(R!==void 0)return EP(R)}(P),N=C.message;L===void 0&&(L=re.INTERNAL,N="Unknown error status: "+P+" with message "+C.message),g=!0,x.Uo(new Ee(L,N)),f.close()}else we(Mn,`RPC '${e}' stream ${s} received:`,y),x.Ko(y)}}),v(a,UA.STAT_EVENT,T=>{T.stat===Xw.PROXY?we(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Xw.NOPROXY&&we(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function cy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return new SW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="PersistentStream";class LP{constructor(e,n,r,s,i,o,a,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new OP(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(Bi(n.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new Ee(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return we(zk,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(we(zk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b8 extends LP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=IW(this.serializer,e),r=function(i){if(!("targetChange"in i))return $e.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?$e.min():o.readTime?Xs(o.readTime):$e.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=lx(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=nx(c)?{documents:PW(i,c)}:{query:jW(i,c).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kP(i,o.resumeToken);const u=ix(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo($e.min())>0){a.readTime=op(i,o.snapshotVersion.toTimestamp());const u=ix(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=MW(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=lx(this.serializer),n.removeTarget=e,this.I_(n)}}class T8 extends LP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=AW(e.writeResults,e.commitTime),r=Xs(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=lx(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RW(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{}class S8 extends k8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,ox(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(re.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,ox(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(re.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class N8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Bi(n),this.N_=!1):we("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class C8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(o=>{r.enqueueAndForget(async()=>{Tl(this)&&(we(sl,"Restarting streams for network reachability change."),await async function(c){const u=Be(c);u.W_.add(4),await Oh(u),u.j_.set("Unknown"),u.W_.delete(4),await kg(u)}(this))})}),this.j_=new N8(r,s)}}async function kg(t){if(Tl(t))for(const e of t.G_)await e(!0)}async function Oh(t){for(const e of t.G_)await e(!1)}function VP(t,e){const n=Be(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),P0(n)?A0(n):mu(n).c_()&&R0(n,e))}function I0(t,e){const n=Be(t),r=mu(n);n.K_.delete(e),r.c_()&&FP(n,e),n.K_.size===0&&(r.c_()?r.P_():Tl(n)&&n.j_.set("Unknown"))}function R0(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mu(t).y_(e)}function FP(t,e){t.H_.Ne(e),mu(t).w_(e)}function A0(t){t.H_=new EW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),mu(t).start(),t.j_.B_()}function P0(t){return Tl(t)&&!mu(t).u_()&&t.K_.size>0}function Tl(t){return Be(t).W_.size===0}function UP(t){t.H_=void 0}async function I8(t){t.j_.set("Online")}async function R8(t){t.K_.forEach((e,n)=>{R0(t,e)})}async function A8(t,e){UP(t),P0(t)?(t.j_.q_(e),A0(t)):t.j_.set("Unknown")}async function P8(t,e,n){if(t.j_.set("Online"),e instanceof TP&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.K_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.K_.delete(a),s.H_.removeTarget(a))}(t,e)}catch(r){we(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lp(t,r)}else if(e instanceof um?t.H_.We(e):e instanceof bP?t.H_.Ze(e):t.H_.je(e),!n.isEqual($e.min()))try{const r=await MP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.H_.ot(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.K_.get(u);h&&i.K_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.K_.get(c);if(!h)return;i.K_.set(c,h.withResumeToken(Cn.EMPTY_BYTE_STRING,h.snapshotVersion)),FP(i,c);const f=new Io(h.target,c,u,h.sequenceNumber);R0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){we(sl,"Failed to raise snapshot:",r),await lp(t,r)}}async function lp(t,e,n){if(!fu(e))throw e;t.W_.add(1),await Oh(t),t.j_.set("Offline"),n||(n=()=>MP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(sl,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await kg(t)})}function $P(t,e){return e().catch(n=>lp(t,n,e))}async function Sg(t){const e=Be(t),n=Zo(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:f0;for(;j8(e);)try{const s=await m8(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,D8(e,s)}catch(s){await lp(e,s)}BP(e)&&zP(e)}function j8(t){return Tl(t)&&t.U_.length<10}function D8(t,e){t.U_.push(e);const n=Zo(t);n.c_()&&n.S_&&n.b_(e.mutations)}function BP(t){return Tl(t)&&!Zo(t).u_()&&t.U_.length>0}function zP(t){Zo(t).start()}async function M8(t){Zo(t).C_()}async function O8(t){const e=Zo(t);for(const n of t.U_)e.b_(n.mutations)}async function L8(t,e,n){const r=t.U_.shift(),s=E0.from(r,e,n);await $P(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sg(t)}async function V8(t,e){e&&Zo(t).S_&&await async function(r,s){if(function(o){return xW(o)&&o!==re.ABORTED}(s.code)){const i=r.U_.shift();Zo(r).h_(),await $P(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sg(r)}}(t,e),BP(t)&&zP(t)}async function Wk(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),we(sl,"RemoteStore received new credentials");const r=Tl(n);n.W_.add(3),await Oh(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await kg(n)}async function F8(t,e){const n=Be(t);e?(n.W_.delete(2),await kg(n)):e||(n.W_.add(2),await Oh(n),n.j_.set("Unknown"))}function mu(t){return t.J_||(t.J_=function(n,r,s){const i=Be(n);return i.M_(),new b8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:I8.bind(null,t),No:R8.bind(null,t),Lo:A8.bind(null,t),p_:P8.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),P0(t)?A0(t):t.j_.set("Unknown")):(await t.J_.stop(),UP(t))})),t.J_}function Zo(t){return t.Y_||(t.Y_=function(n,r,s){const i=Be(n);return i.M_(),new T8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:M8.bind(null,t),Lo:V8.bind(null,t),D_:O8.bind(null,t),v_:L8.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Sg(t)):(await t.Y_.stop(),t.U_.length>0&&(we(sl,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new j0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D0(t,e){if(Bi("AsyncQueue",`${e}: ${t}`),fu(t))return new Ee(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{static emptySet(e){return new pc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=ed(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.Z_=new $t(Ne.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):De():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qc{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qc(e,n,pc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class $8{constructor(){this.queries=qk(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Be(n),i=s.queries;s.queries=qk(),i.forEach((o,a)=>{for(const c of a.ta)c.onError(r)})})(this,new Ee(re.ABORTED,"Firestore shutting down"))}}function qk(){return new bl(t=>cP(t),wg)}async function WP(t,e){const n=Be(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new U8,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=D0(o,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&M0(n)}async function HP(t,e){const n=Be(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ta.indexOf(e);o>=0&&(i.ta.splice(o,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B8(t,e){const n=Be(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ta)a.oa(s)&&(r=!0);o.ea=s}}r&&M0(n)}function z8(t,e,n){const r=Be(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function M0(t){t.ia.forEach(e=>{e.next()})}var dx,Gk;(Gk=dx||(dx={}))._a="default",Gk.Cache="cache";class qP{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==dx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.key=e}}class KP{constructor(e){this.key=e}}class W8{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=st(),this.mutatedKeys=st(),this.ya=uP(e),this.wa=new pc(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new Hk,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=xg(this.query,f)?f:null,x=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;p&&g?p.data.isEqual(g.data)?x!==v&&(r.track({type:3,doc:g}),T=!0):this.va(p,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.ya(g,c)>0||u&&this.ya(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),T=!0):p&&!g&&(r.track({type:1,doc:p}),T=!0,(c||u)&&(a=!0)),T&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(g,x){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return v(g)-v(x)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(r),s=s!=null&&s;const a=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,u=c!==this.ga;return this.ga=c,o.length!==0||u?{snapshot:new Qc(this.query,e.wa,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Hk,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=st(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new KP(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new GP(r))}),n}Oa(e){this.fa=e.gs,this.pa=st();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Qc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const O0="SyncEngine";class H8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q8{constructor(e){this.key=e,this.Ba=!1}}class G8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new bl(a=>cP(a),wg),this.qa=new Map,this.Qa=new Set,this.$a=new $t(Ne.comparator),this.Ua=new Map,this.Ka=new k0,this.Wa={},this.Ga=new Map,this.za=Kc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function K8(t,e,n=!0){const r=ej(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await QP(r,e,n,!0),s}async function Q8(t,e){const n=ej(t);await QP(n,e,!0,!1)}async function QP(t,e,n,r){const s=await p8(t.localStore,Ys(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Y8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&VP(t.remoteStore,s),a}async function Y8(t,e,n,r,s){t.Ha=(f,p,g)=>async function(v,T,_,y){let b=T.view.ba(_);b.ls&&(b=await Fk(v.localStore,T.query,!1).then(({documents:N})=>T.view.ba(N,b)));const C=y&&y.targetChanges.get(T.targetId),P=y&&y.targetMismatches.get(T.targetId)!=null,L=T.view.applyChanges(b,v.isPrimaryClient,C,P);return Qk(v,T.targetId,L.Ma),L.snapshot}(t,f,p,g);const i=await Fk(t.localStore,e,!0),o=new W8(e,i.gs),a=o.ba(i.documents),c=Mh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Qk(t,n,u.Ma);const h=new H8(e,n,o);return t.ka.set(e,h),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),u.snapshot}async function X8(t,e,n){const r=Be(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(o=>!wg(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&I0(r.remoteStore,s.targetId),hx(r,s.targetId)}).catch(hu)):(hx(r,s.targetId),await cx(r.localStore,s.targetId,!0))}async function Z8(t,e){const n=Be(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),I0(n.remoteStore,r.targetId))}async function J8(t,e,n){const r=o7(t);try{const s=await function(o,a){const c=Be(o),u=cn.now(),h=a.reduce((g,x)=>g.add(x.key),st());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=zi(),v=st();return c.ds.getEntries(g,h).next(T=>{x=T,x.forEach((_,y)=>{y.isValidDocument()||(v=v.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(T=>{f=T;const _=[];for(const y of a){const b=pW(y,f.get(y.key).overlayedDocument);b!=null&&_.push(new fa(y.key,b,tP(b.value.mapValue),Zr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,a)}).next(T=>{p=T;const _=T.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(g,T.batchId,_)})}).then(()=>({batchId:p.batchId,changes:hP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Wa[o.currentUser.toKey()];u||(u=new $t(Ye)),u=u.insert(a,c),o.Wa[o.currentUser.toKey()]=u}(r,s.batchId,n),await Lh(r,s.changes),await Sg(r.remoteStore)}catch(s){const i=D0(s,"Failed to persist write");n.reject(i)}}async function YP(t,e){const n=Be(t);try{const r=await h8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ua.get(i);o&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?pt(o.Ba):s.removedDocuments.size>0&&(pt(o.Ba),o.Ba=!1))}),await Lh(n,r,e)}catch(r){await hu(r)}}function Kk(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Be(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(a)&&(u=!0)}),u&&M0(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function e7(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),i=s&&s.key;if(i){let o=new $t(Ne.comparator);o=o.insert(i,zn.newNoDocument(i,$e.min()));const a=st().add(i),c=new bg($e.min(),new Map,new $t(Ye),o,a);await YP(r,c),r.$a=r.$a.remove(i),r.Ua.delete(e),L0(r)}else await cx(r.localStore,e,!1).then(()=>hx(r,e,n)).catch(hu)}async function t7(t,e){const n=Be(t),r=e.batch.batchId;try{const s=await d8(n.localStore,e);ZP(n,r,null),XP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lh(n,s)}catch(s){await hu(s)}}async function n7(t,e,n){const r=Be(t);try{const s=await function(o,a){const c=Be(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(pt(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);ZP(r,e,n),XP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lh(r,s)}catch(s){await hu(s)}}function XP(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function ZP(t,e,n){const r=Be(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function hx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||JP(t,r)})}function JP(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(I0(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),L0(t))}function Qk(t,e,n){for(const r of n)r instanceof GP?(t.Ka.addReference(r.key,e),r7(t,r)):r instanceof KP?(we(O0,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||JP(t,r.key)):De()}function r7(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(we(O0,"New document in limbo: "+n),t.Qa.add(r),L0(t))}function L0(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Ne(At.fromString(e)),r=t.za.next();t.Ua.set(r,new q8(n)),t.$a=t.$a.insert(n,r),VP(t.remoteStore,new Io(Ys(y0(n.path)),r,"TargetPurposeLimboResolution",gg.ae))}}async function Lh(t,e,n){const r=Be(t),s=[],i=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,c)=>{o.push(r.Ha(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=N0.Yi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.La.p_(s),await async function(c,u){const h=Be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(u,p=>ne.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>ne.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!fu(f))throw f;we(C0,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),x=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(x);h.Ts=h.Ts.insert(p,v)}}}(r.localStore,i))}async function s7(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){we(O0,"User change. New user:",e.toKey());const r=await DP(n.localStore,e);n.currentUser=e,function(i,o){i.Ga.forEach(a=>{a.forEach(c=>{c.reject(new Ee(re.CANCELLED,o))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lh(n,r.Rs)}}function i7(t,e){const n=Be(t),r=n.Ua.get(e);if(r&&r.Ba)return st().add(r.key);{let s=st();const i=n.qa.get(e);if(!i)return s;for(const o of i){const a=n.ka.get(o);s=s.unionWith(a.view.Sa)}return s}}function ej(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e7.bind(null,e),e.La.p_=B8.bind(null,e.eventManager),e.La.Ja=z8.bind(null,e.eventManager),e}function o7(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n7.bind(null,e),e}class cp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return u8(this.persistence,new a8,e.initialUser,this.serializer)}Xa(e){return new jP(S0.ri,this.serializer)}Za(e){return new v8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cp.provider={build:()=>new cp};class a7 extends cp{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){pt(this.persistence.referenceDelegate instanceof ap);const r=this.persistence.referenceDelegate.garbageCollector;return new qW(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new jP(r=>ap.ri(r,n),this.serializer)}}class fx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s7.bind(null,this.syncEngine),await F8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $8}()}createDatastore(e){const n=Tg(e.databaseInfo.databaseId),r=function(i){return new E8(i)}(e.databaseInfo);return function(i,o,a,c){return new S8(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new C8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kk(this.syncEngine,n,0),function(){return Bk.D()?new Bk:new y8}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new G8(s,i,o,a,c,u);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Be(s);we(sl,"RemoteStore shutting down."),i.W_.add(5),await Oh(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fx.provider={build:()=>new fx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="FirestoreClient";class l7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ln.UNAUTHENTICATED,this.clientId=HA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{we(Jo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(we(Jo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=D0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uy(t,e){t.asyncQueue.verifyOperationInProgress(),we(Jo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await DP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c7(t);we(Jo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Wk(e.remoteStore,s)),t._onlineComponents=e}async function c7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(Jo,"Using user provided OfflineComponentProvider");try{await uy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bc("Error using user provided cache. Falling back to memory cache: "+n),await uy(t,new cp)}}else we(Jo,"Using default OfflineComponentProvider"),await uy(t,new a7(void 0));return t._offlineComponents}async function nj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(Jo,"Using user provided OnlineComponentProvider"),await Yk(t,t._uninitializedComponentsProvider._online)):(we(Jo,"Using default OnlineComponentProvider"),await Yk(t,new fx))),t._onlineComponents}function u7(t){return nj(t).then(e=>e.syncEngine)}async function rj(t){const e=await nj(t),n=e.eventManager;return n.onListen=K8.bind(null,e.syncEngine),n.onUnlisten=X8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z8.bind(null,e.syncEngine),n}function d7(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new tj({next:p=>{h.su(),o.enqueueAndForget(()=>HP(i,f));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new Ee(re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new Ee(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new qP(y0(a.path),h,{includeMetadataChanges:!0,Ta:!0});return WP(i,f)}(await rj(t),t.asyncQueue,e,n,r)),r.promise}function h7(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new tj({next:p=>{h.su(),o.enqueueAndForget(()=>HP(i,f)),p.fromCache&&c.source==="server"?u.reject(new Ee(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new qP(a,h,{includeMetadataChanges:!0,Ta:!0});return WP(i,f)}(await rj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e,n){if(!n)throw new Ee(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f7(t,e,n,r){if(e===!0&&r===!0)throw new Ee(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zk(t){if(!Ne.isDocumentKey(t))throw new Ee(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jk(t){if(Ne.isDocumentKey(t))throw new Ee(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ng(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function Ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ng(t);throw new Ee(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="firestore.googleapis.com",eS=!0;class tS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oj,this.ssl=eS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:eS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WW)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ez;switch(r.type){case"firstParty":return new Sz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xk.get(n);r&&(we("ComponentProvider","Removing Datastore"),Xk.delete(n),r.terminate())}(this),Promise.resolve()}}function m7(t,e,n,r={}){var s;const i=(t=Ts(t,Cg))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i.host!==oj&&i.host!==a&&Bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:a,ssl:!1,emulatorOptions:r});if(!Fi(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Ln.MOCK_USER;else{u=qR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ee(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ln(f)}t._authCredentials=new bz(new zA(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pu(this.firestore,e,this._query)}}class nr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Bo extends pu{constructor(e,n,r){super(e,n,y0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Ne(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function In(t,e,...n){if(t=Tt(t),ij("collection","path",e),t instanceof Cg){const r=At.fromString(e,...n);return Jk(r),new Bo(t,null,r)}{if(!(t instanceof nr||t instanceof Bo))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return Jk(r),new Bo(t.firestore,null,r)}}function Re(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=HA.newId()),ij("doc","path",e),t instanceof Cg){const r=At.fromString(e,...n);return Zk(r),new nr(t,null,new Ne(r))}{if(!(t instanceof nr||t instanceof Bo))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return Zk(r),new nr(t.firestore,t instanceof Bo?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="AsyncQueue";class rS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new OP(this,"async_queue_retry"),this.Su=()=>{const r=cy();r&&we(nS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=cy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=cy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Pi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fu(e))throw e;we(nS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Bi("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=j0.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&De()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class kl extends Cg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new rS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rS(e),this._firestoreClient=void 0,await e}}}function p7(t,e){const n=typeof t=="object"?t:J_(),r=typeof t=="string"?t:tp,s=hg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zR("firestore");i&&m7(s,...i)}return s}function V0(t){if(t._terminated)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||g7(t),t._firestoreClient}function g7(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new $z(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sj(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new l7(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yc(Cn.fromBase64String(e))}catch(n){throw new Ee(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yc(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=/^__.*__$/;class y7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dh(e,this.data,n,this.fieldTransforms)}}class aj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Rg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return up(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(lj(this.Lu)&&v7.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class w7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tg(e)}ju(e,n,r,s=!1){return new Rg({Lu:e,methodName:n,zu:r,path:En.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(t){const e=t._freezeSettings(),n=Tg(t._databaseId);return new w7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cj(t,e,n,r,s,i={}){const o=t.ju(i.merge||i.mergeFields?2:0,e,n,s);W0("Data must be an object, but it was:",o,r);const a=dj(r,o);let c,u;if(i.merge)c=new Dr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=mx(e,f,n);if(!o.contains(p))throw new Ee(re.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fj(h,p)||h.push(p)}c=new Dr(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new y7(new vr(a),c,u)}class Pg extends gu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pg}}function uj(t,e,n){return new Rg({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $0 extends gu{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=uj(this,e,!0),r=this.Hu.map(i=>Sl(i,n)),s=new qc(r);return new x0(e.path,s)}isEqual(e){return e instanceof $0&&Fi(this.Hu,e.Hu)}}class B0 extends gu{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=uj(this,e,!0),r=this.Hu.map(i=>Sl(i,n)),s=new Gc(r);return new x0(e.path,s)}isEqual(e){return e instanceof B0&&Fi(this.Hu,e.Hu)}}class z0 extends gu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new ih(e.serializer,pP(e.serializer,this.Ju));return new x0(e.path,n)}isEqual(e){return e instanceof z0&&this.Ju===e.Ju}}function x7(t,e,n,r){const s=t.ju(1,e,n);W0("Data must be an object, but it was:",s,r);const i=[],o=vr.empty();ha(r,(c,u)=>{const h=H0(e,c,n);u=Tt(u);const f=s.Uu(h);if(u instanceof Pg)i.push(h);else{const p=Sl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const a=new Dr(i);return new aj(o,a,s.fieldTransforms)}function _7(t,e,n,r,s,i){const o=t.ju(1,e,n),a=[mx(e,r,n)],c=[s];if(i.length%2!=0)throw new Ee(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(mx(e,i[p])),c.push(i[p+1]);const u=[],h=vr.empty();for(let p=a.length-1;p>=0;--p)if(!fj(u,a[p])){const g=a[p];let x=c[p];x=Tt(x);const v=o.Uu(g);if(x instanceof Pg)u.push(g);else{const T=Sl(x,v);T!=null&&(u.push(g),h.set(g,T))}}const f=new Dr(u);return new aj(h,f,o.fieldTransforms)}function E7(t,e,n,r=!1){return Sl(n,t.ju(r?4:3,e))}function Sl(t,e){if(hj(t=Tt(t)))return W0("Unsupported field value:",e,t),dj(t,e);if(t instanceof gu)return function(r,s){if(!lj(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Sl(a,s.Ku(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=cn.fromDate(r);return{timestampValue:op(s.serializer,i)}}if(r instanceof cn){const i=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:op(s.serializer,i)}}if(r instanceof F0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yc)return{bytesValue:kP(s.serializer,r._byteString)};if(r instanceof nr){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:T0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof U0)return function(o,a){return{mapValue:{fields:{[JA]:{stringValue:eP},[np]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return w0(a.serializer,u)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Ng(r)}`)}(t,e)}function dj(t,e){const n={};return GA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(t,(r,s)=>{const i=Sl(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cn||t instanceof F0||t instanceof Yc||t instanceof nr||t instanceof gu||t instanceof U0)}function W0(t,e,n){if(!hj(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ng(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function mx(t,e,n){if((e=Tt(e))instanceof Ig)return e._internalPath;if(typeof e=="string")return H0(t,e);throw up("Field path arguments must be of type string or ",t,!1,void 0,n)}const b7=new RegExp("[~\\*/\\[\\]]");function H0(t,e,n){if(e.search(b7)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ig(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function up(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Ee(re.INVALID_ARGUMENT,a+t+c)}function fj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T7 extends mj{data(){return super.data()}}function q0(t,e){return typeof e=="string"?H0(t,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G0{}class S7 extends G0{}function Tn(t,e,...n){let r=[];e instanceof G0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof K0).length,a=i.filter(c=>c instanceof jg).length;if(o>1||o>0&&a>0)throw new Ee(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class jg extends S7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jg(e,n,r)}_apply(e){const n=this._parse(e);return pj(e._query,n),new pu(e.firestore,e.converter,rx(e._query,n))}_parse(e){const n=Ag(e.firestore);return function(i,o,a,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iS(f,h);const x=[];for(const v of f)x.push(sS(c,i,v));p={arrayValue:{values:x}}}else p=sS(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iS(f,h),p=E7(a,o,f,h==="in"||h==="not-in");return rn.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kn(t,e,n){const r=e,s=q0("where",t);return jg._create(s,r,n)}class K0 extends G0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new K0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)pj(o,c),o=rx(o,c)}(e._query,n),new pu(e.firestore,e.converter,rx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sS(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new Ee(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lP(e)&&n.indexOf("/")!==-1)throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!Ne.isDocumentKey(r))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xk(t,new Ne(r))}if(n instanceof nr)return xk(t,n._key);throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ng(n)}.`)}function iS(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pj(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N7{convertValue(e,n="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ha(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[np].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Gt(o.doubleValue));return new U0(i)}convertGeoPoint(e){return new F0(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nh(e));default:return null}}convertTimestamp(e){const n=Qo(e);return new cn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);pt(AP(r));const s=new rh(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return s.isEqual(n)||Bi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vj extends mj{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dm extends vj{data(e={}){return super.data(e)}}class C7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new nd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dm(this._firestore,this._userDataWriter,r.key,r,new nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new dm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new nd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new dm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new nd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:I7(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function I7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){t=Ts(t,nr);const e=Ts(t.firestore,kl);return d7(V0(e),t._key).then(n=>R7(e,t,n))}class yj extends N7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,n)}}function Hn(t){t=Ts(t,pu);const e=Ts(t.firestore,kl),n=V0(e),r=new yj(e);return k7(t._query),h7(n,t._query).then(s=>new C7(e,r,t,s))}function Td(t,e,n){t=Ts(t,nr);const r=Ts(t.firestore,kl),s=gj(t.converter,e,n);return Mg(r,[cj(Ag(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zr.none())])}function Zt(t,e,n,...r){t=Ts(t,nr);const s=Ts(t.firestore,kl),i=Ag(s);let o;return o=typeof(e=Tt(e))=="string"||e instanceof Ig?_7(i,"updateDoc",t._key,e,n,r):x7(i,"updateDoc",t._key,e),Mg(s,[o.toMutation(t._key,Zr.exists(!0))])}function Q0(t){return Mg(Ts(t.firestore,kl),[new _0(t._key,Zr.none())])}function Dg(t,e){const n=Ts(t.firestore,kl),r=Re(t),s=gj(t.converter,e);return Mg(n,[cj(Ag(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zr.exists(!1))]).then(()=>r)}function Mg(t,e){return function(r,s){const i=new Pi;return r.asyncQueue.enqueueAndForget(async()=>J8(await u7(r),s,i)),i.promise}(V0(t),e)}function R7(t,e,n){const r=n.docs.get(e._key),s=new yj(t);return new vj(t,s,e._key,r,new nd(n.hasPendingWrites,n.fromCache),e.converter)}function Y0(...t){return new $0("arrayUnion",t)}function dp(...t){return new B0("arrayRemove",t)}function wj(t){return new z0("increment",t)}(function(e,n=!0){(function(s){du=s})(_l),Ja(new Go("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new kl(new Tz(r.getProvider("auth-internal")),new Nz(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ee(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gs(lk,ck,e),Gs(lk,ck,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="firebasestorage.googleapis.com",A7="storageBucket",P7=2*60*1e3,j7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Br{constructor(e,n,r=0){super(dy(e),`Firebase Storage: ${n} (${dy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,li.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var si;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(si||(si={}));function dy(t){return"storage/"+t}function D7(){const t="An unknown error occurred, please check the error payload for server response.";return new li(si.UNKNOWN,t)}function M7(){return new li(si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O7(){return new li(si.CANCELED,"User canceled the upload/download.")}function L7(t){return new li(si.INVALID_URL,"Invalid URL '"+t+"'.")}function V7(t){return new li(si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oS(t){return new li(si.INVALID_ARGUMENT,t)}function _j(){return new li(si.APP_DELETED,"The Firebase app was deleted.")}function F7(t){return new li(si.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ys.makeFromUrl(e,n)}catch{return new ys(e,"")}if(r.path==="")return r;throw V7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),x={bucket:1,path:3},v=n===xj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",_=new RegExp(`^https?://${v}/${s}/${T}`,"i"),b=[{regex:a,indices:c,postModify:i},{regex:g,indices:x,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<b.length;C++){const P=b[C],L=P.regex.exec(e);if(L){const N=L[P.indices.bucket];let E=L[P.indices.path];E||(E=""),r=new ys(N,E),P.postModify(r);break}}if(r==null)throw L7(e);return r}}class U7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(g,c())},T)}function p(){i&&clearTimeout(i)}function g(T,..._){if(u){p();return}if(T){p(),h.call(null,T,..._);return}if(c()||o){p(),h.call(null,T,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let x=!1;function v(T){x||(x=!0,p(),!u&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function B7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z7(t){return t!==void 0}function aS(t,e,n,r){if(r<e)throw oS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw oS(`Invalid value for '${t}'. Expected ${n} or less.`)}function W7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var hp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hp||(hp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,n,r,s,i,o,a,c,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Df(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===hp.NO_ERROR,c=i.getStatus();if(!a||H7(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===hp.ABORT;r(!1,new Df(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Df(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());z7(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=D7();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?_j():O7();o(c)}else{const c=M7();o(c)}};this.canceled_?n(!1,new Df(!1,null,!0)):this.backoffId_=$7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&B7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Df{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function G7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function K7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Y7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function X7(t,e,n,r,s,i,o=!0){const a=W7(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return Q7(u,e),G7(u,n),K7(u,i),Y7(u,r),new q7(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function J7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this._service=e,n instanceof ys?this._location=n:this._location=ys.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fp(e,n)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return J7(this._location.path)}get storage(){return this._service}get parent(){const e=Z7(this._location.path);if(e===null)return null;const n=new ys(this._location.bucket,e);return new fp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw F7(e)}}function lS(t,e){const n=e==null?void 0:e[A7];return n==null?null:ys.makeFromBucketSpec(n,t)}function eH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:qR(s,t.app.options.projectId))}class tH{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=xj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P7,this._maxUploadRetryTime=j7,this._requests=new Set,s!=null?this._bucket=ys.makeFromBucketSpec(s,this._host):this._bucket=lS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ys.makeFromBucketSpec(this._url,e):this._bucket=lS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fp(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new U7(_j());{const o=X7(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cS="@firebase/storage",uS="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="storage";function nH(t=J_(),e){t=Tt(t);const r=hg(t,Ej).getImmediate({identifier:e}),s=zR("storage");return s&&rH(r,...s),r}function rH(t,e,n,r={}){eH(t,e,n,r)}function sH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tH(n,r,s,e,_l)}function iH(){Ja(new Go(Ej,sH,"PUBLIC").setMultipleInstances(!0)),Gs(cS,uS,""),Gs(cS,uS,"esm2017")}iH();const oH={apiKey:"AIzaSyCsmFp4rZJFJg54n20SjCBXh59zdFP3ACw",authDomain:"soundfeedback-errqu.firebaseapp.com",projectId:"soundfeedback-errqu",storageBucket:"soundfeedback-errqu.firebasestorage.app",messagingSenderId:"755146559384",appId:"1:755146559384:web:aee4816b832889b9fb25ed"},X0=QR(oH),Ze=xz(X0),xe=p7(X0);nH(X0);const ot={USER:"Пользователь",ADMIN:"Администратор"},aH=t=>Object.keys(ot).find(e=>ot[e]===t)||"USER",lH=t=>ot[t]||ot.USER,cH=async t=>{const{username:e,email:n,password:r}=t,s=In(xe,"users"),i=Tn(s,kn("username","==",e));if(!(await Hn(i)).empty)throw new Error("Никнейм уже занят. Пожалуйста, выберите другой.");const c=(await e6(Ze,n,r)).user;await Qw(c,{displayName:e});const u=aH(ot.USER);return await Td(Re(xe,"users",c.uid),{uid:c.uid,email:c.email,username:e,role:u,avatarUrl:null,emailVerified:!1,isBanned:!1,createdAt:new Date().toISOString()}),c},uH=async(t,e)=>(await t6(Ze,t,e)).user,dH=async()=>{await c6(Ze)},dS=async()=>{Ze.currentUser&&await n6(Ze.currentUser)},Z0=async(t,e)=>{try{const n=El.credential(t.email,e);await Y9(t,n)}catch(n){throw new Br(n.code,n.message)}},hH=async(t,e)=>{try{const n=In(xe,"users"),r=Tn(n,kn("username","==",e));if(!(await Hn(r)).empty)throw new Error("Никнейм уже занят. Пожалуйста, выберите другой.");await Qw(t,{displayName:e});const i=Re(xe,"users",t.uid);await Zt(i,{username:e}),await Qw(Ze.currentUser,{displayName:e})}catch(n){throw new Error("Не удалось обновить имя пользователя: "+(n.message||"Неизвестная ошибка"))}},fH=async(t,e)=>{try{await s6(t,e)}catch(n){throw new Error("Не удалось обновить пароль: "+(n.message||"Неизвестная ошибка"))}},mH=async(t,e)=>{try{await Z0(t,e);const n=In(xe,"reviews"),r=Tn(n,kn("userId","==",t.uid)),i=(await Hn(r)).docs.map(c=>Td(Re(xe,"reviews",c.id),{deleted:!0,deletedAt:new Date().toISOString()},{merge:!0}));await Promise.all(i);const o=Re(xe,"userStats",t.uid);await Td(o,{deleted:!0,deletedAt:new Date().toISOString()},{merge:!0});const a=Re(xe,"users",t.uid);await Td(a,{deleted:!0,deletedAt:new Date().toISOString()},{merge:!0}),await t.delete()}catch(n){throw n instanceof Br&&n.code==="auth/requires-recent-login"?new Error("Требуется повторная авторизация. Пожалуйста, выйдите и войдите снова."):new Error("Не удалось удалить аккаунт: "+(n.message||"Неизвестная ошибка"))}},Or=async t=>{const e=await He(Re(xe,"users",t));return e.exists()?e.data():null},bj=async t=>{try{const e=Re(xe,"users",t),n=await He(e);if(!n.exists())throw new Error("Пользователь не найден");return{readReviews:n.data().readReviews||0}}catch(e){throw new Error("Не удалось загрузить статистику пользователя: "+(e.message||"Неизвестная ошибка"))}},pH=async(t,e)=>{try{const n=Re(xe,"users",t);if(!(await He(n)).exists())throw new Error("Пользователь не найден");const s=In(xe,`users/${t}/readReviews`),i=Tn(s,kn("reviewId","==",e));return(await Hn(i)).empty?(await Dg(s,{reviewId:e,readAt:new Date().toISOString()}),await Zt(n,{readReviews:wj(1)}),!0):!1}catch(n){throw new Error("Не удалось обновить статистику прочитанных рецензий: "+(n.message||"Неизвестная ошибка"))}},Tj=async t=>{try{const e=Re(xe,"users",t),n=await He(e);if(!n.exists())throw new Error("Пользователь не найден");"readReviews"in n.data()||await Zt(e,{readReviews:0})}catch(e){throw new Error("Не удалось инициализировать статистику пользователя: "+(e.message||"Неизвестная ошибка"))}},gH=async(t,e)=>{var c;if(!t.uid)throw new Error("User ID not found");const r=(c=(await He(Re(xe,"users",t.uid))).data())==null?void 0:c.avatarUrl;r&&await fetch(`${pn}/delete-avatar`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarUrl:r,username:t.displayName})});const s=new FormData;s.append("avatar",e),s.append("username",t.displayName);const i=await fetch(`${pn}/upload-avatar`,{method:"POST",body:s}),o=await i.json();if(!i.ok)throw new Error(o.error||"Ошибка загрузки аватара");const a=o.avatarUrl;return await Zt(Re(xe,"users",t.uid),{avatarUrl:a}),a},vH=async t=>{var r;if(!t.uid)throw new Error("User ID not found");const n=(r=(await He(Re(xe,"users",t.uid))).data())==null?void 0:r.avatarUrl;if(n){const s=await fetch(`${pn}/delete-avatar`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarUrl:n,username:t.displayName})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Ошибка удаления аватара")}await Zt(Re(xe,"users",t.uid),{avatarUrl:null})}},gc=async t=>{const e=await He(Re(xe,"users",t));return e.exists()?e.data():null},yH=async t=>{try{const e=In(xe,"users"),n=Tn(e,kn("username","==",t));let r=await Hn(n);if(r.empty){const o=Tn(e,kn("username","==",t.toLowerCase()));r=await Hn(o)}if(r.empty&&t.length>0){const o=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),a=Tn(e,kn("username","==",o));r=await Hn(a)}if(r.empty)return null;const s=r.docs[0],i=s.data();return{uid:s.id,username:i.username,avatarUrl:i.avatarUrl,role:i.role,isBanned:i.isBanned||!1}}catch{throw new Error("Не удалось загрузить данные пользователя")}},wH=async()=>{try{const t=In(xe,"users"),e=Tn(t),n=await Hn(e),r=[];return n.forEach(s=>{const i=s.data();r.push({uid:s.id,username:i.username,avatarUrl:i.avatarUrl,role:i.role,isBanned:i.isBanned||!1,emailVerified:i.emailVerified||!1,email:i.email||""})}),r}catch(t){throw console.error("Ошибка при получении пользователей:",t),new Error("Не удалось загрузить данные пользователей")}},kj=async(t,e)=>{try{console.log(`Обновление роли пользователя ${t} на ${e}`);const n=Re(xe,"users",t),r=await He(n);if(!r.exists())throw new Error("Пользователь не найден");console.log("Текущие данные пользователя в БД:",r.data());const s={role:e};console.log("Данные для обновления:",s),await Zt(n,s),await new Promise(a=>setTimeout(a,500));const o=(await He(n)).data();return console.log(`Роль пользователя ${t} обновлена. Новые данные:`,o),{...o||{},uid:t,role:o==null?void 0:o.role}}catch(n){throw console.error("Ошибка при обновлении роли пользователя:",n),new Error("Не удалось обновить роль пользователя: "+(n.message||"Неизвестная ошибка"))}},xH=async(t,e)=>{try{const n=Re(xe,"users",t),r={isBanned:e};e?r.banDate=new Date().toISOString():r.unbanDate=new Date().toISOString(),await Zt(n,r)}catch(n){throw new Error("Не удалось обновить статус блокировки: "+(n.message||"Неизвестная ошибка"))}},_H=async(t,e)=>xH(t,e);let zu=!1;const EH=async()=>{if(zu)return console.log("Попытка сделать Федосера админом уже была выполнена в этой сессии"),!0;try{const t=In(xe,"users"),e=Tn(t,kn("username","==","Федосер")),n=await Hn(e);if(n.empty)throw zu=!0,new Error("Пользователь 'Федосер' не найден");const r=n.docs[0],s=r.id;return r.data().role==="ADMIN"?(console.log("Пользователь 'Федосер' уже является администратором"),zu=!0,!0):(await kj(s,"ADMIN"),zu=!0,console.log("Пользователь 'Федосер' успешно назначен администратором"),!0)}catch(t){throw zu=!0,console.error("Ошибка при назначении 'Федосер' администратором:",t),new Error("Не удалось назначить 'Федосер' администратором: "+(t instanceof Error?t.message:"неизвестная ошибка"))}},Ot=()=>{const[t,e]=m.useState(null),[n,r]=m.useState(!0),[s,i]=m.useState(null);m.useEffect(()=>{const p=l6(Ze,async g=>{if(g){const x=await gc(g.uid);e({uid:g.uid,email:g.email,emailVerified:g.emailVerified,displayName:g.displayName,role:lH(x==null?void 0:x.role),avatarUrl:(x==null?void 0:x.avatarUrl)||null,isBanned:(x==null?void 0:x.isBanned)||!1})}else e(null);r(!1)},g=>{i(g.message),r(!1)});return()=>p()},[]);const o=m.useCallback(async(p,g)=>{try{r(!0),i(null),await uH(p,g)}catch(x){throw i(x.message||"Ошибка входа"),x}finally{r(!1)}},[]),a=m.useCallback(async p=>{try{if(r(!0),i(null),await cH(p),await dS(),Ze.currentUser){const g=await gc(Ze.currentUser.uid);e({uid:Ze.currentUser.uid,email:Ze.currentUser.email,emailVerified:Ze.currentUser.emailVerified,displayName:Ze.currentUser.displayName,role:(g==null?void 0:g.role)||ot.USER,avatarUrl:(g==null?void 0:g.avatarUrl)||null,isBanned:(g==null?void 0:g.isBanned)||!1})}}catch(g){throw i(g.message||"Ошибка регистрации"),g}finally{r(!1)}},[]),c=m.useCallback(async()=>{try{r(!0),i(null),await dH(),e(null)}catch(p){throw i(p.message||"Ошибка выхода"),p}finally{r(!1)}},[]),u=m.useCallback(async p=>{try{if(r(!0),i(null),!Ze.currentUser)throw new Error("Пользователь не авторизован");await mH(Ze.currentUser,p),e(null)}catch(g){throw i(g.message||"Ошибка удаления аккаунта"),g}finally{r(!1)}},[]),h=m.useCallback(async()=>{try{r(!0),i(null),await dS()}catch(p){throw i(p.message||"Ошибка отправки письма"),p}finally{r(!1)}},[]),f=m.useCallback(async()=>{if(Ze.currentUser){const p=await gc(Ze.currentUser.uid);e({uid:Ze.currentUser.uid,email:Ze.currentUser.email,emailVerified:Ze.currentUser.emailVerified,displayName:Ze.currentUser.displayName,role:(p==null?void 0:p.role)||ot.USER,avatarUrl:(p==null?void 0:p.avatarUrl)||null,isBanned:(p==null?void 0:p.isBanned)||!1})}},[]);return{user:t,loading:n,error:s,login:o,register:a,logout:c,deleteAccount:u,resendVerificationEmail:h,refreshUserData:f}};var bH=CN.useId||(()=>{}),TH=0;function _s(t){const[e,n]=m.useState(bH());return mn(()=>{n(r=>r??String(TH++))},[t]),e?`radix-${e}`:""}const kH=["top","right","bottom","left"],ea=Math.min,Ar=Math.max,mp=Math.round,Mf=Math.floor,Zs=t=>({x:t,y:t}),SH={left:"right",right:"left",bottom:"top",top:"bottom"},NH={start:"end",end:"start"};function px(t,e,n){return Ar(t,ea(e,n))}function Wi(t,e){return typeof t=="function"?t(e):t}function Hi(t){return t.split("-")[0]}function vu(t){return t.split("-")[1]}function J0(t){return t==="x"?"y":"x"}function eE(t){return t==="y"?"height":"width"}function ta(t){return["top","bottom"].includes(Hi(t))?"y":"x"}function tE(t){return J0(ta(t))}function CH(t,e,n){n===void 0&&(n=!1);const r=vu(t),s=tE(t),i=eE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=pp(o)),[o,pp(o)]}function IH(t){const e=pp(t);return[gx(t),e,gx(e)]}function gx(t){return t.replace(/start|end/g,e=>NH[e])}function RH(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function AH(t,e,n,r){const s=vu(t);let i=RH(Hi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(gx)))),i}function pp(t){return t.replace(/left|right|bottom|top/g,e=>SH[e])}function PH(t){return{top:0,right:0,bottom:0,left:0,...t}}function Sj(t){return typeof t!="number"?PH(t):{top:t,right:t,bottom:t,left:t}}function gp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function hS(t,e,n){let{reference:r,floating:s}=t;const i=ta(e),o=tE(e),a=eE(o),c=Hi(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(vu(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const jH=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=hS(u,r,c),p=r,g={},x=0;for(let v=0;v<a.length;v++){const{name:T,fn:_}=a[v],{x:y,y:b,data:C,reset:P}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=y??h,f=b??f,g={...g,[T]:{...g[T],...C}},P&&x<=50&&(x++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(u=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:h,y:f}=hS(u,p,c)),v=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function oh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Wi(e,t),x=Sj(g),T=a[p?f==="floating"?"reference":"floating":f],_=gp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(T)))==null||n?T:T.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),y=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},P=gp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:c}):y);return{top:(_.top-P.top+x.top)/C.y,bottom:(P.bottom-_.bottom+x.bottom)/C.y,left:(_.left-P.left+x.left)/C.x,right:(P.right-_.right+x.right)/C.x}}const DH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:h=0}=Wi(t,e)||{};if(u==null)return{};const f=Sj(h),p={x:n,y:r},g=tE(s),x=eE(g),v=await o.getDimensions(u),T=g==="y",_=T?"top":"left",y=T?"bottom":"right",b=T?"clientHeight":"clientWidth",C=i.reference[x]+i.reference[g]-p[g]-i.floating[x],P=p[g]-i.reference[g],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=L?L[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(L)))&&(N=a.floating[b]||i.floating[x]);const E=C/2-P/2,S=N/2-v[x]/2-1,R=ea(f[_],S),M=ea(f[y],S),A=R,I=N-v[x]-M,U=N/2-v[x]/2+E,Y=px(A,U,I),F=!c.arrow&&vu(s)!=null&&U!==Y&&i.reference[x]/2-(U<A?R:M)-v[x]/2<0,te=F?U<A?U-A:U-I:0;return{[g]:p[g]+te,data:{[g]:Y,centerOffset:U-Y-te,...F&&{alignmentOffset:te}},reset:F}}}),MH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...T}=Wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Hi(s),y=ta(a),b=Hi(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=p||(b||!v?[pp(a)]:IH(a)),L=x!=="none";!p&&L&&P.push(...AH(a,v,x,C));const N=[a,...P],E=await oh(e,T),S=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&S.push(E[_]),f){const U=CH(s,o,C);S.push(E[U[0]],E[U[1]])}if(R=[...R,{placement:s,overflows:S}],!S.every(U=>U<=0)){var M,A;const U=(((M=i.flip)==null?void 0:M.index)||0)+1,Y=N[U];if(Y)return{data:{index:U,overflows:R},reset:{placement:Y}};let F=(A=R.filter(te=>te.overflows[0]<=0).sort((te,D)=>te.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!F)switch(g){case"bestFit":{var I;const te=(I=R.filter(D=>{if(L){const O=ta(D.placement);return O===y||O==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(O=>O>0).reduce((O,W)=>O+W,0)]).sort((D,O)=>D[1]-O[1])[0])==null?void 0:I[0];te&&(F=te);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function fS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function mS(t){return kH.some(e=>t[e]>=0)}const OH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Wi(t,e);switch(r){case"referenceHidden":{const i=await oh(e,{...s,elementContext:"reference"}),o=fS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mS(o)}}}case"escaped":{const i=await oh(e,{...s,altBoundary:!0}),o=fS(i,n.floating);return{data:{escapedOffsets:o,escaped:mS(o)}}}default:return{}}}}};async function LH(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Hi(n),a=vu(n),c=ta(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Wi(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof x=="number"&&(g=a==="end"?x*-1:x),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const VH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await LH(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},FH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:_,y}=T;return{x:_,y}}},...c}=Wi(t,e),u={x:n,y:r},h=await oh(e,c),f=ta(Hi(s)),p=J0(f);let g=u[p],x=u[f];if(i){const T=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=g+h[T],b=g-h[_];g=px(y,g,b)}if(o){const T=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=x+h[T],b=x-h[_];x=px(y,x,b)}const v=a.fn({...e,[p]:g,[f]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[f]:o}}}}}},UH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Wi(t,e),h={x:n,y:r},f=ta(s),p=J0(f);let g=h[p],x=h[f];const v=Wi(a,e),T=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=p==="y"?"height":"width",C=i.reference[p]-i.floating[b]+T.mainAxis,P=i.reference[p]+i.reference[b]-T.mainAxis;g<C?g=C:g>P&&(g=P)}if(u){var _,y;const b=p==="y"?"width":"height",C=["top","left"].includes(Hi(s)),P=i.reference[f]-i.floating[b]+(C&&((_=o.offset)==null?void 0:_[f])||0)+(C?0:T.crossAxis),L=i.reference[f]+i.reference[b]+(C?0:((y=o.offset)==null?void 0:y[f])||0)-(C?T.crossAxis:0);x<P?x=P:x>L&&(x=L)}return{[p]:g,[f]:x}}}},$H=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=Wi(t,e),h=await oh(e,u),f=Hi(s),p=vu(s),g=ta(s)==="y",{width:x,height:v}=i.floating;let T,_;f==="top"||f==="bottom"?(T=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,T=p==="end"?"top":"bottom");const y=v-h.top-h.bottom,b=x-h.left-h.right,C=ea(v-h[T],y),P=ea(x-h[_],b),L=!e.middlewareData.shift;let N=C,E=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=y),L&&!p){const R=Ar(h.left,0),M=Ar(h.right,0),A=Ar(h.top,0),I=Ar(h.bottom,0);g?E=x-2*(R!==0||M!==0?R+M:Ar(h.left,h.right)):N=v-2*(A!==0||I!==0?A+I:Ar(h.top,h.bottom))}await c({...e,availableWidth:E,availableHeight:N});const S=await o.getDimensions(a.floating);return x!==S.width||v!==S.height?{reset:{rects:!0}}:{}}}};function Og(){return typeof window<"u"}function yu(t){return Nj(t)?(t.nodeName||"").toLowerCase():"#document"}function Lr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ci(t){var e;return(e=(Nj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Nj(t){return Og()?t instanceof Node||t instanceof Lr(t).Node:!1}function ks(t){return Og()?t instanceof Element||t instanceof Lr(t).Element:!1}function ii(t){return Og()?t instanceof HTMLElement||t instanceof Lr(t).HTMLElement:!1}function pS(t){return!Og()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Lr(t).ShadowRoot}function Vh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function BH(t){return["table","td","th"].includes(yu(t))}function Lg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function nE(t){const e=rE(),n=ks(t)?Ss(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function zH(t){let e=na(t);for(;ii(e)&&!Xc(e);){if(nE(e))return e;if(Lg(e))return null;e=na(e)}return null}function rE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xc(t){return["html","body","#document"].includes(yu(t))}function Ss(t){return Lr(t).getComputedStyle(t)}function Vg(t){return ks(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function na(t){if(yu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pS(t)&&t.host||ci(t);return pS(e)?e.host:e}function Cj(t){const e=na(t);return Xc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ii(e)&&Vh(e)?e:Cj(e)}function ah(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Cj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Lr(s);if(i){const a=vx(o);return e.concat(o,o.visualViewport||[],Vh(s)?s:[],a&&n?ah(a):[])}return e.concat(s,ah(s,[],n))}function vx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ij(t){const e=Ss(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ii(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=mp(n)!==i||mp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function sE(t){return ks(t)?t:t.contextElement}function vc(t){const e=sE(t);if(!ii(e))return Zs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Ij(e);let o=(i?mp(n.width):n.width)/r,a=(i?mp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WH=Zs(0);function Rj(t){const e=Lr(t);return!rE()||!e.visualViewport?WH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function HH(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Lr(t)?!1:e}function il(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=sE(t);let o=Zs(1);e&&(r?ks(r)&&(o=vc(r)):o=vc(t));const a=HH(i,n,r)?Rj(i):Zs(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Lr(i),g=r&&ks(r)?Lr(r):r;let x=p,v=vx(x);for(;v&&r&&g!==x;){const T=vc(v),_=v.getBoundingClientRect(),y=Ss(v),b=_.left+(v.clientLeft+parseFloat(y.paddingLeft))*T.x,C=_.top+(v.clientTop+parseFloat(y.paddingTop))*T.y;c*=T.x,u*=T.y,h*=T.x,f*=T.y,c+=b,u+=C,x=Lr(v),v=vx(x)}}return gp({width:h,height:f,x:c,y:u})}function iE(t,e){const n=Vg(t).scrollLeft;return e?e.left+n:il(ci(t)).left+n}function Aj(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:iE(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function qH(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ci(r),a=e?Lg(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Zs(1);const h=Zs(0),f=ii(r);if((f||!f&&!i)&&((yu(r)!=="body"||Vh(o))&&(c=Vg(r)),ii(r))){const g=il(r);u=vc(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!i?Aj(o,c,!0):Zs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function GH(t){return Array.from(t.getClientRects())}function KH(t){const e=ci(t),n=Vg(t),r=t.ownerDocument.body,s=Ar(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ar(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+iE(t);const a=-n.scrollTop;return Ss(r).direction==="rtl"&&(o+=Ar(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function QH(t,e){const n=Lr(t),r=ci(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=rE();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function YH(t,e){const n=il(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ii(t)?vc(t):Zs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function gS(t,e,n){let r;if(e==="viewport")r=QH(t,n);else if(e==="document")r=KH(ci(t));else if(ks(e))r=YH(e,n);else{const s=Rj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return gp(r)}function Pj(t,e){const n=na(t);return n===e||!ks(n)||Xc(n)?!1:Ss(n).position==="fixed"||Pj(n,e)}function XH(t,e){const n=e.get(t);if(n)return n;let r=ah(t,[],!1).filter(a=>ks(a)&&yu(a)!=="body"),s=null;const i=Ss(t).position==="fixed";let o=i?na(t):t;for(;ks(o)&&!Xc(o);){const a=Ss(o),c=nE(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Vh(o)&&!c&&Pj(t,o))?r=r.filter(h=>h!==o):s=a,o=na(o)}return e.set(t,r),r}function ZH(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Lg(e)?[]:XH(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,h)=>{const f=gS(e,h,s);return u.top=Ar(f.top,u.top),u.right=ea(f.right,u.right),u.bottom=ea(f.bottom,u.bottom),u.left=Ar(f.left,u.left),u},gS(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function JH(t){const{width:e,height:n}=Ij(t);return{width:e,height:n}}function eq(t,e,n){const r=ii(e),s=ci(e),i=n==="fixed",o=il(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Zs(0);if(r||!r&&!i)if((yu(e)!=="body"||Vh(s))&&(a=Vg(e)),r){const p=il(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=iE(s));const u=s&&!r&&!i?Aj(s,a):Zs(0),h=o.left+a.scrollLeft-c.x-u.x,f=o.top+a.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function hy(t){return Ss(t).position==="static"}function vS(t,e){if(!ii(t)||Ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ci(t)===n&&(n=n.ownerDocument.body),n}function jj(t,e){const n=Lr(t);if(Lg(t))return n;if(!ii(t)){let s=na(t);for(;s&&!Xc(s);){if(ks(s)&&!hy(s))return s;s=na(s)}return n}let r=vS(t,e);for(;r&&BH(r)&&hy(r);)r=vS(r,e);return r&&Xc(r)&&hy(r)&&!nE(r)?n:r||zH(t)||n}const tq=async function(t){const e=this.getOffsetParent||jj,n=this.getDimensions,r=await n(t.floating);return{reference:eq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function nq(t){return Ss(t).direction==="rtl"}const rq={convertOffsetParentRelativeRectToViewportRelativeRect:qH,getDocumentElement:ci,getClippingRect:ZH,getOffsetParent:jj,getElementRects:tq,getClientRects:GH,getDimensions:JH,getScale:vc,isElement:ks,isRTL:nq};function Dj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sq(t,e){let n=null,r;const s=ci(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(a||e(),!p||!g)return;const x=Mf(f),v=Mf(s.clientWidth-(h+p)),T=Mf(s.clientHeight-(f+g)),_=Mf(h),b={rootMargin:-x+"px "+-v+"px "+-T+"px "+-_+"px",threshold:Ar(0,ea(1,c))||1};let C=!0;function P(L){const N=L[0].intersectionRatio;if(N!==c){if(!C)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!Dj(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(P,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,b)}n.observe(t)}return o(!0),i}function iq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=sE(t),h=s||i?[...u?ah(u):[],...ah(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&a?sq(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let x,v=c?il(t):null;c&&T();function T(){const _=il(t);v&&!Dj(v,_)&&n(),v=_,x=requestAnimationFrame(T)}return n(),()=>{var _;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const oq=VH,aq=FH,lq=MH,cq=$H,uq=OH,yS=DH,dq=UH,hq=(t,e,n)=>{const r=new Map,s={platform:rq,...n},i={...s.platform,_c:r};return jH(t,e,{...s,platform:i})};var hm=typeof document<"u"?m.useLayoutEffect:m.useEffect;function vp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!vp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Mj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wS(t,e){const n=Mj(t);return Math.round(e*n)/n}function fy(t){const e=m.useRef(t);return hm(()=>{e.current=t}),e}function fq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);vp(p,r)||g(r);const[x,v]=m.useState(null),[T,_]=m.useState(null),y=m.useCallback(D=>{D!==L.current&&(L.current=D,v(D))},[]),b=m.useCallback(D=>{D!==N.current&&(N.current=D,_(D))},[]),C=i||x,P=o||T,L=m.useRef(null),N=m.useRef(null),E=m.useRef(h),S=c!=null,R=fy(c),M=fy(s),A=fy(u),I=m.useCallback(()=>{if(!L.current||!N.current)return;const D={placement:e,strategy:n,middleware:p};M.current&&(D.platform=M.current),hq(L.current,N.current,D).then(O=>{const W={...O,isPositioned:A.current!==!1};U.current&&!vp(E.current,W)&&(E.current=W,wl.flushSync(()=>{f(W)}))})},[p,e,n,M,A]);hm(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const U=m.useRef(!1);hm(()=>(U.current=!0,()=>{U.current=!1}),[]),hm(()=>{if(C&&(L.current=C),P&&(N.current=P),C&&P){if(R.current)return R.current(C,P,I);I()}},[C,P,I,R,S]);const Y=m.useMemo(()=>({reference:L,floating:N,setReference:y,setFloating:b}),[y,b]),F=m.useMemo(()=>({reference:C,floating:P}),[C,P]),te=m.useMemo(()=>{const D={position:n,left:0,top:0};if(!F.floating)return D;const O=wS(F.floating,h.x),W=wS(F.floating,h.y);return a?{...D,transform:"translate("+O+"px, "+W+"px)",...Mj(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:W}},[n,a,F.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:I,refs:Y,elements:F,floatingStyles:te}),[h,I,Y,F,te])}const mq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?yS({element:r.current,padding:s}).fn(n):{}:r?yS({element:r,padding:s}).fn(n):{}}}},pq=(t,e)=>({...oq(t),options:[t,e]}),gq=(t,e)=>({...aq(t),options:[t,e]}),vq=(t,e)=>({...dq(t),options:[t,e]}),yq=(t,e)=>({...lq(t),options:[t,e]}),wq=(t,e)=>({...cq(t),options:[t,e]}),xq=(t,e)=>({...uq(t),options:[t,e]}),_q=(t,e)=>({...mq(t),options:[t,e]});var Eq="Arrow",Oj=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(Ie.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});Oj.displayName=Eq;var bq=Oj;function oE(t){const[e,n]=m.useState(void 0);return mn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var aE="Popper",[Lj,wu]=or(aE),[Tq,Vj]=Lj(aE),Fj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return l.jsx(Tq,{scope:e,anchor:r,onAnchorChange:s,children:n})};Fj.displayName=aE;var Uj="PopperAnchor",$j=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=Vj(Uj,n),o=m.useRef(null),a=it(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(Ie.div,{...s,ref:a})});$j.displayName=Uj;var lE="PopperContent",[kq,Sq]=Lj(lE),Bj=m.forwardRef((t,e)=>{var G,me,Fe,Pe,je,X;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=t,T=Vj(lE,n),[_,y]=m.useState(null),b=it(e,Ue=>y(Ue)),[C,P]=m.useState(null),L=oE(C),N=(L==null?void 0:L.width)??0,E=(L==null?void 0:L.height)??0,S=r+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],A=M.length>0,I={padding:R,boundary:M.filter(Cq),altBoundary:A},{refs:U,floatingStyles:Y,placement:F,isPositioned:te,middlewareData:D}=fq({strategy:"fixed",placement:S,whileElementsMounted:(...Ue)=>iq(...Ue,{animationFrame:g==="always"}),elements:{reference:T.anchor},middleware:[pq({mainAxis:s+E,alignmentAxis:o}),c&&gq({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?vq():void 0,...I}),c&&yq({...I}),wq({...I,apply:({elements:Ue,rects:Qe,availableWidth:ze,availableHeight:nt})=>{const{width:Xe,height:V}=Qe.reference,B=Ue.floating.style;B.setProperty("--radix-popper-available-width",`${ze}px`),B.setProperty("--radix-popper-available-height",`${nt}px`),B.setProperty("--radix-popper-anchor-width",`${Xe}px`),B.setProperty("--radix-popper-anchor-height",`${V}px`)}}),C&&_q({element:C,padding:a}),Iq({arrowWidth:N,arrowHeight:E}),p&&xq({strategy:"referenceHidden",...I})]}),[O,W]=Hj(F),Z=Nn(x);mn(()=>{te&&(Z==null||Z())},[te,Z]);const H=(G=D.arrow)==null?void 0:G.x,Q=(me=D.arrow)==null?void 0:me.y,$=((Fe=D.arrow)==null?void 0:Fe.centerOffset)!==0,[ie,ge]=m.useState();return mn(()=>{_&&ge(window.getComputedStyle(_).zIndex)},[_]),l.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:te?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(Pe=D.transformOrigin)==null?void 0:Pe.x,(je=D.transformOrigin)==null?void 0:je.y].join(" "),...((X=D.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(kq,{scope:n,placedSide:O,onArrowChange:P,arrowX:H,arrowY:Q,shouldHideArrow:$,children:l.jsx(Ie.div,{"data-side":O,"data-align":W,...v,ref:b,style:{...v.style,animation:te?void 0:"none"}})})})});Bj.displayName=lE;var zj="PopperArrow",Nq={top:"bottom",right:"left",bottom:"top",left:"right"},Wj=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Sq(zj,r),o=Nq[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(bq,{...s,ref:n,style:{...s.style,display:"block"}})})});Wj.displayName=zj;function Cq(t){return t!==null}var Iq=t=>({name:"transformOrigin",options:t,fn(e){var T,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((T=s.arrow)==null?void 0:T.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=Hj(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,g=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let x="",v="";return u==="bottom"?(x=o?f:`${p}px`,v=`${-c}px`):u==="top"?(x=o?f:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,v=o?f:`${g}px`):u==="left"&&(x=`${r.floating.width+c}px`,v=o?f:`${g}px`),{data:{x,y:v}}}});function Hj(t){const[e,n="center"]=t.split("-");return[e,n]}var cE=Fj,uE=$j,dE=Bj,hE=Wj,[Fg,Wee]=or("Tooltip",[wu]),Ug=wu(),qj="TooltipProvider",Rq=700,yx="tooltip.open",[Aq,fE]=Fg(qj),Gj=t=>{const{__scopeTooltip:e,delayDuration:n=Rq,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=m.useState(!0),c=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),l.jsx(Aq,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};Gj.displayName=qj;var $g="Tooltip",[Pq,Bg]=Fg($g),Kj=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,c=fE($g,t.__scopeTooltip),u=Ug(e),[h,f]=m.useState(null),p=_s(),g=m.useRef(0),x=o??c.disableHoverableContent,v=a??c.delayDuration,T=m.useRef(!1),[_=!1,y]=ei({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(yx))):c.onClose(),i==null||i(N)}}),b=m.useMemo(()=>_?T.current?"delayed-open":"instant-open":"closed",[_]),C=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,y(!0)},[y]),P=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y(!1)},[y]),L=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,y(!0),g.current=0},v)},[v,y]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),l.jsx(cE,{...u,children:l.jsx(Pq,{scope:e,contentId:p,open:_,stateAttribute:b,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayed?L():C()},[c.isOpenDelayed,L,C]),onTriggerLeave:m.useCallback(()=>{x?P():(window.clearTimeout(g.current),g.current=0)},[P,x]),onOpen:C,onClose:P,disableHoverableContent:x,children:n})})};Kj.displayName=$g;var wx="TooltipTrigger",Qj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Bg(wx,n),i=fE(wx,n),o=Ug(n),a=m.useRef(null),c=it(e,a,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx(uE,{asChild:!0,...o,children:l.jsx(Ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:fe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:fe(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:fe(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:fe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:fe(t.onBlur,s.onClose),onClick:fe(t.onClick,s.onClose)})})});Qj.displayName=wx;var jq="TooltipPortal",[Hee,Dq]=Fg(jq,{forceMount:void 0}),Zc="TooltipContent",Yj=m.forwardRef((t,e)=>{const n=Dq(Zc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Bg(Zc,t.__scopeTooltip);return l.jsx($r,{present:r||o.open,children:o.disableHoverableContent?l.jsx(Xj,{side:s,...i,ref:e}):l.jsx(Mq,{side:s,...i,ref:e})})}),Mq=m.forwardRef((t,e)=>{const n=Bg(Zc,t.__scopeTooltip),r=fE(Zc,t.__scopeTooltip),s=m.useRef(null),i=it(e,s),[o,a]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{a(null),f(!1)},[f]),g=m.useCallback((x,v)=>{const T=x.currentTarget,_={x:x.clientX,y:x.clientY},y=Fq(_,T.getBoundingClientRect()),b=Uq(_,y),C=$q(v.getBoundingClientRect()),P=zq([...b,...C]);a(P),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const x=T=>g(T,h),v=T=>g(T,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",v)}}},[c,h,g,p]),m.useEffect(()=>{if(o){const x=v=>{const T=v.target,_={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(T))||(h==null?void 0:h.contains(T)),b=!Bq(_,o);y?p():b&&(p(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,o,u,p]),l.jsx(Xj,{...t,ref:i})}),[Oq,Lq]=Fg($g,{isInside:!1}),Xj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=Bg(Zc,n),u=Ug(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(yx,h),()=>document.removeEventListener(yx,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),l.jsx(cu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:l.jsxs(dE,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(B_,{children:r}),l.jsx(Oq,{scope:n,isInside:!0,children:l.jsx(FU,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Yj.displayName=Zc;var Zj="TooltipArrow",Vq=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ug(n);return Lq(Zj,n).isInside?null:l.jsx(hE,{...s,...r,ref:e})});Vq.displayName=Zj;function Fq(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Uq(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function $q(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Bq(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-a)*(r-c)/(h-c)+a&&(s=!s)}return s}function zq(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Wq(e)}function Wq(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Hq=Gj,qq=Kj,Gq=Qj,Jj=Yj;const mE=Hq,za=qq,Wa=Gq,zo=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(Jj,{ref:r,sideOffset:e,className:le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));zo.displayName=Jj.displayName;const ol=()=>l.jsx(l.Fragment,{children:l.jsx("div",{className:"z-10 bg-background fixed inset-0 flex items-center justify-center",children:l.jsx(Wn,{className:"animate-spin"})})}),my=768;function xt(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${my-1}px)`),r=()=>{e(window.innerWidth<my)};return n.addEventListener("change",r),e(window.innerWidth<my),()=>n.removeEventListener("change",r)},[]),!!t}const Kq=()=>{const t=xl(),{user:e,loading:n,logout:r}=Ot(),{toast:s}=jt(),[i,o]=m.useState(!1),a=xt(),c=f=>t.pathname===f,u=()=>{o(!i)},h=async()=>{try{await r(),s({title:"Успешно",description:"Вы вышли из системы"}),o(!1)}catch(f){s({title:"Ошибка",description:f.message||"Не удалось выйти из системы",variant:"destructive"})}};return l.jsx("nav",{className:"bg-background border-b border-border",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center justify-between flex-1 md:flex-none",children:[l.jsx(kt,{to:"/",className:"text-xl font-bold truncate max-w-[200px] sm:max-w-full",children:a?l.jsxs("div",{className:"flex flex-col leading-tight",children:[l.jsx("span",{children:"Андеграунд"}),l.jsx("span",{children:"должен быть услышан"})]}):"Андеграунд должен быть услышан"}),l.jsx("button",{onClick:u,className:"md:hidden p-2 rounded-md text-foreground hover:bg-accent hover:text-accent-foreground","aria-label":"Открыть меню",children:i?l.jsx(ti,{className:"h-6 w-6"}):l.jsx(p$,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"hidden md:flex items-center space-x-8",children:l.jsxs("div",{className:"flex space-x-4",children:[l.jsx(kt,{to:"/news",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/news")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Новости"}),l.jsx(kt,{to:"/reviews",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/reviews")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Рецензии пользователей"}),l.jsx(kt,{to:"/admin-reviews",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/admin-reviews")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Рецензии редакции"})]})}),l.jsx("div",{className:"hidden md:flex items-center space-x-4",children:n?l.jsx("div",{className:"flex items-center space-x-4",children:l.jsx(ol,{})}):e?l.jsxs(l.Fragment,{children:[l.jsx(kt,{to:"/profile",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/profile")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Профиль"}),l.jsx(kt,{to:"/terms",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/terms")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Правила сайта"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kt,{to:"/login",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/login")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Войти"}),l.jsx(kt,{to:"/register",className:`px-3 py-2 rounded-md text-sm font-medium ${c("/register")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,children:"Регистрация"})]})})]}),l.jsx("div",{className:le("md:hidden fixed left-0 right-0 top-16 bg-background border-b border-border transition-all duration-300 ease-in-out z-50",i?"max-h-screen opacity-100":"max-h-0 opacity-0 pointer-events-none"),children:l.jsxs("div",{className:"container mx-auto px-4 pb-4 pt-2 flex flex-col space-y-2",children:[l.jsx(kt,{to:"/news",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/news")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Новости"}),l.jsx(kt,{to:"/reviews",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/reviews")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Рецензии пользователей"}),l.jsx(kt,{to:"/admin-reviews",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/admin-reviews")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Рецензии редакции"}),l.jsx("div",{className:"h-px bg-muted my-2"}),n?l.jsx("div",{className:"flex justify-center p-4",children:l.jsx(ol,{})}):e?l.jsxs(l.Fragment,{children:[l.jsx(kt,{to:"/profile",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/profile")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Профиль"}),l.jsx(kt,{to:"/terms",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/terms")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Правила сайта"}),l.jsx("button",{onClick:h,className:"px-3 py-2 rounded-md text-sm font-medium block w-full text-left text-foreground hover:bg-accent hover:text-accent-foreground",children:"Выйти"})]}):l.jsxs(l.Fragment,{children:[l.jsx(kt,{to:"/login",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/login")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Войти"}),l.jsx(kt,{to:"/register",className:`px-3 py-2 rounded-md text-sm font-medium block ${c("/register")?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>o(!1),children:"Регистрация"})]})]})})]})})},e2=m.createContext(void 0),Qq=()=>{const t=m.useContext(e2);if(t===void 0)throw new Error("useTheme должен использоваться внутри ThemeProvider");return t},xS=t=>{document.documentElement.classList.remove("text-small","text-medium","text-large","text-xl"),document.documentElement.classList.add(`text-${t}`),localStorage.setItem("fontSize",t)},py=t=>{const e=document.documentElement,n=t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.remove("light","dark"),e.classList.add(n?"dark":"light"),localStorage.setItem("theme",t)},Yq=({children:t})=>{const[e,n]=m.useState(()=>localStorage.getItem("theme")||"system"),[r,s]=m.useState(()=>localStorage.getItem("fontSize")||"medium"),i=a=>{n(a),py(a)},o=a=>{s(a),xS(a)};return m.useEffect(()=>{py(e),xS(r);const a=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{e==="system"&&py("system")};return a.addEventListener("change",c),()=>a.removeEventListener("change",c)},[e,r]),l.jsx(e2.Provider,{value:{theme:e,fontSize:r,setTheme:i,setFontSize:o},children:t})},mt=m.forwardRef(({className:t,interactive:e,onClick:n,disabled:r,...s},i)=>{const o=e||n?"button":void 0,a=r?-1:e||n?0:void 0,c=u=>{!r&&(e||n)&&(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),n==null||n(u)),s.onKeyDown&&s.onKeyDown(u)};return l.jsx("div",{ref:i,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",(e||n)&&"cursor-pointer hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r&&"opacity-50 pointer-events-none",t),role:o,tabIndex:a,"aria-disabled":r?"true":void 0,onKeyDown:c,onClick:r?void 0:n,...s})});mt.displayName="Card";const en=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:le("flex flex-col space-y-1.5 p-6",t),...e}));en.displayName="CardHeader";const tn=m.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:le("text-2xl font-semibold leading-none tracking-tight",t),...e}));tn.displayName="CardTitle";const Xq=m.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:le("text-sm text-muted-foreground",t),...e}));Xq.displayName="CardDescription";const vt=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:le("p-6 pt-0",t),...e}));vt.displayName="CardContent";const t2=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:le("flex items-center p-6 pt-0",t),...e}));t2.displayName="CardFooter";var Fh=t=>t.type==="checkbox",Da=t=>t instanceof Date,Xn=t=>t==null;const n2=t=>typeof t=="object";var Xt=t=>!Xn(t)&&!Array.isArray(t)&&n2(t)&&!Da(t),r2=t=>Xt(t)&&t.target?Fh(t.target)?t.target.checked:t.target.value:t,Zq=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,s2=(t,e)=>t.has(Zq(e)),Jq=t=>{const e=t.constructor&&t.constructor.prototype;return Xt(e)&&e.hasOwnProperty("isPrototypeOf")},pE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(pE&&(t instanceof Blob||r))&&(n||Xt(t)))if(e=n?[]:{},!n&&!Jq(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=hr(t[s]));else return t;return e}var zg=t=>Array.isArray(t)?t.filter(Boolean):[],Kt=t=>t===void 0,pe=(t,e,n)=>{if(!e||!Xt(t))return n;const r=zg(e.split(/[,[\].]+?/)).reduce((s,i)=>Xn(s)?s:s[i],t);return Kt(r)||r===t?Kt(t[e])?n:t[e]:r},qr=t=>typeof t=="boolean",gE=t=>/^\w*$/.test(t),i2=t=>zg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ft=(t,e,n)=>{let r=-1;const s=gE(e)?[e]:i2(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let c=n;if(r!==o){const u=t[a];c=Xt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}return t};const yp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},o2=ee.createContext(null),Wg=()=>ee.useContext(o2),eG=t=>{const{children:e,...n}=t;return ee.createElement(o2.Provider,{value:n},e)};var a2=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==vs.all&&(e._proxyFormState[o]=!r||vs.all),n&&(n[o]=!0),t[o]}});return s},fr=t=>Xt(t)&&!Object.keys(t).length,l2=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return fr(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||vs.all))},kd=t=>Array.isArray(t)?t:[t],c2=(t,e,n)=>!t||!e||t===e||kd(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function vE(t){const e=ee.useRef(t);e.current=t,ee.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function tG(t){const e=Wg(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=ee.useState(n._formState),c=ee.useRef(!0),u=ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=ee.useRef(s);return h.current=s,vE({disabled:r,next:f=>c.current&&c2(h.current,f.name,i)&&l2(f,u.current,n._updateFormState)&&a({...n._formState,...f}),subject:n._subjects.state}),ee.useEffect(()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1}),[n]),ee.useMemo(()=>a2(o,n,u.current,!1),[o,n])}var zs=t=>typeof t=="string",u2=(t,e,n,r,s)=>zs(t)?(r&&e.watch.add(t),pe(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),pe(n,i))):(r&&(e.watchAll=!0),n);function nG(t){const e=Wg(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=ee.useRef(r);a.current=r,vE({disabled:i,subject:n._subjects.values,next:h=>{c2(a.current,h.name,o)&&u(hr(u2(a.current,n._names,h.values||n._formValues,!1,s)))}});const[c,u]=ee.useState(n._getWatch(r,s));return ee.useEffect(()=>n._removeUnmounted()),c}function rG(t){const e=Wg(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=s2(s._names.array,n),a=nG({control:s,name:n,defaultValue:pe(s._formValues,n,pe(s._defaultValues,n,t.defaultValue)),exact:!0}),c=tG({control:s,name:n,exact:!0}),u=ee.useRef(s.register(n,{...t.rules,value:a,...qr(t.disabled)?{disabled:t.disabled}:{}})),h=ee.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pe(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!pe(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!pe(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!pe(c.validatingFields,n)},error:{enumerable:!0,get:()=>pe(c.errors,n)}}),[c,n]),f=ee.useMemo(()=>({name:n,value:a,...qr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:p=>u.current.onChange({target:{value:r2(p),name:n},type:yp.CHANGE}),onBlur:()=>u.current.onBlur({target:{value:pe(s._formValues,n),name:n},type:yp.BLUR}),ref:p=>{const g=pe(s._fields,n);g&&p&&(g._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:x=>p.setCustomValidity(x),reportValidity:()=>p.reportValidity()})}}),[n,s._formValues,r,c.disabled,a,s._fields]);return ee.useEffect(()=>{const p=s._options.shouldUnregister||i,g=(x,v)=>{const T=pe(s._fields,x);T&&T._f&&(T._f.mount=v)};if(g(n,!0),p){const x=hr(pe(s._options.defaultValues,n));ft(s._defaultValues,n,x),Kt(pe(s._formValues,n))&&ft(s._formValues,n,x)}return!o&&s.register(n),()=>{(o?p&&!s._state.action:p)?s.unregister(n):g(n,!1)}},[n,s,o,i]),ee.useEffect(()=>{s._updateDisabledField({disabled:r,fields:s._fields,name:n})},[r,n,s]),ee.useMemo(()=>({field:f,formState:c,fieldState:h}),[f,c,h])}const sG=t=>t.render(rG(t));var d2=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},_S=t=>({isOnSubmit:!t||t===vs.onSubmit,isOnBlur:t===vs.onBlur,isOnChange:t===vs.onChange,isOnAll:t===vs.all,isOnTouch:t===vs.onTouched}),ES=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Sd=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=pe(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Sd(a,e))break}else if(Xt(a)&&Sd(a,e))break}}};var iG=(t,e,n)=>{const r=kd(pe(t,n));return ft(r,"root",e[n]),ft(t,n,r),t},yE=t=>t.type==="file",Us=t=>typeof t=="function",wp=t=>{if(!pE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},fm=t=>zs(t),wE=t=>t.type==="radio",xp=t=>t instanceof RegExp;const bS={value:!1,isValid:!1},TS={value:!0,isValid:!0};var h2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Kt(t[0].attributes.value)?Kt(t[0].value)||t[0].value===""?TS:{value:t[0].value,isValid:!0}:TS:bS}return bS};const kS={isValid:!1,value:null};var f2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,kS):kS;function SS(t,e,n="validate"){if(fm(t)||Array.isArray(t)&&t.every(fm)||qr(t)&&!t)return{type:n,message:fm(t)?t:"",ref:e}}var Ml=t=>Xt(t)&&!xp(t)?t:{value:t,message:""},NS=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:h,min:f,max:p,pattern:g,validate:x,name:v,valueAsNumber:T,mount:_}=t._f,y=pe(n,v);if(!_||e.has(v))return{};const b=a?a[0]:o,C=A=>{s&&b.reportValidity&&(b.setCustomValidity(qr(A)?"":A||""),b.reportValidity())},P={},L=wE(o),N=Fh(o),E=L||N,S=(T||yE(o))&&Kt(o.value)&&Kt(y)||wp(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,R=d2.bind(null,v,r,P),M=(A,I,U,Y=pi.maxLength,F=pi.minLength)=>{const te=A?I:U;P[v]={type:A?Y:F,message:te,ref:o,...R(A?Y:F,te)}};if(i?!Array.isArray(y)||!y.length:c&&(!E&&(S||Xn(y))||qr(y)&&!y||N&&!h2(a).isValid||L&&!f2(a).isValid)){const{value:A,message:I}=fm(c)?{value:!!c,message:c}:Ml(c);if(A&&(P[v]={type:pi.required,message:I,ref:b,...R(pi.required,I)},!r))return C(I),P}if(!S&&(!Xn(f)||!Xn(p))){let A,I;const U=Ml(p),Y=Ml(f);if(!Xn(y)&&!isNaN(y)){const F=o.valueAsNumber||y&&+y;Xn(U.value)||(A=F>U.value),Xn(Y.value)||(I=F<Y.value)}else{const F=o.valueAsDate||new Date(y),te=W=>new Date(new Date().toDateString()+" "+W),D=o.type=="time",O=o.type=="week";zs(U.value)&&y&&(A=D?te(y)>te(U.value):O?y>U.value:F>new Date(U.value)),zs(Y.value)&&y&&(I=D?te(y)<te(Y.value):O?y<Y.value:F<new Date(Y.value))}if((A||I)&&(M(!!A,U.message,Y.message,pi.max,pi.min),!r))return C(P[v].message),P}if((u||h)&&!S&&(zs(y)||i&&Array.isArray(y))){const A=Ml(u),I=Ml(h),U=!Xn(A.value)&&y.length>+A.value,Y=!Xn(I.value)&&y.length<+I.value;if((U||Y)&&(M(U,A.message,I.message),!r))return C(P[v].message),P}if(g&&!S&&zs(y)){const{value:A,message:I}=Ml(g);if(xp(A)&&!y.match(A)&&(P[v]={type:pi.pattern,message:I,ref:o,...R(pi.pattern,I)},!r))return C(I),P}if(x){if(Us(x)){const A=await x(y,n),I=SS(A,b);if(I&&(P[v]={...I,...R(pi.validate,I.message)},!r))return C(I.message),P}else if(Xt(x)){let A={};for(const I in x){if(!fr(A)&&!r)break;const U=SS(await x[I](y,n),b,I);U&&(A={...U,...R(I,U.message)},C(U.message),r&&(P[v]=A))}if(!fr(A)&&(P[v]={ref:b,...A},!r))return P}}return C(!0),P};function oG(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Kt(t)?r++:t[e[r++]];return t}function aG(t){for(const e in t)if(t.hasOwnProperty(e)&&!Kt(t[e]))return!1;return!0}function on(t,e){const n=Array.isArray(e)?e:gE(e)?[e]:i2(e),r=n.length===1?t:oG(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Xt(r)&&fr(r)||Array.isArray(r)&&aG(r))&&on(t,n.slice(0,-1)),t}var gy=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},xx=t=>Xn(t)||!n2(t);function xo(t,e){if(xx(t)||xx(e))return t===e;if(Da(t)&&Da(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Da(i)&&Da(o)||Xt(i)&&Xt(o)||Array.isArray(i)&&Array.isArray(o)?!xo(i,o):i!==o)return!1}}return!0}var m2=t=>t.type==="select-multiple",lG=t=>wE(t)||Fh(t),vy=t=>wp(t)&&t.isConnected,p2=t=>{for(const e in t)if(Us(t[e]))return!0;return!1};function _p(t,e={}){const n=Array.isArray(t);if(Xt(t)||n)for(const r in t)Array.isArray(t[r])||Xt(t[r])&&!p2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},_p(t[r],e[r])):Xn(t[r])||(e[r]=!0);return e}function g2(t,e,n){const r=Array.isArray(t);if(Xt(t)||r)for(const s in t)Array.isArray(t[s])||Xt(t[s])&&!p2(t[s])?Kt(e)||xx(n[s])?n[s]=Array.isArray(t[s])?_p(t[s],[]):{..._p(t[s])}:g2(t[s],Xn(e)?{}:e[s],n[s]):n[s]=!xo(t[s],e[s]);return n}var Wu=(t,e)=>g2(t,e,_p(e)),v2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Kt(t)?t:e?t===""?NaN:t&&+t:n&&zs(t)?new Date(t):r?r(t):t;function yy(t){const e=t.ref;return yE(e)?e.files:wE(e)?f2(t.refs).value:m2(e)?[...e.selectedOptions].map(({value:n})=>n):Fh(e)?h2(t.refs).value:v2(Kt(e.value)?t.ref.value:e.value,t)}var cG=(t,e,n,r)=>{const s={};for(const i of t){const o=pe(e,i);o&&ft(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Hu=t=>Kt(t)?t:xp(t)?t.source:Xt(t)?xp(t.value)?t.value.source:t.value:t;const CS="AsyncFunction";var uG=t=>!!t&&!!t.validate&&!!(Us(t.validate)&&t.validate.constructor.name===CS||Xt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===CS)),dG=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function IS(t,e,n){const r=pe(t,n);if(r||gE(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=pe(e,i),a=pe(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var hG=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,fG=(t,e)=>!zg(pe(t,e)).length&&on(t,e);const mG={mode:vs.onSubmit,reValidateMode:vs.onChange,shouldFocusError:!0};function pG(t={}){let e={...mG,...t},n={submitCount:0,isDirty:!1,isLoading:Us(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Xt(e.defaultValues)||Xt(e.values)?hr(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:hr(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:gy(),array:gy(),state:gy()},p=_S(e.mode),g=_S(e.reValidateMode),x=e.criteriaMode===vs.all,v=V=>B=>{clearTimeout(u),u=setTimeout(V,B)},T=async V=>{if(!e.disabled&&(h.isValid||V)){const B=e.resolver?fr((await E()).errors):await R(r,!0);B!==n.isValid&&f.state.next({isValid:B})}},_=(V,B)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((V||Array.from(a.mount)).forEach(q=>{q&&(B?ft(n.validatingFields,q,B):on(n.validatingFields,q))}),f.state.next({validatingFields:n.validatingFields,isValidating:!fr(n.validatingFields)}))},y=(V,B=[],q,ue,ce=!0,se=!0)=>{if(ue&&q&&!e.disabled){if(o.action=!0,se&&Array.isArray(pe(r,V))){const be=q(pe(r,V),ue.argA,ue.argB);ce&&ft(r,V,be)}if(se&&Array.isArray(pe(n.errors,V))){const be=q(pe(n.errors,V),ue.argA,ue.argB);ce&&ft(n.errors,V,be),fG(n.errors,V)}if(h.touchedFields&&se&&Array.isArray(pe(n.touchedFields,V))){const be=q(pe(n.touchedFields,V),ue.argA,ue.argB);ce&&ft(n.touchedFields,V,be)}h.dirtyFields&&(n.dirtyFields=Wu(s,i)),f.state.next({name:V,isDirty:A(V,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ft(i,V,B)},b=(V,B)=>{ft(n.errors,V,B),f.state.next({errors:n.errors})},C=V=>{n.errors=V,f.state.next({errors:n.errors,isValid:!1})},P=(V,B,q,ue)=>{const ce=pe(r,V);if(ce){const se=pe(i,V,Kt(q)?pe(s,V):q);Kt(se)||ue&&ue.defaultChecked||B?ft(i,V,B?se:yy(ce._f)):Y(V,se),o.mount&&T()}},L=(V,B,q,ue,ce)=>{let se=!1,be=!1;const Oe={name:V};if(!e.disabled){const Ae=!!(pe(r,V)&&pe(r,V)._f&&pe(r,V)._f.disabled);if(!q||ue){h.isDirty&&(be=n.isDirty,n.isDirty=Oe.isDirty=A(),se=be!==Oe.isDirty);const We=Ae||xo(pe(s,V),B);be=!!(!Ae&&pe(n.dirtyFields,V)),We||Ae?on(n.dirtyFields,V):ft(n.dirtyFields,V,!0),Oe.dirtyFields=n.dirtyFields,se=se||h.dirtyFields&&be!==!We}if(q){const We=pe(n.touchedFields,V);We||(ft(n.touchedFields,V,q),Oe.touchedFields=n.touchedFields,se=se||h.touchedFields&&We!==q)}se&&ce&&f.state.next(Oe)}return se?Oe:{}},N=(V,B,q,ue)=>{const ce=pe(n.errors,V),se=h.isValid&&qr(B)&&n.isValid!==B;if(e.delayError&&q?(c=v(()=>b(V,q)),c(e.delayError)):(clearTimeout(u),c=null,q?ft(n.errors,V,q):on(n.errors,V)),(q?!xo(ce,q):ce)||!fr(ue)||se){const be={...ue,...se&&qr(B)?{isValid:B}:{},errors:n.errors,name:V};n={...n,...be},f.state.next(be)}},E=async V=>{_(V,!0);const B=await e.resolver(i,e.context,cG(V||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(V),B},S=async V=>{const{errors:B}=await E(V);if(V)for(const q of V){const ue=pe(B,q);ue?ft(n.errors,q,ue):on(n.errors,q)}else n.errors=B;return B},R=async(V,B,q={valid:!0})=>{for(const ue in V){const ce=V[ue];if(ce){const{_f:se,...be}=ce;if(se){const Oe=a.array.has(se.name),Ae=ce._f&&uG(ce._f);Ae&&h.validatingFields&&_([ue],!0);const We=await NS(ce,a.disabled,i,x,e.shouldUseNativeValidation&&!B,Oe);if(Ae&&h.validatingFields&&_([ue]),We[se.name]&&(q.valid=!1,B))break;!B&&(pe(We,se.name)?Oe?iG(n.errors,We,se.name):ft(n.errors,se.name,We[se.name]):on(n.errors,se.name))}!fr(be)&&await R(be,B,q)}}return q.valid},M=()=>{for(const V of a.unMount){const B=pe(r,V);B&&(B._f.refs?B._f.refs.every(q=>!vy(q)):!vy(B._f.ref))&&ge(V)}a.unMount=new Set},A=(V,B)=>!e.disabled&&(V&&B&&ft(i,V,B),!xo(Z(),s)),I=(V,B,q)=>u2(V,a,{...o.mount?i:Kt(B)?s:zs(V)?{[V]:B}:B},q,B),U=V=>zg(pe(o.mount?i:s,V,e.shouldUnregister?pe(s,V,[]):[])),Y=(V,B,q={})=>{const ue=pe(r,V);let ce=B;if(ue){const se=ue._f;se&&(!se.disabled&&ft(i,V,v2(B,se)),ce=wp(se.ref)&&Xn(B)?"":B,m2(se.ref)?[...se.ref.options].forEach(be=>be.selected=ce.includes(be.value)):se.refs?Fh(se.ref)?se.refs.length>1?se.refs.forEach(be=>(!be.defaultChecked||!be.disabled)&&(be.checked=Array.isArray(ce)?!!ce.find(Oe=>Oe===be.value):ce===be.value)):se.refs[0]&&(se.refs[0].checked=!!ce):se.refs.forEach(be=>be.checked=be.value===ce):yE(se.ref)?se.ref.value="":(se.ref.value=ce,se.ref.type||f.values.next({name:V,values:{...i}})))}(q.shouldDirty||q.shouldTouch)&&L(V,ce,q.shouldTouch,q.shouldDirty,!0),q.shouldValidate&&W(V)},F=(V,B,q)=>{for(const ue in B){const ce=B[ue],se=`${V}.${ue}`,be=pe(r,se);(a.array.has(V)||Xt(ce)||be&&!be._f)&&!Da(ce)?F(se,ce,q):Y(se,ce,q)}},te=(V,B,q={})=>{const ue=pe(r,V),ce=a.array.has(V),se=hr(B);ft(i,V,se),ce?(f.array.next({name:V,values:{...i}}),(h.isDirty||h.dirtyFields)&&q.shouldDirty&&f.state.next({name:V,dirtyFields:Wu(s,i),isDirty:A(V,se)})):ue&&!ue._f&&!Xn(se)?F(V,se,q):Y(V,se,q),ES(V,a)&&f.state.next({...n}),f.values.next({name:o.mount?V:void 0,values:{...i}})},D=async V=>{o.mount=!0;const B=V.target;let q=B.name,ue=!0;const ce=pe(r,q),se=()=>B.type?yy(ce._f):r2(V),be=Oe=>{ue=Number.isNaN(Oe)||Da(Oe)&&isNaN(Oe.getTime())||xo(Oe,pe(i,q,Oe))};if(ce){let Oe,Ae;const We=se(),gn=V.type===yp.BLUR||V.type===yp.FOCUS_OUT,Lt=!dG(ce._f)&&!e.resolver&&!pe(n.errors,q)&&!ce._f.deps||hG(gn,pe(n.touchedFields,q),n.isSubmitted,g,p),Nt=ES(q,a,gn);ft(i,q,We),gn?(ce._f.onBlur&&ce._f.onBlur(V),c&&c(0)):ce._f.onChange&&ce._f.onChange(V);const lr=L(q,We,gn,!1),cr=!fr(lr)||Nt;if(!gn&&f.values.next({name:q,type:V.type,values:{...i}}),Lt)return h.isValid&&(e.mode==="onBlur"&&gn?T():gn||T()),cr&&f.state.next({name:q,...Nt?{}:lr});if(!gn&&Nt&&f.state.next({...n}),e.resolver){const{errors:Sr}=await E([q]);if(be(We),ue){const os=IS(n.errors,r,q),ui=IS(Sr,r,os.name||q);Oe=ui.error,q=ui.name,Ae=fr(Sr)}}else _([q],!0),Oe=(await NS(ce,a.disabled,i,x,e.shouldUseNativeValidation))[q],_([q]),be(We),ue&&(Oe?Ae=!1:h.isValid&&(Ae=await R(r,!0)));ue&&(ce._f.deps&&W(ce._f.deps),N(q,Ae,Oe,lr))}},O=(V,B)=>{if(pe(n.errors,B)&&V.focus)return V.focus(),1},W=async(V,B={})=>{let q,ue;const ce=kd(V);if(e.resolver){const se=await S(Kt(V)?V:ce);q=fr(se),ue=V?!ce.some(be=>pe(se,be)):q}else V?(ue=(await Promise.all(ce.map(async se=>{const be=pe(r,se);return await R(be&&be._f?{[se]:be}:be)}))).every(Boolean),!(!ue&&!n.isValid)&&T()):ue=q=await R(r);return f.state.next({...!zs(V)||h.isValid&&q!==n.isValid?{}:{name:V},...e.resolver||!V?{isValid:q}:{},errors:n.errors}),B.shouldFocus&&!ue&&Sd(r,O,V?ce:a.mount),ue},Z=V=>{const B={...o.mount?i:s};return Kt(V)?B:zs(V)?pe(B,V):V.map(q=>pe(B,q))},H=(V,B)=>({invalid:!!pe((B||n).errors,V),isDirty:!!pe((B||n).dirtyFields,V),error:pe((B||n).errors,V),isValidating:!!pe(n.validatingFields,V),isTouched:!!pe((B||n).touchedFields,V)}),Q=V=>{V&&kd(V).forEach(B=>on(n.errors,B)),f.state.next({errors:V?n.errors:{}})},$=(V,B,q)=>{const ue=(pe(r,V,{_f:{}})._f||{}).ref,ce=pe(n.errors,V)||{},{ref:se,message:be,type:Oe,...Ae}=ce;ft(n.errors,V,{...Ae,...B,ref:ue}),f.state.next({name:V,errors:n.errors,isValid:!1}),q&&q.shouldFocus&&ue&&ue.focus&&ue.focus()},ie=(V,B)=>Us(V)?f.values.subscribe({next:q=>V(I(void 0,B),q)}):I(V,B,!0),ge=(V,B={})=>{for(const q of V?kd(V):a.mount)a.mount.delete(q),a.array.delete(q),B.keepValue||(on(r,q),on(i,q)),!B.keepError&&on(n.errors,q),!B.keepDirty&&on(n.dirtyFields,q),!B.keepTouched&&on(n.touchedFields,q),!B.keepIsValidating&&on(n.validatingFields,q),!e.shouldUnregister&&!B.keepDefaultValue&&on(s,q);f.values.next({values:{...i}}),f.state.next({...n,...B.keepDirty?{isDirty:A()}:{}}),!B.keepIsValid&&T()},G=({disabled:V,name:B,field:q,fields:ue})=>{(qr(V)&&o.mount||V||a.disabled.has(B))&&(V?a.disabled.add(B):a.disabled.delete(B),L(B,yy(q?q._f:pe(ue,B)._f),!1,!1,!0))},me=(V,B={})=>{let q=pe(r,V);const ue=qr(B.disabled)||qr(e.disabled);return ft(r,V,{...q||{},_f:{...q&&q._f?q._f:{ref:{name:V}},name:V,mount:!0,...B}}),a.mount.add(V),q?G({field:q,disabled:qr(B.disabled)?B.disabled:e.disabled,name:V}):P(V,!0,B.value),{...ue?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:Hu(B.min),max:Hu(B.max),minLength:Hu(B.minLength),maxLength:Hu(B.maxLength),pattern:Hu(B.pattern)}:{},name:V,onChange:D,onBlur:D,ref:ce=>{if(ce){me(V,B),q=pe(r,V);const se=Kt(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,be=lG(se),Oe=q._f.refs||[];if(be?Oe.find(Ae=>Ae===se):se===q._f.ref)return;ft(r,V,{_f:{...q._f,...be?{refs:[...Oe.filter(vy),se,...Array.isArray(pe(s,V))?[{}]:[]],ref:{type:se.type,name:V}}:{ref:se}}}),P(V,!1,void 0,se)}else q=pe(r,V,{}),q._f&&(q._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(s2(a.array,V)&&o.action)&&a.unMount.add(V)}}},Fe=()=>e.shouldFocusError&&Sd(r,O,a.mount),Pe=V=>{qr(V)&&(f.state.next({disabled:V}),Sd(r,(B,q)=>{const ue=pe(r,q);ue&&(B.disabled=ue._f.disabled||V,Array.isArray(ue._f.refs)&&ue._f.refs.forEach(ce=>{ce.disabled=ue._f.disabled||V}))},0,!1))},je=(V,B)=>async q=>{let ue;q&&(q.preventDefault&&q.preventDefault(),q.persist&&q.persist());let ce=hr(i);if(a.disabled.size)for(const se of a.disabled)ft(ce,se,void 0);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:se,values:be}=await E();n.errors=se,ce=be}else await R(r);if(on(n.errors,"root"),fr(n.errors)){f.state.next({errors:{}});try{await V(ce,q)}catch(se){ue=se}}else B&&await B({...n.errors},q),Fe(),setTimeout(Fe);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fr(n.errors)&&!ue,submitCount:n.submitCount+1,errors:n.errors}),ue)throw ue},X=(V,B={})=>{pe(r,V)&&(Kt(B.defaultValue)?te(V,hr(pe(s,V))):(te(V,B.defaultValue),ft(s,V,hr(B.defaultValue))),B.keepTouched||on(n.touchedFields,V),B.keepDirty||(on(n.dirtyFields,V),n.isDirty=B.defaultValue?A(V,hr(pe(s,V))):A()),B.keepError||(on(n.errors,V),h.isValid&&T()),f.state.next({...n}))},Ue=(V,B={})=>{const q=V?hr(V):s,ue=hr(q),ce=fr(V),se=ce?s:ue;if(B.keepDefaultValues||(s=q),!B.keepValues){if(B.keepDirtyValues){const be=new Set([...a.mount,...Object.keys(Wu(s,i))]);for(const Oe of Array.from(be))pe(n.dirtyFields,Oe)?ft(se,Oe,pe(i,Oe)):te(Oe,pe(se,Oe))}else{if(pE&&Kt(V))for(const be of a.mount){const Oe=pe(r,be);if(Oe&&Oe._f){const Ae=Array.isArray(Oe._f.refs)?Oe._f.refs[0]:Oe._f.ref;if(wp(Ae)){const We=Ae.closest("form");if(We){We.reset();break}}}}r={}}i=e.shouldUnregister?B.keepDefaultValues?hr(s):{}:hr(se),f.array.next({values:{...se}}),f.values.next({values:{...se}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:ce?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!xo(V,s)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ce?{}:B.keepDirtyValues?B.keepDefaultValues&&i?Wu(s,i):n.dirtyFields:B.keepDefaultValues&&V?Wu(s,V):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Qe=(V,B)=>Ue(Us(V)?V(i):V,B);return{control:{register:me,unregister:ge,getFieldState:H,handleSubmit:je,setError:$,_executeSchema:E,_getWatch:I,_getDirty:A,_updateValid:T,_removeUnmounted:M,_updateFieldArray:y,_updateDisabledField:G,_getFieldArray:U,_reset:Ue,_resetDefaultValues:()=>Us(e.defaultValues)&&e.defaultValues().then(V=>{Qe(V,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:V=>{n={...n,...V}},_disableForm:Pe,_subjects:f,_proxyFormState:h,_setErrors:C,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(V){o=V},get _defaultValues(){return s},get _names(){return a},set _names(V){a=V},get _formState(){return n},set _formState(V){n=V},get _options(){return e},set _options(V){e={...e,...V}}},trigger:W,register:me,handleSubmit:je,watch:ie,setValue:te,getValues:Z,reset:Qe,resetField:X,clearErrors:Q,unregister:ge,setError:$,setFocus:(V,B={})=>{const q=pe(r,V),ue=q&&q._f;if(ue){const ce=ue.refs?ue.refs[0]:ue.ref;ce.focus&&(ce.focus(),B.shouldSelect&&Us(ce.select)&&ce.select())}},getFieldState:H}}function Nl(t={}){const e=ee.useRef(void 0),n=ee.useRef(void 0),[r,s]=ee.useState({isDirty:!1,isValidating:!1,isLoading:Us(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Us(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...pG(t),formState:r});const i=e.current.control;return i._options=t,vE({subject:i._subjects.state,next:o=>{l2(o,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),ee.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ee.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),ee.useEffect(()=>{t.values&&!xo(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),ee.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),ee.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),ee.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=a2(r,i),e.current}const yt=m.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));yt.displayName="Input";const Yr=Th("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Vi:"button",a=c=>{r&&c.key==="Enter"&&s.onClick&&!s.disabled&&(c.preventDefault(),s.onClick(c)),s.onKeyDown&&s.onKeyDown(c)};return l.jsx(o,{className:le(Yr({variant:e,size:n,className:t})),ref:i,role:r?"button":void 0,"aria-disabled":s.disabled?"true":void 0,onKeyDown:a,tabIndex:r&&!s.disabled?0:void 0,...s})});de.displayName="Button";var gG="Label",y2=m.forwardRef((t,e)=>l.jsx(Ie.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));y2.displayName=gG;var w2=y2;const vG=Th("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),bt=m.forwardRef(({className:t,...e},n)=>l.jsx(w2,{ref:n,className:le(vG(),t),...e}));bt.displayName=w2.displayName;const Uh=eG,x2=m.createContext({}),Zn=({...t})=>l.jsx(x2.Provider,{value:{name:t.name},children:l.jsx(sG,{...t})}),Hg=()=>{const t=m.useContext(x2),e=m.useContext(_2),{getFieldState:n,formState:r}=Wg(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},_2=m.createContext({}),Vn=m.forwardRef(({className:t,...e},n)=>{const r=m.useId();return l.jsx(_2.Provider,{value:{id:r},children:l.jsx("div",{ref:n,className:le("space-y-2",t),...e})})});Vn.displayName="FormItem";const Fn=m.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=Hg();return l.jsx(bt,{ref:n,className:le(r&&"text-destructive",t),htmlFor:s,...e})});Fn.displayName="FormLabel";const Un=m.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=Hg();return l.jsx(Vi,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});Un.displayName="FormControl";const yG=m.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Hg();return l.jsx("p",{ref:n,id:r,className:le("text-sm text-muted-foreground",t),...e})});yG.displayName="FormDescription";const $n=m.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=Hg(),o=s?String(s==null?void 0:s.message):e;return o?l.jsx("p",{ref:r,id:i,className:le("text-sm font-medium text-destructive",t),...n,children:o}):null});$n.displayName="FormMessage";const wG=({onSubmit:t,onForgotPassword:e})=>{const n=Nl({defaultValues:{email:"",password:""}});return l.jsx(Uh,{...n,children:l.jsxs("form",{onSubmit:n.handleSubmit(t),className:"space-y-4",children:[l.jsx(Zn,{control:n.control,name:"email",render:({field:r})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Email"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx($c,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...r,type:"email",className:"pl-9",required:!0})]})}),l.jsx($n,{})]})}),l.jsx(Zn,{control:n.control,name:"password",render:({field:r})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...r,type:"password",className:"pl-9",required:!0})]})}),l.jsx($n,{})]})}),l.jsx(de,{type:"submit",className:"w-full",children:"Войти"}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx(kt,{to:"/register",className:"text-primary hover:underline",children:"Создать аккаунт"}),l.jsx(de,{variant:"link",className:"p-0 h-auto",type:"button",onClick:e,children:"Забыли пароль?"})]})]})})},RS=(t,e,n)=>{if(t&&"reportValidity"in t){const r=pe(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},E2=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?RS(r.ref,n,t):r.refs&&r.refs.forEach(s=>RS(s,n,t))}},xG=(t,e)=>{e.shouldUseNativeValidation&&E2(t,e);const n={};for(const r in t){const s=pe(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(_G(e.names||Object.keys(t),r)){const o=Object.assign({},pe(n,r));ft(o,"root",i),ft(n,r,o)}else ft(n,r,i)}return n},_G=(t,e)=>t.some(n=>n.startsWith(e+"."));var EG=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=d2(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},xE=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&E2({},i),{errors:{},values:n.raw?r:u}})}catch(u){return a(u)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:xG(EG(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},ct;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ct||(ct={}));var AS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(AS||(AS={}));const ye=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fo=t=>{switch(typeof t){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(t)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(t)?ye.array:t===null?ye.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ye.promise:typeof Map<"u"&&t instanceof Map?ye.map:typeof Set<"u"&&t instanceof Set?ye.set:typeof Date<"u"&&t instanceof Date?ye.date:ye.object;default:return ye.unknown}},oe=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Jr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Jr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Jr.create=t=>new Jr(t);const lh=(t,e)=>{let n;switch(t.code){case oe.invalid_type:t.received===ye.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,ct.assertNever(t)}return{message:n}};let bG=lh;function _x(){return bG}const Ex=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function ve(t,e){const n=_x(),r=Ex({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===lh?void 0:lh].filter(s=>!!s)});t.common.issues.push(r)}class rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ve;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return rr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ve;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ve=Object.freeze({status:"aborted"}),rd=t=>({status:"dirty",value:t}),Tr=t=>({status:"valid",value:t}),PS=t=>t.status==="aborted",jS=t=>t.status==="dirty",Jc=t=>t.status==="valid",Ep=t=>typeof Promise<"u"&&t instanceof Promise;function bp(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function b2(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Te||(Te={}));var sd,id;class oi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const DS=(t,e)=>{if(Jc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Jr(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var c,u;const{message:h}=t;return o.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(c=h??r)!==null&&c!==void 0?c:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=h??n)!==null&&u!==void 0?u:a.defaultError}},description:s}}class et{get description(){return this._def.description}_getType(e){return fo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rr,ctx:{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Ep(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},i=this._parseSync({data:e,path:s.path,parent:s});return DS(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Jc(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Jc(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Ep(s)?s:Promise.resolve(s));return DS(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:oe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Gi({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ji.create(this,this._def)}nullable(){return ll.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return uh.create(this,this._def)}or(e){return Sp.create([this,e],this._def)}and(e){return Np.create(this,e,this._def)}transform(e){return new Gi({...Ge(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Pp({...Ge(this._def),innerType:this,defaultValue:n,typeName:Me.ZodDefault})}brand(){return new N2({typeName:Me.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jp({...Ge(this._def),innerType:this,catchValue:n,typeName:Me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return qg.create(this,e)}readonly(){return Dp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const TG=/^c[^\s-]{8,}$/i,kG=/^[0-9a-z]+$/,SG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CG=/^[a-z0-9_-]{21}$/i,IG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wy;const jG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,MG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,VG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,T2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FG=new RegExp(`^${T2}$`);function k2(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function UG(t){return new RegExp(`^${k2(t)}$`)}function $G(t){let e=`${T2}T${k2(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function BG(t,e){return!!((e==="v4"||!e)&&jG.test(t)||(e==="v6"||!e)&&MG.test(t))}function zG(t,e){if(!IG.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function WG(t,e){return!!((e==="v4"||!e)&&DG.test(t)||(e==="v6"||!e)&&OG.test(t))}class Ci extends et{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const i=this._getOrReturnCtx(e);return ve(i,{code:oe.invalid_type,expected:ye.string,received:i.parsedType}),Ve}const r=new rr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ve(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ve(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")AG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"email",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")wy||(wy=new RegExp(PG,"u")),wy.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"emoji",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")NG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"uuid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")CG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"nanoid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")TG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"cuid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")kG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"cuid2",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")SG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"ulid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ve(s,{validation:"url",code:oe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"regex",code:oe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?$G(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?FG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?UG(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?RG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"duration",code:oe.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?BG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"ip",code:oe.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?zG(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"jwt",code:oe.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?WG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"cidr",code:oe.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?LG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"base64",code:oe.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?VG.test(e.data)||(s=this._getOrReturnCtx(e,s),ve(s,{validation:"base64url",code:oe.invalid_string,message:i.message}),r.dirty()):ct.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:oe.invalid_string,...Te.errToObj(r)})}_addCheck(e){return new Ci({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Te.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Te.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Te.errToObj(n)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ci.create=t=>{var e;return new Ci({checks:[],typeName:Me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};function HG(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class eu extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const i=this._getOrReturnCtx(e);return ve(i,{code:oe.invalid_type,expected:ye.number,received:i.parsedType}),Ve}let r;const s=new rr;for(const i of this._def.checks)i.kind==="int"?ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?HG(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.not_finite,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,r,s){return new eu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Te.toString(s)}]})}_addCheck(e){return new eu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}eu.create=t=>new eu({checks:[],typeName:Me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class tu extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ye.bigint)return this._getInvalidInput(e);let r;const s=new rr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ve(r,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ve(n,{code:oe.invalid_type,expected:ye.bigint,received:n.parsedType}),Ve}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,r,s){return new tu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Te.toString(s)}]})}_addCheck(e){return new tu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}tu.create=t=>{var e;return new tu({checks:[],typeName:Me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};class bx extends et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.boolean,received:r.parsedType}),Ve}return Tr(e.data)}}bx.create=t=>new bx({typeName:Me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class ch extends et{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const i=this._getOrReturnCtx(e);return ve(i,{code:oe.invalid_type,expected:ye.date,received:i.parsedType}),Ve}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ve(i,{code:oe.invalid_date}),Ve}const r=new rr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ve(s,{code:oe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ct.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ch({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ch.create=t=>new ch({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Me.ZodDate,...Ge(t)});class Tx extends et{_parse(e){if(this._getType(e)!==ye.symbol){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.symbol,received:r.parsedType}),Ve}return Tr(e.data)}}Tx.create=t=>new Tx({typeName:Me.ZodSymbol,...Ge(t)});class Tp extends et{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.undefined,received:r.parsedType}),Ve}return Tr(e.data)}}Tp.create=t=>new Tp({typeName:Me.ZodUndefined,...Ge(t)});class kp extends et{_parse(e){if(this._getType(e)!==ye.null){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.null,received:r.parsedType}),Ve}return Tr(e.data)}}kp.create=t=>new kp({typeName:Me.ZodNull,...Ge(t)});class kx extends et{constructor(){super(...arguments),this._any=!0}_parse(e){return Tr(e.data)}}kx.create=t=>new kx({typeName:Me.ZodAny,...Ge(t)});class yc extends et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tr(e.data)}}yc.create=t=>new yc({typeName:Me.ZodUnknown,...Ge(t)});class ra extends et{_parse(e){const n=this._getOrReturnCtx(e);return ve(n,{code:oe.invalid_type,expected:ye.never,received:n.parsedType}),Ve}}ra.create=t=>new ra({typeName:Me.ZodNever,...Ge(t)});class Sx extends et{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.void,received:r.parsedType}),Ve}return Tr(e.data)}}Sx.create=t=>new Sx({typeName:Me.ZodVoid,...Ge(t)});class Js extends et{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ye.array)return ve(n,{code:oe.invalid_type,expected:ye.array,received:n.parsedType}),Ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ve(n,{code:o?oe.too_big:oe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ve(n,{code:oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ve(n,{code:oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new oi(n,o,n.path,a)))).then(o=>rr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new oi(n,o,n.path,a)));return rr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Js({...this._def,minLength:{value:e,message:Te.toString(n)}})}max(e,n){return new Js({...this._def,maxLength:{value:e,message:Te.toString(n)}})}length(e,n){return new Js({...this._def,exactLength:{value:e,message:Te.toString(n)}})}nonempty(e){return this.min(1,e)}}Js.create=(t,e)=>new Js({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...Ge(e)});function Hl(t){if(t instanceof Wt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ji.create(Hl(r))}return new Wt({...t._def,shape:()=>e})}else return t instanceof Js?new Js({...t._def,type:Hl(t.element)}):t instanceof ji?ji.create(Hl(t.unwrap())):t instanceof ll?ll.create(Hl(t.unwrap())):t instanceof qi?qi.create(t.items.map(e=>Hl(e))):t}class Wt extends et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ct.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ye.object){const u=this._getOrReturnCtx(e);return ve(u,{code:oe.invalid_type,expected:ye.object,received:u.parsedType}),Ve}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ra&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const h=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new oi(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof ra){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(ve(s,{code:oe.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const f=s.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new oi(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key,p=await h.value;u.push({key:f,value:p,alwaysSet:h.alwaysSet})}return u}).then(u=>rr.mergeObjectSync(r,u)):rr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new Wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Te.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Wt({...this._def,catchall:e})}pick(e){const n={};return ct.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}omit(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}deepPartial(){return Hl(this)}partial(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Wt({...this._def,shape:()=>n})}required(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ji;)i=i._def.innerType;n[r]=i}}),new Wt({...this._def,shape:()=>n})}keyof(){return S2(ct.objectKeys(this.shape))}}Wt.create=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strip",catchall:ra.create(),typeName:Me.ZodObject,...Ge(e)});Wt.strictCreate=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strict",catchall:ra.create(),typeName:Me.ZodObject,...Ge(e)});Wt.lazycreate=(t,e)=>new Wt({shape:t,unknownKeys:"strip",catchall:ra.create(),typeName:Me.ZodObject,...Ge(e)});class Sp extends et{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Jr(a.ctx.common.issues));return ve(n,{code:oe.invalid_union,unionErrors:o}),Ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Jr(c));return ve(n,{code:oe.invalid_union,unionErrors:a}),Ve}}get options(){return this._def.options}}Sp.create=(t,e)=>new Sp({options:t,typeName:Me.ZodUnion,...Ge(e)});const vi=t=>t instanceof Ip?vi(t.schema):t instanceof Gi?vi(t.innerType()):t instanceof Rp?[t.value]:t instanceof al?t.options:t instanceof Ap?ct.objectValues(t.enum):t instanceof Pp?vi(t._def.innerType):t instanceof Tp?[void 0]:t instanceof kp?[null]:t instanceof ji?[void 0,...vi(t.unwrap())]:t instanceof ll?[null,...vi(t.unwrap())]:t instanceof N2||t instanceof Dp?vi(t.unwrap()):t instanceof jp?vi(t._def.innerType):[];class _E extends et{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.object)return ve(n,{code:oe.invalid_type,expected:ye.object,received:n.parsedType}),Ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ve(n,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=vi(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new _E({typeName:Me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ge(r)})}}function Nx(t,e){const n=fo(t),r=fo(e);if(t===e)return{valid:!0,data:t};if(n===ye.object&&r===ye.object){const s=ct.objectKeys(e),i=ct.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Nx(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ye.array&&r===ye.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Nx(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ye.date&&r===ye.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Np extends et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(PS(i)||PS(o))return Ve;const a=Nx(i.value,o.value);return a.valid?((jS(i)||jS(o))&&n.dirty(),{status:n.value,value:a.data}):(ve(r,{code:oe.invalid_intersection_types}),Ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Np.create=(t,e,n)=>new Np({left:t,right:e,typeName:Me.ZodIntersection,...Ge(n)});class qi extends et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return ve(r,{code:oe.invalid_type,expected:ye.array,received:r.parsedType}),Ve;if(r.data.length<this._def.items.length)return ve(r,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&r.data.length>this._def.items.length&&(ve(r,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new oi(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>rr.mergeArray(n,o)):rr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new qi({...this._def,rest:e})}}qi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qi({items:t,typeName:Me.ZodTuple,rest:null,...Ge(e)})};class Cp extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.object)return ve(r,{code:oe.invalid_type,expected:ye.object,received:r.parsedType}),Ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new oi(r,a,r.path,a)),value:o._parse(new oi(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?rr.mergeObjectAsync(n,s):rr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof et?new Cp({keyType:e,valueType:n,typeName:Me.ZodRecord,...Ge(r)}):new Cp({keyType:Ci.create(),valueType:e,typeName:Me.ZodRecord,...Ge(n)})}}class Cx extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return ve(r,{code:oe.invalid_type,expected:ye.map,received:r.parsedType}),Ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new oi(r,a,r.path,[u,"key"])),value:i._parse(new oi(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Ve;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(u.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Ve;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(u.value,h.value)}return{status:n.value,value:a}}}}Cx.create=(t,e,n)=>new Cx({valueType:e,keyType:t,typeName:Me.ZodMap,...Ge(n)});class nu extends et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return ve(r,{code:oe.invalid_type,expected:ye.set,received:r.parsedType}),Ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ve(r,{code:oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ve(r,{code:oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return Ve;h.status==="dirty"&&n.dirty(),u.add(h.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new oi(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new nu({...this._def,minSize:{value:e,message:Te.toString(n)}})}max(e,n){return new nu({...this._def,maxSize:{value:e,message:Te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}nu.create=(t,e)=>new nu({valueType:t,minSize:null,maxSize:null,typeName:Me.ZodSet,...Ge(e)});class Nd extends et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.function)return ve(n,{code:oe.invalid_type,expected:ye.function,received:n.parsedType}),Ve;function r(a,c){return Ex({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_x(),lh].filter(u=>!!u),issueData:{code:oe.invalid_arguments,argumentsError:c}})}function s(a,c){return Ex({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_x(),lh].filter(u=>!!u),issueData:{code:oe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof uh){const a=this;return Tr(async function(...c){const u=new Jr([]),h=await a._def.args.parseAsync(c,i).catch(g=>{throw u.addIssue(r(c,g)),u}),f=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(f,i).catch(g=>{throw u.addIssue(s(f,g)),u})})}else{const a=this;return Tr(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Jr([r(c,u.error)]);const h=Reflect.apply(o,this,u.data),f=a._def.returns.safeParse(h,i);if(!f.success)throw new Jr([s(h,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Nd({...this._def,args:qi.create(e).rest(yc.create())})}returns(e){return new Nd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Nd({args:e||qi.create([]).rest(yc.create()),returns:n||yc.create(),typeName:Me.ZodFunction,...Ge(r)})}}class Ip extends et{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ip.create=(t,e)=>new Ip({getter:t,typeName:Me.ZodLazy,...Ge(e)});class Rp extends et{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ve(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rp.create=(t,e)=>new Rp({value:t,typeName:Me.ZodLiteral,...Ge(e)});function S2(t,e){return new al({values:t,typeName:Me.ZodEnum,...Ge(e)})}class al extends et{constructor(){super(...arguments),sd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ve(n,{expected:ct.joinValues(r),received:n.parsedType,code:oe.invalid_type}),Ve}if(bp(this,sd)||b2(this,sd,new Set(this._def.values)),!bp(this,sd).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ve(n,{received:n.data,code:oe.invalid_enum_value,options:r}),Ve}return Tr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return al.create(e,{...this._def,...n})}exclude(e,n=this._def){return al.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}sd=new WeakMap;al.create=S2;class Ap extends et{constructor(){super(...arguments),id.set(this,void 0)}_parse(e){const n=ct.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const s=ct.objectValues(n);return ve(r,{expected:ct.joinValues(s),received:r.parsedType,code:oe.invalid_type}),Ve}if(bp(this,id)||b2(this,id,new Set(ct.getValidEnumValues(this._def.values))),!bp(this,id).has(e.data)){const s=ct.objectValues(n);return ve(r,{received:r.data,code:oe.invalid_enum_value,options:s}),Ve}return Tr(e.data)}get enum(){return this._def.values}}id=new WeakMap;Ap.create=(t,e)=>new Ap({values:t,typeName:Me.ZodNativeEnum,...Ge(e)});class uh extends et{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.promise&&n.common.async===!1)return ve(n,{code:oe.invalid_type,expected:ye.promise,received:n.parsedType}),Ve;const r=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return Tr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}uh.create=(t,e)=>new uh({type:t,typeName:Me.ZodPromise,...Ge(e)});class Gi extends et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ve(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ve;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Ve:c.status==="dirty"||n.value==="dirty"?rd(c.value):c});{if(n.value==="aborted")return Ve;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ve:a.status==="dirty"||n.value==="dirty"?rd(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Jc(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Jc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ct.assertNever(s)}}Gi.create=(t,e,n)=>new Gi({schema:t,typeName:Me.ZodEffects,effect:e,...Ge(n)});Gi.createWithPreprocess=(t,e,n)=>new Gi({schema:e,effect:{type:"preprocess",transform:t},typeName:Me.ZodEffects,...Ge(n)});class ji extends et{_parse(e){return this._getType(e)===ye.undefined?Tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ji.create=(t,e)=>new ji({innerType:t,typeName:Me.ZodOptional,...Ge(e)});class ll extends et{_parse(e){return this._getType(e)===ye.null?Tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ll.create=(t,e)=>new ll({innerType:t,typeName:Me.ZodNullable,...Ge(e)});class Pp extends et{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Pp.create=(t,e)=>new Pp({innerType:t,typeName:Me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class jp extends et{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ep(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Jr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Jr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jp.create=(t,e)=>new jp({innerType:t,typeName:Me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class Ix extends et{_parse(e){if(this._getType(e)!==ye.nan){const r=this._getOrReturnCtx(e);return ve(r,{code:oe.invalid_type,expected:ye.nan,received:r.parsedType}),Ve}return{status:"valid",value:e.data}}}Ix.create=t=>new Ix({typeName:Me.ZodNaN,...Ge(t)});class N2 extends et{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class qg extends et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ve:i.status==="dirty"?(n.dirty(),rd(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new qg({in:e,out:n,typeName:Me.ZodPipeline})}}class Dp extends et{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Jc(s)&&(s.value=Object.freeze(s.value)),s);return Ep(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Dp.create=(t,e)=>new Dp({innerType:t,typeName:Me.ZodReadonly,...Ge(e)});Wt.lazycreate;var Me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Me||(Me={}));const Ma=Ci.create;eu.create;Ix.create;tu.create;const xy=bx.create;ch.create;Tx.create;Tp.create;kp.create;kx.create;yc.create;ra.create;Sx.create;Js.create;const EE=Wt.create;Wt.strictCreate;Sp.create;_E.create;Np.create;qi.create;Cp.create;Cx.create;nu.create;Nd.create;Ip.create;Rp.create;al.create;Ap.create;uh.create;Gi.create;ji.create;ll.create;Gi.createWithPreprocess;qg.create;const qG=EE({email:Ma().email({message:"Введите корректный email"}).min(1,{message:"Email обязателен"})}),GG=({onBack:t,canResend:e,countdown:n})=>{const{toast:r}=jt(),[s,i]=m.useState(!1),o=Nl({resolver:xE(qG),defaultValues:{email:""}}),a=async c=>{i(!0);try{await kA(Ze,c.email),r({title:"Успех",description:"Письмо с инструкциями по сбросу пароля отправлено на ваш email."}),o.reset()}catch(u){console.error("Ошибка при отправке письма для сброса пароля:",u);let h="Произошла ошибка при отправке письма. Попробуйте снова.";switch(u.code){case"auth/user-not-found":h="Пользователь с таким email не найден.";break;case"auth/invalid-email":h="Некорректный email.";break;case"auth/too-many-requests":h="Слишком много запросов. Пожалуйста, подождите.";break;default:h=u.message||h}r({title:"Ошибка",description:h,variant:"destructive"})}finally{i(!1)}};return l.jsx(Uh,{...o,children:l.jsxs("form",{onSubmit:o.handleSubmit(a),className:"space-y-4",children:[l.jsx(Zn,{control:o.control,name:"email",render:({field:c})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Email"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx($c,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...c,type:"email",className:"pl-9",placeholder:"Введите ваш email"})]})}),l.jsx($n,{})]})}),l.jsx(de,{type:"submit",className:"w-full",disabled:s||!e,children:s?"Отправка...":e?"Отправить инструкции":`Повторная отправка через ${n}с`}),l.jsxs(de,{type:"button",variant:"ghost",className:"w-full",onClick:t,children:[l.jsx(lg,{className:"h-4 w-4 mr-2"}),"Вернуться к входу"]})]})})},Rx=()=>{const{user:t,resendVerificationEmail:e}=Ot(),[n,r]=m.useState(!1),[s,i]=m.useState(60),o=kr(),{toast:a}=jt(),c=m.useCallback(()=>{r(!1),i(60);const f=setInterval(()=>{i(p=>p<=1?(clearInterval(f),r(!0),0):p-1)},1e3)},[]),u=async()=>{if(n)try{await e(),c(),a({title:"Ссылка для подтверждения отправлена",description:"Проверьте вашу почту"})}catch(f){a({title:"Ошибка",description:f.message,variant:"destructive"})}};m.useEffect(()=>{let f=null;return t&&!t.emailVerified&&(f=setInterval(async()=>{const p=Ze.currentUser;p&&(await p.reload(),p.emailVerified&&(a({title:"Успешно",description:"Email подтвержден"}),o("/profile"),f&&clearInterval(f)))},3e3)),()=>{f&&clearInterval(f)}},[t,o,a]),m.useEffect(()=>{c()},[c]);const h=()=>{o("/register")};return l.jsx(mt,{children:l.jsx(vt,{className:"p-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx($c,{className:"h-12 w-12 mx-auto text-primary"}),l.jsx("h2",{className:"text-2xl font-semibold",children:"Проверьте вашу почту"}),l.jsx("p",{className:"text-muted-foreground",children:t!=null&&t.email?l.jsxs(l.Fragment,{children:["Мы отправили ссылку для подтверждения на ",l.jsx("br",{}),l.jsx("span",{className:"font-medium text-foreground",children:t.email})]}):"Пожалуйста, проверьте вашу почту для получения ссылки подтверждения и перейдите по ней."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n?l.jsx(de,{variant:"link",className:"p-0 h-auto",onClick:u,children:"Отправить ссылку повторно"}):l.jsxs("span",{children:["Повторная отправка через ",s,"с"]})}),l.jsxs(de,{variant:"ghost",className:"w-full",onClick:h,children:[l.jsx(lg,{className:"h-4 w-4 mr-2"}),"Назад"]})]})]})})})},Se={review:{releaseType:{album:"Альбом",single:"Сингл",ep:"EP"},ratingType:{recommend:"Советую",neutral:"Как хотите",notRecommend:"Не советую"},create:{title:"Создание рецензии",fetchButton:"Загрузить",loadingStatus:"Загрузка...",submitButton:"Отправить рецензию",sendingStatus:"Отправка...",yandexMusicUrl:"Ссылка на Яндекс.Музыку",urlPlaceholder:"https://music.yandex.ru/album/...",cover:"Обложка",artist:"Исполнитель",releaseTitle:"Название релиза",releaseType:"Тип релиза",rating:"Оценка",ratingSelect:"Выберите оценку",reviewText:"Текст рецензии",reviewTextPlaceholder:"Напишите вашу рецензию здесь..."}},form:{username:{minLength:"Имя пользователя должно содержать минимум 3 символа",maxLength:"Имя пользователя слишком длинное"},email:{invalid:"Введите корректный email"},password:{minLength:"Пароль должен содержать минимум 6 символов"},confirmPassword:{minLength:"Подтверждение пароля должно содержать минимум 6 символов",mismatch:"Пароли не совпадают"},acceptTerms:{required:"Необходимо принять лицензионное соглашение"}},notifications:{success:{login:"Успешный вход в систему.",register:"Регистрация успешно завершена.",emailSent:"Перейдите по ссылке, для подтверждения регистрации.",emailVerified:"Ваш адрес электронной почты был подтвержден.",passwordChanged:"Пароль успешно изменен.",accountVerified:"Аккаунт подтвержден.",avatarUpdated:"Аватар успешно обновлен.",avatarDeleted:"Аватар успешно удален.",reviewSubmitted:"Рецензия успешно отправлена",dataSaved:"Данные успешно сохранены",dataFetched:"Данные успешно загружены"},error:{generic:"Произошла ошибка.",login:"Ошибка входа.",register:"Ошибка регистрации.",passwordMismatch:"Пароли не совпадают.",actionCodeNotFound:"Код подтверждения отсутствует.",fileTooLarge:"Файл слишком большой. Максимальный размер — 5 МБ.",fileTypeNotSupported:"Поддерживаются только файлы JPEG и PNG.",avatarUploadFailed:"Не удалось загрузить аватар.",avatarDeleteFailed:"Не удалось удалить аватар.",fetchFailed:"Не удалось загрузить данные",invalidUrl:"Неверная ссылка",emptyFields:"Заполните все обязательные поля",reviewSubmitFailed:"Не удалось отправить рецензию",noRating:"Выберите оценку",noReviewText:"Напишите текст рецензии",noReleaseData:"Сначала загрузите данные релиза",noCover:"Загрузите обложку релиза",firebase:{auth:{invalidActionCode:"Ошибка подтверждения, попробуйте снова. Это может произойти, если код подтверждения недействителен или истек.",invalidCredential:"Неверный email или пароль. Убедитесь, что вы ввели правильные учетные данные.",userNotFound:"Пользователь с таким email не найден. Проверьте, правильно ли вы ввели email.",wrongPassword:"Неверный пароль. Убедитесь, что вы ввели правильный пароль для своей учетной записи.",tooManyRequests:"Слишком много попыток входа. Попробуйте позже. Это может произойти, если вы слишком часто вводите неверные учетные данные.",emailAlreadyInUse:"Этот email уже используется. Попробуйте войти в свою учетную запись или используйте другой email.",weakPassword:"Пароль слишком слабый. Убедитесь, что он содержит не менее 6 символов и сочетает буквы и цифры.",operationNotAllowed:"Эта операция не разрешена. Убедитесь, что ваша учетная запись активна и вы используете правильные методы аутентификации."}}}}},KG=()=>{const[t,e]=m.useState(!1),[n,r]=m.useState(!1),[s,i]=m.useState(!0),[o,a]=m.useState(60),[c,u]=m.useState(""),{toast:h}=jt(),{loading:f,user:p,login:g}=Ot(),x=kr();m.useEffect(()=>{f||p&&(p.emailVerified?x("/profile"):x("/verify-email"))},[f,p,x]);const v=()=>{i(!1),a(60);const b=setInterval(()=>{a(C=>C<=1?(clearInterval(b),i(!0),0):C-1)},1e3)},T=async b=>{try{await g(b.email,b.password),h({title:"Успешно",description:Se.notifications.success.login}),p!=null&&p.emailVerified?x("/profile"):x("/verify-email")}catch(C){if(C instanceof Br){if(C.code==="auth/requires-recent-login")return;const P={"auth/invalid-credential":Se.notifications.error.firebase.auth.invalidCredential,"auth/user-not-found":Se.notifications.error.firebase.auth.userNotFound,"auth/wrong-password":Se.notifications.error.firebase.auth.wrongPassword,"auth/too-many-requests":Se.notifications.error.firebase.auth.tooManyRequests};h({title:"Ошибка",description:P[C.code]||Se.notifications.error.generic,variant:"destructive"})}}},_=async b=>{try{await kA(Ze,b.email),u(b.email),r(!0),v(),h({title:"Код отправлен",description:Se.notifications.success.emailSent})}catch(C){h({title:"Ошибка",description:C.message,variant:"destructive"})}},y=()=>{e(!1),r(!1),u("")};return l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs(mt,{children:[l.jsx(en,{children:l.jsx(tn,{className:"flex items-center gap-2",children:n?l.jsxs(l.Fragment,{children:[l.jsx($c,{className:"h-6 w-6"}),"Подтверждение Email"]}):t?l.jsxs(l.Fragment,{children:[l.jsx($c,{className:"h-6 w-6"}),"Сброс пароля"]}):l.jsxs(l.Fragment,{children:[l.jsx(m$,{className:"h-6 w-6"}),"Вход в систему"]})})}),l.jsx(vt,{children:n?l.jsx(Rx,{}):t?l.jsx(GG,{onSubmit:_,onBack:y,canResend:s,countdown:o}):l.jsx(wG,{onSubmit:T,onForgotPassword:()=>e(!0)})})]})})};var _y="focusScope.autoFocusOnMount",Ey="focusScope.autoFocusOnUnmount",MS={bubbles:!1,cancelable:!0},QG="FocusScope",Gg=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=m.useState(null),u=Nn(s),h=Nn(i),f=m.useRef(null),p=it(e,v=>c(v)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(b){if(g.paused||!a)return;const C=b.target;a.contains(C)?f.current=C:lo(f.current,{select:!0})},T=function(b){if(g.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||lo(f.current,{select:!0}))},_=function(b){if(document.activeElement===document.body)for(const P of b)P.removedNodes.length>0&&lo(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",T);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",T),y.disconnect()}}},[r,a,g.paused]),m.useEffect(()=>{if(a){LS.add(g);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent(_y,MS);a.addEventListener(_y,u),a.dispatchEvent(_),_.defaultPrevented||(YG(tK(C2(a)),{select:!0}),document.activeElement===v&&lo(a))}return()=>{a.removeEventListener(_y,u),setTimeout(()=>{const _=new CustomEvent(Ey,MS);a.addEventListener(Ey,h),a.dispatchEvent(_),_.defaultPrevented||lo(v??document.body,{select:!0}),a.removeEventListener(Ey,h),LS.remove(g)},0)}}},[a,u,h,g]);const x=m.useCallback(v=>{if(!n&&!r||g.paused)return;const T=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(T&&_){const y=v.currentTarget,[b,C]=XG(y);b&&C?!v.shiftKey&&_===C?(v.preventDefault(),n&&lo(b,{select:!0})):v.shiftKey&&_===b&&(v.preventDefault(),n&&lo(C,{select:!0})):_===y&&v.preventDefault()}},[n,r,g.paused]);return l.jsx(Ie.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});Gg.displayName=QG;function YG(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(lo(r,{select:e}),document.activeElement!==n)return}function XG(t){const e=C2(t),n=OS(e,t),r=OS(e.reverse(),t);return[n,r]}function C2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function OS(t,e){for(const n of t)if(!ZG(n,{upTo:e}))return n}function ZG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JG(t){return t instanceof HTMLInputElement&&"select"in t}function lo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&JG(t)&&e&&t.select()}}var LS=eK();function eK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=VS(t,e),t.unshift(e)},remove(e){var n;t=VS(t,e),(n=t[0])==null||n.resume()}}}function VS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function tK(t){return t.filter(e=>e.tagName!=="A")}var by=0;function bE(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??FS()),document.body.insertAdjacentElement("beforeend",t[1]??FS()),by++,()=>{by===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),by--}},[])}function FS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var mm="right-scroll-bar-position",pm="width-before-scroll-bar",nK="with-scroll-bars-hidden",rK="--removed-body-scroll-bar-size";function Ty(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function sK(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var iK=typeof window<"u"?m.useLayoutEffect:m.useEffect,US=new WeakMap;function oK(t,e){var n=sK(null,function(r){return t.forEach(function(s){return Ty(s,r)})});return iK(function(){var r=US.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Ty(a,null)}),i.forEach(function(a){s.has(a)||Ty(a,o)})}US.set(n,t)},[t]),n}function aK(t){return t}function lK(t,e){e===void 0&&(e=aK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function cK(t){t===void 0&&(t={});var e=lK(null);return e.options=Fs({async:!0,ssr:!1},t),e}var I2=function(t){var e=t.sideCar,n=Ch(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Fs({},n))};I2.isSideCarExport=!0;function uK(t,e){return t.useMedium(e),I2}var R2=cK(),ky=function(){},Kg=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:ky,onWheelCapture:ky,onTouchMoveCapture:ky}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,x=t.inert,v=t.allowPinchZoom,T=t.as,_=T===void 0?"div":T,y=t.gapMode,b=Ch(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,P=oK([n,e]),L=Fs(Fs({},b),s);return m.createElement(m.Fragment,null,h&&m.createElement(C,{sideCar:R2,removeScrollBar:u,shards:f,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:y}),o?m.cloneElement(m.Children.only(a),Fs(Fs({},L),{ref:P})):m.createElement(_,Fs({},L,{className:c,ref:P}),a))});Kg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kg.classNames={fullWidth:pm,zeroRight:mm};var dK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=dK();return e&&t.setAttribute("nonce",e),t}function fK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function mK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var pK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=hK())&&(fK(e,n),mK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},gK=function(){var t=pK();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},A2=function(){var t=gK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},vK={left:0,top:0,right:0,gap:0},Sy=function(t){return parseInt(t||"",10)||0},yK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Sy(n),Sy(r),Sy(s)]},wK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vK;var e=yK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},xK=A2(),wc="data-scroll-locked",_K=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(nK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(wc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(pm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(mm," .").concat(mm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(pm," .").concat(pm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wc,`] {
    `).concat(rK,": ").concat(a,`px;
  }
`)},$S=function(){var t=parseInt(document.body.getAttribute(wc)||"0",10);return isFinite(t)?t:0},EK=function(){m.useEffect(function(){return document.body.setAttribute(wc,($S()+1).toString()),function(){var t=$S()-1;t<=0?document.body.removeAttribute(wc):document.body.setAttribute(wc,t.toString())}},[])},bK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;EK();var i=m.useMemo(function(){return wK(s)},[s]);return m.createElement(xK,{styles:_K(i,!e,s,n?"":"!important")})},Ax=!1;if(typeof window<"u")try{var Of=Object.defineProperty({},"passive",{get:function(){return Ax=!0,!0}});window.addEventListener("test",Of,Of),window.removeEventListener("test",Of,Of)}catch{Ax=!1}var Ol=Ax?{passive:!1}:!1,TK=function(t){return t.tagName==="TEXTAREA"},P2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!TK(t)&&n[e]==="visible")},kK=function(t){return P2(t,"overflowY")},SK=function(t){return P2(t,"overflowX")},BS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=j2(t,r);if(s){var i=D2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},j2=function(t,e){return t==="v"?kK(e):SK(e)},D2=function(t,e){return t==="v"?NK(e):CK(e)},IK=function(t,e){return t==="h"&&e==="rtl"?-1:1},RK=function(t,e,n,r,s){var i=IK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,h=o>0,f=0,p=0;do{var g=D2(t,a),x=g[0],v=g[1],T=g[2],_=v-T-i*x;(x||_)&&j2(t,a)&&(f+=_,p+=x),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(u=!0),u},Lf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zS=function(t){return[t.deltaX,t.deltaY]},WS=function(t){return t&&"current"in t?t.current:t},AK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jK=0,Ll=[];function DK(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(jK++)[0],i=m.useState(A2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=YB([t.lockRef.current],(t.shards||[]).map(WS),!0).filter(Boolean);return v.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(v,T){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var _=Lf(v),y=n.current,b="deltaX"in v?v.deltaX:y[0]-_[0],C="deltaY"in v?v.deltaY:y[1]-_[1],P,L=v.target,N=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in v&&N==="h"&&L.type==="range")return!1;var E=BS(N,L);if(!E)return!0;if(E?P=N:(P=N==="v"?"h":"v",E=BS(N,L)),!E)return!1;if(!r.current&&"changedTouches"in v&&(b||C)&&(r.current=P),!P)return!0;var S=r.current||P;return RK(S,T,v,S==="h"?b:C)},[]),c=m.useCallback(function(v){var T=v;if(!(!Ll.length||Ll[Ll.length-1]!==i)){var _="deltaY"in T?zS(T):Lf(T),y=e.current.filter(function(P){return P.name===T.type&&(P.target===T.target||T.target===P.shadowParent)&&AK(P.delta,_)})[0];if(y&&y.should){T.cancelable&&T.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(WS).filter(Boolean).filter(function(P){return P.contains(T.target)}),C=b.length>0?a(T,b[0]):!o.current.noIsolation;C&&T.cancelable&&T.preventDefault()}}},[]),u=m.useCallback(function(v,T,_,y){var b={name:v,delta:T,target:_,should:y,shadowParent:MK(_)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),h=m.useCallback(function(v){n.current=Lf(v),r.current=void 0},[]),f=m.useCallback(function(v){u(v.type,zS(v),v.target,a(v,t.lockRef.current))},[]),p=m.useCallback(function(v){u(v.type,Lf(v),v.target,a(v,t.lockRef.current))},[]);m.useEffect(function(){return Ll.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Ol),document.addEventListener("touchmove",c,Ol),document.addEventListener("touchstart",h,Ol),function(){Ll=Ll.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Ol),document.removeEventListener("touchmove",c,Ol),document.removeEventListener("touchstart",h,Ol)}},[]);var g=t.removeScrollBar,x=t.inert;return m.createElement(m.Fragment,null,x?m.createElement(i,{styles:PK(s)}):null,g?m.createElement(bK,{gapMode:t.gapMode}):null)}function MK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const OK=uK(R2,DK);var Qg=m.forwardRef(function(t,e){return m.createElement(Kg,Fs({},t,{ref:e,sideCar:OK}))});Qg.classNames=Kg.classNames;var LK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Vl=new WeakMap,Vf=new WeakMap,Ff={},Ny=0,M2=function(t){return t&&(t.host||M2(t.parentNode))},VK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=M2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FK=function(t,e,n,r){var s=VK(e,Array.isArray(t)?t:[t]);Ff[n]||(Ff[n]=new WeakMap);var i=Ff[n],o=[],a=new Set,c=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))h(p);else try{var g=p.getAttribute(r),x=g!==null&&g!=="false",v=(Vl.get(p)||0)+1,T=(i.get(p)||0)+1;Vl.set(p,v),i.set(p,T),o.push(p),v===1&&x&&Vf.set(p,!0),T===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),a.clear(),Ny++,function(){o.forEach(function(f){var p=Vl.get(f)-1,g=i.get(f)-1;Vl.set(f,p),i.set(f,g),p||(Vf.has(f)||f.removeAttribute(r),Vf.delete(f)),g||f.removeAttribute(n)}),Ny--,Ny||(Vl=new WeakMap,Vl=new WeakMap,Vf=new WeakMap,Ff={})}},TE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=LK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),FK(r,s,n,"aria-hidden")):function(){return null}},kE="Dialog",[O2,L2]=or(kE),[UK,Is]=O2(kE),V2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),c=m.useRef(null),[u=!1,h]=ei({prop:r,defaultProp:s,onChange:i});return l.jsx(UK,{scope:e,triggerRef:a,contentRef:c,contentId:_s(),titleId:_s(),descriptionId:_s(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};V2.displayName=kE;var F2="DialogTrigger",U2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(F2,n),i=it(e,s.triggerRef);return l.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":CE(s.open),...r,ref:i,onClick:fe(t.onClick,s.onOpenToggle)})});U2.displayName=F2;var SE="DialogPortal",[$K,$2]=O2(SE,{forceMount:void 0}),B2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Is(SE,e);return l.jsx($K,{scope:e,forceMount:n,children:m.Children.map(r,o=>l.jsx($r,{present:n||i.open,children:l.jsx(Eh,{asChild:!0,container:s,children:o})}))})};B2.displayName=SE;var Mp="DialogOverlay",z2=m.forwardRef((t,e)=>{const n=$2(Mp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Is(Mp,t.__scopeDialog);return i.modal?l.jsx($r,{present:r||i.open,children:l.jsx(BK,{...s,ref:e})}):null});z2.displayName=Mp;var BK=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(Mp,n);return l.jsx(Qg,{as:Vi,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(Ie.div,{"data-state":CE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),cl="DialogContent",W2=m.forwardRef((t,e)=>{const n=$2(cl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Is(cl,t.__scopeDialog);return l.jsx($r,{present:r||i.open,children:i.modal?l.jsx(zK,{...s,ref:e}):l.jsx(WK,{...s,ref:e})})});W2.displayName=cl;var zK=m.forwardRef((t,e)=>{const n=Is(cl,t.__scopeDialog),r=m.useRef(null),s=it(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return TE(i)},[]),l.jsx(H2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:fe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:fe(t.onFocusOutside,i=>i.preventDefault())})}),WK=m.forwardRef((t,e)=>{const n=Is(cl,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return l.jsx(H2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),H2=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Is(cl,n),c=m.useRef(null),u=it(e,c);return bE(),l.jsxs(l.Fragment,{children:[l.jsx(Gg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(cu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":CE(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(qK,{titleId:a.titleId}),l.jsx(KK,{contentRef:c,descriptionId:a.descriptionId})]})]})}),NE="DialogTitle",q2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(NE,n);return l.jsx(Ie.h2,{id:s.titleId,...r,ref:e})});q2.displayName=NE;var G2="DialogDescription",K2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(G2,n);return l.jsx(Ie.p,{id:s.descriptionId,...r,ref:e})});K2.displayName=G2;var Q2="DialogClose",Y2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(Q2,n);return l.jsx(Ie.button,{type:"button",...r,ref:e,onClick:fe(t.onClick,()=>s.onOpenChange(!1))})});Y2.displayName=Q2;function CE(t){return t?"open":"closed"}var X2="DialogTitleWarning",[HK,Z2]=yU(X2,{contentName:cl,titleName:NE,docsSlug:"dialog"}),qK=({titleId:t})=>{const e=Z2(X2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},GK="DialogDescriptionWarning",KK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Z2(GK).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},J2=V2,eD=U2,tD=B2,IE=z2,RE=W2,AE=q2,PE=K2,Yg=Y2;const ai=J2,Px=eD,QK=tD,HS=Yg,nD=m.forwardRef(({className:t,...e},n)=>l.jsx(IE,{ref:n,className:le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));nD.displayName=IE.displayName;const Ns=m.forwardRef(({className:t,children:e,...n},r)=>{const s=i=>{n.onKeyDown&&n.onKeyDown(i)};return l.jsxs(QK,{children:[l.jsx(nD,{}),l.jsxs(RE,{ref:r,onKeyDown:s,className:le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),"aria-modal":"true",role:"dialog","aria-describedby":n["aria-describedby"]||"dialog-description",...n,children:[e,l.jsxs(Yg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","aria-label":"Закрыть диалог",children:[l.jsx(ti,{className:"h-4 w-4","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Закрыть"})]})]})]})});Ns.displayName=RE.displayName;const sa=({className:t,...e})=>l.jsx("div",{className:le("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});sa.displayName="DialogHeader";const ru=({className:t,...e})=>l.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ru.displayName="DialogFooter";const ia=m.forwardRef(({className:t,...e},n)=>l.jsx(AE,{ref:n,className:le("text-lg font-semibold leading-none tracking-tight",t),id:"dialog-title",...e}));ia.displayName=AE.displayName;const Op=m.forwardRef(({className:t,...e},n)=>l.jsx(PE,{ref:n,className:le("text-sm text-muted-foreground",t),id:"dialog-description",...e}));Op.displayName=PE.displayName;function jE(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var DE="Checkbox",[YK,qee]=or(DE),[XK,ZK]=YK(DE),rD=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),x=it(e,C=>g(C)),v=m.useRef(!1),T=p?h||!!p.closest("form"):!0,[_=!1,y]=ei({prop:s,defaultProp:i,onChange:u}),b=m.useRef(_);return m.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const P=()=>y(b.current);return C.addEventListener("reset",P),()=>C.removeEventListener("reset",P)}},[p,y]),l.jsxs(XK,{scope:n,state:_,disabled:a,children:[l.jsx(Ie.button,{type:"button",role:"checkbox","aria-checked":Wo(_)?"mixed":_,"aria-required":o,"data-state":oD(_),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:x,onKeyDown:fe(t.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:fe(t.onClick,C=>{y(P=>Wo(P)?!0:!P),T&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),T&&l.jsx(JK,{control:p,bubbles:!v.current,name:r,value:c,checked:_,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"},defaultChecked:Wo(i)?!1:i})]})});rD.displayName=DE;var sD="CheckboxIndicator",iD=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=ZK(sD,n);return l.jsx($r,{present:r||Wo(i.state)||i.state===!0,children:l.jsx(Ie.span,{"data-state":oD(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});iD.displayName=sD;var JK=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=m.useRef(null),a=jE(n),c=oE(e);m.useEffect(()=>{const h=o.current,f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&g){const x=new Event("click",{bubbles:r});h.indeterminate=Wo(n),g.call(h,Wo(n)?!1:n),h.dispatchEvent(x)}},[a,n,r]);const u=m.useRef(Wo(n)?!1:n);return l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...i,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wo(t){return t==="indeterminate"}function oD(t){return Wo(t)?"indeterminate":t?"checked":"unchecked"}var aD=rD,eQ=iD;const gm=m.forwardRef(({className:t,...e},n)=>l.jsx(aD,{ref:n,className:le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:l.jsx(eQ,{className:le("flex items-center justify-center text-current"),children:l.jsx(kh,{className:"h-4 w-4"})})}));gm.displayName=aD.displayName;const tQ=Th("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Er=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx("div",{ref:r,role:"alert",className:le(tQ({variant:e}),t),...n}));Er.displayName="Alert";const dh=m.forwardRef(({className:t,...e},n)=>l.jsx("h5",{ref:n,className:le("mb-1 font-medium leading-none tracking-tight",t),...e}));dh.displayName="AlertTitle";const br=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:le("text-sm [&_p]:leading-relaxed",t),...e}));br.displayName="AlertDescription";const nQ=({onSubmit:t})=>{const[e,n]=m.useState(!1),r=EE({username:Ma().min(3,Se.form.username.minLength).max(50,Se.form.username.maxLength),email:Ma().email(Se.form.email.invalid),password:Ma().min(6,Se.form.password.minLength).max(50,"Пароль не должен превышать 50 символов").regex(/[A-Z]/,"Пароль должен содержать хотя бы одну заглавную букву").regex(/[0-9]/,"Пароль должен содержать хотя бы одну цифру"),confirmPassword:Ma().min(6,Se.form.confirmPassword.minLength).max(50,"Пароль не должен превышать 50 символов").regex(/[A-Z]/,"Пароль должен содержать хотя бы одну заглавную букву").regex(/[0-9]/,"Пароль должен содержать хотя бы одну цифру"),acceptTerms:xy().refine(a=>a===!0,{message:Se.form.acceptTerms.required}),acceptRules:xy().refine(a=>a===!0,{message:"Необходимо принять правила сайта"}),isAdult:xy().refine(a=>a===!0,{message:"Вам должно быть не менее 18 лет"})}).refine(a=>a.password===a.confirmPassword,{message:Se.form.confirmPassword.mismatch,path:["confirmPassword"]}),s=Nl({resolver:xE(r),defaultValues:{username:"",email:"",password:"",confirmPassword:"",acceptTerms:!1,acceptRules:!1,isAdult:!1},mode:"onChange"}),i=s.formState.isValid,o=async a=>{n(!0);try{await t(a)}finally{n(!1)}};return l.jsx(Uh,{...s,children:l.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[l.jsx(Zn,{control:s.control,name:"username",render:({field:a})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Имя пользователя"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(rs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...a,type:"text",className:"pl-9",placeholder:"Введите имя пользователя"})]})}),l.jsx($n,{className:"text-sm"})]})}),l.jsx(Zn,{control:s.control,name:"email",render:({field:a})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Email"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx($c,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...a,type:"email",className:"pl-9",placeholder:"Введите email"})]})}),l.jsx($n,{})]})}),l.jsx(Zn,{control:s.control,name:"password",render:({field:a})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...a,type:"password",className:"pl-9",placeholder:"Введите пароль"})]})}),l.jsx($n,{})]})}),l.jsx(Zn,{control:s.control,name:"confirmPassword",render:({field:a})=>l.jsxs(Vn,{children:[l.jsx(Fn,{children:"Подтвердите пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...a,type:"password",className:"pl-9",placeholder:"Подтвердите пароль"})]})}),l.jsx($n,{})]})}),l.jsx(Zn,{control:s.control,name:"acceptTerms",render:({field:a})=>l.jsxs(Vn,{className:"flex flex-row items-start space-x-3 space-y-0 pt-2",children:[l.jsx(Un,{children:l.jsx(gm,{checked:a.value,onCheckedChange:a.onChange})}),l.jsxs("div",{className:"space-y-1 leading-none",children:[l.jsxs(Fn,{className:"text-sm font-normal",children:["Я принимаю"," ",l.jsxs(ai,{children:[l.jsx(Px,{asChild:!0,children:l.jsx("span",{className:"text-primary cursor-pointer hover:underline",children:"лицензионное соглашение"})}),l.jsxs(Ns,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[l.jsx(sa,{children:l.jsx(ia,{children:"Лицензионное соглашение"})}),l.jsxs("div",{className:"space-y-4 text-sm py-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"ЛИЦЕНЗИОННОЕ СОГЛАШЕНИЕ ПОЛЬЗОВАТЕЛЯ"}),l.jsx("p",{children:"Настоящее Лицензионное соглашение (далее — Соглашение) является юридически обязательным договором между вами (физическим или юридическим лицом) и владельцем данного сервиса."}),l.jsx(Er,{children:l.jsx(br,{children:"Внимательно прочитайте условия настоящего Соглашения перед регистрацией. Регистрируясь, вы подтверждаете свое согласие с условиями данного Соглашения."})}),l.jsx("h4",{className:"font-medium",children:"1. ПРЕДМЕТ СОГЛАШЕНИЯ"}),l.jsx("p",{children:"1.1 Предметом настоящего Соглашения является право использования сервиса, предоставляемое владельцем сервиса на условиях простой (неисключительной) лицензии."}),l.jsx("p",{children:"1.2 Все положения настоящего Соглашения распространяются на сервис в целом, а также на его отдельные компоненты."}),l.jsx("h4",{className:"font-medium",children:"2. АВТОРСКИЕ ПРАВА"}),l.jsx("p",{children:"2.1 Сервис и все его компоненты являются объектами авторского права. Все права на сервис и его компоненты защищены законом."}),l.jsx("p",{children:"2.2 Вы не имеете права копировать, модифицировать, распространять или иным образом использовать сервис, кроме случаев, прямо предусмотренных настоящим Соглашением."}),l.jsx("h4",{className:"font-medium",children:"3. ПРАВИЛА ИСПОЛЬЗОВАНИЯ"}),l.jsx("p",{children:"3.1 Вы обязуетесь не использовать сервис для:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[l.jsx("li",{children:"нарушения прав третьих лиц;"}),l.jsx("li",{children:"распространения материалов, нарушающих законодательство;"}),l.jsx("li",{children:"размещения вредоносного ПО;"}),l.jsx("li",{children:"совершения действий, которые могут нарушить нормальную работу сервиса."})]}),l.jsx("h4",{className:"font-medium",children:"4. ОТВЕТСТВЕННОСТЬ"}),l.jsx("p",{children:"4.1 В случае нарушения условий настоящего Соглашения, администрация сервиса имеет право приостановить или прекратить ваш доступ к сервису."}),l.jsx("p",{children:"4.2 Сервис предоставляется «как есть», без каких-либо гарантий."}),l.jsx("h4",{className:"font-medium",children:"5. ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ"}),l.jsx("p",{children:"5.1 Настоящее Соглашение вступает в силу с момента вашей регистрации на сервисе."}),l.jsx("p",{children:"5.2 Администрация сервиса оставляет за собой право изменять условия настоящего Соглашения в одностороннем порядке."})]}),l.jsx(HS,{asChild:!0,children:l.jsx(de,{variant:"outline",className:"w-full",children:"Закрыть"})})]})]})]}),l.jsx($n,{})]})]})}),l.jsx(Zn,{control:s.control,name:"acceptRules",render:({field:a})=>l.jsxs(Vn,{className:"flex flex-row items-start space-x-3 space-y-0 pt-2",children:[l.jsx(Un,{children:l.jsx(gm,{checked:a.value,onCheckedChange:a.onChange})}),l.jsxs("div",{className:"space-y-1 leading-none",children:[l.jsxs(Fn,{className:"text-sm font-normal",children:["Я принимаю"," ",l.jsxs(ai,{children:[l.jsx(Px,{asChild:!0,children:l.jsx("span",{className:"text-primary cursor-pointer hover:underline",children:"правила сайта"})}),l.jsxs(Ns,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[l.jsx(sa,{children:l.jsx(ia,{children:"Правила сайта"})}),l.jsxs("div",{className:"space-y-4 text-sm py-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"ПРАВИЛА ПОЛЬЗОВАНИЯ САЙТОМ"}),l.jsx("p",{children:"Настоящие Правила определяют условия использования сервиса SoundFeedback."}),l.jsx(Er,{children:l.jsx(br,{children:"Пожалуйста, внимательно ознакомьтесь с правилами перед использованием сайта. Регистрация на сайте означает ваше согласие с этими правилами."})}),l.jsx("h4",{className:"font-medium",children:"1. ОБЩИЕ ПОЛОЖЕНИЯ"}),l.jsx("p",{children:"1.1 SoundFeedback — это сервис для публикации и обсуждения рецензий на музыкальные релизы."}),l.jsx("p",{children:"1.2 Администрация оставляет за собой право изменять настоящие правила без предварительного уведомления."}),l.jsx("h4",{className:"font-medium",children:"2. ПРАВИЛА ПОВЕДЕНИЯ"}),l.jsx("p",{children:"2.1 Пользователи обязуются:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[l.jsx("li",{children:"Соблюдать культуру общения, уважать мнение других пользователей"}),l.jsx("li",{children:"Не использовать нецензурную лексику"}),l.jsx("li",{children:"Не размещать оскорбительный, дискриминационный или пропагандистский контент"}),l.jsx("li",{children:"Не размещать спам, рекламу, не относящуюся к музыке"}),l.jsx("li",{children:"Не размещать материалы, нарушающие авторские права"})]}),l.jsx("h4",{className:"font-medium",children:"3. РЕЦЕНЗИИ И КОММЕНТАРИИ"}),l.jsx("p",{children:"3.1 Рецензии должны содержать развернутое мнение о релизе."}),l.jsx("p",{children:"3.2 Плагиат и копирование чужих рецензий запрещены."}),l.jsx("p",{children:"3.3 Администрация оставляет за собой право модерировать и отклонять рецензии, нарушающие правила."}),l.jsx("h4",{className:"font-medium",children:"4. ОТВЕТСТВЕННОСТЬ"}),l.jsx("p",{children:"4.1 Пользователи несут полную ответственность за публикуемый контент."}),l.jsx("p",{children:"4.2 За нарушение правил администрация может применить предупреждение, временный или постоянный бан."}),l.jsx("h4",{className:"font-medium",children:"5. КОНФИДЕНЦИАЛЬНОСТЬ"}),l.jsx("p",{children:"5.1 Пользователи обязуются не распространять персональные данные других участников."}),l.jsx("p",{children:"5.2 Администрация гарантирует защиту персональных данных в соответствии с политикой конфиденциальности."})]}),l.jsx(HS,{asChild:!0,children:l.jsx(de,{variant:"outline",className:"w-full",children:"Закрыть"})})]})]})]}),l.jsx($n,{})]})]})}),l.jsx(Zn,{control:s.control,name:"isAdult",render:({field:a})=>l.jsxs(Vn,{className:"flex flex-row items-start space-x-3 space-y-0 pt-2",children:[l.jsx(Un,{children:l.jsx(gm,{checked:a.value,onCheckedChange:a.onChange})}),l.jsxs("div",{className:"space-y-1 leading-none",children:[l.jsx(Fn,{className:"text-sm font-normal",children:"Я подтверждаю, что мне исполнилось 18 лет"}),l.jsx($n,{})]})]})}),l.jsx(de,{type:"submit",className:"w-full",disabled:!i||e,children:e?l.jsxs(l.Fragment,{children:[l.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Регистрация..."]}):"Зарегистрироваться"}),l.jsx("div",{className:"text-sm text-center",children:l.jsx(kt,{to:"/login",className:"text-primary hover:underline",children:"Уже есть аккаунт? Войти"})})]})})},rQ=()=>{const{toast:t}=jt(),e=kr(),{register:n}=Ot(),r=async s=>{if(s.password!==s.confirmPassword){t({title:"Ошибка",description:Se.notifications.error.passwordMismatch,variant:"destructive"});return}try{await n({username:s.username,email:s.email,password:s.password}),t({title:"Ссылка для подтверждения отправлена",description:Se.notifications.success.emailSent}),e("/verify-email")}catch{e("/register")}};return m.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("oobCode");i&&SA(Ze,i).then(async()=>{Ze.currentUser&&(await Ze.currentUser.reload(),t({title:"Email подтвержден",description:"Вы будете перенаправлены..."}),e("/profile"))}).catch(o=>{t({title:"Ошибка",description:o.message,variant:"destructive"})})},[e,t]),l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs(mt,{children:[l.jsx(en,{children:l.jsxs(tn,{className:"flex items-center gap-2",children:[l.jsx(rs,{className:"h-6 w-6"}),"Регистрация"]})}),l.jsx(vt,{children:l.jsx(nQ,{onSubmit:r})})]})})},ul=m.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ul.displayName="Textarea";const sQ=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),{toast:s}=jt();xt();const i=o=>{o.preventDefault(),console.log("Feedback submitted:",{email:n,feedback:t}),s({title:"Успех",description:"Ваш отзыв успешно отправлен. Спасибо за обратную связь!"}),e(""),r("")};return l.jsxs("div",{className:"home-container",children:[l.jsx("section",{className:"image-section",children:l.jsx("img",{src:"/public/1.jpg",alt:"Музыкальная атмосфера",className:"full-width-image"})}),l.jsxs("section",{className:"hero-section",children:[l.jsx("h1",{className:"hero-title",children:"Приветствуем вас на входе в подвал"}),l.jsx("p",{className:"hero-description",children:"Делитесь своими мыслями о любимых релизах и открывайте новые жемчужины через рецензии нашего сообщества."}),l.jsxs("div",{className:"button-group",children:[l.jsx(de,{asChild:!0,children:l.jsx(kt,{to:"/reviews",children:"Смотреть рецензии пользователей"})}),l.jsx(de,{asChild:!0,children:l.jsx(kt,{to:"/admin-reviews",children:"Смотреть рецензии редакции"})})]})]}),l.jsx("section",{className:"image-section",children:l.jsx("img",{src:"/public/2.jpg",alt:"Музыкальная атмосфера",className:"full-width-image"})}),l.jsxs("div",{className:"features-grid",children:[l.jsxs("article",{className:"feature-card",children:[l.jsx("h2",{className:"feature-title",children:"Для любителей музыки"}),l.jsxs("ul",{className:"feature-list",children:[l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Делитесь подробными рецензиями на альбомы и синглы"]}),l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Оценивайте релизы и помогайте другим находить отличную музыку"]}),l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Общайтесь с другими ценителями музыки"]})]})]}),l.jsxs("article",{className:"feature-card",children:[l.jsx("h2",{className:"feature-title",children:"Для критиков"}),l.jsxs("ul",{className:"feature-list",children:[l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Пишите глубокий анализ релизов"]}),l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Создавайте свою репутацию в сообществе"]}),l.jsxs("li",{className:"feature-item",children:[l.jsx("span",{className:"feature-check",children:"✓"}),"Делитесь своим опытом с другими"]})]})]})]}),l.jsx("section",{className:"image-section",children:l.jsx("img",{src:"/public/3.jpg",alt:"Музыкальная атмосфера",className:"full-width-image"})}),l.jsxs("section",{className:"hero-section",children:[l.jsx("h1",{className:"hero-title",children:"Присоединяйтесь к нашему сообществу"}),l.jsx("p",{className:"hero-description",children:"Начните делиться своим мнением о музыке уже сегодня и станьте частью нашего растущего сообщества меломанов."}),l.jsx("div",{className:"button-group",children:l.jsx(de,{asChild:!0,children:l.jsx(kt,{to:"/register",children:"Создать аккаунт"})})})]}),l.jsxs("section",{className:"feedback-section",children:[l.jsx("h2",{className:"section-title",children:"Обратная связь"}),l.jsx("p",{className:"section-description",children:"Помогите нам стать лучше! Оставьте свой отзыв или предложение."}),l.jsx("form",{onSubmit:i,className:"feedback-form",children:l.jsxs("div",{className:"form-group",children:[l.jsx(yt,{type:"email",placeholder:"Ваш email",value:n,onChange:o=>r(o.target.value),required:!0,className:"mb-4"}),l.jsx(ul,{placeholder:"Ваш отзыв или предложение...",value:t,onChange:o=>e(o.target.value),required:!0,className:"min-h-[120px] mb-4"}),l.jsx(de,{type:"submit",children:"Отправить"})]})})]})]})};var iQ=m.createContext(void 0);function $h(t){const e=m.useContext(iQ);return t||e||"ltr"}var Cy="rovingFocusGroup.onEntryFocus",oQ={bubbles:!1,cancelable:!0},Xg="RovingFocusGroup",[jx,lD,aQ]=ig(Xg),[lQ,xu]=or(Xg,[aQ]),[cQ,uQ]=lQ(Xg),cD=m.forwardRef((t,e)=>l.jsx(jx.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(jx.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(dQ,{...t,ref:e})})}));cD.displayName=Xg;var dQ=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=it(e,p),x=$h(i),[v=null,T]=ei({prop:o,defaultProp:a,onChange:c}),[_,y]=m.useState(!1),b=Nn(u),C=lD(n),P=m.useRef(!1),[L,N]=m.useState(0);return m.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(Cy,b),()=>E.removeEventListener(Cy,b)},[b]),l.jsx(cQ,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(E=>T(E),[T]),onItemShiftTab:m.useCallback(()=>y(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>N(E=>E-1),[]),children:l.jsx(Ie.div,{tabIndex:_||L===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:fe(t.onMouseDown,()=>{P.current=!0}),onFocus:fe(t.onFocus,E=>{const S=!P.current;if(E.target===E.currentTarget&&S&&!_){const R=new CustomEvent(Cy,oQ);if(E.currentTarget.dispatchEvent(R),!R.defaultPrevented){const M=C().filter(F=>F.focusable),A=M.find(F=>F.active),I=M.find(F=>F.id===v),Y=[A,I,...M].filter(Boolean).map(F=>F.ref.current);hD(Y,h)}}P.current=!1}),onBlur:fe(t.onBlur,()=>y(!1))})})}),uD="RovingFocusGroupItem",dD=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=_s(),c=i||a,u=uQ(uD,n),h=u.currentTabStopId===c,f=lD(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),l.jsx(jx.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:l.jsx(Ie.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:fe(t.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:fe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:fe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=mQ(x,u.orientation,u.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=f().filter(y=>y.focusable).map(y=>y.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const y=_.indexOf(x.currentTarget);_=u.loop?pQ(_,y+1):_.slice(y+1)}setTimeout(()=>hD(_))}})})})});dD.displayName=uD;var hQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fQ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function mQ(t,e,n){const r=fQ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hQ[r]}function hD(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function pQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var ME=cD,OE=dD,LE="Tabs",[gQ,Gee]=or(LE,[xu]),fD=xu(),[vQ,VE]=gQ(LE),mD=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=t,h=$h(a),[f,p]=ei({prop:r,onChange:s,defaultProp:i});return l.jsx(vQ,{scope:n,baseId:_s(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:l.jsx(Ie.div,{dir:h,"data-orientation":o,...u,ref:e})})});mD.displayName=LE;var pD="TabsList",gD=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=VE(pD,n),o=fD(n);return l.jsx(ME,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(Ie.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});gD.displayName=pD;var vD="TabsTrigger",yD=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=VE(vD,n),a=fD(n),c=_D(o.baseId,r),u=ED(o.baseId,r),h=r===o.value;return l.jsx(OE,{asChild:!0,...a,focusable:!s,active:h,children:l.jsx(Ie.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:fe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:fe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:fe(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});yD.displayName=vD;var wD="TabsContent",xD=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=VE(wD,n),c=_D(a.baseId,r),u=ED(a.baseId,r),h=r===a.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),l.jsx($r,{present:s||h,children:({present:p})=>l.jsx(Ie.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});xD.displayName=wD;function _D(t,e){return`${t}-trigger-${e}`}function ED(t,e){return`${t}-content-${e}`}var yQ=mD,bD=gD,TD=yD,kD=xD;const SD=yQ,FE=m.forwardRef(({className:t,...e},n)=>l.jsx(bD,{ref:n,className:le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));FE.displayName=bD.displayName;const _i=m.forwardRef(({className:t,...e},n)=>l.jsx(TD,{ref:n,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));_i.displayName=TD.displayName;const Ei=m.forwardRef(({className:t,...e},n)=>l.jsx(kD,{ref:n,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ei.displayName=kD.displayName;const wQ=Th("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ha({className:t,variant:e,...n}){return l.jsx("div",{className:le(wQ({variant:e}),t),...n})}const xQ=({onSuccess:t})=>{const[e,n]=m.useState(!1),{user:r,refreshUserData:s}=Ot(),{toast:i}=jt(),o=xt(),a=Nl({defaultValues:{newUsername:"",password:""},mode:"onChange"}),c=/^[a-zA-Zа-яА-Я0-9_-]+$/,u=async h=>{if(!r||!Ze.currentUser){i({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}n(!0);try{await Z0(Ze.currentUser,h.password),await hH(Ze.currentUser,h.newUsername),await s(),i({title:"Успех",description:"Имя пользователя успешно изменено"}),a.reset(),t&&t()}catch(f){f.code==="auth/invalid-credential"?i({title:"Ошибка",description:Se.notifications.error.firebase.auth.wrongPassword,variant:"destructive"}):i({title:"Ошибка",description:f.message||"Не удалось изменить имя пользователя",variant:"destructive"})}finally{n(!1)}};return l.jsxs("div",{children:[o&&l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Текущее имя пользователя"}),l.jsx("div",{className:"flex items-center",children:l.jsxs(Ha,{variant:"outline",className:"text-xs py-1 px-2",children:[l.jsx(rs,{className:"h-3 w-3 mr-1"}),(r==null?void 0:r.displayName)||"Не задано"]})})]})}),l.jsx(Uh,{...a,children:l.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-3",children:[l.jsx(Zn,{control:a.control,name:"newUsername",rules:{required:"Имя пользователя обязательно",minLength:{value:3,message:"Мин. 3 символа"},maxLength:{value:20,message:"Макс. 20 символов"},pattern:{value:c,message:"Только буквы, цифры, _ и -"}},render:({field:h})=>l.jsxs(Vn,{children:[l.jsx(Fn,{className:o?"text-xs":"",children:"Новое имя пользователя"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(rs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...h,className:"pl-9",placeholder:"Введите новое имя",size:o?18:void 0})]})}),l.jsx($n,{className:o?"text-xs":""})]})}),l.jsx(Zn,{control:a.control,name:"password",rules:{required:"Пароль обязателен",minLength:{value:6,message:"Мин. 6 символов"}},render:({field:h})=>l.jsxs(Vn,{children:[l.jsx(Fn,{className:o?"text-xs":"",children:"Текущий пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{...h,type:"password",className:"pl-9",placeholder:"Введите пароль",size:o?18:void 0})]})}),l.jsx($n,{className:o?"text-xs":""})]})}),l.jsx(de,{type:"submit",className:"w-full",disabled:e||!a.formState.isValid,size:o?"sm":"default",children:e?"Изменение...":o?"Изменить имя":"Изменить имя пользователя"})]})})]})},_Q=()=>{const[t,e]=m.useState(!1),{user:n}=Ot(),{toast:r}=jt(),s=xt(),i=Nl({defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""},mode:"onChange"}),o=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/,a=async c=>{if(!n||!Ze.currentUser){r({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}if(c.newPassword!==c.confirmPassword){r({title:"Ошибка",description:"Пароли не совпадают",variant:"destructive"});return}e(!0);try{await Z0(Ze.currentUser,c.currentPassword),await fH(Ze.currentUser,c.newPassword),r({title:"Успешно",description:"Пароль успешно изменён"}),i.reset()}catch(u){r({title:"Ошибка",description:u.message||"Не удалось изменить пароль",variant:"destructive"})}finally{e(!1)}};return l.jsx(Uh,{...i,children:l.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-4",children:[l.jsx(Zn,{control:i.control,name:"currentPassword",rules:{required:"Текущий пароль обязателен",minLength:{value:6,message:"Пароль должен содержать минимум 6 символов"}},render:({field:c})=>l.jsxs(Vn,{className:s?"space-y-2":"space-y-3",children:[l.jsx(Fn,{className:s?"text-sm":"",children:"Текущий пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:`absolute left-3 ${s?"top-2.5":"top-3"} h-4 w-4 text-muted-foreground`}),l.jsx(yt,{...c,type:"password",className:`pl-9 ${s?"h-9 text-sm":""}`})]})}),l.jsx($n,{className:s?"text-xs":""})]})}),l.jsx(Zn,{control:i.control,name:"newPassword",rules:{required:"Новый пароль обязателен",pattern:{value:o,message:"Пароль должен содержать минимум 6 символов, хотя бы одну букву и одну цифру"}},render:({field:c})=>l.jsxs(Vn,{className:s?"space-y-2":"space-y-3",children:[l.jsx(Fn,{className:s?"text-sm":"",children:"Новый пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:`absolute left-3 ${s?"top-2.5":"top-3"} h-4 w-4 text-muted-foreground`}),l.jsx(yt,{...c,type:"password",className:`pl-9 ${s?"h-9 text-sm":""}`})]})}),l.jsx($n,{className:s?"text-xs":""})]})}),l.jsx(Zn,{control:i.control,name:"confirmPassword",rules:{required:"Подтверждение пароля обязательно",validate:c=>c===i.getValues("newPassword")||"Пароли не совпадают"},render:({field:c})=>l.jsxs(Vn,{className:s?"space-y-2":"space-y-3",children:[l.jsx(Fn,{className:s?"text-sm":"",children:"Подтвердите новый пароль"}),l.jsx(Un,{children:l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:`absolute left-3 ${s?"top-2.5":"top-3"} h-4 w-4 text-muted-foreground`}),l.jsx(yt,{...c,type:"password",className:`pl-9 ${s?"h-9 text-sm":""}`})]})}),l.jsx($n,{className:s?"text-xs":""})]})}),l.jsx(de,{type:"submit",className:"w-full",size:s?"sm":"default",disabled:t||!i.formState.isValid,children:t?"Изменение...":s?"Изменить":"Изменить пароль"})]})})};function Rr({className:t,...e}){return l.jsx("div",{className:le("animate-pulse rounded-md bg-muted",t),...e})}const UE=({className:t,...e})=>l.jsx("nav",{role:"navigation","aria-label":"pagination",className:le("mx-auto flex w-full justify-center",t),...e});UE.displayName="Pagination";const hh=m.forwardRef(({className:t,...e},n)=>l.jsx("ul",{ref:n,className:le("flex flex-row items-center gap-1",t),...e}));hh.displayName="PaginationContent";const qt=m.forwardRef(({className:t,...e},n)=>l.jsx("li",{ref:n,className:le("",t),...e}));qt.displayName="PaginationItem";const Jn=({className:t,isActive:e,size:n="icon",...r})=>l.jsx("a",{"aria-current":e?"page":void 0,className:le(Yr({variant:e?"outline":"ghost",size:n}),t),...r});Jn.displayName="PaginationLink";const Dx=({className:t,...e})=>l.jsxs("span",{"aria-hidden":!0,className:le("flex h-9 w-9 items-center justify-center",t),...e,children:[l.jsx(yR,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Больше страниц"})]});Dx.displayName="PaginationEllipsis";const Ii=({currentPage:t,totalPages:e,onPageChange:n,isPaginationLoading:r=!1})=>{const s=xt();return e<=1?null:l.jsx("div",{className:"mt-4",children:l.jsx(UE,{children:s?l.jsxs(hh,{className:"gap-1",children:[l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(Math.max(1,t-1)),className:le("px-2",t===1?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"sm"})),"aria-label":"Предыдущая страница",children:l.jsx(Uc,{className:"h-4 w-4"})})}),l.jsx(qt,{children:l.jsxs("span",{className:"text-sm p-2",children:[t," из ",e]})}),l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(Math.min(e,t+1)),className:le("px-2",t===e?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"sm"})),"aria-label":"Следующая страница",children:l.jsx(Xa,{className:"h-4 w-4"})})})]}):l.jsxs(hh,{className:"gap-3",children:[l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(Math.max(1,t-1)),className:le("px-3 py-2",t===1?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"default"})),"aria-label":"Предыдущая страница",children:l.jsx(Uc,{className:"h-5 w-5"})})}),(()=>{const i=[];i.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(1),isActive:t===1,className:le("px-3 py-2 font-semibold",t===1?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:"1"})},1)),t>2&&i.push(l.jsx(qt,{children:l.jsx(Dx,{className:"text-lg"})},"ellipsis-start"));for(let o=Math.max(2,t-1);o<=Math.min(e-1,t+1);o++)i.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(o),isActive:t===o,className:le("px-3 py-2 font-semibold",t===o?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:o})},o));return t<e-1&&i.push(l.jsx(qt,{children:l.jsx(Dx,{className:"text-lg"})},"ellipsis-end")),e>1&&i.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(e),isActive:t===e,className:le("px-3 py-2 font-semibold",t===e?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:e})},e)),i})(),l.jsx(qt,{children:l.jsx(Jn,{onClick:()=>n(Math.min(e,t+1)),className:le("px-3 py-2",t===e?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"default"})),"aria-label":"Следующая страница",children:l.jsx(Xa,{className:"h-5 w-5"})})})]})})})};var $E="Avatar",[EQ,Kee]=or($E),[bQ,ND]=EQ($E),CD=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return l.jsx(bQ,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:l.jsx(Ie.span,{...r,ref:e})})});CD.displayName=$E;var ID="AvatarImage",RD=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=ND(ID,n),a=TQ(r,i.referrerPolicy),c=Nn(u=>{s(u),o.onImageLoadingStatusChange(u)});return mn(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?l.jsx(Ie.img,{...i,ref:e,src:r}):null});RD.displayName=ID;var AD="AvatarFallback",PD=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=ND(AD,n),[o,a]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?l.jsx(Ie.span,{...s,ref:e}):null});PD.displayName=AD;function TQ(t,e){const[n,r]=m.useState("idle");return mn(()=>{if(!t){r("error");return}let s=!0;const i=new window.Image,o=a=>()=>{s&&r(a)};return r("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=t,e&&(i.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var jD=CD,DD=RD,MD=PD;const dl=m.forwardRef(({className:t,...e},n)=>l.jsx(jD,{ref:n,className:le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));dl.displayName=jD.displayName;const hl=m.forwardRef(({className:t,...e},n)=>l.jsx(DD,{ref:n,className:le("aspect-square h-full w-full",t),...e}));hl.displayName=DD.displayName;const fl=m.forwardRef(({className:t,...e},n)=>l.jsx(MD,{ref:n,className:le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));fl.displayName=MD.displayName;const _a=8,kQ=({onSuccess:t})=>{const[e,n]=m.useState(""),[r,s]=m.useState([]),[i,o]=m.useState([]),[a,c]=m.useState(!0),[u,h]=m.useState(!1),[f,p]=m.useState(0),[g,x]=m.useState(1),[v,T]=m.useState(!1),[_,y]=m.useState(null),[b,C]=m.useState(null),[P,L]=m.useState(!1),[N,E]=m.useState(null),[S,R]=m.useState(!1),[M,A]=m.useState(""),[I,U]=m.useState(""),[Y,F]=m.useState(""),[te,D]=m.useState(!1),{user:O}=Ot(),{toast:W}=jt(),Z=xt(),H=ee.useRef(null),Q=async(X=1,Ue=_a,Qe="")=>{try{const nt=(await wH()).filter(ce=>ce.uid!==(O==null?void 0:O.uid)),V=[...Qe?nt.filter(ce=>ce.username.toLowerCase().includes(Qe.toLowerCase())):nt].sort((ce,se)=>ce.role===ot.ADMIN&&se.role!==ot.ADMIN?-1:ce.role!==ot.ADMIN&&se.role===ot.ADMIN?1:0),B=V.length,q=(X-1)*Ue;return{users:V.slice(q,q+Ue),total:B}}catch(ze){throw console.error("Ошибка при получении пользователей:",ze),ze}},$=async(X,Ue)=>{try{X===g&&!a?h(!0):c(!0);const{users:Qe,total:ze}=await Q(X,_a,Ue),nt=Qe.map(Xe=>{const V=Xe.role,B=V==="ADMIN"?"Администратор":"Пользователь";return console.log(`Пользователь ${Xe.username}: роль в БД ${V}, отображаемая роль ${B}`),{id:Xe.uid,username:Xe.username,originalRole:V,role:B,isBanned:Xe.isBanned||!1,emailVerified:Xe.emailVerified||!1,avatarUrl:Xe.avatarUrl,email:Xe.email||""}});s(nt),o(nt),p(ze),T(!0)}catch{W({title:"Ошибка",description:"Не удалось загрузить список пользователей",variant:"destructive"})}finally{c(!1),h(!1)}};m.useEffect(()=>{$(1,""),T(!0)},[]),m.useEffect(()=>{v&&$(g,e)},[g]),m.useEffect(()=>{g!==1?x(1):v&&$(1,e)},[e,v]);const ie=X=>{const Ue=X.target.value;n(Ue),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{$(1,Ue)},300)},ge=(X,Ue)=>{const Qe=r.find(V=>V.id===X);if(!Qe){W({title:"Ошибка",description:"Пользователь не найден",variant:"destructive"});return}let ze=!1,nt="",Xe="";Ue==="admin"?(ze=Qe.role===ot.ADMIN,nt=ze?"Отозвать права администратора?":"Назначить администратором?",Xe=ze?`Вы уверены, что хотите отозвать права администратора у пользователя ${Qe.username}?`:`Вы уверены, что хотите назначить пользователя ${Qe.username} администратором?`):Ue==="ban"&&(ze=Qe.isBanned||!1,nt=ze?"Разблокировать пользователя?":"Заблокировать пользователя?",Xe=ze?`Вы уверены, что хотите разблокировать пользователя ${Qe.username}?`:`Вы уверены, что хотите заблокировать пользователя ${Qe.username}?`),E({userId:X,username:Qe.username||"",action:Ue,currentValue:ze}),R(ze),A(Qe.username||""),U(nt),F(Xe),L(!0)},G=async()=>{if(!N)return;const{userId:X,action:Ue,currentValue:Qe}=N;D(!0),y(X);try{const ze=r.find(nt=>nt.id===X);if(!ze){W({title:"Ошибка",description:"Пользователь не найден",variant:"destructive"});return}if(Ue==="admin"){const nt=ze.originalRole==="ADMIN",Xe=nt?"USER":"ADMIN";console.log(`Текущая роль: ${ze.originalRole}, isAdmin: ${nt}`),console.log(`Отправляем в БД роль: ${Xe}`),await kj(X,Xe);const V=nt?"Пользователь":"Администратор";console.log(`Новое отображаемое значение роли: ${V}`);const B={...ze,originalRole:Xe,role:V};s(q=>q.map(ue=>ue.id===X?B:ue)),o(q=>q.map(ue=>ue.id===X?B:ue)),W({title:"Успех",description:nt?`Права администратора отозваны у пользователя ${ze.username}`:`Пользователь ${ze.username} назначен администратором`,variant:"default"})}else if(Ue==="ban"){const Xe=!ze.isBanned;await _H(X,Xe),Xe?(localStorage.setItem(`sf_user_was_banned_${X}`,"true"),localStorage.removeItem(`sf_ban_notification_shown_${X}`)):Xe||(localStorage.removeItem(`sf_unban_notification_shown_${X}`),localStorage.setItem(`sf_user_was_banned_${X}`,"true"));const V={...ze,isBanned:Xe};s(B=>B.map(q=>q.id===X?V:q)),o(B=>B.map(q=>q.id===X?V:q)),W({title:"Успех",description:Xe?`Пользователь ${ze.username} заблокирован`:`Пользователь ${ze.username} разблокирован`,variant:"default"})}await $(g,e),t&&t()}catch(ze){console.error(`Ошибка при выполнении действия ${Ue}:`,ze),W({title:"Ошибка",description:`Не удалось выполнить действие: ${ze.message||"Неизвестная ошибка"}`,variant:"destructive"}),$(g,e).catch(nt=>{console.error("Ошибка при обновлении списка пользователей:",nt)})}finally{D(!1),y(null),L(!1),E(null)}},me=Math.ceil(f/_a),Fe=X=>{X>=1&&X<=me&&!u&&x(X)},Pe=X=>X?X.startsWith("http://")||X.startsWith("https://")||X.startsWith("data:")?X:X.startsWith("/")?`${pn}${X}`:X:"",je=()=>l.jsx(mt,{children:l.jsx(vt,{className:Z?"p-3":"p-4",children:l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsx(Rr,{className:"rounded-full h-10 w-10"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx(Rr,{className:"h-5 w-40"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Rr,{className:"h-4 w-20"}),l.jsx(Rr,{className:"h-4 w-20"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Rr,{className:"h-9 w-20"}),l.jsx(Rr,{className:"h-9 w-20"})]})]})})});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:`flex gap-2 ${Z?"flex-col":""}`,children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(b$,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{placeholder:"Поиск по никам пользователей",value:e,onChange:ie,className:"pl-9"})]})}),a&&l.jsx("div",{className:"space-y-3",children:Array.from({length:_a}).map((X,Ue)=>l.jsx(je,{},Ue))}),!a&&r.length===0&&l.jsxs(Er,{variant:"default",className:"bg-muted",children:[l.jsx(S$,{className:"h-4 w-4"}),l.jsx(dh,{children:"Нет результатов"}),l.jsx(br,{children:"Пользователи не найдены. Попробуйте изменить запрос поиска."})]}),!a&&r.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-3",children:u?Array.from({length:_a}).map((X,Ue)=>l.jsx(je,{},Ue)):r.map(X=>(console.log(`Пользователь ${X.username}, роль: ${X.role}, originalRole: ${X.originalRole}`),l.jsx(mt,{className:X.isBanned?"border-destructive/20":"",children:l.jsx(vt,{className:Z?"p-3":"p-4",children:l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsxs(dl,{className:`${Z?"h-10 w-10":"h-12 w-12"} border-2 border-border`,children:[l.jsx(hl,{src:Pe(X.avatarUrl),alt:X.username}),l.jsx(fl,{children:l3(X.username)})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium truncate",children:X.username}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:X.email}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[l.jsx(Ha,{variant:X.role==="Администратор"?"default":"secondary",className:"text-xs py-0",children:l.jsx("span",{className:"flex items-center gap-1",children:X.role==="Администратор"?l.jsxs(l.Fragment,{children:[l.jsx(Xv,{className:"w-3 h-3"}),Z?"Админ":"Администратор"]}):l.jsxs(l.Fragment,{children:[l.jsx(rs,{className:"w-3 h-3"}),"Пользователь"]})})}),l.jsx(Ha,{variant:X.isBanned?"destructive":"outline",className:"text-xs py-0",children:l.jsx("span",{className:"flex items-center gap-1",children:X.isBanned?l.jsxs(l.Fragment,{children:[l.jsx(Kv,{className:"w-3 h-3"}),Z?"Заблок.":"Заблокирован"]}):l.jsxs(l.Fragment,{children:[l.jsx(Qv,{className:"w-3 h-3"}),"Активен"]})})})]})]}),Z?l.jsxs("div",{className:"flex gap-2",children:[l.jsx(de,{size:"icon",onClick:()=>ge(X.id,"admin"),variant:X.originalRole==="ADMIN"?"default":"secondary",className:`relative h-9 w-9 ${_===X.id&&(N==null?void 0:N.action)==="admin"?"animate-pulse":""}`,disabled:_===X.id,title:X.originalRole==="ADMIN"?"Снять права админа":"Назначить админом",children:_===X.id&&(N==null?void 0:N.action)==="admin"?l.jsx(Wn,{className:"h-4 w-4 animate-spin"}):X.originalRole==="ADMIN"?l.jsx(gT,{className:"h-4 w-4"}):l.jsx(Xv,{className:"h-4 w-4"})}),l.jsx(de,{size:"icon",onClick:()=>ge(X.id,"ban"),variant:X.isBanned?"outline":"destructive",className:`relative h-9 w-9 ${_===X.id&&(N==null?void 0:N.action)==="ban"?"animate-pulse":""}`,disabled:_===X.id,title:X.isBanned?"Разблокировать":"Заблокировать",children:_===X.id&&(N==null?void 0:N.action)==="ban"?l.jsx(Wn,{className:"h-4 w-4 animate-spin"}):X.isBanned?l.jsx(Qv,{className:"h-4 w-4"}):l.jsx(Kv,{className:"h-4 w-4"})})]}):l.jsxs("div",{className:"flex gap-2",children:[l.jsx(de,{size:"icon",onClick:()=>ge(X.id,"admin"),variant:X.originalRole==="ADMIN"?"default":"secondary",className:`relative h-9 w-9 ${_===X.id&&(N==null?void 0:N.action)==="admin"?"animate-pulse":""}`,disabled:_===X.id,title:X.originalRole==="ADMIN"?"Снять права админа":"Назначить админом",children:_===X.id&&(N==null?void 0:N.action)==="admin"?l.jsx(Wn,{className:"h-4 w-4 animate-spin"}):X.originalRole==="ADMIN"?l.jsx(gT,{className:"h-4 w-4"}):l.jsx(Xv,{className:"h-4 w-4"})}),l.jsx(de,{size:"icon",onClick:()=>ge(X.id,"ban"),variant:X.isBanned?"outline":"destructive",className:`relative h-9 w-9 ${_===X.id&&(N==null?void 0:N.action)==="ban"?"animate-pulse":""}`,disabled:_===X.id,title:X.isBanned?"Разблокировать":"Заблокировать",children:_===X.id&&(N==null?void 0:N.action)==="ban"?l.jsx(Wn,{className:"h-4 w-4 animate-spin"}):X.isBanned?l.jsx(Qv,{className:"h-4 w-4"}):l.jsx(Kv,{className:"h-4 w-4"})})]})]})})},X.id)))}),l.jsx(Ii,{currentPage:g,totalPages:me,onPageChange:Fe,isPaginationLoading:u}),l.jsxs("div",{className:"text-center text-xs text-muted-foreground mt-2",children:["Показано ",(g-1)*_a+1,"-",Math.min(g*_a,f)," из ",f," пользователей"]})]}),l.jsx(ai,{open:P,onOpenChange:L,children:l.jsxs(Ns,{className:Z?"w-[calc(100%-32px)] p-4 max-w-md":"",children:[l.jsxs(sa,{children:[l.jsx(ia,{children:I}),l.jsx(Op,{children:Y})]}),l.jsxs(ru,{className:Z?"flex-col gap-2 mt-4":"mt-4",children:[l.jsx(de,{onClick:()=>L(!1),variant:"outline",className:Z?"w-full":"",children:"Отмена"}),l.jsxs(de,{onClick:G,disabled:te,className:Z?"w-full":"",children:[te?l.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Подтвердить"]})]})]})})]})},Je={PENDING:"В ожидании",APPROVED:"Одобрено",REJECTED:"Отклонено"},oa=t=>typeof t.albumId=="string"&&typeof t.userId=="string"&&typeof t.rating=="string"&&["RECOMMEND","NEUTRAL","NOT_RECOMMEND"].includes(t.rating)&&typeof t.reviewText=="string"&&typeof t.status=="string"&&Object.values(Je).includes(t.status)&&typeof t.createdAt=="string",OD=async t=>{try{const e=Re(xe,"albums",t.albumId);await Td(e,{...t,createdAt:new Date().toISOString()})}catch{throw new Error("Не удалось сохранить альбом в Firestore")}},SQ=async t=>{try{const e=Re(xe,"albums",t),n=await He(e);return n.exists()?n.data():null}catch{throw new Error("Не удалось загрузить альбом из Firestore")}},LD=async t=>{console.log("Сохраняем рецензию с данными:",t);try{return(await Dg(In(xe,"reviews"),{...t,status:t.status,customCoverUrl:t.customCoverUrl,createdAt:new Date().toISOString(),likes:0,dislikes:0,views:0,likedBy:[],dislikedBy:[]})).id}catch{throw new Error(`Не удалось сохранить рецензию в Firestore: ${t}`)}},qS=async(t,e,n,r)=>{try{const s=Re(xe,"reviews",t),i={status:e};e===Je.REJECTED&&n&&(i.rejectReason=n),await Zt(s,i)}catch{throw new Error("Не удалось обновить статус рецензии")}},NQ=async(t=Je.PENDING,e="all")=>{try{console.log(`Запрос рецензий со статусом: ${t}, тип: ${e}`);const n=In(xe,"reviews"),r=Tn(n,kn("status","==",t)),s=await Hn(r),i=[];for(const o of s.docs){const a=o.data();if(oa(a)){const c=await He(Re(xe,"albums",a.albumId)),u=c.exists()?c.data():null,h=await He(Re(xe,"users",a.userId)),f=h.exists()?h.data():null,p=(f==null?void 0:f.role)||"USER";if(console.log(`Рецензия ${o.id}, автор: ${f==null?void 0:f.username}, роль: ${p}`),e==="admin"&&p!=="ADMIN"){console.log(`Пропускаем рецензию ${o.id}: не от администратора`);continue}if(e==="user"&&p==="ADMIN"){console.log(`Пропускаем рецензию ${o.id}: от администратора`);continue}i.push({id:o.id,artist:(u==null?void 0:u.artist)||"Неизвестный артист",album:(u==null?void 0:u.title)||"Неизвестный альбом",type:(u==null?void 0:u.type)||"album",rating:a.rating,yandexMusicId:(u==null?void 0:u.albumId)||"",likes:a.likes||0,dislikes:a.dislikes||0,views:a.views||0,content:a.reviewText,date:new Date(a.createdAt).toLocaleDateString("ru-RU"),createdAt:a.createdAt,coverUrl:(u==null?void 0:u.coverUrl)||"/placeholder.svg",authorId:a.userId,author:(f==null?void 0:f.username)||"Неизвестный автор",likedBy:a.likedBy||[],dislikedBy:a.dislikedBy||[],status:a.status,rejectReason:a.rejectReason,customCoverUrl:a.customCoverUrl})}}return console.log(`Найдено ${i.length} подходящих рецензий`),i}catch(n){throw console.error("Ошибка при загрузке рецензий:",n),new Error("Не удалось загрузить рецензии из Firestore")}},CQ=async t=>{try{const e=In(xe,"reviews"),n=Tn(e,kn("userId","==",t)),r=await Hn(n),s=[];for(const i of r.docs){const o=i.data();if(oa(o)){const a=await He(Re(xe,"albums",o.albumId)),c=a.exists()?a.data():null,u=await He(Re(xe,"users",o.userId)),h=u.exists()?u.data():null;s.push({id:i.id,artist:(c==null?void 0:c.artist)||"Неизвестный артист",album:(c==null?void 0:c.title)||"Неизвестный альбом",type:(c==null?void 0:c.type)||"album",rating:o.rating,yandexMusicId:(c==null?void 0:c.albumId)||"",likes:o.likes||0,dislikes:o.dislikes||0,views:o.views||0,content:o.reviewText,date:new Date(o.createdAt).toLocaleDateString("ru-RU"),createdAt:o.createdAt,coverUrl:(c==null?void 0:c.coverUrl)||"/placeholder.svg",authorId:o.userId,author:(h==null?void 0:h.username)||"Неизвестный автор",likedBy:o.likedBy||[],dislikedBy:o.dislikedBy||[],status:o.status,rejectReason:o.rejectReason,customCoverUrl:o.customCoverUrl})}}return s}catch{throw new Error("Не удалось загрузить рецензии пользователя из Firestore")}},BE=async t=>{try{const e=Re(xe,"reviews",t),n=await He(e);if(!n.exists())throw new Error("Рецензия не найдена");const r=n.data();if(!oa(r))throw new Error("Неверный формат данных рецензии");const s=await He(Re(xe,"albums",r.albumId)),i=s.exists()?s.data():null,o=await He(Re(xe,"users",r.userId)),a=o.exists()?o.data():null;return{id:n.id,artist:(i==null?void 0:i.artist)||"Неизвестный артист",album:(i==null?void 0:i.title)||"Неизвестный альбом",type:(i==null?void 0:i.type)||"album",rating:r.rating,yandexMusicId:(i==null?void 0:i.albumId)||"",likes:r.likes||0,dislikes:r.dislikes||0,views:r.views||0,content:r.reviewText,date:new Date(r.createdAt).toLocaleDateString("ru-RU"),createdAt:r.createdAt,coverUrl:(i==null?void 0:i.coverUrl)||"/placeholder.svg",authorId:r.userId,author:(a==null?void 0:a.username)||"Неизвестный автор",likedBy:r.likedBy||[],dislikedBy:r.dislikedBy||[],status:r.status,rejectReason:r.rejectReason,customCoverUrl:r.customCoverUrl}}catch{throw new Error("Не удалось загрузить рецензию из Firestore")}},IQ=async(t,e)=>{try{const n=Re(xe,"reviews",t);await Zt(n,e)}catch{throw new Error("Не удалось обновить рецензию")}},RQ=async t=>{try{const e=Re(xe,"reviews",t);await Q0(e)}catch{throw new Error("Не удалось удалить рецензию")}},AQ=async(t,e)=>{try{const n=Re(xe,"reviews",t),r=await He(n);if(!r.exists())throw new Error("Рецензия не найдена");const s=r.data(),i=s.likedBy||[],o=s.dislikedBy||[];return i.includes(e)?await Zt(n,{likes:(s.likes||0)-1,likedBy:i.filter(a=>a!==e)}):await Zt(n,{likes:(s.likes||0)+1,likedBy:[...i,e],dislikes:o.includes(e)?(s.dislikes||0)-1:s.dislikes||0,dislikedBy:o.filter(a=>a!==e)}),await BE(t)}catch{throw new Error("Не удалось поставить лайк")}},PQ=async(t,e)=>{try{const n=Re(xe,"reviews",t),r=await He(n);if(!r.exists())throw new Error("Рецензия не найдена");const s=r.data(),i=s.likedBy||[],o=s.dislikedBy||[];return o.includes(e)?await Zt(n,{dislikes:(s.dislikes||0)-1,dislikedBy:o.filter(a=>a!==e)}):await Zt(n,{dislikes:(s.dislikes||0)+1,dislikedBy:[...o,e],likes:i.includes(e)?(s.likes||0)-1:s.likes||0,likedBy:i.filter(a=>a!==e)}),await BE(t)}catch{throw new Error("Не удалось поставить дизлайк")}},vm=async(t,e,n=1,r=3)=>{try{const s=In(xe,"reviews"),i=Tn(s,kn("userId","==",t),kn("status","==",e)),a=(await Hn(i)).docs.map(y=>({id:y.id,...y.data(),createdAt:y.data().createdAt})).sort((y,b)=>new Date(b.createdAt).getTime()-new Date(y.createdAt).getTime()),c=new Set,u=new Set;a.forEach(y=>{oa(y)&&(c.add(y.albumId),u.add(y.userId))});const h=await Promise.all(Array.from(c).map(y=>He(Re(xe,"albums",y)))),f=new Map(h.filter(y=>y.exists()).map(y=>[y.id,y.data()])),p=await Promise.all(Array.from(u).map(y=>He(Re(xe,"users",y)))),g=new Map(p.filter(y=>y.exists()).map(y=>[y.id,y.data()])),x=(n-1)*r,v=x+r;return{reviews:a.slice(x,v).map(y=>{if(!oa(y))return null;const b=f.get(y.albumId),C=g.get(y.userId);return{id:y.id,artist:(b==null?void 0:b.artist)||"Неизвестный артист",album:(b==null?void 0:b.title)||"Неизвестный альбом",type:(b==null?void 0:b.type)||"album",rating:y.rating,yandexMusicId:(b==null?void 0:b.albumId)||"",likes:y.likes||0,dislikes:y.dislikes||0,views:y.views||0,content:y.reviewText,date:new Date(y.createdAt).toLocaleDateString("ru-RU"),createdAt:y.createdAt,coverUrl:(b==null?void 0:b.coverUrl)||"/placeholder.svg",authorId:y.userId,author:(C==null?void 0:C.username)||"Неизвестный автор",likedBy:y.likedBy||[],dislikedBy:y.dislikedBy||[],status:y.status,rejectReason:y.rejectReason,customCoverUrl:y.customCoverUrl}}).filter(y=>y!==null),total:a.length}}catch{throw new Error("Не удалось загрузить рецензии пользователя из Firestore")}},jQ=async(t=Je.APPROVED,e=1,n=6,r="",s="all",i="all",o="newest",a,c)=>{try{const u=In(xe,"reviews");let h;t!==Je.APPROVED&&!c?h=Tn(u,kn("status","==",Je.APPROVED)):h=Tn(u,kn("status","==",t));const p=(await Hn(h)).docs.map(E=>{const S=E.data();return oa(S)?{id:E.id,albumId:S.albumId,userId:S.userId,rating:S.rating,reviewText:S.reviewText,status:S.status,createdAt:S.createdAt,rejectReason:S.rejectReason,likes:S.likes||0,dislikes:S.dislikes||0,likedBy:S.likedBy||[],dislikedBy:S.dislikedBy||[],customCoverUrl:S.customCoverUrl}:null}).filter(E=>E!==null).sort((E,S)=>new Date(S.createdAt).getTime()-new Date(E.createdAt).getTime()),g=new Set;p.forEach(E=>{g.add(E.userId)});const x=await Promise.all(Array.from(g).map(E=>He(Re(xe,"users",E)))),v=new Map(x.filter(E=>E.exists()).map(E=>[E.id,E.data()]));let T=p.filter(E=>{const S=v.get(E.userId);return(S==null?void 0:S.role)==="ADMIN"});const _=new Set;T.forEach(E=>{_.add(E.albumId)});const y=await Promise.all(Array.from(_).map(E=>He(Re(xe,"albums",E)))),b=new Map(y.filter(E=>E.exists()).map(E=>[E.id,E.data()]));T=T.filter(E=>{const S=b.get(E.albumId);if(!S)return!1;const R=S.artist||"",M=S.title||"",A=S.type||"",I=r.toLowerCase(),U=R.toLowerCase().includes(I),Y=M.toLowerCase().includes(I);return!(r&&!(U||Y)||s!=="all"&&A!==s||i!=="all"&&E.rating!==i)}),o==="oldest"?T.sort((E,S)=>new Date(E.createdAt).getTime()-new Date(S.createdAt).getTime()):T.sort((E,S)=>new Date(S.createdAt).getTime()-new Date(E.createdAt).getTime());const C=(e-1)*n,P=C+n;return{reviews:T.slice(C,P).map(E=>{const S=b.get(E.albumId),R=v.get(E.userId);return{id:E.id,artist:(S==null?void 0:S.artist)||"Неизвестный артист",album:(S==null?void 0:S.title)||"Неизвестный альбом",type:(S==null?void 0:S.type)||"album",rating:E.rating,yandexMusicId:(S==null?void 0:S.albumId)||"",likes:E.likes||0,dislikes:E.dislikes||0,views:E.views||0,content:E.reviewText,date:new Date(E.createdAt).toLocaleDateString("ru-RU"),createdAt:E.createdAt,coverUrl:(S==null?void 0:S.coverUrl)||"/placeholder.svg",authorId:E.userId,author:(R==null?void 0:R.username)||"Неизвестный автор",likedBy:E.likedBy||[],dislikedBy:E.dislikedBy||[],status:E.status,rejectReason:E.rejectReason,customCoverUrl:E.customCoverUrl}}),total:T.length}}catch{throw new Error("Не удалось загрузить рецензии редакции из Firestore")}},DQ=async(t=Je.APPROVED,e=1,n=6,r="",s="all",i="all",o="newest",a,c)=>{try{const u=In(xe,"reviews");let h;t!==Je.APPROVED&&!c&&!a?h=Tn(u,kn("status","==",Je.APPROVED)):h=Tn(u,kn("status","==",t));const p=(await Hn(h)).docs.map(E=>{const S=E.data();return{id:E.id,albumId:S.albumId,userId:S.userId,rating:S.rating,reviewText:S.reviewText,status:S.status,rejectReason:S.rejectReason,moderationComment:S.moderationComment,createdAt:S.createdAt,likes:S.likes||0,dislikes:S.dislikes||0,likedBy:S.likedBy||[],dislikedBy:S.dislikedBy||[],customCoverUrl:S.customCoverUrl}}).sort((E,S)=>new Date(S.createdAt).getTime()-new Date(E.createdAt).getTime());let g=p;t!==Je.APPROVED&&!c&&a&&(g=p.filter(E=>E.userId===a));const x=new Set,v=new Set;g.forEach(E=>{oa(E)&&(x.add(E.albumId),v.add(E.userId))});const T=await Promise.all(Array.from(x).map(E=>He(Re(xe,"albums",E)))),_=new Map(T.filter(E=>E.exists()).map(E=>[E.id,E.data()])),y=await Promise.all(Array.from(v).map(E=>He(Re(xe,"users",E)))),b=new Map(y.filter(E=>E.exists()).map(E=>[E.id,E.data()]));g=g.filter(E=>{const S=b.get(E.userId);return(S==null?void 0:S.role)!=="ADMIN"}),g=g.filter(E=>{const S=_.get(E.albumId);if(!S)return!1;const R=S.artist||"",M=S.title||"",A=S.type||"",I=r.toLowerCase(),U=R.toLowerCase().includes(I),Y=M.toLowerCase().includes(I);return!(r&&!(U||Y)||s!=="all"&&A!==s||i!=="all"&&E.rating!==i)}),o==="oldest"?g.sort((E,S)=>new Date(E.createdAt).getTime()-new Date(S.createdAt).getTime()):g.sort((E,S)=>new Date(S.createdAt).getTime()-new Date(E.createdAt).getTime());const C=(e-1)*n,P=C+n;return{reviews:g.slice(C,P).map(E=>{if(!oa(E))return null;const S=_.get(E.albumId),R=b.get(E.userId);return{id:E.id,artist:(S==null?void 0:S.artist)||"Неизвестный артист",album:(S==null?void 0:S.title)||"Неизвестный альбом",type:(S==null?void 0:S.type)||"album",rating:E.rating,yandexMusicId:(S==null?void 0:S.albumId)||"",likes:E.likes||0,dislikes:E.dislikes||0,views:E.views||0,content:E.reviewText,date:new Date(E.createdAt).toLocaleDateString("ru-RU"),createdAt:E.createdAt,coverUrl:(S==null?void 0:S.coverUrl)||"/placeholder.svg",authorId:E.userId,author:(R==null?void 0:R.username)||"Неизвестный автор",likedBy:E.likedBy||[],dislikedBy:E.dislikedBy||[],status:E.status,rejectReason:E.rejectReason,customCoverUrl:E.customCoverUrl}}).filter(E=>E!==null),total:g.length}}catch{throw new Error("Не удалось загрузить рецензии пользователей из Firestore")}},MQ=async t=>{try{const e=Re(xe,"reviews",t);if(!(await He(e)).exists())throw new Error("Рецензия не найдена");await Zt(e,{views:wj(1)})}catch(e){console.error("Ошибка при увеличении счетчика просмотров:",e)}},aa={RECOMMEND:Se.review.ratingType.recommend,NEUTRAL:Se.review.ratingType.neutral,NOT_RECOMMEND:Se.review.ratingType.notRecommend},ym=5,GS=(t,e)=>t?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")?t:t.startsWith("/")?`${pn}${t}`:e:e,OQ=async(t=1,e=ym)=>{try{const n=await NQ(Je.PENDING,"all"),r=[...n].sort((o,a)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime()),s=(t-1)*e;return{reviews:r.slice(s,s+e),total:n.length}}catch(n){throw console.error("Ошибка при получении рецензий:",n),n}},LQ=t=>{const e=new Date(t);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short",year:"numeric"}).format(e)},KS=({isMobile:t})=>l.jsx(mt,{className:"overflow-hidden",children:l.jsx(vt,{className:"p-4",children:l.jsxs("div",{className:`grid ${t?"grid-cols-1 gap-3":"md:grid-cols-[200px,1fr] gap-4"}`,children:[l.jsx(Rr,{className:"w-full aspect-square rounded-lg"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Rr,{className:"h-6 w-3/4 mb-2"}),l.jsx(Rr,{className:"h-4 w-1/2 mb-2"}),l.jsx(Rr,{className:"h-4 w-1/4"})]}),l.jsx(Rr,{className:"h-16 w-full"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Rr,{className:"h-9 flex-1"}),l.jsx(Rr,{className:"h-9 flex-1"})]})]})]})})}),VQ=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(!1),[o,a]=m.useState(1),[c,u]=m.useState(0),[h,f]=m.useState(null),[p,g]=m.useState(""),[x,v]=m.useState(!1),{toast:T}=jt(),_=xt(),y=async E=>{try{E===o&&!n?i(!0):r(!0);const{reviews:S,total:R}=await OQ(E);e(S),u(R)}catch{T({title:"Ошибка",description:"Не удалось загрузить рецензии",variant:"destructive"})}finally{r(!1),i(!1)}};m.useEffect(()=>{y(o)},[o]);const b=async E=>{try{await qS(E.id,Je.APPROVED);const S=c-1,R=Math.ceil(S/ym);t.length===1&&o>1&&o>R?a(A=>A-1):await y(o),T({title:"Рецензия одобрена",description:`Рецензия пользователя ${E.author} на альбом ${E.artist} - ${E.album} опубликована`})}catch{T({title:"Ошибка",description:"Не удалось одобрить рецензию",variant:"destructive"})}},C=E=>{f(E),v(!0)},P=async()=>{if(h&&p)try{await qS(h.id,Je.REJECTED,p);const E=c-1,S=Math.ceil(E/ym);t.length===1&&o>1&&o>S?a(M=>M-1):await y(o),T({title:"Рецензия отклонена",description:`Рецензия пользователя ${h.author} отклонена`})}catch{T({title:"Ошибка",description:"Не удалось отклонить рецензию",variant:"destructive"})}finally{v(!1),g(""),f(null)}},L=E=>{a(E)},N=Math.ceil(c/ym);return n?l.jsx("div",{className:"space-y-4",children:[1,2,3].map(E=>l.jsx(KS,{isMobile:_},E))}):l.jsxs("div",{className:"space-y-6",children:[t.length===0?l.jsx(mt,{children:l.jsx(vt,{className:"p-6 text-center",children:l.jsx("p",{className:"text-muted-foreground",children:"Нет рецензий на модерации"})})}):l.jsx("div",{className:"space-y-4",children:s?[1,2,3].map(E=>l.jsx(KS,{isMobile:_},E)):t.map(E=>l.jsx(mt,{className:"overflow-hidden",children:l.jsx(vt,{className:`${_?"p-3":"p-4"}`,children:l.jsxs("div",{className:`${_?"grid grid-cols-1 gap-3":"grid md:grid-cols-[200px,1fr] gap-4"}`,children:[l.jsx("div",{children:l.jsx("img",{src:GS(E.customCoverUrl,GS(E.coverUrl,"/placeholder.svg")),alt:`${E.album} cover`,className:"w-full aspect-square object-cover rounded-lg outline outline-2 -outline-offset-2 outline-white/5",onError:S=>{const R=S.target;R.src="/placeholder.svg"}})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:`${_?"text-base":"text-lg"} font-semibold leading-tight`,children:[E.artist," - ",E.album]}),l.jsxs("div",{className:"flex flex-col xs:flex-row gap-1 xs:gap-2 items-start xs:items-center mt-1.5 mb-1 flex-wrap",children:[l.jsxs(Ha,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[l.jsx(rs,{className:"h-3 w-3"})," ",E.author]}),l.jsxs(Ha,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[l.jsx(vR,{className:"h-3 w-3"})," ",LQ(E.createdAt)]}),l.jsx(Ha,{className:`flex items-center text-xs px-2 py-1 rounded-full bg-opacity-10 ${ni(E.rating,"bg")} ${ni(E.rating,"text")}`,children:aa[E.rating]})]})]}),l.jsx("div",{className:`${_?"text-xs":"text-sm"} text-pretty max-h-40 overflow-y-auto p-2 border rounded-md bg-muted/50`,children:E.content}),l.jsxs("div",{className:`flex ${_?"flex-col gap-2":"gap-2"}`,children:[l.jsxs(de,{variant:"outline",className:`${_?"w-full py-1.5":"flex-1"}`,onClick:()=>b(E),children:[l.jsx(kh,{className:`${_?"h-3.5 w-3.5 mr-1.5":"h-4 w-4 mr-2"}`}),"Одобрить"]}),l.jsxs(de,{variant:"outline",className:`${_?"w-full py-1.5":"flex-1"}`,onClick:()=>C(E),children:[l.jsx(ti,{className:`${_?"h-3.5 w-3.5 mr-1.5":"h-4 w-4 mr-2"}`}),"Отклонить"]})]})]})]})})},E.id))}),l.jsx(Ii,{currentPage:o,totalPages:N,onPageChange:L,isPaginationLoading:s}),l.jsx(ai,{open:x,onOpenChange:v,children:l.jsxs(Ns,{className:_?"w-[calc(100%-32px)] p-4 max-w-md":"",children:[l.jsx(sa,{children:l.jsx(ia,{children:"Причина отклонения рецензии"})}),l.jsx(ul,{placeholder:"Укажите причину отклонения рецензии...",value:p,onChange:E=>g(E.target.value),className:"min-h-[100px]"}),l.jsxs(ru,{className:_?"flex-col gap-2":"",children:[l.jsx(de,{variant:"outline",onClick:()=>v(!1),className:_?"w-full":"",children:"Отмена"}),l.jsx(de,{onClick:P,disabled:!p,className:_?"w-full":"",children:"Отклонить рецензию"})]})]})})]})};var zE="Radio",[FQ,VD]=or(zE),[UQ,$Q]=FQ(zE),FD=m.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:c,form:u,...h}=t,[f,p]=m.useState(null),g=it(e,T=>p(T)),x=m.useRef(!1),v=f?u||!!f.closest("form"):!0;return l.jsxs(UQ,{scope:n,checked:s,disabled:o,children:[l.jsx(Ie.button,{type:"button",role:"radio","aria-checked":s,"data-state":BD(s),"data-disabled":o?"":void 0,disabled:o,value:a,...h,ref:g,onClick:fe(t.onClick,T=>{s||c==null||c(),v&&(x.current=T.isPropagationStopped(),x.current||T.stopPropagation())})}),v&&l.jsx(BQ,{control:f,bubbles:!x.current,name:r,value:a,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});FD.displayName=zE;var UD="RadioIndicator",$D=m.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=$Q(UD,n);return l.jsx($r,{present:r||i.checked,children:l.jsx(Ie.span,{"data-state":BD(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});$D.displayName=UD;var BQ=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=jE(n),a=oE(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),l.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BD(t){return t?"checked":"unchecked"}var zQ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],WE="RadioGroup",[WQ,Qee]=or(WE,[xu,VD]),zD=xu(),WD=VD(),[HQ,qQ]=WQ(WE),HD=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:c,dir:u,loop:h=!0,onValueChange:f,...p}=t,g=zD(n),x=$h(u),[v,T]=ei({prop:i,defaultProp:s,onChange:f});return l.jsx(HQ,{scope:n,name:r,required:o,disabled:a,value:v,onValueChange:T,children:l.jsx(ME,{asChild:!0,...g,orientation:c,dir:x,loop:h,children:l.jsx(Ie.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":a?"":void 0,dir:x,...p,ref:e})})})});HD.displayName=WE;var qD="RadioGroupItem",GD=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=qQ(qD,n),o=i.disabled||r,a=zD(n),c=WD(n),u=m.useRef(null),h=it(e,u),f=i.value===s.value,p=m.useRef(!1);return m.useEffect(()=>{const g=v=>{zQ.includes(v.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),l.jsx(OE,{asChild:!0,...a,focusable:!o,active:f,children:l.jsx(FD,{disabled:o,required:i.required,checked:f,...c,...s,name:i.name,ref:h,onCheck:()=>i.onValueChange(s.value),onKeyDown:fe(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:fe(s.onFocus,()=>{var g;p.current&&((g=u.current)==null||g.click())})})})});GD.displayName=qD;var GQ="RadioGroupIndicator",KD=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=WD(n);return l.jsx($D,{...s,...r,ref:e})});KD.displayName=GQ;var QD=HD,YD=GD,KQ=KD;const Mx=m.forwardRef(({className:t,...e},n)=>l.jsx(QD,{className:le("grid gap-2",t),...e,ref:n}));Mx.displayName=QD.displayName;const co=m.forwardRef(({className:t,...e},n)=>l.jsx(YD,{ref:n,className:le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:l.jsx(KQ,{className:"flex items-center justify-center",children:l.jsx(gR,{className:"h-2.5 w-2.5 fill-current text-current"})})}));co.displayName=YD.displayName;const QQ=()=>{const{theme:t,fontSize:e,setTheme:n,setFontSize:r}=Qq(),s=xt(),i=a=>{n(a)},o=a=>{r(a)};return l.jsxs(mt,{children:[l.jsx(en,{className:s?"p-4":"",children:l.jsxs(tn,{className:`${s?"text-lg":"text-xl"} flex items-center gap-2`,children:[l.jsx(vT,{className:"h-5 w-5"}),"Внешний вид"]})}),l.jsxs(vt,{className:`space-y-6 ${s?"p-4 pt-0":""}`,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{className:"text-base font-medium",children:"Тема оформления"}),l.jsxs(Mx,{value:t,onValueChange:i,className:"grid grid-cols-3 gap-2",children:[l.jsxs(bt,{htmlFor:"light",className:`flex flex-col items-center justify-center rounded-md border-2 p-4 ${t==="light"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"light",id:"light",className:"sr-only"}),l.jsx(T$,{className:"h-5 w-5 mb-2"}),l.jsx("span",{children:"Светлая"})]}),l.jsxs(bt,{htmlFor:"dark",className:`flex flex-col items-center justify-center rounded-md border-2 p-4 ${t==="dark"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"dark",id:"dark",className:"sr-only"}),l.jsx(vT,{className:"h-5 w-5 mb-2"}),l.jsx("span",{children:"Тёмная"})]}),l.jsxs(bt,{htmlFor:"system",className:`flex flex-col items-center justify-center rounded-md border-2 p-4 ${t==="system"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"system",id:"system",className:"sr-only"}),l.jsx(g$,{className:"h-5 w-5 mb-2"}),l.jsx("span",{children:"Системная"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(bt,{className:"text-base font-medium flex items-center gap-2",children:[l.jsx(k$,{className:"h-4 w-4"}),"Размер шрифта"]}),l.jsxs(Mx,{value:e,onValueChange:o,className:"grid grid-cols-4 gap-2",children:[l.jsxs(bt,{htmlFor:"small",className:`flex flex-col items-center justify-center rounded-md border-2 p-3 ${e==="small"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"small",id:"small",className:"sr-only"}),l.jsx("span",{className:"text-sm",children:"Малый"})]}),l.jsxs(bt,{htmlFor:"medium",className:`flex flex-col items-center justify-center rounded-md border-2 p-3 ${e==="medium"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"medium",id:"medium",className:"sr-only"}),l.jsx("span",{className:"text-base",children:"Средний"})]}),l.jsxs(bt,{htmlFor:"large",className:`flex flex-col items-center justify-center rounded-md border-2 p-3 ${e==="large"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"large",id:"large",className:"sr-only"}),l.jsx("span",{className:"text-lg",children:"Большой"})]}),l.jsxs(bt,{htmlFor:"extra-large",className:`flex flex-col items-center justify-center rounded-md border-2 p-3 ${e==="extra-large"?"border-primary":"border-muted"} hover:bg-accent cursor-pointer`,children:[l.jsx(co,{value:"extra-large",id:"extra-large",className:"sr-only"}),l.jsx("span",{className:"text-xl",children:"Огромный"})]})]})]}),l.jsxs("div",{className:"p-4 border rounded-md mt-4",children:[l.jsx("h3",{className:"text-base font-medium mb-2",children:"Пример текста"}),l.jsx("p",{className:"text-muted-foreground",children:"Так будет выглядеть текст с текущими настройками. Выберите размер шрифта и тему, которые наиболее комфортны для чтения."})]})]})]})},YQ=()=>{const{user:t}=Ot(),e=(t==null?void 0:t.role)===ot.ADMIN,n=xl(),r=kr(),[s,i]=m.useState("username"),[o,a]=m.useState(!0),c=xt();m.useEffect(()=>{const p=new URLSearchParams(n.search).get("tab");p&&["username","password","admin","moderation","appearance"].includes(p)?(i(p),a(!1)):a(!0)},[n]);const u=()=>{r("/profile")},h=()=>s==="username"?"Изменение имени":s==="password"?"Изменение пароля":s==="admin"?"Управление пользователями":s==="moderation"?"Модерация":s==="appearance"?"Внешний вид":"Настройки";return l.jsx("div",{className:`${c?"px-2":"max-w-4xl"} mx-auto`,children:l.jsxs(mt,{className:c?"border-0 shadow-none":"",children:[l.jsxs(en,{className:`flex flex-row items-center justify-between ${c?"px-3 py-3":""}`,children:[l.jsxs(tn,{className:"flex items-center gap-2",children:[l.jsx(xR,{className:c?"h-5 w-5":"h-6 w-6"}),l.jsx("span",{className:c?"text-lg":"",children:o?"Настройки":h()})]}),!o&&l.jsxs(de,{variant:"ghost",size:c?"sm":"default",onClick:u,className:"flex items-center gap-1",children:[l.jsx(lg,{className:c?"h-3 w-3":"h-4 w-4"}),c?"Назад":"Назад в профиль"]})]}),l.jsx(vt,{className:c?"px-3 py-2":"",children:l.jsxs(SD,{value:s,onValueChange:i,className:"space-y-4",children:[o&&l.jsxs(FE,{className:`${c?"flex flex-wrap":"w-full"}`,children:[l.jsxs(_i,{value:"username",className:"flex items-center gap-2",children:[l.jsx(rs,{className:"h-4 w-4"}),l.jsx("span",{children:c?"Имя":"Имя пользователя"})]}),l.jsxs(_i,{value:"password",className:"flex items-center gap-2",children:[l.jsx(f$,{className:"h-4 w-4"}),l.jsx("span",{children:"Пароль"})]}),l.jsxs(_i,{value:"appearance",className:"flex items-center gap-2",children:[l.jsx(v$,{className:"h-4 w-4"}),l.jsx("span",{children:"Внешний вид"})]}),e&&l.jsxs(l.Fragment,{children:[l.jsxs(_i,{value:"admin",className:"flex items-center gap-2",children:[l.jsx(Vw,{className:"h-4 w-4"}),l.jsx("span",{children:c?"Пользователи":"Управление пользователями"})]}),l.jsxs(_i,{value:"moderation",className:"flex items-center gap-2",children:[l.jsx(Dw,{className:"h-4 w-4"}),l.jsx("span",{children:"Модерация"})]})]})]}),l.jsx(Ei,{value:"username",children:l.jsx(xQ,{})}),l.jsx(Ei,{value:"password",children:l.jsx(_Q,{})}),l.jsx(Ei,{value:"appearance",children:l.jsx(QQ,{})}),e&&l.jsxs(l.Fragment,{children:[l.jsx(Ei,{value:"admin",children:l.jsxs("div",{children:[!c&&l.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2 mb-4",children:[l.jsx(Vw,{className:"h-5 w-5"}),"Управление пользователями"]}),l.jsx(kQ,{})]})}),l.jsx(Ei,{value:"moderation",children:l.jsxs("div",{children:[!c&&l.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2 mb-4",children:[l.jsx(Dw,{className:"h-5 w-5"}),"Модерация рецензий"]}),l.jsx(VQ,{})]})})]})]})})]})})};var Ox=["Enter"," "],XQ=["ArrowDown","PageUp","Home"],XD=["ArrowUp","PageDown","End"],ZQ=[...XQ,...XD],JQ={ltr:[...Ox,"ArrowRight"],rtl:[...Ox,"ArrowLeft"]},eY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bh="Menu",[fh,tY,nY]=ig(Bh),[Cl,ZD]=or(Bh,[nY,wu,xu]),Zg=wu(),JD=xu(),[rY,Il]=Cl(Bh),[sY,zh]=Cl(Bh),eM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=Zg(e),[c,u]=m.useState(null),h=m.useRef(!1),f=Nn(i),p=$h(s);return m.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),l.jsx(cE,{...a,children:l.jsx(rY,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:l.jsx(sY,{scope:e,onClose:m.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:o,children:r})})})};eM.displayName=Bh;var iY="MenuAnchor",HE=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Zg(n);return l.jsx(uE,{...s,...r,ref:e})});HE.displayName=iY;var qE="MenuPortal",[oY,tM]=Cl(qE,{forceMount:void 0}),nM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Il(qE,e);return l.jsx(oY,{scope:e,forceMount:n,children:l.jsx($r,{present:n||i.open,children:l.jsx(Eh,{asChild:!0,container:s,children:r})})})};nM.displayName=qE;var es="MenuContent",[aY,GE]=Cl(es),rM=m.forwardRef((t,e)=>{const n=tM(es,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Il(es,t.__scopeMenu),o=zh(es,t.__scopeMenu);return l.jsx(fh.Provider,{scope:t.__scopeMenu,children:l.jsx($r,{present:r||i.open,children:l.jsx(fh.Slot,{scope:t.__scopeMenu,children:o.modal?l.jsx(lY,{...s,ref:e}):l.jsx(cY,{...s,ref:e})})})})}),lY=m.forwardRef((t,e)=>{const n=Il(es,t.__scopeMenu),r=m.useRef(null),s=it(e,r);return m.useEffect(()=>{const i=r.current;if(i)return TE(i)},[]),l.jsx(KE,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:fe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),cY=m.forwardRef((t,e)=>{const n=Il(es,t.__scopeMenu);return l.jsx(KE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),KE=m.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:x,...v}=t,T=Il(es,n),_=zh(es,n),y=Zg(n),b=JD(n),C=tY(n),[P,L]=m.useState(null),N=m.useRef(null),E=it(e,N,T.onContentChange),S=m.useRef(0),R=m.useRef(""),M=m.useRef(0),A=m.useRef(null),I=m.useRef("right"),U=m.useRef(0),Y=x?Qg:m.Fragment,F=x?{as:Vi,allowPinchZoom:!0}:void 0,te=O=>{var G,me;const W=R.current+O,Z=C().filter(Fe=>!Fe.disabled),H=document.activeElement,Q=(G=Z.find(Fe=>Fe.ref.current===H))==null?void 0:G.textValue,$=Z.map(Fe=>Fe.textValue),ie=_Y($,W,Q),ge=(me=Z.find(Fe=>Fe.textValue===ie))==null?void 0:me.ref.current;(function Fe(Pe){R.current=Pe,window.clearTimeout(S.current),Pe!==""&&(S.current=window.setTimeout(()=>Fe(""),1e3))})(W),ge&&setTimeout(()=>ge.focus())};m.useEffect(()=>()=>window.clearTimeout(S.current),[]),bE();const D=m.useCallback(O=>{var Z,H;return I.current===((Z=A.current)==null?void 0:Z.side)&&bY(O,(H=A.current)==null?void 0:H.area)},[]);return l.jsx(aY,{scope:n,searchRef:R,onItemEnter:m.useCallback(O=>{D(O)&&O.preventDefault()},[D]),onItemLeave:m.useCallback(O=>{var W;D(O)||((W=N.current)==null||W.focus(),L(null))},[D]),onTriggerLeave:m.useCallback(O=>{D(O)&&O.preventDefault()},[D]),pointerGraceTimerRef:M,onPointerGraceIntentChange:m.useCallback(O=>{A.current=O},[]),children:l.jsx(Y,{...F,children:l.jsx(Gg,{asChild:!0,trapped:s,onMountAutoFocus:fe(i,O=>{var W;O.preventDefault(),(W=N.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:l.jsx(cu,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:l.jsx(ME,{asChild:!0,...b,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:L,onEntryFocus:fe(c,O=>{_.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(dE,{role:"menu","aria-orientation":"vertical","data-state":wM(T.open),"data-radix-menu-content":"",dir:_.dir,...y,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:fe(v.onKeyDown,O=>{const Z=O.target.closest("[data-radix-menu-content]")===O.currentTarget,H=O.ctrlKey||O.altKey||O.metaKey,Q=O.key.length===1;Z&&(O.key==="Tab"&&O.preventDefault(),!H&&Q&&te(O.key));const $=N.current;if(O.target!==$||!ZQ.includes(O.key))return;O.preventDefault();const ge=C().filter(G=>!G.disabled).map(G=>G.ref.current);XD.includes(O.key)&&ge.reverse(),wY(ge)}),onBlur:fe(t.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(S.current),R.current="")}),onPointerMove:fe(t.onPointerMove,mh(O=>{const W=O.target,Z=U.current!==O.clientX;if(O.currentTarget.contains(W)&&Z){const H=O.clientX>U.current?"right":"left";I.current=H,U.current=O.clientX}}))})})})})})})});rM.displayName=es;var uY="MenuGroup",QE=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ie.div,{role:"group",...r,ref:e})});QE.displayName=uY;var dY="MenuLabel",sM=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ie.div,{...r,ref:e})});sM.displayName=dY;var Lp="MenuItem",QS="menu.itemSelect",Jg=m.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=m.useRef(null),o=zh(Lp,t.__scopeMenu),a=GE(Lp,t.__scopeMenu),c=it(e,i),u=m.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const p=new CustomEvent(QS,{bubbles:!0,cancelable:!0});f.addEventListener(QS,g=>r==null?void 0:r(g),{once:!0}),z_(f,p),p.defaultPrevented?u.current=!1:o.onClose()}};return l.jsx(iM,{...s,ref:c,disabled:n,onClick:fe(t.onClick,h),onPointerDown:f=>{var p;(p=t.onPointerDown)==null||p.call(t,f),u.current=!0},onPointerUp:fe(t.onPointerUp,f=>{var p;u.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:fe(t.onKeyDown,f=>{const p=a.searchRef.current!=="";n||p&&f.key===" "||Ox.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Jg.displayName=Lp;var iM=m.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=GE(Lp,n),a=JD(n),c=m.useRef(null),u=it(e,c),[h,f]=m.useState(!1),[p,g]=m.useState("");return m.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),l.jsx(fh.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:l.jsx(OE,{asChild:!0,...a,focusable:!r,children:l.jsx(Ie.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:fe(t.onPointerMove,mh(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:fe(t.onPointerLeave,mh(x=>o.onItemLeave(x))),onFocus:fe(t.onFocus,()=>f(!0)),onBlur:fe(t.onBlur,()=>f(!1))})})})}),hY="MenuCheckboxItem",oM=m.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return l.jsx(dM,{scope:t.__scopeMenu,checked:n,children:l.jsx(Jg,{role:"menuitemcheckbox","aria-checked":Vp(n)?"mixed":n,...s,ref:e,"data-state":XE(n),onSelect:fe(s.onSelect,()=>r==null?void 0:r(Vp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oM.displayName=hY;var aM="MenuRadioGroup",[fY,mY]=Cl(aM,{value:void 0,onValueChange:()=>{}}),lM=m.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Nn(r);return l.jsx(fY,{scope:t.__scopeMenu,value:n,onValueChange:i,children:l.jsx(QE,{...s,ref:e})})});lM.displayName=aM;var cM="MenuRadioItem",uM=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=mY(cM,t.__scopeMenu),i=n===s.value;return l.jsx(dM,{scope:t.__scopeMenu,checked:i,children:l.jsx(Jg,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":XE(i),onSelect:fe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});uM.displayName=cM;var YE="MenuItemIndicator",[dM,pY]=Cl(YE,{checked:!1}),hM=m.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=pY(YE,n);return l.jsx($r,{present:r||Vp(i.checked)||i.checked===!0,children:l.jsx(Ie.span,{...s,ref:e,"data-state":XE(i.checked)})})});hM.displayName=YE;var gY="MenuSeparator",fM=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ie.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});fM.displayName=gY;var vY="MenuArrow",mM=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Zg(n);return l.jsx(hE,{...s,...r,ref:e})});mM.displayName=vY;var yY="MenuSub",[Yee,pM]=Cl(yY),od="MenuSubTrigger",gM=m.forwardRef((t,e)=>{const n=Il(od,t.__scopeMenu),r=zh(od,t.__scopeMenu),s=pM(od,t.__scopeMenu),i=GE(od,t.__scopeMenu),o=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=m.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return m.useEffect(()=>h,[h]),m.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),c(null)}},[a,c]),l.jsx(HE,{asChild:!0,...u,children:l.jsx(iM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":wM(n.open),...t,ref:sg(e,s.onTriggerChange),onClick:f=>{var p;(p=t.onClick)==null||p.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:fe(t.onPointerMove,mh(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:fe(t.onPointerLeave,mh(f=>{var g,x;h();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const v=(x=n.content)==null?void 0:x.dataset.side,T=v==="right",_=T?-5:5,y=p[T?"left":"right"],b=p[T?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:y,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x:y,y:p.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:fe(t.onKeyDown,f=>{var g;const p=i.searchRef.current!=="";t.disabled||p&&f.key===" "||JQ[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});gM.displayName=od;var vM="MenuSubContent",yM=m.forwardRef((t,e)=>{const n=tM(es,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Il(es,t.__scopeMenu),o=zh(es,t.__scopeMenu),a=pM(vM,t.__scopeMenu),c=m.useRef(null),u=it(e,c);return l.jsx(fh.Provider,{scope:t.__scopeMenu,children:l.jsx($r,{present:r||i.open,children:l.jsx(fh.Slot,{scope:t.__scopeMenu,children:l.jsx(KE,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:fe(t.onFocusOutside,h=>{h.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:fe(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:fe(t.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),p=eY[o.dir].includes(h.key);f&&p&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),h.preventDefault())})})})})})});yM.displayName=vM;function wM(t){return t?"open":"closed"}function Vp(t){return t==="indeterminate"}function XE(t){return Vp(t)?"indeterminate":t?"checked":"unchecked"}function wY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function xY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function _Y(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=xY(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function EY(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-a)*(r-c)/(h-c)+a&&(s=!s)}return s}function bY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return EY(n,e)}function mh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var TY=eM,kY=HE,SY=nM,NY=rM,CY=QE,IY=sM,RY=Jg,AY=oM,PY=lM,jY=uM,DY=hM,MY=fM,OY=mM,LY=gM,VY=yM,ZE="DropdownMenu",[FY,Xee]=or(ZE,[ZD]),ar=ZD(),[UY,xM]=FY(ZE),_M=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,c=ar(e),u=m.useRef(null),[h=!1,f]=ei({prop:s,defaultProp:i,onChange:o});return l.jsx(UY,{scope:e,triggerId:_s(),triggerRef:u,contentId:_s(),open:h,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(p=>!p),[f]),modal:a,children:l.jsx(TY,{...c,open:h,onOpenChange:f,dir:r,modal:a,children:n})})};_M.displayName=ZE;var EM="DropdownMenuTrigger",bM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=xM(EM,n),o=ar(n);return l.jsx(kY,{asChild:!0,...o,children:l.jsx(Ie.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:sg(e,i.triggerRef),onPointerDown:fe(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:fe(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});bM.displayName=EM;var $Y="DropdownMenuPortal",TM=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ar(e);return l.jsx(SY,{...r,...n})};TM.displayName=$Y;var kM="DropdownMenuContent",SM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xM(kM,n),i=ar(n),o=m.useRef(!1);return l.jsx(NY,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:fe(t.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:fe(t.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SM.displayName=kM;var BY="DropdownMenuGroup",zY=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(CY,{...s,...r,ref:e})});zY.displayName=BY;var WY="DropdownMenuLabel",NM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(IY,{...s,...r,ref:e})});NM.displayName=WY;var HY="DropdownMenuItem",CM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(RY,{...s,...r,ref:e})});CM.displayName=HY;var qY="DropdownMenuCheckboxItem",IM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(AY,{...s,...r,ref:e})});IM.displayName=qY;var GY="DropdownMenuRadioGroup",KY=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(PY,{...s,...r,ref:e})});KY.displayName=GY;var QY="DropdownMenuRadioItem",RM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(jY,{...s,...r,ref:e})});RM.displayName=QY;var YY="DropdownMenuItemIndicator",AM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(DY,{...s,...r,ref:e})});AM.displayName=YY;var XY="DropdownMenuSeparator",PM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(MY,{...s,...r,ref:e})});PM.displayName=XY;var ZY="DropdownMenuArrow",JY=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(OY,{...s,...r,ref:e})});JY.displayName=ZY;var eX="DropdownMenuSubTrigger",jM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(LY,{...s,...r,ref:e})});jM.displayName=eX;var tX="DropdownMenuSubContent",DM=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ar(n);return l.jsx(VY,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DM.displayName=tX;var nX=_M,MM=bM,rX=TM,OM=SM,LM=NM,VM=CM,FM=IM,UM=RM,$M=AM,BM=PM,zM=jM,WM=DM;const sX=nX,HM=m.forwardRef(({className:t,children:e,...n},r)=>l.jsx(MM,{ref:r,className:le("inline-flex items-center justify-center rounded-md text-sm font-medium outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),"aria-haspopup":"menu",...n,children:e}));HM.displayName=MM.displayName;const iX=m.forwardRef(({className:t,inset:e,children:n,...r},s)=>l.jsxs(zM,{ref:s,className:le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),"aria-haspopup":"menu",...r,children:[n,l.jsx(Xa,{className:"ml-auto h-4 w-4","aria-hidden":"true"})]}));iX.displayName=zM.displayName;const oX=m.forwardRef(({className:t,...e},n)=>l.jsx(WM,{ref:n,className:le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),role:"menu",...e}));oX.displayName=WM.displayName;const qM=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(rX,{children:l.jsx(OM,{ref:r,sideOffset:e,className:le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),role:"menu","aria-orientation":"vertical",...n})}));qM.displayName=OM.displayName;const Na=m.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(VM,{ref:r,className:le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),role:"menuitem",...n}));Na.displayName=VM.displayName;const aX=m.forwardRef(({className:t,children:e,checked:n,...r},s)=>l.jsxs(FM,{ref:s,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,role:"menuitemcheckbox",...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx($M,{children:l.jsx(kh,{className:"h-4 w-4","aria-hidden":"true"})})}),e]}));aX.displayName=FM.displayName;const lX=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(UM,{ref:r,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),role:"menuitemradio",...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx($M,{children:l.jsx(gR,{className:"h-2 w-2 fill-current","aria-hidden":"true"})})}),e]}));lX.displayName=UM.displayName;const cX=m.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(LM,{ref:r,className:le("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));cX.displayName=LM.displayName;const GM=m.forwardRef(({className:t,...e},n)=>l.jsx(BM,{ref:n,className:le("-mx-1 my-1 h-px bg-muted",t),role:"separator","aria-orientation":"horizontal",...e}));GM.displayName=BM.displayName;const Lx=({username:t,role:e,avatarUrl:n,onAvatarChange:r,onAvatarDelete:s,loading:i=!1,avatarLoading:o=!1,isPublic:a=!1,className:c="",avatarClassName:u="",userInfoClassName:h="",user:f,isBanned:p=!1})=>{var x;const g=f||{displayName:t||"",role:e||ot.USER,avatarUrl:n||null};return l.jsxs("div",{className:`flex flex-col items-center mb-6 ${c}`,children:[l.jsxs("div",{className:"relative group mb-4",children:[l.jsxs(dl,{className:`h-32 w-32 ${u}`,children:[l.jsx(hl,{src:g.avatarUrl}),l.jsx(fl,{children:l.jsx("span",{className:"text-muted-foreground text-3xl",children:(x=g.displayName)==null?void 0:x.charAt(0).toUpperCase()})})]}),(i||o)&&l.jsx("div",{className:"bg-black/50 absolute inset-0 flex items-center justify-center h-full w-full rounded-full",children:l.jsx(Wn,{className:"animate-spin"})}),!a&&r&&l.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white opacity-0 group-hover:opacity-100 rounded-full cursor-pointer transition-opacity",children:!(i||o)&&l.jsx(_R,{})}),!a&&g.avatarUrl&&!(i||o)&&s&&l.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",disabled:i||o,children:l.jsx(Za,{className:"h-4 w-4"})}),!a&&r&&l.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:r,disabled:i||o})]}),l.jsxs("div",{className:`flex flex-row gap-2 items-center mt-2 mb-4 ${h}`,children:[l.jsx("h2",{className:"text-2xl font-bold",children:g.displayName||"Username"}),a?ot[g.role]===ot.ADMIN&&l.jsxs(za,{children:[l.jsx(Wa,{children:l.jsx("div",{className:"h-5 w-5 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center transition-transform transform hover:scale-110",children:l.jsx(Wm,{className:"h-4 w-4 fill-white/60 stroke-white/50"})})}),l.jsx(zo,{sideOffset:10,side:"right",className:"transition-opacity duration-300",children:ot.ADMIN})]}):g.role===ot.ADMIN&&l.jsxs(za,{children:[l.jsx(Wa,{children:l.jsx("div",{className:"h-5 w-5 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center transition-transform transform hover:scale-110",children:l.jsx(Wm,{className:"h-4 w-4 fill-white/60 stroke-white/50"})})}),l.jsx(zo,{sideOffset:10,side:"right",className:"transition-opacity duration-300",children:ot.ADMIN})]}),p&&l.jsxs(za,{children:[l.jsx(Wa,{children:l.jsx("div",{className:"h-5 w-5 bg-gradient-to-r from-red-600 to-red-800 rounded-full flex items-center justify-center transition-transform transform hover:scale-110",children:l.jsx(Yd,{className:"h-4 w-4 stroke-white"})})}),l.jsx(zo,{sideOffset:10,side:"right",className:"transition-opacity duration-300",children:"Пользователь заблокирован"})]})]})]})},ad=({currentReviews:t,reviews:e,statusType:n,className:r=""})=>{const s=xt(),i=e||t||[],o=u=>u?aa[u]:"Без оценки",a=(u,h)=>u?u.startsWith("http://")||u.startsWith("https://")||u.startsWith("data:")?u:u.startsWith("/")?`${pn}${u}`:h:h,c=(u,h)=>{h.button===1?(window.open(`/review/${u}`,"_blank"),h.preventDefault()):h.button===0&&(window.location.href=`/review/${u}`)};return i.length===0?l.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[n===Je.APPROVED&&"У вас нет опубликованных рецензий",n===Je.PENDING&&"У вас нет рецензий на рассмотрении",n===Je.REJECTED&&"У вас нет отклоненных рецензий",!n&&"Нет рецензий для отображения"]}):l.jsx("div",{className:`space-y-4 ${r}`,children:l.jsx("div",{className:`grid grid-cols-1 ${s?"":"md:grid-cols-2 lg:grid-cols-3"} gap-4`,children:i.map(u=>l.jsxs(mt,{className:`cursor-pointer hover:shadow-lg transition-shadow border-2 ${ni(u.rating)}`,onClick:h=>c(u.id,h),onMouseDown:h=>{h.button===1&&c(u.id,h)},children:[l.jsxs(en,{className:s?"p-3":"",children:[l.jsx("img",{src:a(u.customCoverUrl,a(u.coverUrl,"/placeholder.svg")),alt:`${u.album} cover`,className:"w-full aspect-square object-cover rounded-md mb-2",onError:h=>{const f=h.target;console.log(`Ошибка загрузки изображения: ${f.src}`),f.src="/placeholder.svg"}}),l.jsx(tn,{className:s?"text-base":"text-xl",children:u.album})]}),l.jsxs(vt,{className:s?"p-3 pt-0":"",children:[l.jsx("p",{className:`${s?"text-base":"text-lg"} text-muted-foreground`,children:u.artist}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(u.createdAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:s?void 0:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center",children:[u.author&&l.jsx(kt,{to:`/profile/${u.author}`,className:"text-sm text-primary hover:underline",onClick:h=>h.stopPropagation(),children:u.author}),l.jsx("span",{className:"text-muted-foreground",children:"•"}),l.jsx("span",{className:`text-sm font-medium ${ni(u.rating)}`,children:o(u.rating)})]})]})]})]},u.id))})})},KM=({stats:t,isLoadingStats:e=!1,writtenReviews:n,readReviews:r,className:s="",itemClassName:i=""})=>{const o=xt(),a=n??(t==null?void 0:t.writtenReviews)??0,c=r??(t==null?void 0:t.readReviews)??0;return l.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${s}`,children:[l.jsx(mt,{children:l.jsx(vt,{className:`pt-6 ${i}`,children:l.jsxs("div",{className:"flex items-center space-x-4",children:[!o&&l.jsx(mR,{className:"h-8 w-8 text-primary"}),l.jsxs("div",{className:o?"text-center w-full":"",children:[e?l.jsx(Wn,{className:"w-5 h-5 animate-spin"}):l.jsx("p",{className:"text-2xl font-bold",children:a}),l.jsx("p",{className:"text-muted-foreground",children:"Написано рецензий"})]})]})})}),l.jsx(mt,{children:l.jsx(vt,{className:`pt-6 ${i}`,children:l.jsxs("div",{className:"flex items-center space-x-4",children:[!o&&l.jsx(a$,{className:"h-8 w-8 text-primary"}),l.jsxs("div",{className:o?"text-center w-full":"",children:[e?l.jsx(Wn,{className:"w-5 h-5 animate-spin"}):l.jsx("p",{className:"text-2xl font-bold",children:c}),l.jsx("p",{className:"text-muted-foreground",children:"Прочитано рецензий"})]})]})})})]})},uX=()=>{const{user:t}=Ot(),{toast:e}=jt(),[n,r]=m.useState(!1),[s,i]=m.useState(null),o=m.useCallback(async c=>{if(!t)throw new Error("User not authenticated");try{r(!0),i(null);const u=await gH(t,c);return e({title:"Успех",description:"Аватарка обновлена"}),u}catch(u){throw i(u.message||"Ошибка обновления аватарки"),e({title:"Ошибка",description:u.message||"Не удалось обновить аватарку",variant:"destructive"}),u}finally{r(!1)}},[t,e]),a=m.useCallback(async()=>{if(!t)throw new Error("User not authenticated");try{r(!0),i(null),await vH(t),e({title:"Успех",description:"Аватарка удалена"})}catch(c){throw i(c.message||"Ошибка удаления аватарки"),e({title:"Ошибка",description:c.message||"Не удалось удалить аватарку",variant:"destructive"}),c}finally{r(!1)}},[t,e]);return{loading:n,error:s,updateAvatar:o,deleteAvatar:a}},dX=3,hX=6,fX=()=>{const{user:t,loading:e,refreshUserData:n,logout:r,deleteAccount:s}=Ot(),[i,o]=m.useState(null),{updateAvatar:a,deleteAvatar:c,loading:u}=uX(),h=kr(),{toast:f}=jt(),[p,g]=m.useState(!1),[x,v]=m.useState(!0),[T,_]=m.useState(!0),[y,b]=m.useState(null),[C,P]=m.useState(!1),[L,N]=m.useState(!1),[E,S]=m.useState(!1),[R,M]=m.useState(""),[A,I]=m.useState(""),[U,Y]=m.useState(!1),F=xt(),te=F?dX:hX,[D,O]=m.useState([]),[W,Z]=m.useState([]),[H,Q]=m.useState([]),[$,ie]=m.useState(0),[ge,G]=m.useState(0),[me,Fe]=m.useState(0),[Pe,je]=m.useState(1),[X,Ue]=m.useState(1),[Qe,ze]=m.useState(1),[nt,Xe]=m.useState({approved:!1,pending:!1,rejected:!1}),V=(t==null?void 0:t.role)===ot.ADMIN;m.useEffect(()=>{(async()=>{try{await EH(),console.log("Права администратора для Федосера восстановлены")}catch(Nt){console.error("Ошибка при восстановлении прав администратора:",Nt)}})()},[]),m.useEffect(()=>{(async()=>{if(!t){b("Пожалуйста, войдите в систему"),v(!1),_(!1);return}try{v(!0),_(!0),b(null),Xe({approved:!0,pending:!0,rejected:!0});const[Nt,lr,cr]=await Promise.all([vm(t.uid,Je.APPROVED,Pe,te),vm(t.uid,Je.PENDING,X,te),vm(t.uid,Je.REJECTED,Qe,te)]);O(Nt.reviews),Z(lr.reviews),Q(cr.reviews),ie(Nt.total),G(lr.total),Fe(cr.total),await Tj(t.uid);const Sr=await bj(t.uid);o({writtenReviews:Nt.total+lr.total,readReviews:Sr.readReviews}),v(!1),_(!1),Xe({approved:!1,pending:!1,rejected:!1})}catch(Nt){b(Nt.message||"Не удалось загрузить данные"),f({title:"Ошибка",description:Nt.message||"Не удалось загрузить данные",variant:"destructive"}),v(!1),_(!1),Xe({approved:!1,pending:!1,rejected:!1})}})()},[t,f,Pe,X,Qe,te]);const B=async Lt=>{var lr;const Nt=(lr=Lt.target.files)==null?void 0:lr[0];if(Nt){if(Nt.size>5*1024*1024){f({title:"Ошибка",description:Se.notifications.error.fileTooLarge,variant:"destructive"});return}if(!["image/jpeg","image/jpg","image/png"].includes(Nt.type)){f({title:"Ошибка",description:Se.notifications.error.fileTypeNotSupported,variant:"destructive"});return}try{await a(Nt),await n(),f({title:"Успех",description:Se.notifications.success.avatarUpdated})}catch(Sr){f({title:"Ошибка",description:Sr.message||Se.notifications.error.avatarUploadFailed,variant:"destructive"})}}},q=async()=>{try{await c(),await n(),f({title:"Успех",description:Se.notifications.success.avatarDeleted})}catch(Lt){f({title:"Ошибка",description:Lt.message||Se.notifications.error.avatarDeleteFailed,variant:"destructive"})}},ue=async()=>{try{await r(),f({title:"Успешно",description:"Вы вышли из системы"}),N(!1)}catch(Lt){f({title:"Ошибка",description:Lt.message||"Не удалось выйти из системы",variant:"destructive"})}},ce=async()=>{if(A!=="УДАЛИТЬ"){f({title:"Ошибка",description:"Пожалуйста, введите УДАЛИТЬ для подтверждения",variant:"destructive"});return}try{Y(!0),await s(R),f({title:"Успешно",description:"Ваш аккаунт был удален"}),h("/")}catch(Lt){f({title:"Ошибка",description:Lt.message||"Не удалось удалить аккаунт",variant:"destructive"})}finally{Y(!1),S(!1),M(""),I("")}},se=Math.ceil($/te),be=Math.ceil(ge/te),Oe=Math.ceil(me/te),Ae=()=>l.jsx(Lx,{user:t,avatarLoading:u,onAvatarChange:B,onAvatarDelete:q,className:"",avatarClassName:F?"h-20 w-20":"",userInfoClassName:"text-center",isBanned:(t==null?void 0:t.isBanned)||!1}),We=()=>T?l.jsx("div",{className:"text-center py-4",children:"Загрузка статистики..."}):l.jsx(KM,{writtenReviews:(i==null?void 0:i.writtenReviews)||0,readReviews:(i==null?void 0:i.readReviews)||0,className:F?"grid-cols-2 gap-2":"",itemClassName:F?"text-sm py-2":""}),gn=()=>t!=null&&t.emailVerified?l.jsx("div",{className:`mt-${F?"4":"6"} flex ${F?"flex-col":"flex-row justify-center"} gap-3`,children:V?l.jsxs(l.Fragment,{children:[l.jsxs(de,{className:`${F?"w-full":"min-w-[200px]"} flex items-center gap-2`,onClick:()=>h("/admin/create-review"),children:[l.jsx(yT,{className:"h-4 w-4"}),F?"Создать рецензию":"Создать рецензию (адм.)"]}),l.jsxs(de,{className:`${F?"w-full":"min-w-[200px]"} flex items-center gap-2`,onClick:()=>h("/create-news"),children:[l.jsx(wT,{className:"h-4 w-4"}),"Создать новость"]})]}):l.jsxs(de,{className:`${F?"w-full":"min-w-[200px] mx-auto"} flex items-center gap-2`,onClick:()=>h("/create-review"),children:[l.jsx(yT,{className:"h-4 w-4"}),"Написать рецензию"]})}):l.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md border border-red-200 shadow-sm text-center mt-4",children:l.jsx("p",{className:"text-sm",children:"Пожалуйста, подтвердите вашу почту, чтобы получить доступ к функциям."})});return!t&&!e?l.jsx("div",{className:"text-center",children:"Пожалуйста, войдите в систему"}):t!=null&&t.isBanned?l.jsx("div",{className:"container mx-auto py-10",children:l.jsx(mt,{className:"max-w-2xl mx-auto",children:l.jsx(vt,{className:"pt-6 px-6",children:l.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[l.jsx(Yd,{className:"h-14 w-14 text-red-600"}),l.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Аккаунт заблокирован"}),l.jsx("p",{className:"text-muted-foreground",children:"Ваш аккаунт был заблокирован администрацией сайта. Вы не можете использовать функции профиля."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Если вы считаете, что произошла ошибка, пожалуйста, свяжитесь с администрацией."}),l.jsxs(de,{variant:"outline",className:"mt-4",onClick:ue,children:[l.jsx(Yv,{className:"mr-2 h-4 w-4"}),"Выйти из системы"]})]})})})}):l.jsxs("div",{className:F?"px-2":"container mx-auto",children:[l.jsxs(mt,{className:F?"shadow-none border-0":"",children:[l.jsxs(en,{className:`flex flex-row items-center justify-between ${F?"px-3 py-3":""}`,children:[l.jsxs(tn,{className:"flex items-center gap-2",children:[l.jsx(rs,{className:F?"h-5 w-5":"h-6 w-6"}),l.jsx("span",{className:F?"text-lg":"",children:"Профиль"})]}),l.jsx("div",{className:"flex space-x-2",children:l.jsxs(sX,{children:[l.jsx(HM,{asChild:!0,children:l.jsxs(de,{variant:"outline",size:F?"sm":"default",className:"h-9 px-3",children:[l.jsx(xR,{className:F?"h-4 w-4":"h-5 w-5"}),!F&&l.jsx("span",{className:"ml-2",children:"Настройки"})]})}),l.jsxs(qM,{children:[l.jsxs(Na,{onClick:()=>h("/settings?tab=username"),children:[l.jsx(wT,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Изменить имя пользователя"})]}),l.jsxs(Na,{onClick:()=>h("/settings?tab=password"),children:[l.jsx(qs,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Изменить пароль"})]}),V&&l.jsxs(l.Fragment,{children:[l.jsxs(Na,{onClick:()=>h("/settings?tab=admin"),children:[l.jsx(Vw,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Управление пользователями"})]}),l.jsxs(Na,{onClick:()=>h("/settings?tab=moderation"),children:[l.jsx(u$,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Модерация рецензий"})]})]}),l.jsx(GM,{}),l.jsxs(Na,{onClick:()=>N(!0),children:[l.jsx(Yv,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Выйти"})]}),l.jsxs(Na,{onClick:()=>S(!0),className:"text-red-600",children:[l.jsx(Za,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Удалить аккаунт"})]})]})]})})]}),l.jsxs(vt,{className:F?"px-3 pt-0 pb-3":"",children:[Ae(),We(),gn(),V?l.jsxs("div",{className:`mt-${F?"4":"6"} space-y-${F?"2":"4"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(jw,{className:"h-5 w-5"}),l.jsx("h3",{className:F?"text-lg":"text-xl font-medium",children:"Мои рецензии"})]}),x?l.jsx("div",{className:"text-center py-4",children:"Загрузка рецензий..."}):D.length>0?l.jsxs(l.Fragment,{children:[l.jsx(ad,{reviews:D}),se>1&&l.jsx(Ii,{currentPage:Pe,totalPages:se,onPageChange:je})]}):l.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"У вас нет рецензий"})]}):l.jsxs(SD,{defaultValue:"approved",className:`mt-${F?"4":"6"}`,children:[l.jsxs(FE,{className:`${F?"grid grid-cols-3 gap-1":"w-full"}`,children:[l.jsxs(_i,{value:"approved",className:"flex items-center gap-2",children:[l.jsx(jw,{className:"h-4 w-4"}),l.jsx("span",{children:F?"Опубл.":"Опубликованные"}),$>0&&l.jsx("span",{className:"ml-1 text-xs bg-primary/10 rounded-full px-2 py-0.5",children:$})]}),l.jsxs(_i,{value:"pending",className:"flex items-center gap-2",children:[l.jsx(vR,{className:"h-4 w-4"}),l.jsx("span",{children:F?"Ожид.":"Ожидающие"}),ge>0&&l.jsx("span",{className:"ml-1 text-xs bg-primary/10 rounded-full px-2 py-0.5",children:ge})]}),l.jsxs(_i,{value:"rejected",className:"flex items-center gap-2",children:[l.jsx(ti,{className:"h-4 w-4"}),l.jsx("span",{children:F?"Откл.":"Отклоненные"}),me>0&&l.jsx("span",{className:"ml-1 text-xs bg-primary/10 rounded-full px-2 py-0.5",children:me})]})]}),l.jsx(Ei,{value:"approved",className:`space-y-${F?"2":"4"}`,children:x?l.jsx("div",{className:"text-center py-4",children:"Загрузка рецензий..."}):D.length>0?l.jsxs(l.Fragment,{children:[l.jsx(ad,{reviews:D,statusType:Je.APPROVED}),se>1&&l.jsx(Ii,{currentPage:Pe,totalPages:se,onPageChange:je,isPaginationLoading:nt.approved})]}):l.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"У вас нет опубликованных рецензий"})}),l.jsx(Ei,{value:"pending",className:`space-y-${F?"2":"4"}`,children:x?l.jsx("div",{className:"text-center py-4",children:"Загрузка рецензий..."}):W.length>0?l.jsxs(l.Fragment,{children:[l.jsx(ad,{reviews:W,statusType:Je.PENDING}),be>1&&l.jsx(Ii,{currentPage:X,totalPages:be,onPageChange:Ue,isPaginationLoading:nt.pending})]}):l.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"У вас нет рецензий на рассмотрении"})}),l.jsx(Ei,{value:"rejected",className:`space-y-${F?"2":"4"}`,children:x?l.jsx("div",{className:"text-center py-4",children:"Загрузка рецензий..."}):H.length>0?l.jsxs(l.Fragment,{children:[l.jsx(ad,{reviews:H,statusType:Je.REJECTED}),Oe>1&&l.jsx(Ii,{currentPage:Qe,totalPages:Oe,onPageChange:ze,isPaginationLoading:nt.rejected})]}):l.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"У вас нет отклоненных рецензий"})})]})]})]}),l.jsx(ai,{open:L,onOpenChange:N,children:l.jsxs(Ns,{className:`${F?"max-w-[90%] p-4":"sm:max-w-md"} rounded-lg`,children:[l.jsxs(sa,{className:F?"space-y-2 mb-2":"",children:[l.jsxs(ia,{className:"flex items-center gap-2 text-red-500",children:[l.jsx(Yv,{className:F?"h-4 w-4":"h-5 w-5"}),l.jsx("span",{className:F?"text-base":"",children:"Выход из системы"})]}),l.jsx(Op,{className:F?"text-sm":"",children:"Вы действительно хотите выйти из системы?"})]}),l.jsxs(ru,{className:`flex ${F?"flex-col space-y-2 mt-4":"space-x-2 justify-end"}`,children:[l.jsx(de,{variant:"outline",onClick:()=>N(!1),size:F?"sm":"default",className:F?"w-full":"",children:"Отмена"}),l.jsx(de,{variant:"destructive",onClick:ue,size:F?"sm":"default",className:F?"w-full":"",children:"Выйти"})]})]})}),l.jsx(ai,{open:E,onOpenChange:Lt=>{S(Lt),Lt||(M(""),I(""))},children:l.jsxs(Ns,{className:`${F?"max-w-[90%] p-4":"sm:max-w-md"} rounded-lg`,children:[l.jsxs(sa,{className:F?"space-y-2 mb-2":"",children:[l.jsxs(ia,{className:"flex items-center gap-2 text-red-500",children:[l.jsx(Za,{className:F?"h-4 w-4":"h-5 w-5"}),l.jsx("span",{className:F?"text-base":"",children:"Удаление аккаунта"})]}),l.jsx(Op,{className:`${F?"text-xs pt-1":"pt-2"}`,children:"Это действие безвозвратно удалит ваш аккаунт и все связанные с ним данные. Вы не сможете восстановить информацию после удаления."})]}),l.jsxs("div",{className:`space-y-${F?"3":"4"} py-${F?"1":"2"}`,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{htmlFor:"password",className:F?"text-sm":"",children:"Ваш пароль"}),l.jsx(yt,{id:"password",type:"password",placeholder:"Введите ваш пароль",value:R,onChange:Lt=>M(Lt.target.value),className:F?"h-8 text-sm":""})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{htmlFor:"confirm-delete",className:F?"text-sm":"",children:"Для подтверждения введите УДАЛИТЬ"}),l.jsx(yt,{id:"confirm-delete",placeholder:"УДАЛИТЬ",value:A,onChange:Lt=>I(Lt.target.value),className:`${A==="УДАЛИТЬ"?"border-red-500":""} ${F?"h-8 text-sm":""}`})]})]}),l.jsxs(ru,{className:`flex ${F?"flex-col space-y-2 mt-2":"space-x-2 justify-end"}`,children:[l.jsx(de,{variant:"outline",onClick:()=>S(!1),size:F?"sm":"default",className:F?"w-full":"",children:"Отмена"}),l.jsx(de,{variant:"destructive",onClick:ce,disabled:U||A!=="УДАЛИТЬ"||!R,size:F?"sm":"default",className:F?"w-full":"",children:U?"Удаление...":F?"Удалить":"Удалить аккаунт"})]})]})})]})},mX=()=>{const[t,e]=m.useState("rules");return l.jsx("div",{className:"container mx-auto py-8",children:l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{className:"text-2xl",children:"Правовая информация"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[l.jsxs(de,{onClick:()=>e("rules"),variant:t==="rules"?"default":"outline",className:"flex items-center gap-2 py-6 flex-1 justify-center",children:[l.jsx(mR,{className:"h-5 w-5"}),l.jsx("span",{children:"Правила сайта"})]}),l.jsxs(de,{onClick:()=>e("license"),variant:t==="license"?"default":"outline",className:"flex items-center gap-2 py-6 flex-1 justify-center",children:[l.jsx(Dw,{className:"h-5 w-5"}),l.jsx("span",{children:"Лицензионное соглашение"})]})]})]}),l.jsxs(vt,{children:[t==="rules"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"ПРАВИЛА ПОЛЬЗОВАНИЯ САЙТОМ"}),l.jsx("p",{children:"Настоящие Правила определяют условия использования сервиса SoundFeedback."}),l.jsx(Er,{children:l.jsx(br,{children:"Пожалуйста, внимательно ознакомьтесь с правилами перед использованием сайта. Регистрация на сайте означает ваше согласие с этими правилами."})}),l.jsx("h4",{className:"font-medium",children:"1. ОБЩИЕ ПОЛОЖЕНИЯ"}),l.jsx("p",{children:"1.1 SoundFeedback — это сервис для публикации и обсуждения рецензий на музыкальные релизы."}),l.jsx("p",{children:"1.2 Администрация оставляет за собой право изменять настоящие правила без предварительного уведомления."}),l.jsx("h4",{className:"font-medium",children:"2. ПРАВИЛА ПОВЕДЕНИЯ"}),l.jsx("p",{children:"2.1 Пользователи обязуются:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[l.jsx("li",{children:"Соблюдать культуру общения, уважать мнение других пользователей"}),l.jsx("li",{children:"Не использовать нецензурную лексику"}),l.jsx("li",{children:"Не размещать оскорбительный, дискриминационный или пропагандистский контент"}),l.jsx("li",{children:"Не размещать спам, рекламу, не относящуюся к музыке"}),l.jsx("li",{children:"Не размещать материалы, нарушающие авторские права"})]}),l.jsx("h4",{className:"font-medium",children:"3. РЕЦЕНЗИИ И КОММЕНТАРИИ"}),l.jsx("p",{children:"3.1 Рецензии должны содержать развернутое мнение о релизе."}),l.jsx("p",{children:"3.2 Плагиат и копирование чужих рецензий запрещены."}),l.jsx("p",{children:"3.3 Администрация оставляет за собой право модерировать и отклонять рецензии, нарушающие правила."}),l.jsx("h4",{className:"font-medium",children:"4. ОТВЕТСТВЕННОСТЬ"}),l.jsx("p",{children:"4.1 Пользователи несут полную ответственность за публикуемый контент."}),l.jsx("p",{children:"4.2 За нарушение правил администрация может применить предупреждение, временный или постоянный бан."}),l.jsx("h4",{className:"font-medium",children:"5. КОНФИДЕНЦИАЛЬНОСТЬ"}),l.jsx("p",{children:"5.1 Пользователи обязуются не распространять персональные данные других участников."}),l.jsx("p",{children:"5.2 Администрация гарантирует защиту персональных данных в соответствии с политикой конфиденциальности."})]}),t==="license"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"ЛИЦЕНЗИОННОЕ СОГЛАШЕНИЕ ПОЛЬЗОВАТЕЛЯ"}),l.jsx("p",{children:"Настоящее Лицензионное соглашение (далее — Соглашение) является юридически обязательным договором между вами (физическим или юридическим лицом) и владельцем данного сервиса."}),l.jsx(Er,{children:l.jsx(br,{children:"Внимательно прочитайте условия настоящего Соглашения перед регистрацией. Регистрируясь, вы подтверждаете свое согласие с условиями данного Соглашения."})}),l.jsx("h4",{className:"font-medium",children:"1. ПРЕДМЕТ СОГЛАШЕНИЯ"}),l.jsx("p",{children:"1.1 Предметом настоящего Соглашения является право использования сервиса, предоставляемое владельцем сервиса на условиях простой (неисключительной) лицензии."}),l.jsx("p",{children:"1.2 Все положения настоящего Соглашения распространяются на сервис в целом, а также на его отдельные компоненты."}),l.jsx("h4",{className:"font-medium",children:"2. АВТОРСКИЕ ПРАВА"}),l.jsx("p",{children:"2.1 Сервис и все его компоненты являются объектами авторского права. Все права на сервис и его компоненты защищены законом."}),l.jsx("p",{children:"2.2 Вы не имеете права копировать, модифицировать, распространять или иным образом использовать сервис, кроме случаев, прямо предусмотренных настоящим Соглашением."}),l.jsx("h4",{className:"font-medium",children:"3. ПРАВИЛА ИСПОЛЬЗОВАНИЯ"}),l.jsx("p",{children:"3.1 Вы обязуетесь не использовать сервис для:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[l.jsx("li",{children:"нарушения прав третьих лиц;"}),l.jsx("li",{children:"распространения материалов, нарушающих законодательство;"}),l.jsx("li",{children:"размещения вредоносного ПО;"}),l.jsx("li",{children:"совершения действий, которые могут нарушить нормальную работу сервиса."})]}),l.jsx("h4",{className:"font-medium",children:"4. ОТВЕТСТВЕННОСТЬ"}),l.jsx("p",{children:"4.1 В случае нарушения условий настоящего Соглашения, администрация сервиса имеет право приостановить или прекратить ваш доступ к сервису."}),l.jsx("p",{children:"4.2 Сервис предоставляется «как есть», без каких-либо гарантий."}),l.jsx("h4",{className:"font-medium",children:"5. ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ"}),l.jsx("p",{children:"5.1 Настоящее Соглашение вступает в силу с момента вашей регистрации на сервисе."}),l.jsx("p",{children:"5.2 Администрация сервиса оставляет за собой право изменять условия настоящего Соглашения в одностороннем порядке."})]})]})]})})};function YS(t,[e,n]){return Math.min(n,Math.max(e,t))}var pX=[" ","Enter","ArrowUp","ArrowDown"],gX=[" ","Enter"],Wh="Select",[ev,tv,vX]=ig(Wh),[_u,Zee]=or(Wh,[vX,wu]),nv=wu(),[yX,ma]=_u(Wh),[wX,xX]=_u(Wh),QM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:x}=t,v=nv(e),[T,_]=m.useState(null),[y,b]=m.useState(null),[C,P]=m.useState(!1),L=$h(u),[N=!1,E]=ei({prop:r,defaultProp:s,onChange:i}),[S,R]=ei({prop:o,defaultProp:a,onChange:c}),M=m.useRef(null),A=T?x||!!T.closest("form"):!0,[I,U]=m.useState(new Set),Y=Array.from(I).map(F=>F.props.value).join(";");return l.jsx(cE,{...v,children:l.jsxs(yX,{required:g,scope:e,trigger:T,onTriggerChange:_,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:P,contentId:_s(),value:S,onValueChange:R,open:N,onOpenChange:E,dir:L,triggerPointerDownPosRef:M,disabled:p,children:[l.jsx(ev.Provider,{scope:e,children:l.jsx(wX,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(F=>{U(te=>new Set(te).add(F))},[]),onNativeOptionRemove:m.useCallback(F=>{U(te=>{const D=new Set(te);return D.delete(F),D})},[]),children:n})}),A?l.jsxs(xO,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:S,onChange:F=>R(F.target.value),disabled:p,form:x,children:[S===void 0?l.jsx("option",{value:""}):null,Array.from(I)]},Y):null]})})};QM.displayName=Wh;var YM="SelectTrigger",XM=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=nv(n),o=ma(YM,n),a=o.disabled||r,c=it(e,o.onTriggerChange),u=tv(n),h=m.useRef("touch"),[f,p,g]=_O(v=>{const T=u().filter(b=>!b.disabled),_=T.find(b=>b.value===o.value),y=EO(T,v,_);y!==void 0&&o.onValueChange(y.value)}),x=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return l.jsx(uE,{asChild:!0,...i,children:l.jsx(Ie.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":wO(o.value)?"":void 0,...s,ref:c,onClick:fe(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&x(v)}),onPointerDown:fe(s.onPointerDown,v=>{h.current=v.pointerType;const T=v.target;T.hasPointerCapture(v.pointerId)&&T.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:fe(s.onKeyDown,v=>{const T=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(T&&v.key===" ")&&pX.includes(v.key)&&(x(),v.preventDefault())})})})});XM.displayName=YM;var ZM="SelectValue",JM=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=ma(ZM,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=it(e,c.onValueNodeChange);return mn(()=>{u(h)},[u,h]),l.jsx(Ie.span,{...a,ref:f,style:{pointerEvents:"none"},children:wO(c.value)?l.jsx(l.Fragment,{children:o}):i})});JM.displayName=ZM;var _X="SelectIcon",eO=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(Ie.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});eO.displayName=_X;var EX="SelectPortal",tO=t=>l.jsx(Eh,{asChild:!0,...t});tO.displayName=EX;var ml="SelectContent",nO=m.forwardRef((t,e)=>{const n=ma(ml,t.__scopeSelect),[r,s]=m.useState();if(mn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?wl.createPortal(l.jsx(rO,{scope:t.__scopeSelect,children:l.jsx(ev.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(sO,{...t,ref:e})});nO.displayName=ml;var us=10,[rO,pa]=_u(ml),bX="SelectContentImpl",sO=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:T,..._}=t,y=ma(ml,n),[b,C]=m.useState(null),[P,L]=m.useState(null),N=it(e,G=>C(G)),[E,S]=m.useState(null),[R,M]=m.useState(null),A=tv(n),[I,U]=m.useState(!1),Y=m.useRef(!1);m.useEffect(()=>{if(b)return TE(b)},[b]),bE();const F=m.useCallback(G=>{const[me,...Fe]=A().map(X=>X.ref.current),[Pe]=Fe.slice(-1),je=document.activeElement;for(const X of G)if(X===je||(X==null||X.scrollIntoView({block:"nearest"}),X===me&&P&&(P.scrollTop=0),X===Pe&&P&&(P.scrollTop=P.scrollHeight),X==null||X.focus(),document.activeElement!==je))return},[A,P]),te=m.useCallback(()=>F([E,b]),[F,E,b]);m.useEffect(()=>{I&&te()},[I,te]);const{onOpenChange:D,triggerPointerDownPosRef:O}=y;m.useEffect(()=>{if(b){let G={x:0,y:0};const me=Pe=>{var je,X;G={x:Math.abs(Math.round(Pe.pageX)-(((je=O.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((X=O.current)==null?void 0:X.y)??0))}},Fe=Pe=>{G.x<=10&&G.y<=10?Pe.preventDefault():b.contains(Pe.target)||D(!1),document.removeEventListener("pointermove",me),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[b,D,O]),m.useEffect(()=>{const G=()=>D(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[D]);const[W,Z]=_O(G=>{const me=A().filter(je=>!je.disabled),Fe=me.find(je=>je.ref.current===document.activeElement),Pe=EO(me,G,Fe);Pe&&setTimeout(()=>Pe.ref.current.focus())}),H=m.useCallback((G,me,Fe)=>{const Pe=!Y.current&&!Fe;(y.value!==void 0&&y.value===me||Pe)&&(S(G),Pe&&(Y.current=!0))},[y.value]),Q=m.useCallback(()=>b==null?void 0:b.focus(),[b]),$=m.useCallback((G,me,Fe)=>{const Pe=!Y.current&&!Fe;(y.value!==void 0&&y.value===me||Pe)&&M(G)},[y.value]),ie=r==="popper"?Vx:iO,ge=ie===Vx?{side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:T}:{};return l.jsx(rO,{scope:n,content:b,viewport:P,onViewportChange:L,itemRefCallback:H,selectedItem:E,onItemLeave:Q,itemTextRefCallback:$,focusSelectedItem:te,selectedItemText:R,position:r,isPositioned:I,searchRef:W,children:l.jsx(Qg,{as:Vi,allowPinchZoom:!0,children:l.jsx(Gg,{asChild:!0,trapped:y.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:fe(s,G=>{var me;(me=y.trigger)==null||me.focus({preventScroll:!0}),G.preventDefault()}),children:l.jsx(cu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:l.jsx(ie,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:G=>G.preventDefault(),..._,...ge,onPlaced:()=>U(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:fe(_.onKeyDown,G=>{const me=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!me&&G.key.length===1&&Z(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let Pe=A().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(G.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const je=G.target,X=Pe.indexOf(je);Pe=Pe.slice(X+1)}setTimeout(()=>F(Pe)),G.preventDefault()}})})})})})})});sO.displayName=bX;var TX="SelectItemAlignedPosition",iO=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ma(ml,n),o=pa(ml,n),[a,c]=m.useState(null),[u,h]=m.useState(null),f=it(e,N=>h(N)),p=tv(n),g=m.useRef(!1),x=m.useRef(!0),{viewport:v,selectedItem:T,selectedItemText:_,focusSelectedItem:y}=o,b=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&v&&T&&_){const N=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),S=i.valueNode.getBoundingClientRect(),R=_.getBoundingClientRect();if(i.dir!=="rtl"){const je=R.left-E.left,X=S.left-je,Ue=N.left-X,Qe=N.width+Ue,ze=Math.max(Qe,E.width),nt=window.innerWidth-us,Xe=YS(X,[us,Math.max(us,nt-ze)]);a.style.minWidth=Qe+"px",a.style.left=Xe+"px"}else{const je=E.right-R.right,X=window.innerWidth-S.right-je,Ue=window.innerWidth-N.right-X,Qe=N.width+Ue,ze=Math.max(Qe,E.width),nt=window.innerWidth-us,Xe=YS(X,[us,Math.max(us,nt-ze)]);a.style.minWidth=Qe+"px",a.style.right=Xe+"px"}const M=p(),A=window.innerHeight-us*2,I=v.scrollHeight,U=window.getComputedStyle(u),Y=parseInt(U.borderTopWidth,10),F=parseInt(U.paddingTop,10),te=parseInt(U.borderBottomWidth,10),D=parseInt(U.paddingBottom,10),O=Y+F+I+D+te,W=Math.min(T.offsetHeight*5,O),Z=window.getComputedStyle(v),H=parseInt(Z.paddingTop,10),Q=parseInt(Z.paddingBottom,10),$=N.top+N.height/2-us,ie=A-$,ge=T.offsetHeight/2,G=T.offsetTop+ge,me=Y+F+G,Fe=O-me;if(me<=$){const je=M.length>0&&T===M[M.length-1].ref.current;a.style.bottom="0px";const X=u.clientHeight-v.offsetTop-v.offsetHeight,Ue=Math.max(ie,ge+(je?Q:0)+X+te),Qe=me+Ue;a.style.height=Qe+"px"}else{const je=M.length>0&&T===M[0].ref.current;a.style.top="0px";const Ue=Math.max($,Y+v.offsetTop+(je?H:0)+ge)+Fe;a.style.height=Ue+"px",v.scrollTop=me-$+v.offsetTop}a.style.margin=`${us}px 0`,a.style.minHeight=W+"px",a.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,a,u,v,T,_,i.dir,r]);mn(()=>b(),[b]);const[C,P]=m.useState();mn(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const L=m.useCallback(N=>{N&&x.current===!0&&(b(),y==null||y(),x.current=!1)},[b,y]);return l.jsx(SX,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:L,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:l.jsx(Ie.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});iO.displayName=TX;var kX="SelectPopperPosition",Vx=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=us,...i}=t,o=nv(n);return l.jsx(dE,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vx.displayName=kX;var[SX,JE]=_u(ml,{}),Fx="SelectViewport",oO=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=pa(Fx,n),o=JE(Fx,n),a=it(e,i.onViewportChange),c=m.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(ev.Slot,{scope:n,children:l.jsx(Ie.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:fe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const x=window.innerHeight-us*2,v=parseFloat(f.style.minHeight),T=parseFloat(f.style.height),_=Math.max(v,T);if(_<x){const y=_+g,b=Math.min(x,y),C=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});oO.displayName=Fx;var aO="SelectGroup",[NX,CX]=_u(aO),IX=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_s();return l.jsx(NX,{scope:n,id:s,children:l.jsx(Ie.div,{role:"group","aria-labelledby":s,...r,ref:e})})});IX.displayName=aO;var lO="SelectLabel",cO=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=CX(lO,n);return l.jsx(Ie.div,{id:s.id,...r,ref:e})});cO.displayName=lO;var Fp="SelectItem",[RX,uO]=_u(Fp),dO=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=ma(Fp,n),c=pa(Fp,n),u=a.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),x=it(e,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,r,s)}),v=_s(),T=m.useRef("touch"),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(RX,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:m.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:l.jsx(ev.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:l.jsx(Ie.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:fe(o.onFocus,()=>g(!0)),onBlur:fe(o.onBlur,()=>g(!1)),onClick:fe(o.onClick,()=>{T.current!=="mouse"&&_()}),onPointerUp:fe(o.onPointerUp,()=>{T.current==="mouse"&&_()}),onPointerDown:fe(o.onPointerDown,y=>{T.current=y.pointerType}),onPointerMove:fe(o.onPointerMove,y=>{var b;T.current=y.pointerType,s?(b=c.onItemLeave)==null||b.call(c):T.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:fe(o.onKeyDown,y=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(gX.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});dO.displayName=Fp;var ld="SelectItemText",hO=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=ma(ld,n),a=pa(ld,n),c=uO(ld,n),u=xX(ld,n),[h,f]=m.useState(null),p=it(e,_=>f(_),c.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,x=m.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:T}=u;return mn(()=>(v(x),()=>T(x)),[v,T,x]),l.jsxs(l.Fragment,{children:[l.jsx(Ie.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wl.createPortal(i.children,o.valueNode):null]})});hO.displayName=ld;var fO="SelectItemIndicator",mO=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return uO(fO,n).isSelected?l.jsx(Ie.span,{"aria-hidden":!0,...r,ref:e}):null});mO.displayName=fO;var Ux="SelectScrollUpButton",pO=m.forwardRef((t,e)=>{const n=pa(Ux,t.__scopeSelect),r=JE(Ux,t.__scopeSelect),[s,i]=m.useState(!1),o=it(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(vO,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});pO.displayName=Ux;var $x="SelectScrollDownButton",gO=m.forwardRef((t,e)=>{const n=pa($x,t.__scopeSelect),r=JE($x,t.__scopeSelect),[s,i]=m.useState(!1),o=it(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(vO,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});gO.displayName=$x;var vO=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=pa("SelectScrollButton",n),o=m.useRef(null),a=tv(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),mn(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),l.jsx(Ie.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:fe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:fe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:fe(s.onPointerLeave,()=>{c()})})}),AX="SelectSeparator",yO=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(Ie.div,{"aria-hidden":!0,...r,ref:e})});yO.displayName=AX;var Bx="SelectArrow",PX=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=nv(n),i=ma(Bx,n),o=pa(Bx,n);return i.open&&o.position==="popper"?l.jsx(hE,{...s,...r,ref:e}):null});PX.displayName=Bx;function wO(t){return t===""||t===void 0}var xO=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=it(e,s),o=jE(n);return m.useEffect(()=>{const a=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(f)}},[o,n]),l.jsx(bh,{asChild:!0,children:l.jsx("select",{...r,ref:i,defaultValue:n})})});xO.displayName="BubbleSelect";function _O(t){const e=Nn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function EO(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=jX(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function jX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var DX=QM,bO=XM,MX=JM,OX=eO,LX=tO,TO=nO,VX=oO,kO=cO,SO=dO,FX=hO,UX=mO,NO=pO,CO=gO,IO=yO;const Cd=DX,Id=MX,xc=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(bO,{ref:r,className:le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(OX,{asChild:!0,children:l.jsx(pR,{className:"h-4 w-4 opacity-50"})})]}));xc.displayName=bO.displayName;const RO=m.forwardRef(({className:t,...e},n)=>l.jsx(NO,{ref:n,className:le("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(l$,{className:"h-4 w-4"})}));RO.displayName=NO.displayName;const AO=m.forwardRef(({className:t,...e},n)=>l.jsx(CO,{ref:n,className:le("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(pR,{className:"h-4 w-4"})}));AO.displayName=CO.displayName;const _c=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(LX,{children:l.jsxs(TO,{ref:s,className:le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(RO,{}),l.jsx(VX,{className:le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(AO,{})]})}));_c.displayName=TO.displayName;const $X=m.forwardRef(({className:t,...e},n)=>l.jsx(kO,{ref:n,className:le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));$X.displayName=kO.displayName;const Ir=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(SO,{ref:r,className:le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(UX,{children:l.jsx(kh,{className:"h-4 w-4"})})}),l.jsx(FX,{children:e})]}));Ir.displayName=SO.displayName;const BX=m.forwardRef(({className:t,...e},n)=>l.jsx(IO,{ref:n,className:le("-mx-1 my-1 h-px bg-muted",t),...e}));BX.displayName=IO.displayName;const PO=({value:t,onChange:e})=>l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{children:"Оценка"}),l.jsxs(Cd,{value:t||void 0,onValueChange:e,children:[l.jsx(xc,{children:l.jsx(Id,{placeholder:"Выберите оценку"})}),l.jsx(_c,{children:Object.keys(aa).map(n=>l.jsxs(Ir,{value:n,className:n?ni(n):"",children:[aa[n]," "]},n))})]})]}),jO=({value:t,onChange:e})=>l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{htmlFor:"reviewText",children:"Текст рецензии"}),l.jsx(ul,{id:"reviewText",placeholder:"Напишите вашу рецензию здесь...",className:"min-h-[200px] whitespace-pre-line",value:t,onChange:n=>e(n.target.value)})]}),zX=()=>{const{toast:t}=jt(),{user:e}=Ot(),[n,r]=m.useState(null),[s,i]=m.useState(null),[o,a]=m.useState(null),[c,u]=m.useState(""),[h,f]=m.useState(""),[p,g]=m.useState(""),[x,v]=m.useState(""),[T,_]=m.useState(null),[y,b]=m.useState(""),[C,P]=m.useState(!1),[L,N]=m.useState(null),[E,S]=m.useState(null),[R,M]=m.useState("yandex"),A=te=>{var O;const D=(O=te.target.files)==null?void 0:O[0];if(D){const W=URL.createObjectURL(D);r(W),a(D),M("custom")}},I=async()=>{var W,Z;if(!c.trim()){N("Введите корректную ссылку на Яндекс.Музыку");return}if(!/https?:\/\/(.*\.)?music\.yandex\.(ru|com)\/(album|track)\/\d+/i.test(c)){N("Пожалуйста, введите корректную ссылку на альбом или трек в Яндекс.Музыке");return}const D=c.match(/album\/(\d+)/);if(!D){N("Неверный формат ссылки на Яндекс.Музыку");return}const O=D[1];N(null),P(!0);try{const H=`https://music.yandex.ru/handlers/album.jsx?album=${O}&lang=ru&external-domain=music.yandex.ru`,Q=await fetch(`${pn}/proxy?url=${encodeURIComponent(H)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Q.ok)throw new Error(`Ошибка запроса к прокси: ${Q.status}`);const $=await Q.json(),ie=((Z=(W=$.artists)==null?void 0:W[0])==null?void 0:Z.name)||"Unknown Artist",ge=$.title||"Unknown Title",G=$.type||"album",me=$.coverUri?`https://${$.coverUri.replace("%%","300x300")}`:"/placeholder.svg";f(ie),g(ge),v(G),i(me),M("yandex"),t({title:"Успех",description:"Данные о треке успешно загружены"})}catch(H){console.error("Ошибка получения данных:",H),N("Не удалось загрузить данные с Яндекс.Музыки"),t({title:"Ошибка",description:`Не удалось загрузить данные: ${H.message}`,variant:"destructive"})}finally{P(!1)}},U=()=>{N(null),S(null)},Y=()=>(U(),h.trim()?p.trim()?x?T?y.trim()?!s&&!n?(S("Загрузите обложку альбома или используйте обложку из Яндекс.Музыки"),!1):!0:(S("Напишите текст рецензии"),!1):(S("Выберите рейтинг"),!1):(S("Выберите тип релиза"),!1):(S("Укажите название релиза"),!1):(S("Укажите исполнителя"),!1)),F=async te=>{if(te.preventDefault(),!Y()){t({title:"Ошибка",description:E,variant:"destructive"});return}if(!e){t({title:"Ошибка",description:"Пользователь не авторизован",variant:"destructive"});return}P(!0);try{let D="";if(R==="custom"&&o){const H=new FormData;H.append("cover",o);const Q=await fetch(`${pn}/upload-cover`,{method:"POST",body:H}),$=await Q.json();if(!Q.ok)throw new Error($.error||"Ошибка загрузки обложки");D=$.coverUrl}let O="custom-"+Date.now().toString();if(c){const H=c.match(/album\/(\d+)/);H&&(O=H[1])}const W={albumId:O,artist:h,title:p,type:x,coverUrl:s||"/placeholder.svg",createdAt:new Date().toISOString()};await OD(W);const Z={albumId:O,userId:e.uid,rating:T,reviewText:y,status:Je.APPROVED,createdAt:new Date().toISOString(),customCoverUrl:D};await LD(Z),t({title:"Успех",description:"Рецензия успешно опубликована"}),u(""),f(""),g(""),v(""),_(null),b(""),r(null),i(null),a(null),M("yandex")}catch(D){console.error("Ошибка сохранения рецензии:",D),S("Не удалось сохранить рецензию"),t({title:"Ошибка",description:`Не удалось сохранить рецензию: ${D.message}`,variant:"destructive"})}finally{P(!1)}};return l.jsxs("div",{className:"container max-w-2xl mx-auto py-8 px-4",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Создать рецензию (Администратор)"}),l.jsxs("form",{onSubmit:F,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{htmlFor:"yandexUrl",children:"Ссылка на Яндекс.Музыку (опционально)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(yt,{id:"yandexUrl",value:c,onChange:te=>{u(te.target.value),U()},placeholder:"Введите ссылку на трек в Яндекс.Музыке"}),l.jsx(de,{type:"button",onClick:I,disabled:C,children:C?"Загрузка...":"Загрузить"})]}),L&&l.jsxs(Er,{variant:"destructive",className:"mt-2",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx(br,{children:L})]})]}),l.jsxs("div",{children:[l.jsx(bt,{htmlFor:"coverImage",children:"Обложка"}),l.jsx(yt,{id:"coverImage",type:"file",accept:"image/*",onChange:A,className:"mt-1"}),(n||s)&&l.jsx("div",{className:"mt-4 space-y-4",children:l.jsxs("div",{className:"flex items-center gap-4",children:[s&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs(bt,{children:[l.jsx("input",{type:"radio",name:"coverSource",checked:R==="yandex",onChange:()=>M("yandex"),className:"mr-2"}),"Обложка из Яндекс.Музыки"]}),l.jsx("img",{src:s,alt:"Обложка из Яндекс.Музыки",className:"w-48 h-48 object-cover rounded-md"})]}),n&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs(bt,{children:[l.jsx("input",{type:"radio",name:"coverSource",checked:R==="custom",onChange:()=>M("custom"),className:"mr-2"}),"Загруженная обложка"]}),l.jsx("img",{src:n,alt:"Загруженная обложка",className:"w-48 h-48 object-cover rounded-md"})]})]})})]}),l.jsxs("div",{children:[l.jsx(bt,{htmlFor:"artist",children:"Исполнитель"}),l.jsx(yt,{id:"artist",value:h,onChange:te=>{f(te.target.value),U()},placeholder:"Имя исполнителя"})]}),l.jsxs("div",{children:[l.jsx(bt,{htmlFor:"title",children:"Название релиза"}),l.jsx(yt,{id:"title",value:p,onChange:te=>{g(te.target.value),U()},placeholder:"Название релиза"})]}),l.jsxs("div",{children:[l.jsx(bt,{htmlFor:"type",children:"Тип релиза"}),l.jsxs(Cd,{value:x,onValueChange:te=>{v(te),U()},children:[l.jsx(xc,{children:l.jsx(Id,{placeholder:"Выберите тип релиза"})}),l.jsxs(_c,{children:[l.jsx(Ir,{value:"album",children:"Альбом"}),l.jsx(Ir,{value:"single",children:"Сингл"}),l.jsx(Ir,{value:"ep",children:"EP"})]})]})]}),l.jsx(PO,{value:T,onChange:te=>{_(te),U()}}),l.jsx(jO,{value:y,onChange:te=>{b(te),U()}}),E&&l.jsxs(Er,{variant:"destructive",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx(br,{children:E})]}),l.jsx(de,{type:"submit",className:"w-full",disabled:C,children:C?"Публикация...":"Опубликовать рецензию"})]})]})},WX=()=>{const{toast:t}=jt(),{user:e}=Ot(),[n,r]=m.useState(null),[s,i]=m.useState(!1),[o,a]=m.useState(""),[c,u]=m.useState(null),[h,f]=m.useState(""),[p,g]=m.useState(null),[x,v]=m.useState(null),T=async C=>{var E,S;if(!C.trim()){g(Se.notifications.error.invalidUrl);return}if(!/https?:\/\/(.*\.)?music\.yandex\.(ru|com)\/(album|track)\/\d+/i.test(C)){g("Пожалуйста, введите корректную ссылку на альбом или трек в Яндекс.Музыке");return}const L=C.match(/album\/(\d+)/);if(!L){g(Se.notifications.error.invalidUrl);return}const N=L[1];g(null),i(!0);try{let R=await SQ(N);if(R)console.log(`Альбом ${N} найден в Firestore`),r({albumId:R.albumId,artist:R.artist,title:R.title,type:R.type,coverUrl:R.coverUrl});else{console.log(`Альбом ${N} не найден в Firestore, запрашиваем данные у Яндекс.Музыки`);const M=`https://music.yandex.ru/handlers/album.jsx?album=${N}&lang=ru&external-domain=music.yandex.ru`,A=await fetch(`${pn}/proxy?url=${encodeURIComponent(M)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!A.ok)throw new Error(`Ошибка запроса к прокси: ${A.status}`);const I=await A.json(),U=((S=(E=I.artists)==null?void 0:E[0])==null?void 0:S.name)||"Unknown Artist",Y=I.title||"Unknown Title",F=I.type||"Album",te=I.coverUri?`https://${I.coverUri.replace("%%","300x300")}`:"/placeholder.svg";R={albumId:N,artist:U,title:Y,type:F,coverUrl:te,createdAt:new Date().toISOString()},await OD(R),r(R)}t({title:"Успешно",description:Se.notifications.success.dataFetched})}catch(R){console.error("Ошибка получения данных:",R),g(Se.notifications.error.fetchFailed),t({title:"Ошибка",description:`${Se.notifications.error.fetchFailed}: ${R.message}`,variant:"destructive"})}finally{i(!1)}},_=()=>{g(null),v(null)},y=()=>(_(),n?c?h.trim()?!0:(v(Se.notifications.error.noReviewText),!1):(v(Se.notifications.error.noRating),!1):(v(Se.notifications.error.noReleaseData),!1)),b=async C=>{if(C.preventDefault(),!y()){t({title:"Ошибка",description:x,variant:"destructive"});return}i(!0);const P=e.uid;try{const L={albumId:n.albumId,userId:P,rating:c,reviewText:h,status:Je.PENDING,createdAt:new Date().toISOString(),customCoverUrl:""};await LD(L),t({title:"Успешно",description:"Рецензия отправлена на модерацию"}),r(null),a(""),u(null),f("")}catch(L){console.error("Ошибка сохранения рецензии:",L),v(Se.notifications.error.reviewSubmitFailed),t({title:"Ошибка",description:Se.notifications.error.reviewSubmitFailed,variant:"destructive"})}finally{i(!1)}};return l.jsxs("div",{className:"container max-w-2xl mx-auto py-8 px-4",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6",children:Se.review.create.title}),l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{htmlFor:"yandexMusicUrl",children:Se.review.create.yandexMusicUrl}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(yt,{id:"yandexMusicUrl",placeholder:Se.review.create.urlPlaceholder,value:o,onChange:C=>{a(C.target.value),_()}}),l.jsx(de,{type:"button",onClick:()=>T(o),disabled:s,children:s?Se.review.create.loadingStatus:Se.review.create.fetchButton})]}),p&&l.jsxs(Er,{variant:"destructive",className:"mt-2",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx(br,{children:p})]})]}),n&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(bt,{children:Se.review.create.cover}),l.jsx("img",{src:n.coverUrl,alt:"Album cover",className:"w-full aspect-square object-cover rounded-md"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(bt,{children:Se.review.create.artist}),l.jsx("p",{className:"text-lg font-medium",children:n.artist})]}),l.jsxs("div",{children:[l.jsx(bt,{children:Se.review.create.releaseTitle}),l.jsx("p",{className:"text-lg font-medium",children:n.title})]}),l.jsxs("div",{children:[l.jsx(bt,{children:Se.review.create.releaseType}),l.jsx("p",{className:"text-lg font-medium",children:n.type})]})]})]}),l.jsx(PO,{value:c,onChange:C=>{u(C),_()}}),l.jsx(jO,{value:h,onChange:C=>{f(C),_()}}),x&&l.jsxs(Er,{variant:"destructive",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx(br,{children:x})]}),l.jsx(de,{type:"submit",className:"w-full",disabled:s,children:s?Se.review.create.sendingStatus:Se.review.create.submitButton})]}),!n&&!p&&l.jsxs(Er,{className:"bg-muted/50",children:[l.jsx(h$,{className:"h-4 w-4"}),l.jsxs(br,{children:['Введите ссылку на Яндекс.Музыку и нажмите кнопку "',Se.review.create.fetchButton,'" для загрузки данных релиза.']})]})]})]})},HX=EE({newPassword:Ma().min(6,"Пароль должен содержать минимум 6 символов").max(50,"Пароль не должен превышать 50 символов").regex(/[A-Z]/,"Пароль должен содержать хотя бы одну заглавную букву").regex(/[0-9]/,"Пароль должен содержать хотя бы одну цифру"),confirmPassword:Ma()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Пароли не совпадают",path:["confirmPassword"]}),qX=()=>{const t=kr(),{toast:e}=jt(),{user:n,loading:r,refreshUserData:s}=Ot(),[i,o]=m.useState(!1),[a,c]=m.useState(!1),[u,h]=m.useState(!1),[f,p]=m.useState(null),g=Nl({resolver:xE(HX),defaultValues:{newPassword:"",confirmPassword:""},mode:"onChange"});m.useEffect(()=>{const v=new URLSearchParams(window.location.search),T=v.get("mode"),_=v.get("oobCode");if(p(_),!r){if(n!=null&&n.emailVerified){t("/profile");return}if(!T){n||t("/login");return}if(!_){e({title:"Ошибка",description:"Код действия отсутствует.",variant:"destructive"}),t("/login");return}T==="verifyEmail"?(o(!0),SA(Ze,_).then(async()=>{Ze.currentUser&&(await Ze.currentUser.reload(),await s(),e({title:"Успех",description:Se.notifications.success.emailVerified}),t("/profile"))}).catch(y=>{e({title:"Ошибка",description:Se.notifications.error.firebase.auth.invalidActionCode,variant:"destructive"}),c(!0)}).finally(()=>{o(!1)})):T==="resetPassword"?(o(!0),J9(Ze,_).then(()=>{h(!0)}).catch(y=>{e({title:"Ошибка",description:Se.notifications.error.firebase.auth.invalidActionCode,variant:"destructive"}),t("/login")}).finally(()=>{o(!1)})):(e({title:"Ошибка",description:"Недопустимое действие.",variant:"destructive"}),t("/login"))}},[t,e,n,r,s]);const x=async v=>{if(!f){e({title:"Ошибка",description:"Код для сброса пароля отсутствует.",variant:"destructive"});return}o(!0);try{await X9(Ze,f,v.newPassword),e({title:"Успех",description:"Пароль успешно изменён. Теперь вы можете войти с новым паролем."}),t("/login")}catch(T){e({title:"Ошибка",description:T.message||"Произошла ошибка при сбросе пароля.",variant:"destructive"})}finally{o(!1)}};return r||i?l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center gap-2",children:[l.jsx(Wn,{className:"animate-spin"}),l.jsx("h1",{className:"text-xl",children:u?"Сброс пароля...":"Проверка электронной почты..."})]}):!f&&n&&!n.emailVerified?l.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:l.jsx(Rx,{})}):a?l.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:l.jsx(Rx,{})}):u?l.jsx("div",{className:"fixed inset-0 flex items-center justify-center",children:l.jsxs(mt,{className:"max-w-md w-full",children:[l.jsx(en,{children:l.jsx(tn,{children:"Сброс пароля"})}),l.jsx(vt,{children:l.jsxs("form",{onSubmit:g.handleSubmit(x),className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Новый пароль"}),l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{type:"password",className:"pl-9",...g.register("newPassword")})]}),g.formState.errors.newPassword&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.formState.errors.newPassword.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Подтвердите пароль"}),l.jsxs("div",{className:"relative",children:[l.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(yt,{type:"password",className:"pl-9",...g.register("confirmPassword")})]}),g.formState.errors.confirmPassword&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.formState.errors.confirmPassword.message})]}),l.jsx(de,{type:"submit",className:"w-full",disabled:i||!g.formState.isValid,children:i?"Сохранение...":"Сохранить новый пароль"})]})})]})}):null},GX={ALBUM:Se.review.releaseType.album,SINGLE:Se.review.releaseType.single,EP:Se.review.releaseType.ep},Iy=.5,Ry=3,Ea=1,KX=({src:t,alt:e,className:n,imgClassName:r,onClose:s})=>{const[i,o]=m.useState(Ea),[a,c]=m.useState({x:0,y:0}),[u,h]=m.useState(0),[f,p]=m.useState(!1),[g,x]=m.useState(0),[v,T]=m.useState(0),[_,y]=m.useState(!1),[b,C]=m.useState({x:0,y:0}),[P,L]=m.useState({x:0,y:0}),N=m.useRef(null),E=m.useRef(null),S=m.useRef(null),R=xt(),M=()=>{o(Ea),c({x:0,y:0}),h(0)};m.useEffect(()=>{const $=ie=>{ie.key==="Escape"&&s()};return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[s]),m.useEffect(()=>{i===Ea&&c({x:0,y:0})},[i,u]);const A=$=>{$.preventDefault(),$.deltaY>0?o(ie=>Math.max(ie-.1,Iy)):o(ie=>Math.min(ie+.1,Ry))},I=()=>{o($=>Math.min($+.2,Ry))},U=()=>{o($=>Math.max($-.2,Iy))},Y=()=>{o(Ea),c({x:0,y:0}),h(0)},F=()=>{h($=>($+90)%360)},te=$=>{if(!_)return;const ie=$.clientX-b.x,ge=$.clientY-b.y;c({x:P.x+ie,y:P.y+ge})},D=()=>{y(!1)},O=$=>{$.preventDefault();const ie=Date.now();if(ie-g<300&&$.touches.length===1?(o(i===Ea?2:Ea),x(0)):x(ie),$.touches.length===1)y(!0),C({x:$.touches[0].clientX,y:$.touches[0].clientY}),L({...a});else if($.touches.length===2){const ge=H($.touches[0].clientX,$.touches[0].clientY,$.touches[1].clientX,$.touches[1].clientY);T(ge)}S.current&&clearTimeout(S.current)},W=$=>{if($.preventDefault(),$.touches.length===1&&_){const ie=$.touches[0].clientX-b.x,ge=$.touches[0].clientY-b.y;c({x:P.x+ie,y:P.y+ge})}else if($.touches.length===2){const ie=H($.touches[0].clientX,$.touches[0].clientY,$.touches[1].clientX,$.touches[1].clientY),ge=ie/v,G=Math.min(Math.max(i*ge,Iy),Ry);o(G),T(ie)}},Z=$=>{$.preventDefault(),$.touches.length===0&&(y(!1),S.current=setTimeout(()=>{x(0)},300))},H=($,ie,ge,G)=>Math.sqrt(Math.pow(ge-$,2)+Math.pow(G-ie,2)),Q=$=>{p($),$||M()};return m.useEffect(()=>()=>{M()},[]),l.jsxs(ai,{open:f,onOpenChange:Q,children:[l.jsx(Px,{asChild:!0,children:l.jsx("div",{onClick:()=>p(!0),className:le("cursor-pointer overflow-hidden",n),children:l.jsx("img",{src:t,alt:e,className:le(r)})})}),l.jsxs(Ns,{className:"sm:max-w-[95vw] max-h-[90vh] p-0 border-0 bg-black/90",children:[l.jsx(de,{className:"absolute right-2 top-2 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>p(!1),children:l.jsx(ti,{className:"h-4 w-4"})}),l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[l.jsx(de,{size:"icon",variant:"secondary",className:"rounded-full",onClick:I,children:l.jsx(N$,{className:"w-4 h-4"})}),l.jsx(de,{size:"icon",variant:"secondary",className:"rounded-full",onClick:U,children:l.jsx(C$,{className:"w-4 h-4"})}),l.jsx(de,{size:"icon",variant:"secondary",className:"rounded-full",onClick:F,children:l.jsx(E$,{className:"w-4 h-4"})}),l.jsx(de,{size:"icon",variant:"destructive",className:"rounded-full",onClick:s,children:l.jsx(ti,{className:"w-4 h-4"})})]}),R&&l.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-white bg-black bg-opacity-50 py-2",children:"Двойной тап — увеличить • Свайп — перемещение • Щипок — масштаб"}),l.jsx("div",{ref:E,className:"relative w-full h-full flex items-center justify-center overflow-hidden",onClick:$=>{$.target===E.current&&s()},onMouseMove:te,onMouseUp:D,onMouseLeave:D,onWheel:A,onTouchStart:O,onTouchMove:W,onTouchEnd:Z,children:l.jsx("img",{ref:N,src:t,alt:e,style:{transform:`
                translate(${a.x}px, ${a.y}px) 
                scale(${i}) 
                rotate(${u}deg)
              `,transition:i===1?"transform 0.3s ease-out":"none"},className:"max-w-full max-h-[85vh] object-contain select-none",draggable:"false"})}),l.jsxs("div",{className:"absolute bottom-4 right-4 text-white bg-black bg-opacity-50 px-2 py-1 rounded text-sm",children:[Math.round(i*100),"%"]}),(i!==Ea||a.x!==0||a.y!==0||u!==0)&&l.jsx(de,{variant:"secondary",size:"sm",className:"absolute bottom-4 left-4",onClick:Y,children:"Сбросить"})]})]})},QX=t=>{if(t>=1e6)return`${(t/1e6).toFixed(1)}M просмотров`;if(t>=1e3)return`${(t/1e3).toFixed(1)}K просмотров`;const e=t%10,n=t%100;return n>=11&&n<=19?`${t} просмотров`:e===1?`${t} просмотр`:e>=2&&e<=4?`${t} просмотра`:`${t} просмотров`},YX=({album:t,artist:e,type:n,rating:r,coverUrl:s,views:i})=>{const o=xt(),a=c=>c?c.startsWith("http://")||c.startsWith("https://")||c.startsWith("data:")?c:c.startsWith("/")?`${pn}${c}`:"/placeholder.svg":"/placeholder.svg";return l.jsx("div",{className:o?"mb-4":"mb-8",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8",children:[l.jsx("div",{className:"relative",children:l.jsx(KX,{src:a(s),alt:`${t} cover`,className:`${o?"w-full":"w-full md:w-64"} aspect-square overflow-hidden rounded-lg shadow-md`,imgClassName:"w-full h-full object-cover",onClose:()=>{}})}),l.jsxs("div",{className:`space-y-${o?"2":"4"}`,children:[l.jsx("h1",{className:o?"text-xl font-bold mt-3":"text-3xl font-bold",children:t||"Неизвестный альбом"}),l.jsx("p",{className:o?"text-base text-muted-foreground":"text-xl text-muted-foreground",children:e||"Неизвестный исполнитель"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[l.jsx("span",{className:"text-xs md:text-sm bg-secondary px-2 py-1 md:px-3 md:py-1 rounded-full",children:GX[n.toUpperCase()]||"Неизвестный тип"}),l.jsx("span",{className:`text-xs md:text-sm font-medium px-2 py-1 md:px-3 md:py-1 rounded-full bg-opacity-10 ${ni(r,"bg")} ${ni(r,"text")}`,children:aa[r]||"Неизвестная оценка"})]}),i!==void 0&&i>0&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground bg-accent/30 px-3 py-2 rounded-md w-fit",children:[l.jsx(wR,{className:"w-4 h-4 md:w-5 md:h-5"}),l.jsx("span",{className:"text-sm md:text-base font-medium",children:QX(i)})]})]})]})})},eb=({url:t,title:e,className:n,variant:r="outline",size:s="icon"})=>{const{toast:i}=jt(),[o,a]=m.useState(!1),c=t.startsWith("http")?t:`${window.location.origin}${t}`,u=async()=>{try{await navigator.clipboard.writeText(c),a(!0),i({title:"Ссылка скопирована",description:"Ссылка успешно скопирована в буфер обмена"}),setTimeout(()=>a(!1),2e3)}catch{i({title:"Ошибка",description:"Не удалось скопировать ссылку",variant:"destructive"})}};return l.jsx("div",{className:le("flex items-center",n),children:l.jsx(mE,{children:l.jsxs(za,{children:[l.jsx(Wa,{asChild:!0,children:l.jsx(de,{variant:r,size:s,onClick:u,className:"focus:outline-none","aria-label":"Копировать ссылку",children:o?l.jsx(kh,{className:"h-4 w-4"}):l.jsx(c$,{className:"h-4 w-4"})})}),l.jsx(zo,{children:l.jsx("p",{children:o?"Скопировано!":"Копировать ссылку"})})]})})})};var DO="AlertDialog",[XX,Jee]=or(DO,[L2]),Xi=L2(),MO=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xi(e);return l.jsx(J2,{...r,...n,modal:!0})};MO.displayName=DO;var ZX="AlertDialogTrigger",OO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return l.jsx(eD,{...s,...r,ref:e})});OO.displayName=ZX;var JX="AlertDialogPortal",LO=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xi(e);return l.jsx(tD,{...r,...n})};LO.displayName=JX;var eZ="AlertDialogOverlay",VO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return l.jsx(IE,{...s,...r,ref:e})});VO.displayName=eZ;var Ec="AlertDialogContent",[tZ,nZ]=XX(Ec),FO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Xi(n),o=m.useRef(null),a=it(e,o),c=m.useRef(null);return l.jsx(HK,{contentName:Ec,titleName:UO,docsSlug:"alert-dialog",children:l.jsx(tZ,{scope:n,cancelRef:c,children:l.jsxs(RE,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:fe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(B_,{children:r}),l.jsx(sZ,{contentRef:o})]})})})});FO.displayName=Ec;var UO="AlertDialogTitle",$O=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return l.jsx(AE,{...s,...r,ref:e})});$O.displayName=UO;var BO="AlertDialogDescription",zO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return l.jsx(PE,{...s,...r,ref:e})});zO.displayName=BO;var rZ="AlertDialogAction",WO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return l.jsx(Yg,{...s,...r,ref:e})});WO.displayName=rZ;var HO="AlertDialogCancel",qO=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=nZ(HO,n),i=Xi(n),o=it(e,s);return l.jsx(Yg,{...i,...r,ref:o})});qO.displayName=HO;var sZ=({contentRef:t})=>{const e=`\`${Ec}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ec}\` by passing a \`${BO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ec}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},iZ=MO,oZ=OO,aZ=LO,GO=VO,KO=FO,QO=WO,YO=qO,XO=$O,ZO=zO;const lZ=iZ,cZ=oZ,uZ=aZ,JO=m.forwardRef(({className:t,...e},n)=>l.jsx(GO,{className:le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));JO.displayName=GO.displayName;const eL=m.forwardRef(({className:t,...e},n)=>l.jsxs(uZ,{children:[l.jsx(JO,{}),l.jsx(KO,{ref:n,className:le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));eL.displayName=KO.displayName;const tL=({className:t,...e})=>l.jsx("div",{className:le("flex flex-col space-y-2 text-center sm:text-left",t),...e});tL.displayName="AlertDialogHeader";const nL=({className:t,...e})=>l.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});nL.displayName="AlertDialogFooter";const rL=m.forwardRef(({className:t,...e},n)=>l.jsx(XO,{ref:n,className:le("text-lg font-semibold",t),...e}));rL.displayName=XO.displayName;const sL=m.forwardRef(({className:t,...e},n)=>l.jsx(ZO,{ref:n,className:le("text-sm text-muted-foreground",t),...e}));sL.displayName=ZO.displayName;const iL=m.forwardRef(({className:t,...e},n)=>l.jsx(QO,{ref:n,className:le(Yr(),t),...e}));iL.displayName=QO.displayName;const oL=m.forwardRef(({className:t,...e},n)=>l.jsx(YO,{ref:n,className:le(Yr({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));oL.displayName=YO.displayName;const dZ=({content:t,yandexMusicId:e,likes:n,dislikes:r,views:s,isOwner:i=!1,isBanned:o=!1,reviewId:a,title:c,artist:u,onEdit:h,onDelete:f,onLike:p,onDislike:g,hasLiked:x,hasDisliked:v,isLiking:T,isDisliking:_})=>{const{toast:y}=jt(),[b,C]=m.useState(!1),[P,L]=m.useState(t),N=xt(),{user:E}=Ot(),S=m.useMemo(()=>`${window.location.origin}/review/${a}`,[a]),R=m.useMemo(()=>K_(t,{disableCensorship:E==null?void 0:E.disableCensorship}),[t,c,u,E==null?void 0:E.disableCensorship]),M=()=>{h&&(h(P),C(!1),y({title:"Успешно",description:"Рецензия успешно обновлена"}))},A=()=>{f&&(f(),y({title:"Успешно",description:"Рецензия успешно удалена"}))},I=h!==void 0,U=f!==void 0,Y=I||U;return l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[!e.startsWith("custom-")&&l.jsx("iframe",{className:"w-full h-[160px] md:h-[180px] rounded-lg",src:`https://music.yandex.ru/iframe/#album/${e}`,frameBorder:"0"}),b?l.jsxs("div",{className:"space-y-3 md:space-y-4",children:[l.jsx(ul,{value:P,onChange:F=>L(F.target.value),className:"min-h-[150px] md:min-h-[200px] whitespace-pre-wrap text-sm md:text-base"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(de,{size:N?"sm":"default",onClick:M,children:"Сохранить"}),l.jsx(de,{size:N?"sm":"default",variant:"outline",onClick:()=>{C(!1),L(t)},children:"Отмена"})]})]}):l.jsx("div",{className:`${N?"text-base":"text-lg"} leading-relaxed whitespace-pre-wrap`,children:R}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 mt-2 md:mt-4",children:[l.jsxs(de,{variant:x?"default":"outline",size:"sm",onClick:p,disabled:T||_,className:"gap-1 md:gap-2",children:[T?l.jsx(Wn,{className:"w-3 h-3 md:w-4 md:h-4 animate-spin"}):l.jsx(Ow,{className:"w-3 h-3 md:w-4 md:h-4"}),l.jsx("span",{className:"text-xs md:text-sm",children:n})]}),l.jsxs(de,{variant:v?"default":"outline",size:"sm",onClick:g,disabled:T||_,className:"gap-1 md:gap-2",children:[_?l.jsx(Wn,{className:"w-3 h-3 md:w-4 md:h-4 animate-spin"}):l.jsx(Mw,{className:"w-3 h-3 md:w-4 md:h-4"}),l.jsx("span",{className:"text-xs md:text-sm",children:r})]}),l.jsx(eb,{url:S,title:c,variant:"outline",size:"sm"}),Y&&l.jsxs("div",{className:`${N?"w-full mt-2":"ml-auto"} flex gap-2 ${N?"justify-end":""}`,children:[I&&!o&&l.jsxs(de,{variant:"outline",size:"sm",onClick:()=>C(!0),className:"gap-1 md:gap-2",children:[l.jsx(y$,{className:"w-3 h-3 md:w-4 md:h-4"}),!N&&l.jsx("span",{children:"Редактировать"})]}),U&&l.jsxs(lZ,{children:[l.jsx(cZ,{asChild:!0,children:l.jsxs(de,{variant:"destructive",size:"sm",className:"gap-1 md:gap-2",children:[l.jsx(Za,{className:"w-3 h-3 md:w-4 md:h-4"}),!N&&l.jsx("span",{children:"Удалить"})]})}),l.jsxs(eL,{className:N?"w-[90%] p-4 max-w-[95%]":"",children:[l.jsxs(tL,{children:[l.jsx(rL,{className:N?"text-lg":"",children:"Удаление рецензии"}),l.jsx(sL,{className:N?"text-sm":"",children:"Вы уверены, что хотите удалить эту рецензию? Это действие нельзя отменить."})]}),l.jsxs(nL,{className:N?"flex-col space-y-2":"",children:[l.jsx(oL,{className:N?"mt-0 w-full":"",children:"Отмена"}),l.jsx(iL,{onClick:A,className:N?"w-full":"",children:"Удалить"})]})]})]})]})]})]})},is=t=>typeof t.reviewId=="string"&&typeof t.userId=="string"&&typeof t.username=="string"&&typeof t.content=="string"&&typeof t.createdAt=="string"&&typeof t.likes=="number"&&typeof t.dislikes=="number"&&Array.isArray(t.likedBy)&&Array.isArray(t.dislikedBy)&&Array.isArray(t.replies),hZ=async t=>{try{const e=In(xe,"comments"),n=Tn(e,kn("reviewId","==",t)),r=await Hn(n),s=[];for(const i of r.docs){const o=i.data();if(is(o)){const a=await He(Re(xe,"users",o.userId)),c=a.exists()?a.data():null,u=(c==null?void 0:c.username)||o.username;s.push({id:i.id,userId:o.userId,user:u,role:c==null?void 0:c.role,avatarUrl:c==null?void 0:c.avatarUrl,content:o.content,likes:o.likes||0,dislikes:o.dislikes||0,likedBy:o.likedBy||[],dislikedBy:o.dislikedBy||[],isBanned:(c==null?void 0:c.isBanned)||!1,replies:await Promise.all(o.replies.map(async h=>{const f=await He(Re(xe,"users",h.userId)),p=f.exists()?f.data():null,g=(p==null?void 0:p.username)||h.username;return{id:h.id||"",userId:h.userId,user:g,role:h.role,avatarUrl:p==null?void 0:p.avatarUrl,content:h.content,likes:h.likes||0,dislikes:h.dislikes||0,likedBy:h.likedBy||[],dislikedBy:h.dislikedBy||[],createdAt:h.createdAt,isBanned:(p==null?void 0:p.isBanned)||!1}})),date:new Date(o.createdAt).toLocaleDateString("ru-RU"),createdAt:o.createdAt})}}return s.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch{throw new Error("Не удалось загрузить комментарии")}},fZ=async(t,e,n,r)=>{try{const s={reviewId:t,userId:e,username:n,content:r,createdAt:new Date().toISOString(),likes:0,dislikes:0,likedBy:[],dislikedBy:[],replies:[]},i=await Dg(In(xe,"comments"),s),o=await He(Re(xe,"users",e)),a=o.exists()?o.data():null;return{id:i.id,userId:e,user:n,role:a==null?void 0:a.role,avatarUrl:(a==null?void 0:a.avatarUrl)||"/placeholder.svg",content:r,likes:0,dislikes:0,likedBy:[],dislikedBy:[],isBanned:(a==null?void 0:a.isBanned)||!1,replies:[],date:new Date().toLocaleDateString("ru-RU"),createdAt:s.createdAt}}catch{throw new Error("Не удалось добавить комментарий")}},mZ=async(t,e,n,r)=>{try{const s=Re(xe,"comments",t);if(!(await He(s)).exists())throw new Error("Комментарий не найден");const o=await Or(e);if(!o)throw new Error("Пользователь не найден");const a={id:`${Date.now()}-${e}`,userId:e,username:n,role:o.role||"USER",content:r,createdAt:new Date().toISOString(),likes:0,dislikes:0,likedBy:[],dislikedBy:[],isBanned:o.isBanned||!1};await Zt(s,{replies:Y0(a)});const u=(await He(s)).data();if(!is(u))throw new Error("Неверный формат данных комментария");const h=await Or(u.userId),p=(await Promise.all(u.replies.map(async g=>{const x=await Or(g.userId);return{...g,role:g.role||(x==null?void 0:x.role)||"USER",avatarUrl:x==null?void 0:x.avatarUrl,isBanned:(x==null?void 0:x.isBanned)||!1}}))).sort((g,x)=>new Date(x.createdAt).getTime()-new Date(g.createdAt).getTime());return{id:t,userId:u.userId,user:u.username,role:(h==null?void 0:h.role)||ot.USER,avatarUrl:h==null?void 0:h.avatarUrl,content:u.content,likes:u.likes||0,dislikes:u.dislikes||0,likedBy:u.likedBy||[],dislikedBy:u.dislikedBy||[],isBanned:(h==null?void 0:h.isBanned)||!1,replies:p.map(g=>({id:g.id||"",userId:g.userId,user:g.username,role:g.role,avatarUrl:g.avatarUrl,content:g.content,likes:g.likes||0,dislikes:g.dislikes||0,likedBy:g.likedBy||[],dislikedBy:g.dislikedBy||[],createdAt:g.createdAt,isBanned:g.isBanned||!1})),date:new Date(u.createdAt).toLocaleDateString("ru-RU"),createdAt:u.createdAt}}catch{throw new Error("Не удалось добавить ответ на комментарий")}},pZ=async(t,e)=>{try{const n=Re(xe,"comments",t),r=await He(n);if(!r.exists())throw new Error("Комментарий не найден");const s=r.data();if(!is(s))throw new Error("Неверный формат данных комментария");const i=s.likedBy.includes(e),o=s.dislikedBy.includes(e);await Zt(n,{likes:i?s.likes-1:s.likes+1,likedBy:i?dp(e):Y0(e),dislikes:o?s.dislikes-1:s.dislikes,dislikedBy:o?dp(e):s.dislikedBy});const c=(await He(n)).data();if(!is(c))throw new Error("Неверный формат данных комментария");const u=await Or(c.userId),h=await Promise.all(c.replies.map(async f=>{const p=await Or(f.userId);return{...f,role:f.role||(p==null?void 0:p.role)||"USER",avatarUrl:p==null?void 0:p.avatarUrl}}));return{id:t,userId:c.userId,user:c.username,role:(u==null?void 0:u.role)||ot.USER,avatarUrl:u==null?void 0:u.avatarUrl,content:c.content,likes:c.likes||0,dislikes:c.dislikes||0,likedBy:c.likedBy||[],dislikedBy:c.dislikedBy||[],replies:h.map(f=>({id:f.id||"",userId:f.userId,user:f.username,role:f.role,avatarUrl:f.avatarUrl,content:f.content,likes:f.likes||0,dislikes:f.dislikes||0,likedBy:f.likedBy||[],dislikedBy:f.dislikedBy||[],createdAt:f.createdAt})),date:new Date(c.createdAt).toLocaleDateString("ru-RU"),createdAt:c.createdAt}}catch{throw new Error("Не удалось поставить лайк")}},gZ=async(t,e)=>{try{const n=Re(xe,"comments",t),r=await He(n);if(!r.exists())throw new Error("Комментарий не найден");const s=r.data();if(!is(s))throw new Error("Неверный формат данных комментария");const i=s.likedBy.includes(e),o=s.dislikedBy.includes(e);await Zt(n,{dislikes:o?s.dislikes-1:s.dislikes+1,dislikedBy:o?dp(e):Y0(e),likes:i?s.likes-1:s.likes,likedBy:i?dp(e):s.likedBy});const c=(await He(n)).data();if(!is(c))throw new Error("Неверный формат данных комментария");const u=await Or(c.userId),h=await Promise.all(c.replies.map(async f=>{const p=await Or(f.userId);return{...f,role:f.role||(p==null?void 0:p.role)||"USER",avatarUrl:p==null?void 0:p.avatarUrl}}));return{id:t,userId:c.userId,user:c.username,role:(u==null?void 0:u.role)||ot.USER,avatarUrl:u==null?void 0:u.avatarUrl,content:c.content,likes:c.likes||0,dislikes:c.dislikes||0,likedBy:c.likedBy||[],dislikedBy:c.dislikedBy||[],replies:h.map(f=>({id:f.id||"",userId:f.userId,user:f.username,role:f.role,avatarUrl:f.avatarUrl,content:f.content,likes:f.likes||0,dislikes:f.dislikes||0,likedBy:f.likedBy||[],dislikedBy:f.dislikedBy||[],createdAt:f.createdAt})),date:new Date(c.createdAt).toLocaleDateString("ru-RU"),createdAt:c.createdAt}}catch{throw new Error("Не удалось поставить дизлайк")}},vZ=async(t,e,n)=>{try{const r=Re(xe,"comments",t),s=await He(r);if(!s.exists())throw new Error("Комментарий не найден");const i=s.data();if(!is(i))throw new Error("Неверный формат данных комментария");const o=i.replies.find(x=>x.id===e);if(!o)throw new Error("Ответ не найден");const a=o.likedBy.includes(n),c=o.dislikedBy.includes(n),u=i.replies.map(x=>x.id===e?{...x,likes:a?x.likes-1:x.likes+1,likedBy:a?x.likedBy.filter(v=>v!==n):[...x.likedBy,n],dislikes:c?x.dislikes-1:x.dislikes,dislikedBy:c?x.dislikedBy.filter(v=>v!==n):x.dislikedBy}:x);await Zt(r,{replies:u});const f=(await He(r)).data();if(!is(f))throw new Error("Неверный формат данных комментария");const p=await Or(f.userId),g=await Promise.all(f.replies.map(async x=>{const v=await Or(x.userId);return{...x,role:x.role||(v==null?void 0:v.role)||"USER",avatarUrl:v==null?void 0:v.avatarUrl}}));return{id:t,userId:f.userId,user:f.username,role:(p==null?void 0:p.role)||ot.USER,avatarUrl:p==null?void 0:p.avatarUrl,content:f.content,likes:f.likes||0,dislikes:f.dislikes||0,likedBy:f.likedBy||[],dislikedBy:f.dislikedBy||[],replies:g.map(x=>({id:x.id||"",userId:x.userId,user:x.username,role:x.role,avatarUrl:x.avatarUrl,content:x.content,likes:x.likes||0,dislikes:x.dislikes||0,likedBy:x.likedBy||[],dislikedBy:x.dislikedBy||[],createdAt:x.createdAt})),date:new Date(f.createdAt).toLocaleDateString("ru-RU"),createdAt:f.createdAt}}catch{throw new Error("Не удалось поставить лайк на ответ")}},yZ=async(t,e,n)=>{try{const r=Re(xe,"comments",t),s=await He(r);if(!s.exists())throw new Error("Комментарий не найден");const i=s.data();if(!is(i))throw new Error("Неверный формат данных комментария");const o=i.replies.find(x=>x.id===e);if(!o)throw new Error("Ответ не найден");const a=o.likedBy.includes(n),c=o.dislikedBy.includes(n),u=i.replies.map(x=>x.id===e?{...x,dislikes:c?x.dislikes-1:x.dislikes+1,dislikedBy:c?x.dislikedBy.filter(v=>v!==n):[...x.dislikedBy,n],likes:a?x.likes-1:x.likes,likedBy:a?x.likedBy.filter(v=>v!==n):x.likedBy}:x);await Zt(r,{replies:u});const f=(await He(r)).data();if(!is(f))throw new Error("Неверный формат данных комментария");const p=await Or(f.userId),g=await Promise.all(f.replies.map(async x=>{const v=await Or(x.userId);return{...x,role:x.role||(v==null?void 0:v.role)||"USER",avatarUrl:v==null?void 0:v.avatarUrl}}));return{id:t,userId:f.userId,user:f.username,role:(p==null?void 0:p.role)||ot.USER,avatarUrl:p==null?void 0:p.avatarUrl,content:f.content,likes:f.likes||0,dislikes:f.dislikes||0,likedBy:f.likedBy||[],dislikedBy:f.dislikedBy||[],replies:g.map(x=>({id:x.id||"",userId:x.userId,user:x.username,role:x.role,avatarUrl:x.avatarUrl,content:x.content,likes:x.likes||0,dislikes:x.dislikes||0,likedBy:x.likedBy||[],dislikedBy:x.dislikedBy||[],createdAt:x.createdAt})),date:new Date(f.createdAt).toLocaleDateString("ru-RU"),createdAt:f.createdAt}}catch{throw new Error("Не удалось поставить дизлайк на ответ")}},wZ=async(t,e,n)=>{try{const r=Re(xe,"comments",t),s=await He(r);if(!s.exists())throw new Error("Комментарий не найден");const i=s.data();if(!i)throw new Error("Данные комментария недоступны");const o=i.userId===e,a=n===ot.ADMIN;if(!o&&!a)throw new Error("У вас нет прав для удаления этого комментария");await Q0(r)}catch(r){throw new Error("Не удалось удалить комментарий: "+(r.message||"Неизвестная ошибка"))}},xZ=async(t,e,n,r)=>{try{const s=Re(xe,"comments",t),i=await He(s);if(!i.exists())throw new Error("Комментарий не найден");const o=i.data();if(!is(o))throw new Error("Неверный формат данных комментария");const a=o.replies.find(v=>v.id===e);if(!a)throw new Error("Ответ не найден");if(!(a.userId===n)&&!(r==="ADMIN"))throw new Error("У вас нет прав для удаления этого ответа");const h=o.replies.filter(v=>v.id!==e);await Zt(s,{replies:h});const p=(await He(s)).data();if(!is(p))throw new Error("Неверный формат данных комментария");const g=await Or(p.userId),x=await Promise.all(p.replies.map(async v=>{const T=await Or(v.userId);return{...v,role:v.role||(T==null?void 0:T.role)||"USER",avatarUrl:T==null?void 0:T.avatarUrl}}));return{id:t,userId:p.userId,user:p.username,role:(g==null?void 0:g.role)||ot.USER,avatarUrl:g==null?void 0:g.avatarUrl,content:p.content,likes:p.likes||0,dislikes:p.dislikes||0,likedBy:p.likedBy||[],dislikedBy:p.dislikedBy||[],replies:x.map(v=>({id:v.id||"",userId:v.userId,user:v.username,role:v.role,avatarUrl:v.avatarUrl,content:v.content,likes:v.likes||0,dislikes:v.dislikes||0,likedBy:v.likedBy||[],dislikedBy:v.dislikedBy||[],createdAt:v.createdAt})),date:new Date(p.createdAt).toLocaleDateString("ru-RU"),createdAt:p.createdAt}}catch(s){throw new Error("Не удалось удалить ответ: "+(s.message||"Неизвестная ошибка"))}},XS=({className:t,...e})=>l.jsxs("span",{"aria-hidden":!0,className:le("flex h-9 w-9 items-center justify-center",t),...e,children:[l.jsx(yR,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"More pages"})]}),Ay=5,_Z=({comments:t,onAddComment:e})=>{const{user:n}=Ot(),{toast:r}=jt(),s=xt(),[i,o]=m.useState(""),[a,c]=m.useState({}),[u,h]=m.useState({}),[f,p]=m.useState({}),[g,x]=m.useState({}),[v,T]=m.useState({}),[_,y]=m.useState({}),[b,C]=m.useState(t),[P,L]=m.useState(1),N=Math.ceil(b.length/Ay),E=m.useMemo(()=>{const D=(P-1)*Ay;return b.slice(D,D+Ay)},[b,P]);m.useEffect(()=>{C(t),L(1)},[t]);const S=D=>{if(D.preventDefault(),!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы оставлять комментарии",variant:"destructive"});return}if(n.isBanned){r({title:"Ошибка",description:"Вы не можете оставлять комментарии, так как заблокированы",variant:"destructive"});return}i.trim()&&(e(i),o(""))},R=D=>{D<1||D>N||(L(D),setTimeout(()=>{var O;(O=document.getElementById("comments-section"))==null||O.scrollIntoView({behavior:"smooth"})},100))},M=async D=>{var W;if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы оставлять ответы",variant:"destructive"});return}if(n.isBanned){r({title:"Ошибка",description:"Вы не можете оставлять ответы, так как заблокированы",variant:"destructive"});return}const O=(W=a[D])==null?void 0:W.trim();if(O)try{const Z=await mZ(D,n.uid,n.displayName||"Аноним",O);C(H=>H.map(Q=>Q.id===D?Z:Q)),c(H=>({...H,[D]:""})),h(H=>({...H,[D]:!1})),r({title:"Успешно",description:"Ответ добавлен"})}catch{r({title:"Ошибка",description:"Не удалось добавить ответ",variant:"destructive"})}},A=async D=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить лайки",variant:"destructive"});return}if(f[D]||g[D])return;p(H=>({...H,[D]:!0}));const O=b.find(H=>H.id===D);if(!O)return;const W=O.likedBy.includes(n.uid),Z=O.dislikedBy.includes(n.uid);C(H=>H.map(Q=>Q.id===D?{...Q,likes:W?Q.likes-1:Q.likes+1,likedBy:W?Q.likedBy.filter($=>$!==n.uid):[...Q.likedBy,n.uid],dislikes:Z?Q.dislikes-1:Q.dislikes,dislikedBy:Z?Q.dislikedBy.filter($=>$!==n.uid):Q.dislikedBy}:Q));try{const H=await pZ(D,n.uid);C(Q=>Q.map($=>$.id===D?H:$))}catch{C(Q=>Q.map($=>$.id===D?{...$,likes:W?$.likes+1:$.likes-1,likedBy:W?[...$.likedBy,n.uid]:$.likedBy.filter(ie=>ie!==n.uid),dislikes:Z?$.dislikes+1:$.dislikes,dislikedBy:Z?[...$.dislikedBy,n.uid]:$.dislikedBy}:$)),r({title:"Ошибка",description:"Не удалось поставить лайк",variant:"destructive"})}finally{p(H=>({...H,[D]:!1}))}},I=async D=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить дизлайки",variant:"destructive"});return}if(f[D]||g[D])return;x(H=>({...H,[D]:!0}));const O=b.find(H=>H.id===D);if(!O)return;const W=O.likedBy.includes(n.uid),Z=O.dislikedBy.includes(n.uid);C(H=>H.map(Q=>Q.id===D?{...Q,dislikes:Z?Q.dislikes-1:Q.dislikes+1,dislikedBy:Z?Q.dislikedBy.filter($=>$!==n.uid):[...Q.dislikedBy,n.uid],likes:W?Q.likes-1:Q.likes,likedBy:W?Q.likedBy.filter($=>$!==n.uid):Q.likedBy}:Q));try{const H=await gZ(D,n.uid);C(Q=>Q.map($=>$.id===D?H:$))}catch{C(Q=>Q.map($=>$.id===D?{...$,dislikes:Z?$.dislikes+1:$.dislikes-1,dislikedBy:Z?[...$.dislikedBy,n.uid]:$.dislikedBy.filter(ie=>ie!==n.uid),likes:W?$.likes+1:$.likes,likedBy:W?[...$.likedBy,n.uid]:$.likedBy}:$)),r({title:"Ошибка",description:"Не удалось поставить дизлайк",variant:"destructive"})}finally{x(H=>({...H,[D]:!1}))}},U=async(D,O)=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить лайки",variant:"destructive"});return}const W=`${D}-${O}`;if(f[W]||g[W])return;p(ie=>({...ie,[W]:!0}));const Z=b.find(ie=>ie.id===D);if(!Z)return;const H=Z.replies.find(ie=>ie.id===O);if(!H)return;const Q=H.likedBy.includes(n.uid),$=H.dislikedBy.includes(n.uid);C(ie=>ie.map(ge=>ge.id===D?{...ge,replies:ge.replies.map(G=>G.id===O?{...G,likes:Q?G.likes-1:G.likes+1,likedBy:Q?G.likedBy.filter(me=>me!==n.uid):[...G.likedBy,n.uid],dislikes:$?G.dislikes-1:G.dislikes,dislikedBy:$?G.dislikedBy.filter(me=>me!==n.uid):G.dislikedBy}:G)}:ge));try{const ie=await vZ(D,O,n.uid);C(ge=>ge.map(G=>G.id===D?ie:G))}catch{C(ge=>ge.map(G=>G.id===D?{...G,replies:G.replies.map(me=>me.id===O?{...me,likes:Q?me.likes+1:me.likes-1,likedBy:Q?[...me.likedBy,n.uid]:me.likedBy.filter(Fe=>Fe!==n.uid),dislikes:$?me.dislikes+1:me.dislikes,dislikedBy:$?[...me.dislikedBy,n.uid]:me.dislikedBy}:me)}:G)),r({title:"Ошибка",description:"Не удалось поставить лайк",variant:"destructive"})}finally{p(ie=>({...ie,[W]:!1}))}},Y=async(D,O)=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить дизлайки",variant:"destructive"});return}const W=`${D}-${O}`;if(f[W]||g[W])return;x(ie=>({...ie,[W]:!0}));const Z=b.find(ie=>ie.id===D);if(!Z)return;const H=Z.replies.find(ie=>ie.id===O);if(!H)return;const Q=H.likedBy.includes(n.uid),$=H.dislikedBy.includes(n.uid);C(ie=>ie.map(ge=>ge.id===D?{...ge,replies:ge.replies.map(G=>G.id===O?{...G,dislikes:$?G.dislikes-1:G.dislikes+1,dislikedBy:$?G.dislikedBy.filter(me=>me!==n.uid):[...G.dislikedBy,n.uid],likes:Q?G.likes-1:G.likes,likedBy:Q?G.likedBy.filter(me=>me!==n.uid):G.likedBy}:G)}:ge));try{const ie=await yZ(D,O,n.uid);C(ge=>ge.map(G=>G.id===D?ie:G))}catch{C(ge=>ge.map(G=>G.id===D?{...G,replies:G.replies.map(me=>me.id===O?{...me,dislikes:$?me.dislikes+1:me.dislikes-1,dislikedBy:$?[...me.dislikedBy,n.uid]:me.dislikedBy.filter(Fe=>Fe!==n.uid),likes:Q?me.likes+1:me.likes,likedBy:Q?[...me.likedBy,n.uid]:me.likedBy}:me)}:G)),r({title:"Ошибка",description:"Не удалось поставить дизлайк",variant:"destructive"})}finally{x(ie=>({...ie,[W]:!1}))}},F=async D=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы удалять комментарии",variant:"destructive"});return}if(!v[D]){T(O=>({...O,[D]:!0}));try{C(O=>O.filter(W=>W.id!==D)),await wZ(D,n.uid,n.role||"USER"),r({title:"Успешно",description:"Комментарий удалён"})}catch(O){C(W=>[...W,b.find(Z=>Z.id===D)].sort((Z,H)=>new Date(H.date).getTime()-new Date(Z.date).getTime())),r({title:"Ошибка",description:O.message||"Не удалось удалить комментарий",variant:"destructive"})}finally{T(O=>({...O,[D]:!1}))}}},te=async(D,O)=>{if(!n){r({title:"Ошибка",description:"Войдите в аккаунт, чтобы удалять ответы",variant:"destructive"});return}const W=`${D}-${O}`;if(!_[W]){y(Z=>({...Z,[W]:!0}));try{C(H=>H.map(Q=>Q.id===D?{...Q,replies:Q.replies.filter($=>$.id!==O)}:Q));const Z=await xZ(D,O,n.uid,n.role||"USER");C(H=>H.map(Q=>Q.id===D?Z:Q)),r({title:"Успешно",description:"Ответ удалён"})}catch(Z){const H=b.find($=>$.id===D),Q=H==null?void 0:H.replies.find($=>$.id===O);H&&Q&&C($=>$.map(ie=>ie.id===D?{...ie,replies:[...ie.replies,Q].sort((ge,G)=>new Date(ge.createdAt).getTime()-new Date(G.createdAt).getTime())}:ie)),r({title:"Ошибка",description:Z.message||"Не удалось удалить ответ",variant:"destructive"})}finally{y(Z=>({...Z,[W]:!1}))}}};return l.jsxs("div",{className:"space-y-4 md:space-y-6",id:"comments-section",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-bold",children:"Комментарии"}),l.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:b.length>0?`Всего: ${b.length}`:""})]}),n!=null&&n.isBanned?l.jsx("div",{className:"text-red-500 mb-4 text-sm md:text-base",children:"Вы не можете оставлять комментарии, так как заблокированы"}):l.jsxs("form",{onSubmit:S,className:"space-y-3 md:space-y-4",children:[l.jsx(ul,{value:i,onChange:D=>o(D.target.value),placeholder:"Оставьте ваш комментарий...",className:"min-h-[80px] md:min-h-[100px] text-sm md:text-base"}),l.jsx(de,{type:"submit",size:s?"sm":"default",children:"Отправить"})]}),b.length===0?l.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"Комментариев пока нет. Будьте первым!"}):l.jsx("div",{className:"space-y-3 md:space-y-4",children:E.map(D=>l.jsxs("div",{className:"border-b pb-3 md:pb-4",children:[l.jsxs("div",{className:"flex items-start gap-2 md:gap-4",children:[l.jsxs(dl,{className:"w-6 h-6 md:w-8 md:h-8",children:[l.jsx(hl,{src:D.avatarUrl,alt:D.user}),l.jsx(fl,{children:D.user.charAt(0).toUpperCase()})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[l.jsxs(kt,{to:`/profile/${D.user}`,className:"flex flex-row gap-1 md:gap-2 justify-content items-center font-medium text-sm md:text-base",children:[D.user,D.role==="ADMIN"?l.jsxs(za,{children:[l.jsx(Wa,{children:l.jsx("div",{className:"h-3 w-3 md:h-4 md:w-4 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center transition-transform transform hover:scale-110",children:l.jsx(Wm,{className:"h-2 w-2 md:h-3 md:w-3 fill-white/60 stroke-white/50"})})}),l.jsx(zo,{sideOffset:10,side:"right",className:"transition-opacity duration-300",children:"Администратор"})]}):null,D.isBanned&&l.jsx("div",{className:"tooltip","data-tip":"Пользователь заблокирован",children:l.jsx(Yd,{className:"w-4 h-4 text-red-500"})})]}),l.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:D.date})]}),l.jsx("p",{className:"mt-1 text-sm md:text-base",children:D.content}),l.jsxs("div",{className:"flex flex-wrap items-center gap-1 md:gap-2 mt-2",children:[l.jsxs(de,{variant:n&&D.likedBy.includes(n.uid)?"default":"outline",size:"sm",className:"gap-1 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>A(D.id),disabled:f[D.id]||g[D.id],children:[l.jsx(Ow,{className:"w-3 h-3 md:w-4 md:h-4"}),D.likes]}),l.jsxs(de,{variant:n&&D.dislikedBy.includes(n.uid)?"default":"outline",size:"sm",className:"gap-1 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>I(D.id),disabled:f[D.id]||g[D.id],children:[l.jsx(Mw,{className:"w-3 h-3 md:w-4 md:h-4"}),D.dislikes]}),!(n!=null&&n.isBanned)&&l.jsxs(de,{variant:"outline",size:"sm",className:"gap-1 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>h(O=>({...O,[D.id]:!O[D.id]})),children:[l.jsx(_$,{className:"w-3 h-3 md:w-4 md:h-4"}),"Ответить"]}),n&&(D.userId===n.uid||n.role===ot.ADMIN)&&l.jsxs(de,{variant:"outline",size:"sm",className:"gap-1 text-red-500 hover:text-red-700 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>F(D.id),disabled:v[D.id],children:[l.jsx(Za,{className:"w-3 h-3 md:w-4 md:h-4"}),v[D.id]?l.jsx(Wn,{className:"w-4 h-4 animate-spin"}):"Удалить"]})]}),u[D.id]&&!(n!=null&&n.isBanned)&&l.jsxs("form",{onSubmit:O=>{O.preventDefault(),M(D.id)},className:"mt-3 md:mt-4 space-y-2",children:[l.jsx(ul,{value:a[D.id]||"",onChange:O=>c(W=>({...W,[D.id]:O.target.value})),placeholder:"Ваш ответ...",className:"min-h-[60px] md:min-h-[80px] text-sm"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(de,{type:"submit",size:"sm",children:"Отправить"}),l.jsx(de,{variant:"outline",size:"sm",onClick:()=>h(O=>({...O,[D.id]:!1})),children:"Отмена"})]})]})]})]}),D.replies.length>0&&l.jsx("div",{className:"ml-6 md:ml-8 mt-3 md:mt-4 space-y-2 md:space-y-3",children:D.replies.map(O=>l.jsxs("div",{className:"flex items-start gap-2 md:gap-4",children:[l.jsxs(dl,{className:"w-6 h-6 md:w-8 md:h-8",children:[l.jsx(hl,{src:O.avatarUrl,alt:O.user}),l.jsx(fl,{children:O.user.charAt(0).toUpperCase()})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"flex flex-row items-center gap-1 md:gap-2",children:l.jsxs(kt,{to:`/profile/${O.user}`,className:"flex flex-row gap-1 md:gap-2 justify-content items-center font-medium text-sm md:text-base",children:[l.jsx("span",{className:"font-medium",children:O.user}),O.role==="ADMIN"?l.jsxs(za,{children:[l.jsx(Wa,{children:l.jsx("div",{className:"h-3 w-3 md:h-4 md:w-4 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center transition-transform transform hover:scale-110",children:l.jsx(Wm,{className:"h-2 w-2 md:h-3 md:w-3 fill-white/60 stroke-white/50"})})}),l.jsx(zo,{sideOffset:10,side:"right",className:"transition-opacity duration-300",children:"Администратор"})]}):null,O.isBanned&&l.jsx("div",{className:"tooltip","data-tip":"Пользователь заблокирован",children:l.jsx(Yd,{className:"w-3 h-3 text-red-500"})})]})}),l.jsx("p",{className:"mt-1 text-sm md:text-base",children:O.content}),l.jsxs("div",{className:"flex flex-wrap items-center gap-1 md:gap-2 mt-2",children:[l.jsxs(de,{variant:n&&O.likedBy.includes(n.uid)?"default":"outline",size:"sm",className:"gap-1 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>U(D.id,O.id),disabled:f[`${D.id}-${O.id}`]||g[`${D.id}-${O.id}`],children:[l.jsx(Ow,{className:"w-3 h-3 md:w-4 md:h-4"}),O.likes]}),l.jsxs(de,{variant:n&&O.dislikedBy.includes(n.uid)?"default":"outline",size:"sm",className:"gap-1 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>Y(D.id,O.id),disabled:f[`${D.id}-${O.id}`]||g[`${D.id}-${O.id}`],children:[l.jsx(Mw,{className:"w-3 h-3 md:w-4 md:h-4"}),O.dislikes]}),n&&(O.userId===n.uid||n.role===ot.ADMIN)&&l.jsxs(de,{variant:"outline",size:"sm",className:"gap-1 text-red-500 hover:text-red-700 h-7 md:h-8 px-2 md:px-3 text-xs md:text-sm",onClick:()=>te(D.id,O.id),disabled:_[`${D.id}-${O.id}`],children:[l.jsx(Za,{className:"w-3 h-3 md:w-4 md:h-4"}),_[`${D.id}-${O.id}`]?l.jsx(Wn,{className:"w-4 h-4 animate-spin"}):"Удалить"]})]})]})]},O.id))})]},D.id))}),N>1&&l.jsx(UE,{className:"mt-4",children:s?l.jsxs(hh,{className:"gap-1",children:[l.jsx(qt,{children:l.jsx(Jn,{href:"#",onClick:D=>{D.preventDefault(),R(P-1)},"aria-disabled":P===1,className:le("px-2",P===1?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"sm"})),"aria-label":"Предыдущая страница",children:l.jsx(Uc,{className:"h-4 w-4"})})}),l.jsx(qt,{children:l.jsxs("span",{className:"text-xs p-2",children:[P," из ",N]})}),l.jsx(qt,{children:l.jsx(Jn,{href:"#",onClick:D=>{D.preventDefault(),R(P+1)},"aria-disabled":P===N,className:le("px-2",P===N?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"sm"})),"aria-label":"Следующая страница",children:l.jsx(Xa,{className:"h-4 w-4"})})})]}):l.jsxs(hh,{className:"gap-3",children:[l.jsx(qt,{children:l.jsx(Jn,{href:"#",onClick:D=>{D.preventDefault(),R(P-1)},"aria-disabled":P===1,className:le("px-3 py-2",P===1?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"default"})),"aria-label":"Предыдущая страница",children:l.jsx(Uc,{className:"h-5 w-5"})})}),(()=>{const D=[];D.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:O=>{O.preventDefault(),R(1)},isActive:P===1,href:"#",className:le("px-3 py-2 font-semibold",P===1?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:"1"})},1)),P>2&&D.push(l.jsx(qt,{children:l.jsx(XS,{className:"text-lg"})},"ellipsis-start"));for(let O=Math.max(2,P-1);O<=Math.min(N-1,P+1);O++)D.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:W=>{W.preventDefault(),R(O)},isActive:P===O,href:"#",className:le("px-3 py-2 font-semibold",P===O?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:O})},O));return P<N-1&&D.push(l.jsx(qt,{children:l.jsx(XS,{className:"text-lg"})},"ellipsis-end")),N>1&&D.push(l.jsx(qt,{children:l.jsx(Jn,{onClick:O=>{O.preventDefault(),R(N)},isActive:P===N,href:"#",className:le("px-3 py-2 font-semibold",P===N?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-accent"),children:N})},N)),D})(),l.jsx(qt,{children:l.jsx(Jn,{href:"#",onClick:D=>{D.preventDefault(),R(P+1)},"aria-disabled":P===N,className:le("px-3 py-2",P===N?"pointer-events-none opacity-50":"",Yr({variant:"ghost",size:"default"})),"aria-label":"Следующая страница",children:l.jsx(Xa,{className:"h-5 w-5"})})})]})})]})},tb=({title:t="Ошибка загрузки",message:e,onRetry:n,retryLabel:r="Повторить загрузку",className:s=""})=>l.jsxs("div",{className:`flex flex-col items-center justify-center p-6 space-y-4 text-center ${s}`,children:[l.jsxs(Er,{variant:"destructive",className:"max-w-md mx-auto",children:[l.jsx(Lw,{className:"h-5 w-5"}),l.jsx(dh,{children:t}),l.jsx(br,{children:e})]}),n&&l.jsxs(de,{variant:"outline",className:"flex items-center gap-2",onClick:n,children:[l.jsx(w$,{className:"h-4 w-4"}),r]})]}),EZ=()=>{const{id:t}=$_(),e=kr(),{toast:n}=jt(),{user:r}=Ot(),s=xt(),[i,o]=m.useState(null),[a,c]=m.useState([]),[u,h]=m.useState(!0),[f,p]=m.useState(null),[g,x]=m.useState(!1),[v,T]=m.useState(!1),_=m.useCallback(async()=>{if(!t){p("ID рецензии не указан"),h(!1);return}try{h(!0),p(null);const I=await BE(t),U=await hZ(t);o(I),c(U),MQ(t)}catch(I){console.error("Ошибка при загрузке рецензии:",I),p("Не удалось загрузить рецензию. Проверьте подключение к сети или повторите попытку позже.")}finally{h(!1)}},[t]);if(m.useEffect(()=>{const I=async()=>{if(r&&t)try{await pH(r.uid,t)}catch(U){console.error("Ошибка при обновлении статистики прочитанных рецензий:",U)}};_(),I()},[t,r,_]),u)return l.jsx(ol,{});if(f||!i)return l.jsx(tb,{message:f||"Рецензия не найдена",onRetry:_});const y=r&&r.uid===i.authorId,b=r&&r.role===ot.ADMIN,C=b||y,P=b||y,L=r&&r.isBanned===!0;if(!(i.status===Je.APPROVED||y||b))return l.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[l.jsxs(Er,{variant:i.status===Je.PENDING?"default":"destructive",className:"mb-4",children:[l.jsx(Lw,{className:"h-4 w-4"}),l.jsx(dh,{children:i.status===Je.PENDING?"Рецензия на модерации":"Рецензия отклонена"}),l.jsx(br,{children:i.status===Je.PENDING?"Ваша рецензия ожидает одобрения модератором и пока не видна другим пользователям.":"Ваша рецензия была отклонена модератором и не видна другим пользователям."})]}),l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx(de,{variant:"outline",onClick:()=>e("/reviews"),children:"Вернуться к списку рецензий"})})]});const E=async I=>{if(L){n({title:"Ошибка",description:"Вы не можете редактировать рецензии, так как ваш аккаунт заблокирован",variant:"destructive"});return}try{await IQ(i.id,{reviewText:I}),o(U=>U?{...U,content:I}:null),n({title:"Успешно",description:"Рецензия успешно обновлена"})}catch{n({title:"Ошибка",description:"Не удалось обновить рецензию",variant:"destructive"})}},S=async()=>{try{await RQ(i.id),n({title:"Успешно",description:"Рецензия успешно удалена"}),e("/reviews")}catch{n({title:"Ошибка",description:"Не удалось удалить рецензию",variant:"destructive"})}},R=async()=>{if(!r){n({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить лайки",variant:"destructive"});return}if(g||v)return;x(!0);const I=i.likedBy.includes(r.uid),U=i.dislikedBy.includes(r.uid);o(Y=>Y&&{...Y,likes:I?Y.likes-1:Y.likes+1,likedBy:I?Y.likedBy.filter(F=>F!==r.uid):[...Y.likedBy,r.uid],dislikes:U?Y.dislikes-1:Y.dislikes,dislikedBy:U?Y.dislikedBy.filter(F=>F!==r.uid):Y.dislikedBy});try{const Y=await AQ(i.id,r.uid);o(Y)}catch{o(F=>F&&{...F,likes:I?F.likes+1:F.likes-1,likedBy:I?[...F.likedBy,r.uid]:F.likedBy.filter(te=>te!==r.uid),dislikes:U?F.dislikes+1:F.dislikes,dislikedBy:U?[...F.dislikedBy,r.uid]:F.dislikedBy}),n({title:"Ошибка",description:"Не удалось поставить лайк",variant:"destructive"})}finally{x(!1)}},M=async()=>{if(!r){n({title:"Ошибка",description:"Войдите в аккаунт, чтобы ставить дизлайки",variant:"destructive"});return}if(g||v)return;T(!0);const I=i.likedBy.includes(r.uid),U=i.dislikedBy.includes(r.uid);o(Y=>Y&&{...Y,dislikes:U?Y.dislikes-1:Y.dislikes+1,dislikedBy:U?Y.dislikedBy.filter(F=>F!==r.uid):[...Y.dislikedBy,r.uid],likes:I?Y.likes-1:Y.likes,likedBy:I?Y.likedBy.filter(F=>F!==r.uid):Y.likedBy});try{const Y=await PQ(i.id,r.uid);o(Y)}catch{o(F=>F&&{...F,dislikes:U?F.dislikes+1:F.dislikes-1,dislikedBy:U?[...F.dislikedBy,r.uid]:F.dislikedBy.filter(te=>te!==r.uid),likes:I?F.likes+1:F.likes,likedBy:I?[...F.likedBy,r.uid]:F.likedBy}),n({title:"Ошибка",description:"Не удалось поставить дизлайк",variant:"destructive"})}finally{T(!1)}},A=async I=>{if(!r){n({title:"Ошибка",description:"Войдите в аккаунт, чтобы оставлять комментарии",variant:"destructive"});return}try{const U=await fZ(i.id,r.uid,r.displayName||"Аноним",I);c(Y=>[...Y,U]),n({title:"Успешно",description:"Комментарий добавлен"})}catch{n({title:"Ошибка",description:"Не удалось добавить комментарий",variant:"destructive"})}};return l.jsxs("div",{className:`${s?"px-2":"max-w-4xl"} mx-auto`,children:[i.status!==Je.APPROVED&&l.jsxs(Er,{variant:i.status===Je.PENDING?"default":"destructive",className:"mb-4",children:[l.jsx(Lw,{className:"h-4 w-4"}),l.jsx(dh,{children:i.status===Je.PENDING?"Рецензия на модерации":"Рецензия отклонена"}),l.jsx(br,{children:i.status===Je.PENDING?"Ваша рецензия ожидает одобрения модератором и пока не видна другим пользователям.":"Ваша рецензия была отклонена модератором и не видна другим пользователям."})]}),l.jsx(mt,{className:`mb-8 ${s?"p-0 border-0 shadow-none":""}`,children:l.jsxs("div",{className:s?"p-3":"p-6",children:[l.jsx(YX,{album:i.album,artist:i.artist,type:i.type,rating:i.rating,coverUrl:i.customCoverUrl||i.coverUrl,views:i.views}),l.jsxs(kt,{to:`/profile/${i.author}`,className:`inline-block ${s?"mb-3 text-sm":"mb-6"} text-primary hover:underline`,children:["Автор: ",i.author]}),l.jsx(dZ,{content:i.content,yandexMusicId:i.yandexMusicId,likes:i.likes,dislikes:i.dislikes,views:i.views,isOwner:y,isBanned:L,reviewId:i.id,title:i.album,artist:i.artist,onEdit:C?E:void 0,onDelete:P?S:void 0,onLike:R,onDislike:M,hasLiked:r?i.likedBy.includes(r.uid):!1,hasDisliked:r?i.dislikedBy.includes(r.uid):!1,isLiking:g,isDisliking:v}),l.jsx("div",{className:s?"mt-6":"mt-12",children:l.jsx(_Z,{comments:a,onAddComment:A})})]})})]})},aL=({previewUrls:t,onRemove:e})=>{const n=xt();return t.length===0?null:l.jsxs("div",{className:"mt-4",children:[l.jsx("h3",{className:"text-sm font-medium mb-2",children:"Предпросмотр изображений:"}),l.jsx("div",{className:`grid gap-4 ${n?"grid-cols-1":"grid-cols-2 sm:grid-cols-3"}`,children:t.map((r,s)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:r,alt:`Preview ${s+1}`,className:`w-full rounded-md border border-border ${n?"h-auto max-h-48 object-contain":"h-32 object-cover"}`}),l.jsx(de,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6 opacity-80 hover:opacity-100",onClick:()=>e(r),children:l.jsx(ti,{className:"h-4 w-4"})})]},s))})]})},bZ=({onSubmit:t,isLoading:e,previewUrls:n,setPreviewUrls:r,selectedFiles:s,setSelectedFiles:i})=>{const{register:o,handleSubmit:a,formState:{errors:c}}=Nl(),{toast:u}=jt(),h=xt(),f=g=>{const x=g.target.files;if(!x)return;if(s.length+x.length>4){u({title:"Ошибка",description:"Можно загрузить максимум 4 изображения",variant:"destructive"});return}const v=["image/jpeg","image/jpg","image/png"];if(Array.from(x).filter(b=>!v.includes(b.type)).length>0){u({title:"Ошибка",description:"Поддерживаются только изображения формата JPEG или PNG",variant:"destructive"});return}const _=Array.from(x);i(b=>[...b,..._]);const y=_.map(b=>URL.createObjectURL(b));r(b=>[...b,...y])},p=g=>{const x=n.indexOf(g);x>-1&&(r(v=>v.filter((T,_)=>_!==x)),i(v=>v.filter((T,_)=>_!==x)),URL.revokeObjectURL(g))};return l.jsxs("form",{onSubmit:a(t),className:`space-y-6 ${h?"px-2":""}`,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Заголовок"}),l.jsx(yt,{...o("title",{required:"Заголовок обязателен"}),placeholder:"Введите заголовок новости",className:c.title?"border-red-500":""}),c.title&&l.jsx("p",{className:"text-sm text-red-500",children:c.title.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Текст новости"}),l.jsx("textarea",{...o("text",{required:"Текст новости обязателен"}),className:`min-h-[${h?"150":"200"}px] w-full rounded-md border ${c.text?"border-red-500":"border-input"} bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`,placeholder:"Введите текст новости..."}),c.text&&l.jsx("p",{className:"text-sm text-red-500",children:c.text.message})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Изображения (максимум 4, только JPEG/PNG)"}),l.jsx(yt,{type:"file",accept:"image/jpeg,image/jpg,image/png",multiple:!0,max:4,onChange:f,className:`file-input ${h?"text-xs":""}`}),l.jsx("p",{className:`text-xs text-muted-foreground ${h?"mt-1":""}`,children:"Добавьте до 4 изображений для иллюстрации новости"})]}),l.jsx(aL,{previewUrls:n,onRemove:p}),l.jsx(de,{type:"submit",disabled:e,className:"w-full",children:e?l.jsxs(l.Fragment,{children:[l.jsx(Wn,{className:"mr-2 h-4 w-4 animate-spin"}),"Публикация..."]}):"Опубликовать новость"})]})},TZ=t=>{const e=/jpeg|jpg|png/,n=e.test(t.name.toLowerCase().split(".").pop()),r=e.test(t.type);return n&&r},kZ=async t=>{try{return(await Dg(In(xe,"news"),{...t,createdAt:new Date().toISOString()})).id}catch{throw new Error("Не удалось создать новость в Firestore")}},lL=async t=>{try{if(t.filter(i=>!TZ(i)).length>0)throw new Error("Все файлы должны быть в формате JPEG или PNG");const n=new FormData;t.forEach(i=>n.append("images",i));const r=await fetch(`${pn}/upload-news`,{method:"POST",body:n});if(!r.ok){const i=await r.json();throw new Error(i.error||"Не удалось загрузить изображения")}return(await r.json()).imageUrls}catch(e){throw e}},Py=async(t=1,e=5)=>{try{const r=(await Hn(In(xe,"news"))).docs.map(a=>({id:a.id,...a.data()}));r.sort((a,c)=>new Date(c.createdAt).getTime()-new Date(a.createdAt).getTime());const s=(t-1)*e,i=s+e;return{news:r.slice(s,i),total:r.length}}catch{throw new Error("Не удалось загрузить новости")}},SZ=async(t,e,n,r,s=[])=>{try{let i=r.filter(a=>!s.includes(a));if(n.length>0){const a=await lL(n);i=[...i,...a]}if(s.length>0){const a=await fetch(`${pn}/delete-news`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrls:s})});if(!a.ok){const c=await a.json();throw new Error(c.error||"Не удалось удалить изображения")}}const o=Re(xe,"news",t);return await Zt(o,{...e,imageUrls:i}),i}catch(i){throw i}},NZ=async(t,e)=>{try{if(e.length>0){const r=await fetch(`${pn}/delete-news`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrls:e})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Не удалось удалить изображения")}}const n=Re(xe,"news",t);await Q0(n)}catch(n){throw n}},CZ=async t=>{try{const e=Re(xe,"news",t),n=await He(e);if(!n.exists())throw new Error("Новость не найдена");return{id:n.id,...n.data()}}catch(e){throw console.error("Ошибка при получении новости:",e),new Error("Не удалось загрузить новость")}},IZ=()=>{const t=kr(),{toast:e}=jt(),{user:n}=Ot(),[r,s]=m.useState(!1),[i,o]=m.useState([]),[a,c]=m.useState([]),u=xt(),h=async f=>{if(!n){e({title:"Ошибка",description:"Для создания новости необходимо авторизоваться",variant:"destructive"}),t("/login");return}if(!n.role||n.role!==ot.ADMIN){e({title:"Ошибка",description:"Только администраторы могут создавать новости",variant:"destructive"});return}s(!0);try{let p=[];a.length>0&&(p=await lL(a));const g={title:f.title,text:f.text,imageUrls:p,authorId:n.uid};await kZ(g),e({title:"Успех",description:"Новость успешно опубликована"}),t("/news")}catch(p){e({title:"Ошибка",description:p.message||"Не удалось опубликовать новость",variant:"destructive"})}finally{s(!1)}};return l.jsxs("div",{className:u?"px-2 py-4":"max-w-4xl mx-auto py-6",children:[l.jsx("h1",{className:`font-bold mb-6 ${u?"text-xl text-center":"text-2xl"}`,children:"Создание новости"}),l.jsx(bZ,{onSubmit:h,isLoading:r,previewUrls:i,setPreviewUrls:o,selectedFiles:a,setSelectedFiles:c})]})},RZ=async t=>{try{return(await CQ(t)).filter(r=>r.status===Je.APPROVED||r.status===Je.REJECTED)}catch(e){return console.error("Ошибка при получении рецензий со статусом:",e),[]}},ZS=30*60*1e3,cL=m.createContext(void 0),AZ=({children:t})=>{const[e,n]=m.useState({}),r=m.useCallback(a=>{var h,f,p;const c=Date.now(),u=e[a];return u&&!u.loading&&c-u.timestamp<ZS?{author:u.data,loading:!1,error:u.error}:((!u||c-u.timestamp>=ZS)&&(n(g=>{var x,v;return{...g,[a]:{data:((x=g[a])==null?void 0:x.data)||null,timestamp:((v=g[a])==null?void 0:v.timestamp)||0,loading:!0,error:null}}}),(async()=>{try{const g=await gc(a),x=g?{uid:a,username:g.username||"Неизвестный пользователь",avatarUrl:g.avatarUrl,role:g.role,isBanned:g.isBanned||!1,emailVerified:g.emailVerified,email:g.email}:null;n(v=>({...v,[a]:{data:x,timestamp:Date.now(),loading:!1,error:null}}))}catch(g){n(x=>({...x,[a]:{data:null,timestamp:Date.now(),loading:!1,error:g instanceof Error?g.message:"Ошибка при загрузке данных автора"}}))}})()),{author:((h=e[a])==null?void 0:h.data)||null,loading:((f=e[a])==null?void 0:f.loading)||!0,error:((p=e[a])==null?void 0:p.error)||null})},[e]),s=m.useCallback(a=>{n(c=>{const u={...c};return delete u[a],u})},[]),i=m.useCallback(()=>{n({})},[]),o={getAuthor:r,clearAuthorCache:s,clearAllCache:i};return l.jsx(cL.Provider,{value:o,children:t})},uL=()=>{const t=m.useContext(cL);if(t===void 0)throw new Error("useAuthor must be used within an AuthorProvider");return t};function Rs(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function pl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const dL=6048e5,PZ=864e5;let jZ={};function rv(){return jZ}function gl(t,e){var a,c,u,h;const n=rv(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=Rs(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Up(t){return gl(t,{weekStartsOn:1})}function hL(t){const e=Rs(t),n=e.getFullYear(),r=pl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Up(r),i=pl(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Up(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function JS(t){const e=Rs(t);return e.setHours(0,0,0,0),e}function eN(t){const e=Rs(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function DZ(t,e){const n=JS(t),r=JS(e),s=+n-eN(n),i=+r-eN(r);return Math.round((s-i)/PZ)}function MZ(t){const e=hL(t),n=pl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Up(n)}function OZ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function LZ(t){if(!OZ(t)&&typeof t!="number")return!1;const e=Rs(t);return!isNaN(Number(e))}function VZ(t){const e=Rs(t),n=pl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const FZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UZ=(t,e,n)=>{let r;const s=FZ[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function bc(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $Z={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WZ={date:bc({formats:$Z,defaultWidth:"full"}),time:bc({formats:BZ,defaultWidth:"full"}),dateTime:bc({formats:zZ,defaultWidth:"full"})},HZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qZ=(t,e,n,r)=>HZ[t];function $s(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const GZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},JZ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},eJ={ordinalNumber:JZ,era:$s({values:GZ,defaultWidth:"wide"}),quarter:$s({values:KZ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$s({values:QZ,defaultWidth:"wide"}),day:$s({values:YZ,defaultWidth:"wide"}),dayPeriod:$s({values:XZ,defaultWidth:"wide",formattingValues:ZZ,defaultFormattingWidth:"wide"})};function Bs(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?nJ(a,f=>f.test(o)):tJ(a,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function tJ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nJ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function fL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const rJ=/^(\d+)(th|st|nd|rd)?/i,sJ=/\d+/i,iJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oJ={any:[/^b/i,/^(a|c)/i]},aJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lJ={any:[/1/i,/2/i,/3/i,/4/i]},cJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pJ={ordinalNumber:fL({matchPattern:rJ,parsePattern:sJ,valueCallback:t=>parseInt(t,10)}),era:Bs({matchPatterns:iJ,defaultMatchWidth:"wide",parsePatterns:oJ,defaultParseWidth:"any"}),quarter:Bs({matchPatterns:aJ,defaultMatchWidth:"wide",parsePatterns:lJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bs({matchPatterns:cJ,defaultMatchWidth:"wide",parsePatterns:uJ,defaultParseWidth:"any"}),day:Bs({matchPatterns:dJ,defaultMatchWidth:"wide",parsePatterns:hJ,defaultParseWidth:"any"}),dayPeriod:Bs({matchPatterns:fJ,defaultMatchWidth:"any",parsePatterns:mJ,defaultParseWidth:"any"})},gJ={code:"en-US",formatDistance:UZ,formatLong:WZ,formatRelative:qZ,localize:eJ,match:pJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vJ(t){const e=Rs(t);return DZ(e,VZ(e))+1}function yJ(t){const e=Rs(t),n=+Up(e)-+MZ(e);return Math.round(n/dL)+1}function mL(t,e){var h,f,p,g;const n=Rs(t),r=n.getFullYear(),s=rv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=pl(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=gl(o,e),c=pl(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=gl(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function wJ(t,e){var a,c,u,h;const n=rv(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=mL(t,e),i=pl(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),gl(i,e)}function xJ(t,e){const n=Rs(t),r=+gl(n,e)-+wJ(n,e);return Math.round(r/dL)+1}function gt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const oo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return gt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):gt(n+1,2)},d(t,e){return gt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return gt(t.getHours()%12||12,e.length)},H(t,e){return gt(t.getHours(),e.length)},m(t,e){return gt(t.getMinutes(),e.length)},s(t,e){return gt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return gt(s,e.length)}},Fl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tN={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return oo.y(t,e)},Y:function(t,e,n,r){const s=mL(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return gt(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):gt(i,e.length)},R:function(t,e){const n=hL(t);return gt(n,e.length)},u:function(t,e){const n=t.getFullYear();return gt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return gt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return oo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=xJ(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):gt(s,e.length)},I:function(t,e,n){const r=yJ(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):gt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):oo.d(t,e)},D:function(t,e,n){const r=vJ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return gt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return gt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return gt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Fl.noon:r===0?s=Fl.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Fl.evening:r>=12?s=Fl.afternoon:r>=4?s=Fl.morning:s=Fl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return oo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):oo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):oo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):oo.s(t,e)},S:function(t,e){return oo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return rN(r);case"XXXX":case"XX":return Ca(r);case"XXXXX":case"XXX":default:return Ca(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return rN(r);case"xxxx":case"xx":return Ca(r);case"xxxxx":case"xxx":default:return Ca(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nN(r,":");case"OOOO":default:return"GMT"+Ca(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nN(r,":");case"zzzz":default:return"GMT"+Ca(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return gt(r,e.length)},T:function(t,e,n){const r=t.getTime();return gt(r,e.length)}};function nN(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+gt(i,2)}function rN(t,e){return t%60===0?(t>0?"-":"+")+gt(Math.abs(t)/60,2):Ca(t,e)}function Ca(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=gt(Math.trunc(r/60),2),i=gt(r%60,2);return n+s+e+i}const sN=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pL=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_J=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return sN(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",sN(r,e)).replace("{{time}}",pL(s,e))},EJ={p:pL,P:_J},bJ=/^D+$/,TJ=/^Y+$/,kJ=["D","DD","YY","YYYY"];function SJ(t){return bJ.test(t)}function NJ(t){return TJ.test(t)}function CJ(t,e,n){const r=IJ(t,e,n);if(console.warn(r),kJ.includes(t))throw new RangeError(r)}function IJ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PJ=/^'([^]*?)'?$/,jJ=/''/g,DJ=/[a-zA-Z]/;function nb(t,e,n){var h,f,p,g,x,v,T,_;const r=rv(),s=(n==null?void 0:n.locale)??r.locale??gJ,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((_=(T=r.locale)==null?void 0:T.options)==null?void 0:_.weekStartsOn)??0,a=Rs(t);if(!LZ(a))throw new RangeError("Invalid time value");let c=e.match(AJ).map(y=>{const b=y[0];if(b==="p"||b==="P"){const C=EJ[b];return C(y,s.formatLong)}return y}).join("").match(RJ).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:MJ(y)};if(tN[b])return{isToken:!0,value:y};if(b.match(DJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&NJ(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&SJ(b))&&CJ(b,e,String(t));const C=tN[b[0]];return C(a,b,s.localize,u)}).join("")}function MJ(t){const e=t.match(PJ);return e?e[1].replace(jJ,"'"):t}function iN(t,e,n){const r=gl(t,n),s=gl(e,n);return+r==+s}function qu(t,e){if(t.one!==void 0&&e===1)return t.one;const n=e%10,r=e%100;return n===1&&r!==11?t.singularNominative.replace("{{count}}",String(e)):n>=2&&n<=4&&(r<10||r>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function Kn(t){return(e,n)=>n!=null&&n.addSuffix?n.comparison&&n.comparison>0?t.future?qu(t.future,e):"через "+qu(t.regular,e):t.past?qu(t.past,e):qu(t.regular,e)+" назад":qu(t.regular,e)}const OJ={lessThanXSeconds:Kn({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Kn({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(t,e)=>e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:Kn({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Kn({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Kn({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Kn({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Kn({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Kn({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Kn({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Kn({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Kn({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Kn({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Kn({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Kn({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Kn({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},LJ=(t,e,n)=>OJ[t](e,n),VJ={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},FJ={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},UJ={any:"{{date}}, {{time}}"},$J={date:bc({formats:VJ,defaultWidth:"full"}),time:bc({formats:FJ,defaultWidth:"full"}),dateTime:bc({formats:UJ,defaultWidth:"any"})},rb=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function BJ(t){const e=rb[t];switch(t){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}function oN(t){const e=rb[t];return t===2?"'во "+e+" в' p":"'в "+e+" в' p"}function zJ(t){const e=rb[t];switch(t){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}const WJ={lastWeek:(t,e,n)=>{const r=t.getDay();return iN(t,e,n)?oN(r):BJ(r)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(t,e,n)=>{const r=t.getDay();return iN(t,e,n)?oN(r):zJ(r)},other:"P"},HJ=(t,e,n,r)=>{const s=WJ[t];return typeof s=="function"?s(e,n,r):s},qJ={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},GJ={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},KJ={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},QJ={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},YJ={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},XJ={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},ZJ={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},JJ=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;let s;return r==="date"?s="-е":r==="week"||r==="minute"||r==="second"?s="-я":s="-й",n+s},eee={ordinalNumber:JJ,era:$s({values:qJ,defaultWidth:"wide"}),quarter:$s({values:GJ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$s({values:KJ,defaultWidth:"wide",formattingValues:QJ,defaultFormattingWidth:"wide"}),day:$s({values:YJ,defaultWidth:"wide"}),dayPeriod:$s({values:XJ,defaultWidth:"any",formattingValues:ZJ,defaultFormattingWidth:"wide"})},tee=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,nee=/\d+/i,ree={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},see={any:[/^д/i,/^н/i]},iee={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},oee={any:[/1/i,/2/i,/3/i,/4/i]},aee={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},lee={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},cee={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},uee={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},dee={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},hee={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},fee={ordinalNumber:fL({matchPattern:tee,parsePattern:nee,valueCallback:t=>parseInt(t,10)}),era:Bs({matchPatterns:ree,defaultMatchWidth:"wide",parsePatterns:see,defaultParseWidth:"any"}),quarter:Bs({matchPatterns:iee,defaultMatchWidth:"wide",parsePatterns:oee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bs({matchPatterns:aee,defaultMatchWidth:"wide",parsePatterns:lee,defaultParseWidth:"any"}),day:Bs({matchPatterns:cee,defaultMatchWidth:"wide",parsePatterns:uee,defaultParseWidth:"any"}),dayPeriod:Bs({matchPatterns:dee,defaultMatchWidth:"wide",parsePatterns:hee,defaultParseWidth:"any"})},sb={code:"ru",formatDistance:LJ,formatLong:$J,formatRelative:HJ,localize:eee,match:fee,options:{weekStartsOn:1,firstWeekContainsDate:1}},Ia=m.memo(({userId:t,date:e})=>{const{getAuthor:n}=uL(),{author:r,loading:s}=n(t),i=(r==null?void 0:r.username)||"Администратор",o=(r==null?void 0:r.username)||null,a=m.useMemo(()=>nb(new Date(e),"d MMMM yyyy",{locale:sb}),[e]);return l.jsxs("p",{className:"text-sm text-muted-foreground",children:[a," •",o?l.jsx(kt,{to:`/profile/${o}`,className:"ml-1 text-primary hover:underline",children:i}):l.jsx("span",{className:"ml-1",children:i})]})});Ia.displayName="NewsAuthor";const ba=["9R5RVJRYPzYeRqFMVVK0jNPPmyF3","TqYqmDEJbXRT6rTZVobcw9VZRFO2","YP5QTwc1T6NJ09bkK0R0aqM1VEH3"],mee=()=>{const[t]=m.useState(new Date().toISOString()),{clearAllCache:e,clearAuthorCache:n}=uL();return l.jsxs("div",{className:"container mx-auto p-6",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Тест кеширования данных авторов"}),l.jsxs("div",{className:"flex space-x-4 mb-6",children:[l.jsx(de,{variant:"outline",onClick:()=>e(),children:"Очистить весь кеш"}),ba.map(r=>l.jsxs(de,{variant:"outline",onClick:()=>n(r),children:["Очистить кеш автора ",r.substring(0,5)]},r))]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 1"}),l.jsx(Ia,{userId:ba[0],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость написана автором 1. Данные автора будут загружены из базы данных."})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 2"}),l.jsx(Ia,{userId:ba[1],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость написана автором 2. Данные автора будут загружены из базы данных."})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 3"}),l.jsx(Ia,{userId:ba[0],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость тоже написана автором 1. Данные автора будут загружены из кеша, а не из базы данных."})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 4"}),l.jsx(Ia,{userId:ba[2],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость написана автором 3. Данные автора будут загружены из базы данных."})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 5"}),l.jsx(Ia,{userId:ba[1],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость тоже написана автором 2. Данные автора будут загружены из кеша, а не из базы данных."})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{children:"Новость 6"}),l.jsx(Ia,{userId:ba[2],date:t})]}),l.jsx(vt,{children:l.jsx("p",{children:"Эта новость тоже написана автором 3. Данные автора будут загружены из кеша, а не из базы данных."})})]})]})]})},pee=({search:t,setSearch:e,releaseType:n,setReleaseType:r,rating:s,setRating:i,sortOrder:o,setSortOrder:a})=>{const[c,u]=ee.useState(t),h=xt(),f=g=>{u(g.target.value)},p=g=>{g.key==="Enter"&&e(c)};return l.jsxs("div",{className:`space-y-4 ${h?"mb-4":"mb-8"}`,children:[l.jsx(yt,{placeholder:"Поиск по исполнителю или альбому... (нажмите Enter)",value:c,onChange:f,onKeyDown:p,className:"max-w-full"}),l.jsxs("div",{className:`grid ${h?"grid-cols-1 gap-3":"grid-cols-1 md:grid-cols-3 gap-6"}`,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:`font-medium ${h?"text-sm":""}`,children:"Тип релиза"}),l.jsxs(Cd,{value:n,onValueChange:r,children:[l.jsx(xc,{className:h?"h-8 text-sm":"",children:l.jsx(Id,{placeholder:"Выберите тип релиза"})}),l.jsxs(_c,{children:[l.jsx(Ir,{value:"all",children:"Все"}),l.jsx(Ir,{value:"album",children:"Альбом"}),l.jsx(Ir,{value:"single",children:"Сингл"}),l.jsx(Ir,{value:"ep",children:"EP"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:`font-medium ${h?"text-sm":""}`,children:"Оценка"}),l.jsxs(Cd,{value:s,onValueChange:i,children:[l.jsx(xc,{className:h?"h-8 text-sm":"",children:l.jsx(Id,{placeholder:"Выберите оценку"})}),l.jsxs(_c,{children:[l.jsx(Ir,{value:"all",children:"Все"}),Object.keys(aa).map(g=>l.jsx(Ir,{value:g,className:ni(g,"text"),children:aa[g]},g))]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:`font-medium ${h?"text-sm":""}`,children:"Сортировка"}),l.jsxs(Cd,{value:o,onValueChange:g=>a(g),children:[l.jsx(xc,{className:h?"h-8 text-sm":"",children:l.jsx(Id,{placeholder:"Выберите порядок сортировки"})}),l.jsxs(_c,{children:[l.jsx(Ir,{value:"newest",children:"Сначала новые"}),l.jsx(Ir,{value:"oldest",children:"Сначала старые"})]})]})]})]})]})},gee=ee.memo(pee),vee=({icon:t,title:e,description:n,actionLabel:r,onAction:s,className:i=""})=>l.jsxs("div",{className:`bg-muted/20 rounded-lg p-8 text-center ${i}`,children:[t&&l.jsx(t,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/60"}),l.jsx("p",{className:"text-lg font-medium text-foreground mb-2",children:e}),n&&l.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}),r&&s&&l.jsx(de,{variant:"outline",onClick:s,className:"mt-2",children:r})]}),Uf=6,aN=(t,e)=>t?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")?t:t.startsWith("/")?`${pn}${t}`:e:e,yee=t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString(),wee=({isAdmin:t=!1,search:e,releaseType:n,rating:r,sortOrder:s})=>{const[i,o]=m.useState(1),[a,c]=m.useState([]),[u,h]=m.useState(0),[f,p]=m.useState(!0),[g,x]=m.useState(!1),[v,T]=m.useState(null),_=xt(),{user:y}=Ot(),b=m.useRef(null),C=m.useRef(null),P=m.useRef(!1);m.useLayoutEffect(()=>{if(!_)return;const A=C.current;if(A&&(b.current&&b.current.disconnect(),!(a.length>=u||g)))return b.current=new IntersectionObserver(I=>{I[0].isIntersecting&&!P.current&&N()},{threshold:.5}),b.current.observe(A),()=>{b.current&&b.current.disconnect()}},[a,u,g,_]),m.useEffect(()=>{o(1),c([])},[e,n,r,s]);const L=m.useCallback(async(A=1,I=!1)=>{try{A===1?p(!0):x(!0),P.current=!0,T(null);let U;t?U=await jQ(Je.APPROVED,A,Uf,e,n,r,s):U=await DQ(Je.APPROVED,A,Uf,e,n,r,s,y==null?void 0:y.uid,(y==null?void 0:y.role)===ot.ADMIN),c(I?Y=>[...Y,...U.reviews]:U.reviews),h(U.total)}catch(U){console.error("Ошибка при загрузке рецензий:",U),T(U.message||"Не удалось загрузить рецензии. Проверьте подключение к сети и повторите попытку.")}finally{p(!1),x(!1),P.current=!1}},[t,e,n,r,s,y]),N=m.useCallback(()=>{if(a.length>=u||g)return;const A=Math.ceil(a.length/Uf)+1;L(A,!0)},[a.length,u,g,L]);m.useEffect(()=>{L(i)},[L,i]);const E=Math.ceil(u/Uf),S=(A,I)=>{I.button===1?(window.open(`/review/${A}`,"_blank"),I.preventDefault()):I.button===0&&(window.location.href=`/review/${A}`)},R=A=>{const I=A.target;console.log(`Ошибка загрузки изображения: ${I.src}`),I.src="/placeholder.svg"},M=A=>{A!==i&&(o(A),window.scrollTo({top:0,behavior:"smooth"}))};return f&&a.length===0?l.jsx(ol,{}):v&&a.length===0?l.jsx(tb,{message:v,onRetry:()=>L(1)}):a.length===0?l.jsx(vee,{icon:d$,title:"Рецензии не найдены",description:"В данный момент нет доступных рецензий по вашему запросу"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`grid grid-cols-1 ${!_&&"md:grid-cols-2 lg:grid-cols-3"} gap-4 mb-6`,children:a.map((A,I)=>l.jsx("div",{ref:_&&I===a.length-1?C:null,children:l.jsxs(mt,{className:`cursor-pointer hover:shadow-lg transition-shadow border-2 ${_?"mb-4":""}`,onClick:U=>S(A.id,U),onMouseDown:U=>{U.button===1&&S(A.id,U)},children:[l.jsxs(en,{className:_?"p-3":"",children:[l.jsx("div",{className:"relative",children:l.jsx("img",{src:aN(A.customCoverUrl,aN(A.coverUrl,"/placeholder.svg")),alt:`Обложка ${A.album}`,className:"w-full aspect-square object-cover rounded-md mb-4",onError:R})}),l.jsx(tn,{className:`${_?"text-lg":"text-xl"} ${ni(A.rating,"text")}`,children:A.album})]}),l.jsxs(vt,{className:_?"p-3 pt-0":"",children:[l.jsx("p",{className:`${_?"text-base":"text-lg"} text-muted-foreground`,children:A.artist}),l.jsxs("div",{className:`flex ${_?"flex-col gap-1":"justify-between items-center"}`,children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(A.createdAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[A.author&&l.jsx(kt,{to:`/profile/${A.author}`,className:"text-sm text-primary hover:underline",onClick:U=>U.stopPropagation(),children:A.author}),l.jsx("span",{className:"text-muted-foreground",children:"•"}),l.jsx("span",{className:`text-sm font-medium ${ni(A.rating,"text")}`,children:aa[A.rating]}),A.views!==void 0&&A.views>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-muted-foreground",children:"•"}),l.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[l.jsx(wR,{className:"w-3 h-3"}),yee(A.views)]})]})]})]})]})]})},A.id))}),_&&g&&l.jsx("div",{className:"flex justify-center pb-6 pt-2",children:l.jsx(x$,{className:"w-6 h-6 animate-spin text-primary"})}),_&&!g&&a.length<u&&l.jsx("div",{className:"flex justify-center pb-6 pt-2",children:l.jsx(de,{variant:"outline",onClick:N,children:"Загрузить еще"})}),!_&&l.jsx(Ii,{currentPage:i,totalPages:E,onPageChange:M,isPaginationLoading:f})]})},gL=({title:t,isAdmin:e=!1})=>{const[n,r]=m.useState(""),[s,i]=m.useState("all"),[o,a]=m.useState("all"),[c,u]=m.useState("newest");return l.jsxs("div",{className:"container mx-auto py-4 px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:t}),l.jsx(gee,{search:n,setSearch:r,releaseType:s,setReleaseType:i,rating:o,setRating:a,sortOrder:c,setSortOrder:u}),l.jsx(wee,{isAdmin:e,search:n,releaseType:s,rating:o,sortOrder:c})]})},xee=()=>l.jsx(gL,{title:"Рецензии пользователей"}),_ee=()=>l.jsx(gL,{title:"Рецензии редакции",isAdmin:!0}),Eee=t=>{const e=typeof t=="string"?new Date(t):t;return nb(e,"d MMMM yyyy, HH:mm",{locale:sb})},bee=({text:t,maxLength:e=300,disableCensorship:n=!1})=>{const[r,s]=m.useState(!1),o=xt()?150:e,a=t.length>o,c=m.useMemo(()=>K_(t,{}),[t,n]),u=r||!a?c:`${c.substring(0,o)}...`;return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"whitespace-pre-line text-sm md:text-base leading-relaxed",children:u}),a&&l.jsx(de,{variant:"link",size:"sm",className:"p-0 h-auto text-primary",onClick:()=>s(!r),children:r?"Свернуть":"Читать далее"})]})},Tee=({images:t})=>{const[e,n]=m.useState(0),[r,s]=m.useState(!1);xt();const i=c=>c.startsWith("http")?c:`${pn}${c}`,o=c=>{n(c==="prev"?u=>u>0?u-1:t.length-1:u=>u<t.length-1?u+1:0)};m.useEffect(()=>{const c=u=>{r&&(u.key==="ArrowLeft"?o("prev"):u.key==="ArrowRight"?o("next"):u.key==="Escape"&&s(!1))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[r,t.length]);const a=()=>t.length===0?null:t.length===1?l.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Изображение новости",className:"w-full h-full object-cover",loading:"lazy"})}):t.length===2?l.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map((c,u)=>l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(u),s(!0)},children:l.jsx("img",{src:i(c),alt:`Изображение ${u+1}`,className:"w-full h-full object-cover",loading:"lazy"})},u))}):t.length===3?l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[l.jsx("div",{className:"aspect-[4/5] row-span-2 rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Основное изображение",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(1),s(!0)},children:l.jsx("img",{src:i(t[1]),alt:"Дополнительное изображение 1",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(2),s(!0)},children:l.jsx("img",{src:i(t[2]),alt:"Дополнительное изображение 2",className:"w-full h-full object-cover",loading:"lazy"})})]}):t.length===4?l.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map((c,u)=>l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(u),s(!0)},children:l.jsx("img",{src:i(c),alt:`Изображение ${u+1}`,className:"w-full h-full object-cover",loading:"lazy"})},u))}):l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Изображение 1",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(1),s(!0)},children:l.jsx("img",{src:i(t[1]),alt:"Изображение 2",className:"w-full h-full object-cover",loading:"lazy"})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(2),s(!0)},children:l.jsx("img",{src:i(t[2]),alt:"Изображение 3",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(3),s(!0)},children:l.jsx("img",{src:i(t[3]),alt:"Изображение 4",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer relative",onClick:()=>{n(4),s(!0)},children:[l.jsx("img",{src:i(t[4]),alt:"Изображение 5",className:"w-full h-full object-cover",loading:"lazy"}),t.length>5&&l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:l.jsxs("span",{className:"text-white font-medium text-lg",children:["+",t.length-5]})})]})]})]});return l.jsxs("div",{className:"w-full",children:[a(),l.jsx(ai,{open:r,onOpenChange:s,children:l.jsx(Ns,{className:"p-0 max-w-screen-lg w-screen h-screen flex items-center justify-center bg-black bg-opacity-90 border-none",children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[l.jsx(de,{className:"absolute right-4 top-4 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>s(!1),children:l.jsx(ti,{className:"h-5 w-5"})}),t.length>1&&l.jsxs(l.Fragment,{children:[l.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>o("prev"),children:l.jsx(Uc,{className:"h-6 w-6"})}),l.jsx(de,{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>o("next"),children:l.jsx(Xa,{className:"h-6 w-6"})})]}),t.length>1&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 px-3 py-1 rounded-full text-white text-sm",children:[e+1," / ",t.length]}),l.jsx("img",{src:i(t[e]),alt:`Изображение ${e+1}`,className:"max-w-full max-h-[85vh] object-contain"})]})})})]})},kee=({authorId:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(!0),i=kr();m.useEffect(()=>{(async()=>{try{const c=await gc(t);c&&n({username:c.username||"Неизвестный пользователь",avatarUrl:c.avatarUrl})}catch(c){console.error("Ошибка при загрузке данных автора:",c)}finally{s(!1)}})()},[t]);const o=()=>{e!=null&&e.username&&e.username!=="Неизвестный пользователь"&&(console.log("Navigating to user profile:",e.username),i(`/profile/${e.username}`))};return r?l.jsx("span",{className:"text-sm text-muted-foreground",children:"Загрузка..."}):l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:o,title:`Перейти к профилю ${(e==null?void 0:e.username)||"пользователя"}`,children:[l.jsx(dl,{className:"h-5 w-5",children:e!=null&&e.avatarUrl?l.jsx(hl,{src:e.avatarUrl,alt:e.username}):l.jsx(fl,{children:l.jsx(rs,{className:"h-3 w-3"})})}),l.jsx("span",{className:"underline-offset-2 hover:underline",children:(e==null?void 0:e.username)||"Неизвестный пользователь"})]})},See=({news:t,isAdmin:e=!1,onEdit:n,onDelete:r})=>{const s=xt(),{user:i}=Ot(),o=m.useMemo(()=>`${window.location.origin}/news/${t.id}`,[t.id]);m.useMemo(()=>{if(!t.text)return"";const c=/(https?:\/\/[^\s]+)/g;return t.text.replace(c,'<a href="$1" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">$1</a>')},[t.text]);const a=t.hasOwnProperty("isImportant")?t.isImportant:!1;return l.jsxs(mt,{className:`shadow-sm hover:shadow-md transition-shadow ${s?"mb-4":""}`,children:[l.jsx(en,{className:s?"p-3":"",children:l.jsxs("div",{className:"flex justify-between items-start gap-4",children:[l.jsx(tn,{className:s?"text-lg":"text-xl",children:t.title}),a&&l.jsx(mE,{children:l.jsxs(za,{children:[l.jsx(Wa,{asChild:!0,children:l.jsxs(Ha,{variant:"destructive",className:"flex items-center gap-1",children:[l.jsx(Qd,{className:"h-3 w-3"}),l.jsx("span",{className:"hidden md:inline",children:"Важно"})]})}),l.jsx(zo,{children:l.jsx("p",{children:"Важная информация"})})]})})]})}),l.jsx(vt,{className:s?"p-3 pt-0":"",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(bee,{text:t.text||"",disableCensorship:i==null?void 0:i.disableCensorship}),t.imageUrls&&t.imageUrls.length>0&&l.jsx(Tee,{images:t.imageUrls})]})}),l.jsxs(t2,{className:`${s?"p-3 pt-1":"pt-1"} flex flex-col md:flex-row justify-between items-start md:items-center gap-2 md:gap-4`,children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:[t.authorId&&l.jsx(kee,{authorId:t.authorId}),t.createdAt&&l.jsx("span",{children:Eee(t.createdAt)})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(eb,{url:o,title:t.title,size:"sm",variant:"outline"}),e&&l.jsxs(l.Fragment,{children:[n&&l.jsx(de,{size:"sm",variant:"outline",onClick:()=>n(t),children:l.jsx(_R,{className:"h-4 w-4"})}),r&&l.jsx(de,{size:"sm",variant:"outline",onClick:()=>r(t.id),children:l.jsx(Za,{className:"h-4 w-4"})})]})]})]})]})},Nee=({news:t,open:e,onOpenChange:n,onSave:r})=>{const{toast:s}=jt(),[i,o]=m.useState(""),[a,c]=m.useState(""),[u,h]=m.useState([]),[f,p]=m.useState([]);m.useEffect(()=>{e&&t&&(o(t.title),c(t.text),h(t.imageUrls.map(T=>{let _=T;return T.startsWith("http")||(_=`${pn}${T}`),{url:_,isNew:!1}})),p([]))},[e,t]);const g=T=>{const _=T.target.files;if(_){const y=["image/jpeg","image/jpg","image/png"];if(Array.from(_).filter(P=>!y.includes(P.type)).length>0){s({title:"Ошибка",description:"Поддерживаются только изображения формата JPEG или PNG",variant:"destructive"});return}if(u.length+_.length>4){s({title:"Ошибка",description:"Можно загрузить максимум 4 изображения",variant:"destructive"});return}const C=Array.from(_).map(P=>({url:URL.createObjectURL(P),isNew:!0,file:P}));h(P=>[...P,...C])}},x=T=>{h(_=>{const y=_.find(b=>b.url===T);if(!y)return _;if(y.isNew&&y.url.startsWith("blob:"))URL.revokeObjectURL(y.url);else{const b=y.url.replace(pn,"");p(C=>[...C,b])}return _.filter(b=>b.url!==T)})},v=()=>{if(!i||!a){s({title:"Ошибка",description:"Пожалуйста, заполните все поля",variant:"destructive"});return}const T=u.filter(_=>_.isNew).map(_=>_.file);r(i,a,T,f),n(!1)};return l.jsx(ai,{open:e,onOpenChange:n,children:l.jsxs(Ns,{className:"sm:max-w-[425px]",children:[l.jsx(sa,{children:l.jsx(ia,{children:"Редактировать новость"})}),l.jsxs("div",{className:"grid gap-4 py-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"Заголовок"}),l.jsx(yt,{id:"title",value:i,onChange:T=>o(T.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"text",className:"text-sm font-medium",children:"Текст"}),l.jsx("textarea",{id:"text",value:a,onChange:T=>c(T.target.value),className:"min-h-[200px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Изображения (максимум 4, только JPEG/PNG)"}),l.jsx(yt,{type:"file",accept:"image/jpeg,image/jpg,image/png",multiple:!0,max:4,onChange:g,className:"file-input"})]}),l.jsx(aL,{previewUrls:u.map(T=>T.url),onRemove:x})]}),l.jsxs(ru,{children:[l.jsx(de,{variant:"outline",onClick:()=>n(!1),children:"Отмена"}),l.jsx(de,{onClick:v,children:"Сохранить"})]})]})})},$f=5,Cee=()=>{const{user:t}=Ot(),{toast:e}=jt(),n=xt(),[r,s]=m.useState([]),[i,o]=m.useState(1),[a,c]=m.useState(0),[u,h]=m.useState(null),[f,p]=m.useState(!1),[g,x]=m.useState(!0),[v,T]=m.useState(!1);m.useEffect(()=>{(async()=>{try{T(!0);const L=await Py(i,$f);s(L.news),c(L.total)}catch(L){e({title:"Ошибка",description:L.message||"Не удалось загрузить новости",variant:"destructive"})}finally{x(!1),T(!1)}})()},[e,i]);const _=P=>{h(P),p(!0)},y=async P=>{if(window.confirm("Вы уверены, что хотите удалить эту новость?"))try{const L=r.find(N=>N.id===P);if(L){await NZ(P,L.imageUrls);const N=await Py(i,$f);s(N.news),c(N.total),e({title:"Успех",description:"Новость успешно удалена"})}}catch(L){e({title:"Ошибка",description:L.message||"Не удалось удалить новость",variant:"destructive"})}},b=async(P,L,N,E)=>{if(u)try{const S={title:P,text:L},R=await SZ(u.id,S,N,u.imageUrls,E),M=await Py(i,$f);s(M.news),e({title:"Успех",description:"Новость успешно обновлена"})}catch(S){e({title:"Ошибка",description:S.message||"Не удалось обновить новость",variant:"destructive"})}},C=Math.ceil(a/$f);return g?l.jsx(ol,{}):l.jsxs("div",{className:`space-y-6 ${n?"mx-auto px-2":"max-w-4xl mx-auto"}`,children:[n&&l.jsx("h1",{className:"text-2xl font-bold mb-4 px-2 text-center",children:"Новости"}),r.length===0?l.jsx("p",{className:"text-center",children:"Новостей пока нет."}):r.map(P=>l.jsx(See,{news:P,isAdmin:(t==null?void 0:t.role)===ot.ADMIN,onEdit:_,onDelete:y},P.id)),C>1&&l.jsx(Ii,{currentPage:i,totalPages:C,onPageChange:o,isPaginationLoading:v}),u&&l.jsx(Nee,{news:u,open:f,onOpenChange:p,onSave:b})]})},Iee=t=>{const e=typeof t=="string"?new Date(t):t;return nb(e,"d MMMM yyyy, HH:mm",{locale:sb})},Ree=({images:t})=>{const[e,n]=m.useState(0),[r,s]=m.useState(!1);xt();const i=c=>c.startsWith("http")?c:`${pn}${c}`,o=c=>{n(c==="prev"?u=>u>0?u-1:t.length-1:u=>u<t.length-1?u+1:0)};m.useEffect(()=>{const c=u=>{r&&(u.key==="ArrowLeft"?o("prev"):u.key==="ArrowRight"&&o("next"))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[r,t.length]);const a=()=>t.length===0?null:t.length===1?l.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Изображение к новости",className:"w-full h-full object-cover",loading:"lazy"})}):t.length===2?l.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map((c,u)=>l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(u),s(!0)},children:l.jsx("img",{src:i(c),alt:`Изображение ${u+1}`,className:"w-full h-full object-cover",loading:"lazy"})},u))}):t.length===3?l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("div",{className:"aspect-video row-span-2 rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Основное изображение",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(1),s(!0)},children:l.jsx("img",{src:i(t[1]),alt:"Дополнительное изображение 1",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(2),s(!0)},children:l.jsx("img",{src:i(t[2]),alt:"Дополнительное изображение 2",className:"w-full h-full object-cover",loading:"lazy"})})]}):l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(0),s(!0)},children:l.jsx("img",{src:i(t[0]),alt:"Изображение 1",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(1),s(!0)},children:l.jsx("img",{src:i(t[1]),alt:"Изображение 2",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer",onClick:()=>{n(2),s(!0)},children:l.jsx("img",{src:i(t[2]),alt:"Изображение 3",className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer relative",onClick:()=>{n(3),s(!0)},children:[l.jsx("img",{src:i(t[3]),alt:"Изображение 4",className:"w-full h-full object-cover",loading:"lazy"}),t.length>4&&l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:l.jsxs("span",{className:"text-white font-medium text-lg",children:["+",t.length-4]})})]})]});return l.jsxs("div",{className:"w-full",children:[a(),l.jsx(ai,{open:r,onOpenChange:s,children:l.jsx(Ns,{className:"p-0 max-w-screen-lg w-screen h-screen flex items-center justify-center bg-black bg-opacity-90 border-none",children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[l.jsx(de,{className:"absolute right-4 top-4 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>s(!1),children:l.jsx(ti,{className:"h-5 w-5"})}),t.length>1&&l.jsxs(l.Fragment,{children:[l.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>o("prev"),children:l.jsx(Uc,{className:"h-6 w-6"})}),l.jsx(de,{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 rounded-full bg-black/40 text-white hover:bg-black/60",size:"icon",variant:"ghost",onClick:()=>o("next"),children:l.jsx(Xa,{className:"h-6 w-6"})})]}),t.length>1&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 px-3 py-1 rounded-full text-white text-sm",children:[e+1," / ",t.length]}),l.jsx("img",{src:i(t[e]),alt:`Изображение ${e+1}`,className:"max-w-full max-h-[85vh] object-contain"})]})})})]})},Aee=({authorId:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(!0),i=kr();m.useEffect(()=>{(async()=>{try{const c=await gc(t);c&&n({username:c.username||"Неизвестный пользователь",avatarUrl:c.avatarUrl})}catch(c){console.error("Ошибка при загрузке данных автора:",c)}finally{s(!1)}})()},[t]);const o=()=>{e!=null&&e.username&&e.username!=="Неизвестный пользователь"&&(console.log("Navigating to user profile:",e.username),i(`/profile/${e.username}`))};return r?l.jsx("span",{className:"text-sm text-muted-foreground",children:"Загрузка данных автора..."}):l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:o,title:`Перейти к профилю ${(e==null?void 0:e.username)||"пользователя"}`,children:[l.jsx(dl,{className:"h-8 w-8",children:e!=null&&e.avatarUrl?l.jsx(hl,{src:e.avatarUrl,alt:e.username}):l.jsx(fl,{children:l.jsx(rs,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium underline-offset-2 hover:underline",children:(e==null?void 0:e.username)||"Неизвестный пользователь"})]})},Pee=()=>{const{id:t}=$_(),[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(null),a=kr(),c=xt(),u=m.useRef(null),{user:h}=Ot(),f=window.location.href,p=m.useCallback(async()=>{if(t)try{s(!0),o(null);const v=await CZ(t);n(v)}catch(v){console.error("Ошибка при загрузке новости:",v),o(v.message||"Не удалось загрузить новость")}finally{s(!1)}},[t]);m.useEffect(()=>{p()},[p]);const g=m.useMemo(()=>e?(e.title&&e.title,K_(e.text,{disableCensorship:h==null?void 0:h.disableCensorship})):"",[e,h==null?void 0:h.disableCensorship]),x=()=>{a(-1)};return r?l.jsx(ol,{}):i||!e?l.jsx(tb,{message:i||"Новость не найдена",onRetry:p}):l.jsxs("div",{className:"container mx-auto px-4 py-6",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsxs(de,{variant:"ghost",size:"sm",onClick:x,className:"flex items-center gap-1",children:[l.jsx(lg,{className:"h-4 w-4"}),"Назад"]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(eb,{url:f,title:e.title,variant:"outline",size:"sm"})})]}),l.jsxs(mt,{children:[l.jsxs(en,{children:[l.jsx(tn,{className:`${c?"text-2xl":"text-3xl"} mb-2`,children:e.title}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between",children:[e.authorId&&l.jsx(Aee,{authorId:e.authorId}),e.createdAt&&l.jsx("span",{className:"text-sm text-muted-foreground",children:Iee(e.createdAt)})]})]}),l.jsx(vt,{children:l.jsxs("div",{ref:u,className:"space-y-6",children:[e.imageUrls&&e.imageUrls.length>0&&l.jsx(Ree,{images:e.imageUrls}),l.jsx("div",{className:"whitespace-pre-line text-base md:text-lg leading-relaxed",children:g})]})})]}),(h==null?void 0:h.role)===ot.ADMIN&&l.jsx("div",{className:"mt-6 flex justify-end gap-2",children:l.jsx(de,{variant:"outline",onClick:()=>a(`/admin/news/edit/${e.id}`),children:"Редактировать"})})]})},jee=3,Dee=6,lN=()=>{const{username:t}=$_(),e=kr(),{toast:n}=jt(),{user:r}=Ot(),[s,i]=m.useState(null),[o,a]=m.useState(!0),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState(!0),[x,v]=m.useState(!0),[T,_]=m.useState(!1),y=xt(),b=y?jee:Dee,[C,P]=m.useState([]),[L,N]=m.useState(0),[E,S]=m.useState(1),R=Math.ceil(L/b);if(m.useEffect(()=>{r&&t&&r.displayName&&r.displayName.toLowerCase()===t.toLowerCase()&&e("/profile")},[r,t,e]),m.useEffect(()=>{(async()=>{if(!t){u("Имя пользователя не указано"),a(!1);return}try{a(!0),g(!0),v(!0),_(!0),u(null);const U=await yH(t);if(!U){u("Пользователь не найден"),a(!1);return}console.log("Полные данные пользователя:",U),i(U);const Y=await vm(U.uid,Je.APPROVED,E,b);P(Y.reviews),N(Y.total),await Tj(U.uid);const F=await bj(U.uid);f({writtenReviews:Y.total,readReviews:F.readReviews})}catch(U){u(U.message||"Не удалось загрузить профиль"),n({title:"Ошибка",description:U.message||"Не удалось загрузить профиль",variant:"destructive"})}finally{a(!1),g(!1),v(!1),_(!1)}})()},[t,n,E,b]),o)return l.jsx(ol,{});if(c||!s)return l.jsx("div",{className:"text-center py-8 text-red-500",children:c||"Пользователь не найден"});if(s.isBanned)return l.jsx("div",{className:y?"px-2":"container mx-auto",children:l.jsxs(mt,{className:y?"shadow-none border-0":"",children:[l.jsx(en,{className:`flex flex-row items-center justify-between ${y?"px-3 py-3":""}`,children:l.jsxs(tn,{className:"flex items-center gap-2",children:[l.jsx(rs,{className:y?"h-5 w-5":"h-6 w-6"}),l.jsx("span",{className:y?"text-lg":"",children:"Профиль пользователя"})]})}),l.jsxs(vt,{className:y?"px-3 pt-0 pb-3":"",children:[l.jsx(Lx,{username:(s==null?void 0:s.username)||"Noname",role:s.role,avatarUrl:s.avatarUrl||null,isPublic:!0,className:"",avatarClassName:y?"h-20 w-20":"",userInfoClassName:"text-center",isBanned:!0}),l.jsxs("div",{className:"mt-6 border border-red-200 bg-red-50 rounded-lg p-4 flex flex-col items-center text-center space-y-3",children:[l.jsx(Yd,{className:"h-10 w-10 text-red-600"}),l.jsx("h3",{className:"text-xl font-medium text-red-600",children:"Аккаунт заблокирован"}),l.jsx("p",{className:"text-muted-foreground",children:"Этот пользователь был заблокирован администрацией сайта. Контент пользователя недоступен."})]})]})]})});const M=()=>l.jsx(Lx,{username:(s==null?void 0:s.username)||"Noname",role:s.role,avatarUrl:s.avatarUrl||null,isPublic:!0,className:"",avatarClassName:y?"h-20 w-20":"",userInfoClassName:"text-center",isBanned:s.isBanned||!1}),A=()=>p?l.jsx("div",{className:"text-center py-4",children:"Загрузка статистики..."}):l.jsx(KM,{writtenReviews:(h==null?void 0:h.writtenReviews)||0,readReviews:(h==null?void 0:h.readReviews)||0,className:y?"grid-cols-2 gap-2":"",itemClassName:y?"text-sm py-2":""});return l.jsx("div",{className:y?"px-2":"container mx-auto",children:l.jsxs(mt,{className:y?"shadow-none border-0":"",children:[l.jsx(en,{className:`flex flex-row items-center justify-between ${y?"px-3 py-3":""}`,children:l.jsxs(tn,{className:"flex items-center gap-2",children:[l.jsx(rs,{className:y?"h-5 w-5":"h-6 w-6"}),l.jsx("span",{className:y?"text-lg":"",children:"Профиль пользователя"})]})}),l.jsxs(vt,{className:y?"px-3 pt-0 pb-3":"",children:[M(),A(),l.jsxs("div",{className:`mt-${y?"4":"6"} space-y-${y?"2":"4"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(jw,{className:"h-5 w-5"}),l.jsx("h3",{className:y?"text-lg":"text-xl font-medium",children:"Рецензии пользователя"})]}),x?l.jsx("div",{className:"text-center py-4",children:"Загрузка рецензий..."}):C.length>0?l.jsxs(l.Fragment,{children:[l.jsx(ad,{reviews:C}),R>1&&l.jsx(Ii,{currentPage:E,totalPages:R,onPageChange:S,isPaginationLoading:T})]}):l.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"У пользователя нет опубликованных рецензий"})]})]})]})})},Mee=new h5,Ul=({children:t,adminOnly:e=!1})=>{const{user:n,loading:r}=Ot();return r?l.jsx("div",{children:"Загрузка..."}):n?e&&n.role!==ot.ADMIN?l.jsx(iT,{to:"/"}):l.jsx(l.Fragment,{children:t}):l.jsx(iT,{to:"/login"})},Oee=()=>{const{user:t}=Ot(),[e,n]=m.useState([]),[r,s]=m.useState(!1);return m.useEffect(()=>{(async()=>{if(t){s(!0);try{const o=await RZ(t.uid);n(o)}catch(o){console.error("Ошибка при получении рецензий:",o)}finally{s(!1)}}})()},[t]),l.jsx(Yq,{children:l.jsx(AZ,{children:l.jsx(m5,{client:Mee,children:l.jsx(mE,{children:l.jsx(cU,{children:l.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[l.jsx(Kq,{}),l.jsx("main",{className:"container mx-auto p-4 min-h-screen",children:l.jsxs(nU,{children:[l.jsx(sn,{path:"/",element:l.jsx(sQ,{})}),l.jsx(sn,{path:"/review/:id",element:l.jsx(EZ,{})}),l.jsx(sn,{path:"/news",element:l.jsx(Cee,{})}),l.jsx(sn,{path:"/news/:id",element:l.jsx(Pee,{})}),l.jsx(sn,{path:"/reviews",element:l.jsx(xee,{})}),l.jsx(sn,{path:"/admin-reviews",element:l.jsx(_ee,{})}),l.jsx(sn,{path:"/user/:username",element:l.jsx(lN,{})}),l.jsx(sn,{path:"/profile/:username",element:l.jsx(lN,{})}),l.jsx(sn,{path:"/test-authors",element:l.jsx(mee,{})}),l.jsx(sn,{path:"/admin/create-review",element:l.jsx(Ul,{adminOnly:!0,children:l.jsx(zX,{})})}),l.jsx(sn,{path:"/create-news",element:l.jsx(Ul,{adminOnly:!0,children:l.jsx(IZ,{})})}),l.jsx(sn,{path:"/create-review",element:l.jsx(Ul,{children:l.jsx(WX,{})})}),l.jsx(sn,{path:"/profile",element:l.jsx(Ul,{children:l.jsx(fX,{})})}),l.jsx(sn,{path:"/terms",element:l.jsx(Ul,{children:l.jsx(mX,{})})}),l.jsx(sn,{path:"/settings",element:l.jsx(Ul,{children:l.jsx(YQ,{})})}),l.jsx(sn,{path:"/login",element:l.jsx(KG,{})}),l.jsx(sn,{path:"/register",element:l.jsx(rQ,{})}),l.jsx(sn,{path:"/verify-email",element:l.jsx(qX,{})})]})}),l.jsx(h3,{}),l.jsx(W3,{})]})})})})})})};PI(document.getElementById("root")).render(l.jsx(Oee,{}));
